(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();var i1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function T8(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Hd={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pv=Symbol.for("react.element"),ZK=Symbol.for("react.portal"),YK=Symbol.for("react.fragment"),QK=Symbol.for("react.strict_mode"),KK=Symbol.for("react.profiler"),XK=Symbol.for("react.provider"),eX=Symbol.for("react.context"),tX=Symbol.for("react.forward_ref"),rX=Symbol.for("react.suspense"),iX=Symbol.for("react.memo"),nX=Symbol.for("react.lazy"),fR=Symbol.iterator;function sX(e){return e===null||typeof e!="object"?null:(e=fR&&e[fR]||e["@@iterator"],typeof e=="function"?e:null)}var M8={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I8=Object.assign,C8={};function lm(e,t,r){this.props=e,this.context=t,this.refs=C8,this.updater=r||M8}lm.prototype.isReactComponent={};lm.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};lm.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function k8(){}k8.prototype=lm.prototype;function HL(e,t,r){this.props=e,this.context=t,this.refs=C8,this.updater=r||M8}var JL=HL.prototype=new k8;JL.constructor=HL;I8(JL,lm.prototype);JL.isPureReactComponent=!0;var mR=Array.isArray,L8=Object.prototype.hasOwnProperty,ZL={current:null},O8={key:!0,ref:!0,__self:!0,__source:!0};function A8(e,t,r){var i,n={},s=null,o=null;if(t!=null)for(i in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)L8.call(t,i)&&!O8.hasOwnProperty(i)&&(n[i]=t[i]);var a=arguments.length-2;if(a===1)n.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];n.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)n[i]===void 0&&(n[i]=a[i]);return{$$typeof:pv,type:e,key:s,ref:o,props:n,_owner:ZL.current}}function oX(e,t){return{$$typeof:pv,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function YL(e){return typeof e=="object"&&e!==null&&e.$$typeof===pv}function aX(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var yR=/\/+/g;function W$(e,t){return typeof e=="object"&&e!==null&&e.key!=null?aX(""+e.key):t.toString(36)}function Lw(e,t,r,i,n){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case pv:case ZK:o=!0}}if(o)return o=e,n=n(o),e=i===""?"."+W$(o,0):i,mR(n)?(r="",e!=null&&(r=e.replace(yR,"$&/")+"/"),Lw(n,t,r,"",function(c){return c})):n!=null&&(YL(n)&&(n=oX(n,r+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(yR,"$&/")+"/")+e)),t.push(n)),1;if(o=0,i=i===""?".":i+":",mR(e))for(var a=0;a<e.length;a++){s=e[a];var l=i+W$(s,a);o+=Lw(s,t,r,l,n)}else if(l=sX(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=i+W$(s,a++),o+=Lw(s,t,r,l,n);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function n1(e,t,r){if(e==null)return e;var i=[],n=0;return Lw(e,i,"","",function(s){return t.call(r,s,n++)}),i}function lX(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ai={current:null},Ow={transition:null},uX={ReactCurrentDispatcher:Ai,ReactCurrentBatchConfig:Ow,ReactCurrentOwner:ZL};Ue.Children={map:n1,forEach:function(e,t,r){n1(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return n1(e,function(){t++}),t},toArray:function(e){return n1(e,function(t){return t})||[]},only:function(e){if(!YL(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ue.Component=lm;Ue.Fragment=YK;Ue.Profiler=KK;Ue.PureComponent=HL;Ue.StrictMode=QK;Ue.Suspense=rX;Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uX;Ue.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=I8({},e.props),n=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=ZL.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)L8.call(t,l)&&!O8.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:pv,type:e.type,key:n,ref:s,props:i,_owner:o}};Ue.createContext=function(e){return e={$$typeof:eX,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:XK,_context:e},e.Consumer=e};Ue.createElement=A8;Ue.createFactory=function(e){var t=A8.bind(null,e);return t.type=e,t};Ue.createRef=function(){return{current:null}};Ue.forwardRef=function(e){return{$$typeof:tX,render:e}};Ue.isValidElement=YL;Ue.lazy=function(e){return{$$typeof:nX,_payload:{_status:-1,_result:e},_init:lX}};Ue.memo=function(e,t){return{$$typeof:iX,type:e,compare:t===void 0?null:t}};Ue.startTransition=function(e){var t=Ow.transition;Ow.transition={};try{e()}finally{Ow.transition=t}};Ue.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ue.useCallback=function(e,t){return Ai.current.useCallback(e,t)};Ue.useContext=function(e){return Ai.current.useContext(e)};Ue.useDebugValue=function(){};Ue.useDeferredValue=function(e){return Ai.current.useDeferredValue(e)};Ue.useEffect=function(e,t){return Ai.current.useEffect(e,t)};Ue.useId=function(){return Ai.current.useId()};Ue.useImperativeHandle=function(e,t,r){return Ai.current.useImperativeHandle(e,t,r)};Ue.useInsertionEffect=function(e,t){return Ai.current.useInsertionEffect(e,t)};Ue.useLayoutEffect=function(e,t){return Ai.current.useLayoutEffect(e,t)};Ue.useMemo=function(e,t){return Ai.current.useMemo(e,t)};Ue.useReducer=function(e,t,r){return Ai.current.useReducer(e,t,r)};Ue.useRef=function(e){return Ai.current.useRef(e)};Ue.useState=function(e){return Ai.current.useState(e)};Ue.useSyncExternalStore=function(e,t,r){return Ai.current.useSyncExternalStore(e,t,r)};Ue.useTransition=function(){return Ai.current.useTransition()};Ue.version="18.2.0";(function(e){e.exports=Ue})(Hd);const cX=T8(Hd.exports);var $T={},P8={exports:{}},Dn={},R8={exports:{}},F8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(re,ve){var Ae=re.length;re.push(ve);e:for(;0<Ae;){var Tt=Ae-1>>>1,ir=re[Tt];if(0<n(ir,ve))re[Tt]=ve,re[Ae]=ir,Ae=Tt;else break e}}function r(re){return re.length===0?null:re[0]}function i(re){if(re.length===0)return null;var ve=re[0],Ae=re.pop();if(Ae!==ve){re[0]=Ae;e:for(var Tt=0,ir=re.length,wc=ir>>>1;Tt<wc;){var ya=2*(Tt+1)-1,Wm=re[ya],ga=ya+1,_c=re[ga];if(0>n(Wm,Ae))ga<ir&&0>n(_c,Wm)?(re[Tt]=_c,re[ga]=Ae,Tt=ga):(re[Tt]=Wm,re[ya]=Ae,Tt=ya);else if(ga<ir&&0>n(_c,Ae))re[Tt]=_c,re[ga]=Ae,Tt=ga;else break e}}return ve}function n(re,ve){var Ae=re.sortIndex-ve.sortIndex;return Ae!==0?Ae:re.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,m=3,y=!1,g=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(re){for(var ve=r(c);ve!==null;){if(ve.callback===null)i(c);else if(ve.startTime<=re)i(c),ve.sortIndex=ve.expirationTime,t(l,ve);else break;ve=r(c)}}function M(re){if(v=!1,S(re),!g)if(r(l)!==null)g=!0,Qe(T);else{var ve=r(c);ve!==null&&et(M,ve.startTime-re)}}function T(re,ve){g=!1,v&&(v=!1,w(F),F=-1),y=!0;var Ae=m;try{for(S(ve),f=r(l);f!==null&&(!(f.expirationTime>ve)||re&&!Q());){var Tt=f.callback;if(typeof Tt=="function"){f.callback=null,m=f.priorityLevel;var ir=Tt(f.expirationTime<=ve);ve=e.unstable_now(),typeof ir=="function"?f.callback=ir:f===r(l)&&i(l),S(ve)}else i(l);f=r(l)}if(f!==null)var wc=!0;else{var ya=r(c);ya!==null&&et(M,ya.startTime-ve),wc=!1}return wc}finally{f=null,m=Ae,y=!1}}var k=!1,N=null,F=-1,q=5,z=-1;function Q(){return!(e.unstable_now()-z<q)}function K(){if(N!==null){var re=e.unstable_now();z=re;var ve=!0;try{ve=N(!0,re)}finally{ve?ce():(k=!1,N=null)}}else k=!1}var ce;if(typeof b=="function")ce=function(){b(K)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,Oe=ie.port2;ie.port1.onmessage=K,ce=function(){Oe.postMessage(null)}}else ce=function(){_(K,0)};function Qe(re){N=re,k||(k=!0,ce())}function et(re,ve){F=_(function(){re(e.unstable_now())},ve)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(re){re.callback=null},e.unstable_continueExecution=function(){g||y||(g=!0,Qe(T))},e.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<re?Math.floor(1e3/re):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(re){switch(m){case 1:case 2:case 3:var ve=3;break;default:ve=m}var Ae=m;m=ve;try{return re()}finally{m=Ae}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(re,ve){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var Ae=m;m=re;try{return ve()}finally{m=Ae}},e.unstable_scheduleCallback=function(re,ve,Ae){var Tt=e.unstable_now();switch(typeof Ae=="object"&&Ae!==null?(Ae=Ae.delay,Ae=typeof Ae=="number"&&0<Ae?Tt+Ae:Tt):Ae=Tt,re){case 1:var ir=-1;break;case 2:ir=250;break;case 5:ir=1073741823;break;case 4:ir=1e4;break;default:ir=5e3}return ir=Ae+ir,re={id:h++,callback:ve,priorityLevel:re,startTime:Ae,expirationTime:ir,sortIndex:-1},Ae>Tt?(re.sortIndex=Ae,t(c,re),r(l)===null&&re===r(c)&&(v?(w(F),F=-1):v=!0,et(M,Ae-Tt))):(re.sortIndex=ir,t(l,re),g||y||(g=!0,Qe(T))),re},e.unstable_shouldYield=Q,e.unstable_wrapCallback=function(re){var ve=m;return function(){var Ae=m;m=ve;try{return re.apply(this,arguments)}finally{m=Ae}}}})(F8);(function(e){e.exports=F8})(R8);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N8=Hd.exports,Fn=R8.exports;function Y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D8=new Set,f0={};function Sh(e,t){Pf(e,t),Pf(e+"Capture",t)}function Pf(e,t){for(f0[e]=t,e=0;e<t.length;e++)D8.add(t[e])}var hl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xT=Object.prototype.hasOwnProperty,dX=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gR={},vR={};function hX(e){return xT.call(vR,e)?!0:xT.call(gR,e)?!1:dX.test(e)?vR[e]=!0:(gR[e]=!0,!1)}function pX(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function fX(e,t,r,i){if(t===null||typeof t>"u"||pX(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Pi(e,t,r,i,n,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Wr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Wr[e]=new Pi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Wr[t]=new Pi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Wr[e]=new Pi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Wr[e]=new Pi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Wr[e]=new Pi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Wr[e]=new Pi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Wr[e]=new Pi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Wr[e]=new Pi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Wr[e]=new Pi(e,5,!1,e.toLowerCase(),null,!1,!1)});var QL=/[\-:]([a-z])/g;function KL(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(QL,KL);Wr[t]=new Pi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(QL,KL);Wr[t]=new Pi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(QL,KL);Wr[t]=new Pi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Wr[e]=new Pi(e,1,!1,e.toLowerCase(),null,!1,!1)});Wr.xlinkHref=new Pi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Wr[e]=new Pi(e,1,!1,e.toLowerCase(),null,!0,!0)});function XL(e,t,r,i){var n=Wr.hasOwnProperty(t)?Wr[t]:null;(n!==null?n.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(fX(t,r,n,i)&&(r=null),i||n===null?hX(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,i=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var $l=N8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,s1=Symbol.for("react.element"),Dp=Symbol.for("react.portal"),jp=Symbol.for("react.fragment"),eO=Symbol.for("react.strict_mode"),ET=Symbol.for("react.profiler"),j8=Symbol.for("react.provider"),V8=Symbol.for("react.context"),tO=Symbol.for("react.forward_ref"),TT=Symbol.for("react.suspense"),MT=Symbol.for("react.suspense_list"),rO=Symbol.for("react.memo"),$u=Symbol.for("react.lazy"),z8=Symbol.for("react.offscreen"),wR=Symbol.iterator;function Jm(e){return e===null||typeof e!="object"?null:(e=wR&&e[wR]||e["@@iterator"],typeof e=="function"?e:null)}var Vt=Object.assign,H$;function Ly(e){if(H$===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);H$=t&&t[1]||""}return`
`+H$+e}var J$=!1;function Z$(e,t){if(!e||J$)return"";J$=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var n=c.stack.split(`
`),s=i.stack.split(`
`),o=n.length-1,a=s.length-1;1<=o&&0<=a&&n[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(n[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||n[o]!==s[a]){var l=`
`+n[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{J$=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ly(e):""}function mX(e){switch(e.tag){case 5:return Ly(e.type);case 16:return Ly("Lazy");case 13:return Ly("Suspense");case 19:return Ly("SuspenseList");case 0:case 2:case 15:return e=Z$(e.type,!1),e;case 11:return e=Z$(e.type.render,!1),e;case 1:return e=Z$(e.type,!0),e;default:return""}}function IT(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case jp:return"Fragment";case Dp:return"Portal";case ET:return"Profiler";case eO:return"StrictMode";case TT:return"Suspense";case MT:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case V8:return(e.displayName||"Context")+".Consumer";case j8:return(e._context.displayName||"Context")+".Provider";case tO:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case rO:return t=e.displayName||null,t!==null?t:IT(e.type)||"Memo";case $u:t=e._payload,e=e._init;try{return IT(e(t))}catch{}}return null}function yX(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return IT(t);case 8:return t===eO?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ac(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function U8(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function gX(e){var t=U8(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function o1(e){e._valueTracker||(e._valueTracker=gX(e))}function G8(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=U8(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function ob(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function CT(e,t){var r=t.checked;return Vt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function _R(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=ac(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function B8(e,t){t=t.checked,t!=null&&XL(e,"checked",t,!1)}function kT(e,t){B8(e,t);var r=ac(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?LT(e,t.type,r):t.hasOwnProperty("defaultValue")&&LT(e,t.type,ac(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function bR(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function LT(e,t,r){(t!=="number"||ob(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Oy=Array.isArray;function df(e,t,r,i){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&i&&(e[r].defaultSelected=!0)}else{for(r=""+ac(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,i&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function OT(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Vt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function SR(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Y(92));if(Oy(r)){if(1<r.length)throw Error(Y(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ac(r)}}function q8(e,t){var r=ac(t.value),i=ac(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function $R(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function W8(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function AT(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?W8(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var a1,H8=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(a1=a1||document.createElement("div"),a1.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=a1.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function m0(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Og={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vX=["Webkit","ms","Moz","O"];Object.keys(Og).forEach(function(e){vX.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Og[t]=Og[e]})});function J8(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Og.hasOwnProperty(e)&&Og[e]?(""+t).trim():t+"px"}function Z8(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,n=J8(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,n):e[r]=n}}var wX=Vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function PT(e,t){if(t){if(wX[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Y(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Y(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Y(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Y(62))}}function RT(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var FT=null;function iO(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var NT=null,hf=null,pf=null;function xR(e){if(e=yv(e)){if(typeof NT!="function")throw Error(Y(280));var t=e.stateNode;t&&(t=d2(t),NT(e.stateNode,e.type,t))}}function Y8(e){hf?pf?pf.push(e):pf=[e]:hf=e}function Q8(){if(hf){var e=hf,t=pf;if(pf=hf=null,xR(e),t)for(e=0;e<t.length;e++)xR(t[e])}}function K8(e,t){return e(t)}function X8(){}var Y$=!1;function eV(e,t,r){if(Y$)return e(t,r);Y$=!0;try{return K8(e,t,r)}finally{Y$=!1,(hf!==null||pf!==null)&&(X8(),Q8())}}function y0(e,t){var r=e.stateNode;if(r===null)return null;var i=d2(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Y(231,t,typeof r));return r}var DT=!1;if(hl)try{var Zm={};Object.defineProperty(Zm,"passive",{get:function(){DT=!0}}),window.addEventListener("test",Zm,Zm),window.removeEventListener("test",Zm,Zm)}catch{DT=!1}function _X(e,t,r,i,n,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(h){this.onError(h)}}var Ag=!1,ab=null,lb=!1,jT=null,bX={onError:function(e){Ag=!0,ab=e}};function SX(e,t,r,i,n,s,o,a,l){Ag=!1,ab=null,_X.apply(bX,arguments)}function $X(e,t,r,i,n,s,o,a,l){if(SX.apply(this,arguments),Ag){if(Ag){var c=ab;Ag=!1,ab=null}else throw Error(Y(198));lb||(lb=!0,jT=c)}}function $h(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function tV(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ER(e){if($h(e)!==e)throw Error(Y(188))}function xX(e){var t=e.alternate;if(!t){if(t=$h(e),t===null)throw Error(Y(188));return t!==e?null:e}for(var r=e,i=t;;){var n=r.return;if(n===null)break;var s=n.alternate;if(s===null){if(i=n.return,i!==null){r=i;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===r)return ER(n),e;if(s===i)return ER(n),t;s=s.sibling}throw Error(Y(188))}if(r.return!==i.return)r=n,i=s;else{for(var o=!1,a=n.child;a;){if(a===r){o=!0,r=n,i=s;break}if(a===i){o=!0,i=n,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,i=n;break}if(a===i){o=!0,i=s,r=n;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(r.alternate!==i)throw Error(Y(190))}if(r.tag!==3)throw Error(Y(188));return r.stateNode.current===r?e:t}function rV(e){return e=xX(e),e!==null?iV(e):null}function iV(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=iV(e);if(t!==null)return t;e=e.sibling}return null}var nV=Fn.unstable_scheduleCallback,TR=Fn.unstable_cancelCallback,EX=Fn.unstable_shouldYield,TX=Fn.unstable_requestPaint,rr=Fn.unstable_now,MX=Fn.unstable_getCurrentPriorityLevel,nO=Fn.unstable_ImmediatePriority,sV=Fn.unstable_UserBlockingPriority,ub=Fn.unstable_NormalPriority,IX=Fn.unstable_LowPriority,oV=Fn.unstable_IdlePriority,a2=null,Xo=null;function CX(e){if(Xo&&typeof Xo.onCommitFiberRoot=="function")try{Xo.onCommitFiberRoot(a2,e,void 0,(e.current.flags&128)===128)}catch{}}var lo=Math.clz32?Math.clz32:OX,kX=Math.log,LX=Math.LN2;function OX(e){return e>>>=0,e===0?32:31-(kX(e)/LX|0)|0}var l1=64,u1=4194304;function Ay(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function cb(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,n=e.suspendedLanes,s=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~n;a!==0?i=Ay(a):(s&=o,s!==0&&(i=Ay(s)))}else o=r&~n,o!==0?i=Ay(o):s!==0&&(i=Ay(s));if(i===0)return 0;if(t!==0&&t!==i&&(t&n)===0&&(n=i&-i,s=t&-t,n>=s||n===16&&(s&4194240)!==0))return t;if((i&4)!==0&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-lo(t),n=1<<r,i|=e[r],t&=~n;return i}function AX(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PX(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,n=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-lo(s),a=1<<o,l=n[o];l===-1?((a&r)===0||(a&i)!==0)&&(n[o]=AX(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function VT(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function aV(){var e=l1;return l1<<=1,(l1&4194240)===0&&(l1=64),e}function Q$(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function fv(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-lo(t),e[t]=r}function RX(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-lo(r),s=1<<n;t[n]=0,i[n]=-1,e[n]=-1,r&=~s}}function sO(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-lo(r),n=1<<i;n&t|e[i]&t&&(e[i]|=t),r&=~n}}var lt=0;function lV(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var uV,oO,cV,dV,hV,zT=!1,c1=[],Wu=null,Hu=null,Ju=null,g0=new Map,v0=new Map,Au=[],FX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function MR(e,t){switch(e){case"focusin":case"focusout":Wu=null;break;case"dragenter":case"dragleave":Hu=null;break;case"mouseover":case"mouseout":Ju=null;break;case"pointerover":case"pointerout":g0.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":v0.delete(t.pointerId)}}function Ym(e,t,r,i,n,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:s,targetContainers:[n]},t!==null&&(t=yv(t),t!==null&&oO(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function NX(e,t,r,i,n){switch(t){case"focusin":return Wu=Ym(Wu,e,t,r,i,n),!0;case"dragenter":return Hu=Ym(Hu,e,t,r,i,n),!0;case"mouseover":return Ju=Ym(Ju,e,t,r,i,n),!0;case"pointerover":var s=n.pointerId;return g0.set(s,Ym(g0.get(s)||null,e,t,r,i,n)),!0;case"gotpointercapture":return s=n.pointerId,v0.set(s,Ym(v0.get(s)||null,e,t,r,i,n)),!0}return!1}function pV(e){var t=kd(e.target);if(t!==null){var r=$h(t);if(r!==null){if(t=r.tag,t===13){if(t=tV(r),t!==null){e.blockedOn=t,hV(e.priority,function(){cV(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Aw(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=UT(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);FT=i,r.target.dispatchEvent(i),FT=null}else return t=yv(r),t!==null&&oO(t),e.blockedOn=r,!1;t.shift()}return!0}function IR(e,t,r){Aw(e)&&r.delete(t)}function DX(){zT=!1,Wu!==null&&Aw(Wu)&&(Wu=null),Hu!==null&&Aw(Hu)&&(Hu=null),Ju!==null&&Aw(Ju)&&(Ju=null),g0.forEach(IR),v0.forEach(IR)}function Qm(e,t){e.blockedOn===t&&(e.blockedOn=null,zT||(zT=!0,Fn.unstable_scheduleCallback(Fn.unstable_NormalPriority,DX)))}function w0(e){function t(n){return Qm(n,e)}if(0<c1.length){Qm(c1[0],e);for(var r=1;r<c1.length;r++){var i=c1[r];i.blockedOn===e&&(i.blockedOn=null)}}for(Wu!==null&&Qm(Wu,e),Hu!==null&&Qm(Hu,e),Ju!==null&&Qm(Ju,e),g0.forEach(t),v0.forEach(t),r=0;r<Au.length;r++)i=Au[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<Au.length&&(r=Au[0],r.blockedOn===null);)pV(r),r.blockedOn===null&&Au.shift()}var ff=$l.ReactCurrentBatchConfig,db=!0;function jX(e,t,r,i){var n=lt,s=ff.transition;ff.transition=null;try{lt=1,aO(e,t,r,i)}finally{lt=n,ff.transition=s}}function VX(e,t,r,i){var n=lt,s=ff.transition;ff.transition=null;try{lt=4,aO(e,t,r,i)}finally{lt=n,ff.transition=s}}function aO(e,t,r,i){if(db){var n=UT(e,t,r,i);if(n===null)ax(e,t,i,hb,r),MR(e,i);else if(NX(n,e,t,r,i))i.stopPropagation();else if(MR(e,i),t&4&&-1<FX.indexOf(e)){for(;n!==null;){var s=yv(n);if(s!==null&&uV(s),s=UT(e,t,r,i),s===null&&ax(e,t,i,hb,r),s===n)break;n=s}n!==null&&i.stopPropagation()}else ax(e,t,i,null,r)}}var hb=null;function UT(e,t,r,i){if(hb=null,e=iO(i),e=kd(e),e!==null)if(t=$h(e),t===null)e=null;else if(r=t.tag,r===13){if(e=tV(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return hb=e,null}function fV(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(MX()){case nO:return 1;case sV:return 4;case ub:case IX:return 16;case oV:return 536870912;default:return 16}default:return 16}}var Nu=null,lO=null,Pw=null;function mV(){if(Pw)return Pw;var e,t=lO,r=t.length,i,n="value"in Nu?Nu.value:Nu.textContent,s=n.length;for(e=0;e<r&&t[e]===n[e];e++);var o=r-e;for(i=1;i<=o&&t[r-i]===n[s-i];i++);return Pw=n.slice(e,1<i?1-i:void 0)}function Rw(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function d1(){return!0}function CR(){return!1}function jn(e){function t(r,i,n,s,o){this._reactName=r,this._targetInst=n,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?d1:CR,this.isPropagationStopped=CR,this}return Vt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=d1)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=d1)},persist:function(){},isPersistent:d1}),t}var um={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uO=jn(um),mv=Vt({},um,{view:0,detail:0}),zX=jn(mv),K$,X$,Km,l2=Vt({},mv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cO,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Km&&(Km&&e.type==="mousemove"?(K$=e.screenX-Km.screenX,X$=e.screenY-Km.screenY):X$=K$=0,Km=e),K$)},movementY:function(e){return"movementY"in e?e.movementY:X$}}),kR=jn(l2),UX=Vt({},l2,{dataTransfer:0}),GX=jn(UX),BX=Vt({},mv,{relatedTarget:0}),ex=jn(BX),qX=Vt({},um,{animationName:0,elapsedTime:0,pseudoElement:0}),WX=jn(qX),HX=Vt({},um,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),JX=jn(HX),ZX=Vt({},um,{data:0}),LR=jn(ZX),YX={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QX={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KX={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XX(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=KX[e])?!!t[e]:!1}function cO(){return XX}var eee=Vt({},mv,{key:function(e){if(e.key){var t=YX[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Rw(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?QX[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cO,charCode:function(e){return e.type==="keypress"?Rw(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Rw(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),tee=jn(eee),ree=Vt({},l2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),OR=jn(ree),iee=Vt({},mv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cO}),nee=jn(iee),see=Vt({},um,{propertyName:0,elapsedTime:0,pseudoElement:0}),oee=jn(see),aee=Vt({},l2,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),lee=jn(aee),uee=[9,13,27,32],dO=hl&&"CompositionEvent"in window,Pg=null;hl&&"documentMode"in document&&(Pg=document.documentMode);var cee=hl&&"TextEvent"in window&&!Pg,yV=hl&&(!dO||Pg&&8<Pg&&11>=Pg),AR=String.fromCharCode(32),PR=!1;function gV(e,t){switch(e){case"keyup":return uee.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vV(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vp=!1;function dee(e,t){switch(e){case"compositionend":return vV(t);case"keypress":return t.which!==32?null:(PR=!0,AR);case"textInput":return e=t.data,e===AR&&PR?null:e;default:return null}}function hee(e,t){if(Vp)return e==="compositionend"||!dO&&gV(e,t)?(e=mV(),Pw=lO=Nu=null,Vp=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return yV&&t.locale!=="ko"?null:t.data;default:return null}}var pee={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function RR(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!pee[e.type]:t==="textarea"}function wV(e,t,r,i){Y8(i),t=pb(t,"onChange"),0<t.length&&(r=new uO("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var Rg=null,_0=null;function fee(e){kV(e,0)}function u2(e){var t=Gp(e);if(G8(t))return e}function mee(e,t){if(e==="change")return t}var _V=!1;if(hl){var tx;if(hl){var rx="oninput"in document;if(!rx){var FR=document.createElement("div");FR.setAttribute("oninput","return;"),rx=typeof FR.oninput=="function"}tx=rx}else tx=!1;_V=tx&&(!document.documentMode||9<document.documentMode)}function NR(){Rg&&(Rg.detachEvent("onpropertychange",bV),_0=Rg=null)}function bV(e){if(e.propertyName==="value"&&u2(_0)){var t=[];wV(t,_0,e,iO(e)),eV(fee,t)}}function yee(e,t,r){e==="focusin"?(NR(),Rg=t,_0=r,Rg.attachEvent("onpropertychange",bV)):e==="focusout"&&NR()}function gee(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return u2(_0)}function vee(e,t){if(e==="click")return u2(t)}function wee(e,t){if(e==="input"||e==="change")return u2(t)}function _ee(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mo=typeof Object.is=="function"?Object.is:_ee;function b0(e,t){if(mo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var n=r[i];if(!xT.call(t,n)||!mo(e[n],t[n]))return!1}return!0}function DR(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jR(e,t){var r=DR(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=DR(r)}}function SV(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?SV(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $V(){for(var e=window,t=ob();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ob(e.document)}return t}function hO(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function bee(e){var t=$V(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&SV(r.ownerDocument.documentElement,r)){if(i!==null&&hO(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,s=Math.min(i.start,n);i=i.end===void 0?s:Math.min(i.end,n),!e.extend&&s>i&&(n=i,i=s,s=n),n=jR(r,s);var o=jR(r,i);n&&o&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var See=hl&&"documentMode"in document&&11>=document.documentMode,zp=null,GT=null,Fg=null,BT=!1;function VR(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;BT||zp==null||zp!==ob(i)||(i=zp,"selectionStart"in i&&hO(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Fg&&b0(Fg,i)||(Fg=i,i=pb(GT,"onSelect"),0<i.length&&(t=new uO("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=zp)))}function h1(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Up={animationend:h1("Animation","AnimationEnd"),animationiteration:h1("Animation","AnimationIteration"),animationstart:h1("Animation","AnimationStart"),transitionend:h1("Transition","TransitionEnd")},ix={},xV={};hl&&(xV=document.createElement("div").style,"AnimationEvent"in window||(delete Up.animationend.animation,delete Up.animationiteration.animation,delete Up.animationstart.animation),"TransitionEvent"in window||delete Up.transitionend.transition);function c2(e){if(ix[e])return ix[e];if(!Up[e])return e;var t=Up[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in xV)return ix[e]=t[r];return e}var EV=c2("animationend"),TV=c2("animationiteration"),MV=c2("animationstart"),IV=c2("transitionend"),CV=new Map,zR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fc(e,t){CV.set(e,t),Sh(t,[e])}for(var nx=0;nx<zR.length;nx++){var sx=zR[nx],$ee=sx.toLowerCase(),xee=sx[0].toUpperCase()+sx.slice(1);fc($ee,"on"+xee)}fc(EV,"onAnimationEnd");fc(TV,"onAnimationIteration");fc(MV,"onAnimationStart");fc("dblclick","onDoubleClick");fc("focusin","onFocus");fc("focusout","onBlur");fc(IV,"onTransitionEnd");Pf("onMouseEnter",["mouseout","mouseover"]);Pf("onMouseLeave",["mouseout","mouseover"]);Pf("onPointerEnter",["pointerout","pointerover"]);Pf("onPointerLeave",["pointerout","pointerover"]);Sh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Sh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Sh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Sh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Sh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Sh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Py="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Eee=new Set("cancel close invalid load scroll toggle".split(" ").concat(Py));function UR(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,$X(i,t,void 0,e),e.currentTarget=null}function kV(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],n=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&n.isPropagationStopped())break e;UR(n,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&n.isPropagationStopped())break e;UR(n,a,c),s=l}}}if(lb)throw e=jT,lb=!1,jT=null,e}function vt(e,t){var r=t[ZT];r===void 0&&(r=t[ZT]=new Set);var i=e+"__bubble";r.has(i)||(LV(t,e,2,!1),r.add(i))}function ox(e,t,r){var i=0;t&&(i|=4),LV(r,e,i,t)}var p1="_reactListening"+Math.random().toString(36).slice(2);function S0(e){if(!e[p1]){e[p1]=!0,D8.forEach(function(r){r!=="selectionchange"&&(Eee.has(r)||ox(r,!1,e),ox(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[p1]||(t[p1]=!0,ox("selectionchange",!1,t))}}function LV(e,t,r,i){switch(fV(t)){case 1:var n=jX;break;case 4:n=VX;break;default:n=aO}r=n.bind(null,t,r,e),n=void 0,!DT||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),i?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function ax(e,t,r,i,n){var s=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===n||a.nodeType===8&&a.parentNode===n)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;o=o.return}for(;a!==null;){if(o=kd(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}eV(function(){var c=s,h=iO(r),f=[];e:{var m=CV.get(e);if(m!==void 0){var y=uO,g=e;switch(e){case"keypress":if(Rw(r)===0)break e;case"keydown":case"keyup":y=tee;break;case"focusin":g="focus",y=ex;break;case"focusout":g="blur",y=ex;break;case"beforeblur":case"afterblur":y=ex;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=kR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=GX;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=nee;break;case EV:case TV:case MV:y=WX;break;case IV:y=oee;break;case"scroll":y=zX;break;case"wheel":y=lee;break;case"copy":case"cut":case"paste":y=JX;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=OR}var v=(t&4)!==0,_=!v&&e==="scroll",w=v?m!==null?m+"Capture":null:m;v=[];for(var b=c,S;b!==null;){S=b;var M=S.stateNode;if(S.tag===5&&M!==null&&(S=M,w!==null&&(M=y0(b,w),M!=null&&v.push($0(b,M,S)))),_)break;b=b.return}0<v.length&&(m=new y(m,g,null,r,h),f.push({event:m,listeners:v}))}}if((t&7)===0){e:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&r!==FT&&(g=r.relatedTarget||r.fromElement)&&(kd(g)||g[pl]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(g=r.relatedTarget||r.toElement,y=c,g=g?kd(g):null,g!==null&&(_=$h(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(y=null,g=c),y!==g)){if(v=kR,M="onMouseLeave",w="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(v=OR,M="onPointerLeave",w="onPointerEnter",b="pointer"),_=y==null?m:Gp(y),S=g==null?m:Gp(g),m=new v(M,b+"leave",y,r,h),m.target=_,m.relatedTarget=S,M=null,kd(h)===c&&(v=new v(w,b+"enter",g,r,h),v.target=S,v.relatedTarget=_,M=v),_=M,y&&g)t:{for(v=y,w=g,b=0,S=v;S;S=Rh(S))b++;for(S=0,M=w;M;M=Rh(M))S++;for(;0<b-S;)v=Rh(v),b--;for(;0<S-b;)w=Rh(w),S--;for(;b--;){if(v===w||w!==null&&v===w.alternate)break t;v=Rh(v),w=Rh(w)}v=null}else v=null;y!==null&&GR(f,m,y,v,!1),g!==null&&_!==null&&GR(f,_,g,v,!0)}}e:{if(m=c?Gp(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var T=mee;else if(RR(m))if(_V)T=wee;else{T=gee;var k=yee}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(T=vee);if(T&&(T=T(e,c))){wV(f,T,r,h);break e}k&&k(e,m,c),e==="focusout"&&(k=m._wrapperState)&&k.controlled&&m.type==="number"&&LT(m,"number",m.value)}switch(k=c?Gp(c):window,e){case"focusin":(RR(k)||k.contentEditable==="true")&&(zp=k,GT=c,Fg=null);break;case"focusout":Fg=GT=zp=null;break;case"mousedown":BT=!0;break;case"contextmenu":case"mouseup":case"dragend":BT=!1,VR(f,r,h);break;case"selectionchange":if(See)break;case"keydown":case"keyup":VR(f,r,h)}var N;if(dO)e:{switch(e){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else Vp?gV(e,r)&&(F="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(F="onCompositionStart");F&&(yV&&r.locale!=="ko"&&(Vp||F!=="onCompositionStart"?F==="onCompositionEnd"&&Vp&&(N=mV()):(Nu=h,lO="value"in Nu?Nu.value:Nu.textContent,Vp=!0)),k=pb(c,F),0<k.length&&(F=new LR(F,e,null,r,h),f.push({event:F,listeners:k}),N?F.data=N:(N=vV(r),N!==null&&(F.data=N)))),(N=cee?dee(e,r):hee(e,r))&&(c=pb(c,"onBeforeInput"),0<c.length&&(h=new LR("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:c}),h.data=N))}kV(f,t)})}function $0(e,t,r){return{instance:e,listener:t,currentTarget:r}}function pb(e,t){for(var r=t+"Capture",i=[];e!==null;){var n=e,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=y0(e,r),s!=null&&i.unshift($0(e,s,n)),s=y0(e,t),s!=null&&i.push($0(e,s,n))),e=e.return}return i}function Rh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function GR(e,t,r,i,n){for(var s=t._reactName,o=[];r!==null&&r!==i;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,n?(l=y0(r,s),l!=null&&o.unshift($0(r,l,a))):n||(l=y0(r,s),l!=null&&o.push($0(r,l,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Tee=/\r\n?/g,Mee=/\u0000|\uFFFD/g;function BR(e){return(typeof e=="string"?e:""+e).replace(Tee,`
`).replace(Mee,"")}function f1(e,t,r){if(t=BR(t),BR(e)!==t&&r)throw Error(Y(425))}function fb(){}var qT=null,WT=null;function HT(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var JT=typeof setTimeout=="function"?setTimeout:void 0,Iee=typeof clearTimeout=="function"?clearTimeout:void 0,qR=typeof Promise=="function"?Promise:void 0,Cee=typeof queueMicrotask=="function"?queueMicrotask:typeof qR<"u"?function(e){return qR.resolve(null).then(e).catch(kee)}:JT;function kee(e){setTimeout(function(){throw e})}function lx(e,t){var r=t,i=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(i===0){e.removeChild(n),w0(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=n}while(r);w0(t)}function Zu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function WR(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var cm=Math.random().toString(36).slice(2),Jo="__reactFiber$"+cm,x0="__reactProps$"+cm,pl="__reactContainer$"+cm,ZT="__reactEvents$"+cm,Lee="__reactListeners$"+cm,Oee="__reactHandles$"+cm;function kd(e){var t=e[Jo];if(t)return t;for(var r=e.parentNode;r;){if(t=r[pl]||r[Jo]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=WR(e);e!==null;){if(r=e[Jo])return r;e=WR(e)}return t}e=r,r=e.parentNode}return null}function yv(e){return e=e[Jo]||e[pl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Gp(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Y(33))}function d2(e){return e[x0]||null}var YT=[],Bp=-1;function mc(e){return{current:e}}function St(e){0>Bp||(e.current=YT[Bp],YT[Bp]=null,Bp--)}function mt(e,t){Bp++,YT[Bp]=e.current,e.current=t}var lc={},ai=mc(lc),Qi=mc(!1),nh=lc;function Rf(e,t){var r=e.type.contextTypes;if(!r)return lc;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in r)n[s]=t[s];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function Ki(e){return e=e.childContextTypes,e!=null}function mb(){St(Qi),St(ai)}function HR(e,t,r){if(ai.current!==lc)throw Error(Y(168));mt(ai,t),mt(Qi,r)}function OV(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var n in i)if(!(n in t))throw Error(Y(108,yX(e)||"Unknown",n));return Vt({},r,i)}function yb(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||lc,nh=ai.current,mt(ai,e),mt(Qi,Qi.current),!0}function JR(e,t,r){var i=e.stateNode;if(!i)throw Error(Y(169));r?(e=OV(e,t,nh),i.__reactInternalMemoizedMergedChildContext=e,St(Qi),St(ai),mt(ai,e)):St(Qi),mt(Qi,r)}var Xa=null,h2=!1,ux=!1;function AV(e){Xa===null?Xa=[e]:Xa.push(e)}function Aee(e){h2=!0,AV(e)}function yc(){if(!ux&&Xa!==null){ux=!0;var e=0,t=lt;try{var r=Xa;for(lt=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}Xa=null,h2=!1}catch(n){throw Xa!==null&&(Xa=Xa.slice(e+1)),nV(nO,yc),n}finally{lt=t,ux=!1}}return null}var qp=[],Wp=0,gb=null,vb=0,ss=[],os=0,sh=null,il=1,nl="";function Ac(e,t){qp[Wp++]=vb,qp[Wp++]=gb,gb=e,vb=t}function PV(e,t,r){ss[os++]=il,ss[os++]=nl,ss[os++]=sh,sh=e;var i=il;e=nl;var n=32-lo(i)-1;i&=~(1<<n),r+=1;var s=32-lo(t)+n;if(30<s){var o=n-n%5;s=(i&(1<<o)-1).toString(32),i>>=o,n-=o,il=1<<32-lo(t)+n|r<<n|i,nl=s+e}else il=1<<s|r<<n|i,nl=e}function pO(e){e.return!==null&&(Ac(e,1),PV(e,1,0))}function fO(e){for(;e===gb;)gb=qp[--Wp],qp[Wp]=null,vb=qp[--Wp],qp[Wp]=null;for(;e===sh;)sh=ss[--os],ss[os]=null,nl=ss[--os],ss[os]=null,il=ss[--os],ss[os]=null}var Ln=null,kn=null,Lt=!1,to=null;function RV(e,t){var r=cs(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function ZR(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ln=e,kn=Zu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ln=e,kn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=sh!==null?{id:il,overflow:nl}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=cs(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ln=e,kn=null,!0):!1;default:return!1}}function QT(e){return(e.mode&1)!==0&&(e.flags&128)===0}function KT(e){if(Lt){var t=kn;if(t){var r=t;if(!ZR(e,t)){if(QT(e))throw Error(Y(418));t=Zu(r.nextSibling);var i=Ln;t&&ZR(e,t)?RV(i,r):(e.flags=e.flags&-4097|2,Lt=!1,Ln=e)}}else{if(QT(e))throw Error(Y(418));e.flags=e.flags&-4097|2,Lt=!1,Ln=e}}}function YR(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ln=e}function m1(e){if(e!==Ln)return!1;if(!Lt)return YR(e),Lt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!HT(e.type,e.memoizedProps)),t&&(t=kn)){if(QT(e))throw FV(),Error(Y(418));for(;t;)RV(e,t),t=Zu(t.nextSibling)}if(YR(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){kn=Zu(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}kn=null}}else kn=Ln?Zu(e.stateNode.nextSibling):null;return!0}function FV(){for(var e=kn;e;)e=Zu(e.nextSibling)}function Ff(){kn=Ln=null,Lt=!1}function mO(e){to===null?to=[e]:to.push(e)}var Pee=$l.ReactCurrentBatchConfig;function Zs(e,t){if(e&&e.defaultProps){t=Vt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var wb=mc(null),_b=null,Hp=null,yO=null;function gO(){yO=Hp=_b=null}function vO(e){var t=wb.current;St(wb),e._currentValue=t}function XT(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function mf(e,t){_b=e,yO=Hp=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Ji=!0),e.firstContext=null)}function ys(e){var t=e._currentValue;if(yO!==e)if(e={context:e,memoizedValue:t,next:null},Hp===null){if(_b===null)throw Error(Y(308));Hp=e,_b.dependencies={lanes:0,firstContext:e}}else Hp=Hp.next=e;return t}var Ld=null;function wO(e){Ld===null?Ld=[e]:Ld.push(e)}function NV(e,t,r,i){var n=t.interleaved;return n===null?(r.next=r,wO(t)):(r.next=n.next,n.next=r),t.interleaved=r,fl(e,i)}function fl(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var xu=!1;function _O(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function DV(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function al(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Yu(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(He&2)!==0){var n=i.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),i.pending=t,fl(e,r)}return n=i.interleaved,n===null?(t.next=t,wO(i)):(t.next=n.next,n.next=t),i.interleaved=t,fl(e,r)}function Fw(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,sO(e,r)}}function QR(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var n=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?n=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?n=s=t:s=s.next=t}else n=s=t;r={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function bb(e,t,r,i){var n=e.updateQueue;xu=!1;var s=n.firstBaseUpdate,o=n.lastBaseUpdate,a=n.shared.pending;if(a!==null){n.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=e.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var f=n.baseState;o=0,h=c=l=null,a=s;do{var m=a.lane,y=a.eventTime;if((i&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,v=a;switch(m=t,y=r,v.tag){case 1:if(g=v.payload,typeof g=="function"){f=g.call(y,f,m);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,m=typeof g=="function"?g.call(y,f,m):g,m==null)break e;f=Vt({},f,m);break e;case 2:xu=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,m=n.effects,m===null?n.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,l=f):h=h.next=y,o|=m;if(a=a.next,a===null){if(a=n.shared.pending,a===null)break;m=a,a=m.next,m.next=null,n.lastBaseUpdate=m,n.shared.pending=null}}while(1);if(h===null&&(l=f),n.baseState=l,n.firstBaseUpdate=c,n.lastBaseUpdate=h,t=n.shared.interleaved,t!==null){n=t;do o|=n.lane,n=n.next;while(n!==t)}else s===null&&(n.shared.lanes=0);ah|=o,e.lanes=o,e.memoizedState=f}}function KR(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],n=i.callback;if(n!==null){if(i.callback=null,i=r,typeof n!="function")throw Error(Y(191,n));n.call(i)}}}var jV=new N8.Component().refs;function eM(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:Vt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var p2={isMounted:function(e){return(e=e._reactInternals)?$h(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=Mi(),n=Ku(e),s=al(i,n);s.payload=t,r!=null&&(s.callback=r),t=Yu(e,s,n),t!==null&&(uo(t,e,n,i),Fw(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=Mi(),n=Ku(e),s=al(i,n);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=Yu(e,s,n),t!==null&&(uo(t,e,n,i),Fw(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Mi(),i=Ku(e),n=al(r,i);n.tag=2,t!=null&&(n.callback=t),t=Yu(e,n,i),t!==null&&(uo(t,e,i,r),Fw(t,e,i))}};function XR(e,t,r,i,n,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,o):t.prototype&&t.prototype.isPureReactComponent?!b0(r,i)||!b0(n,s):!0}function VV(e,t,r){var i=!1,n=lc,s=t.contextType;return typeof s=="object"&&s!==null?s=ys(s):(n=Ki(t)?nh:ai.current,i=t.contextTypes,s=(i=i!=null)?Rf(e,n):lc),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=p2,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=s),t}function eF(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&p2.enqueueReplaceState(t,t.state,null)}function tM(e,t,r,i){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs=jV,_O(e);var s=t.contextType;typeof s=="object"&&s!==null?n.context=ys(s):(s=Ki(t)?nh:ai.current,n.context=Rf(e,s)),n.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(eM(e,t,s,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&p2.enqueueReplaceState(n,n.state,null),bb(e,r,n,i),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function Xm(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Y(309));var i=r.stateNode}if(!i)throw Error(Y(147,e));var n=i,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=n.refs;a===jV&&(a=n.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(Y(284));if(!r._owner)throw Error(Y(290,e))}return e}function y1(e,t){throw e=Object.prototype.toString.call(t),Error(Y(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function tF(e){var t=e._init;return t(e._payload)}function zV(e){function t(w,b){if(e){var S=w.deletions;S===null?(w.deletions=[b],w.flags|=16):S.push(b)}}function r(w,b){if(!e)return null;for(;b!==null;)t(w,b),b=b.sibling;return null}function i(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function n(w,b){return w=Xu(w,b),w.index=0,w.sibling=null,w}function s(w,b,S){return w.index=S,e?(S=w.alternate,S!==null?(S=S.index,S<b?(w.flags|=2,b):S):(w.flags|=2,b)):(w.flags|=1048576,b)}function o(w){return e&&w.alternate===null&&(w.flags|=2),w}function a(w,b,S,M){return b===null||b.tag!==6?(b=yx(S,w.mode,M),b.return=w,b):(b=n(b,S),b.return=w,b)}function l(w,b,S,M){var T=S.type;return T===jp?h(w,b,S.props.children,M,S.key):b!==null&&(b.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===$u&&tF(T)===b.type)?(M=n(b,S.props),M.ref=Xm(w,b,S),M.return=w,M):(M=Uw(S.type,S.key,S.props,null,w.mode,M),M.ref=Xm(w,b,S),M.return=w,M)}function c(w,b,S,M){return b===null||b.tag!==4||b.stateNode.containerInfo!==S.containerInfo||b.stateNode.implementation!==S.implementation?(b=gx(S,w.mode,M),b.return=w,b):(b=n(b,S.children||[]),b.return=w,b)}function h(w,b,S,M,T){return b===null||b.tag!==7?(b=Zd(S,w.mode,M,T),b.return=w,b):(b=n(b,S),b.return=w,b)}function f(w,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return b=yx(""+b,w.mode,S),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case s1:return S=Uw(b.type,b.key,b.props,null,w.mode,S),S.ref=Xm(w,null,b),S.return=w,S;case Dp:return b=gx(b,w.mode,S),b.return=w,b;case $u:var M=b._init;return f(w,M(b._payload),S)}if(Oy(b)||Jm(b))return b=Zd(b,w.mode,S,null),b.return=w,b;y1(w,b)}return null}function m(w,b,S,M){var T=b!==null?b.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return T!==null?null:a(w,b,""+S,M);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case s1:return S.key===T?l(w,b,S,M):null;case Dp:return S.key===T?c(w,b,S,M):null;case $u:return T=S._init,m(w,b,T(S._payload),M)}if(Oy(S)||Jm(S))return T!==null?null:h(w,b,S,M,null);y1(w,S)}return null}function y(w,b,S,M,T){if(typeof M=="string"&&M!==""||typeof M=="number")return w=w.get(S)||null,a(b,w,""+M,T);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case s1:return w=w.get(M.key===null?S:M.key)||null,l(b,w,M,T);case Dp:return w=w.get(M.key===null?S:M.key)||null,c(b,w,M,T);case $u:var k=M._init;return y(w,b,S,k(M._payload),T)}if(Oy(M)||Jm(M))return w=w.get(S)||null,h(b,w,M,T,null);y1(b,M)}return null}function g(w,b,S,M){for(var T=null,k=null,N=b,F=b=0,q=null;N!==null&&F<S.length;F++){N.index>F?(q=N,N=null):q=N.sibling;var z=m(w,N,S[F],M);if(z===null){N===null&&(N=q);break}e&&N&&z.alternate===null&&t(w,N),b=s(z,b,F),k===null?T=z:k.sibling=z,k=z,N=q}if(F===S.length)return r(w,N),Lt&&Ac(w,F),T;if(N===null){for(;F<S.length;F++)N=f(w,S[F],M),N!==null&&(b=s(N,b,F),k===null?T=N:k.sibling=N,k=N);return Lt&&Ac(w,F),T}for(N=i(w,N);F<S.length;F++)q=y(N,w,F,S[F],M),q!==null&&(e&&q.alternate!==null&&N.delete(q.key===null?F:q.key),b=s(q,b,F),k===null?T=q:k.sibling=q,k=q);return e&&N.forEach(function(Q){return t(w,Q)}),Lt&&Ac(w,F),T}function v(w,b,S,M){var T=Jm(S);if(typeof T!="function")throw Error(Y(150));if(S=T.call(S),S==null)throw Error(Y(151));for(var k=T=null,N=b,F=b=0,q=null,z=S.next();N!==null&&!z.done;F++,z=S.next()){N.index>F?(q=N,N=null):q=N.sibling;var Q=m(w,N,z.value,M);if(Q===null){N===null&&(N=q);break}e&&N&&Q.alternate===null&&t(w,N),b=s(Q,b,F),k===null?T=Q:k.sibling=Q,k=Q,N=q}if(z.done)return r(w,N),Lt&&Ac(w,F),T;if(N===null){for(;!z.done;F++,z=S.next())z=f(w,z.value,M),z!==null&&(b=s(z,b,F),k===null?T=z:k.sibling=z,k=z);return Lt&&Ac(w,F),T}for(N=i(w,N);!z.done;F++,z=S.next())z=y(N,w,F,z.value,M),z!==null&&(e&&z.alternate!==null&&N.delete(z.key===null?F:z.key),b=s(z,b,F),k===null?T=z:k.sibling=z,k=z);return e&&N.forEach(function(K){return t(w,K)}),Lt&&Ac(w,F),T}function _(w,b,S,M){if(typeof S=="object"&&S!==null&&S.type===jp&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case s1:e:{for(var T=S.key,k=b;k!==null;){if(k.key===T){if(T=S.type,T===jp){if(k.tag===7){r(w,k.sibling),b=n(k,S.props.children),b.return=w,w=b;break e}}else if(k.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===$u&&tF(T)===k.type){r(w,k.sibling),b=n(k,S.props),b.ref=Xm(w,k,S),b.return=w,w=b;break e}r(w,k);break}else t(w,k);k=k.sibling}S.type===jp?(b=Zd(S.props.children,w.mode,M,S.key),b.return=w,w=b):(M=Uw(S.type,S.key,S.props,null,w.mode,M),M.ref=Xm(w,b,S),M.return=w,w=M)}return o(w);case Dp:e:{for(k=S.key;b!==null;){if(b.key===k)if(b.tag===4&&b.stateNode.containerInfo===S.containerInfo&&b.stateNode.implementation===S.implementation){r(w,b.sibling),b=n(b,S.children||[]),b.return=w,w=b;break e}else{r(w,b);break}else t(w,b);b=b.sibling}b=gx(S,w.mode,M),b.return=w,w=b}return o(w);case $u:return k=S._init,_(w,b,k(S._payload),M)}if(Oy(S))return g(w,b,S,M);if(Jm(S))return v(w,b,S,M);y1(w,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,b!==null&&b.tag===6?(r(w,b.sibling),b=n(b,S),b.return=w,w=b):(r(w,b),b=yx(S,w.mode,M),b.return=w,w=b),o(w)):r(w,b)}return _}var Nf=zV(!0),UV=zV(!1),gv={},ea=mc(gv),E0=mc(gv),T0=mc(gv);function Od(e){if(e===gv)throw Error(Y(174));return e}function bO(e,t){switch(mt(T0,t),mt(E0,e),mt(ea,gv),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:AT(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=AT(t,e)}St(ea),mt(ea,t)}function Df(){St(ea),St(E0),St(T0)}function GV(e){Od(T0.current);var t=Od(ea.current),r=AT(t,e.type);t!==r&&(mt(E0,e),mt(ea,r))}function SO(e){E0.current===e&&(St(ea),St(E0))}var Nt=mc(0);function Sb(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cx=[];function $O(){for(var e=0;e<cx.length;e++)cx[e]._workInProgressVersionPrimary=null;cx.length=0}var Nw=$l.ReactCurrentDispatcher,dx=$l.ReactCurrentBatchConfig,oh=0,jt=null,xr=null,Fr=null,$b=!1,Ng=!1,M0=0,Ree=0;function Kr(){throw Error(Y(321))}function xO(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!mo(e[r],t[r]))return!1;return!0}function EO(e,t,r,i,n,s){if(oh=s,jt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Nw.current=e===null||e.memoizedState===null?jee:Vee,e=r(i,n),Ng){s=0;do{if(Ng=!1,M0=0,25<=s)throw Error(Y(301));s+=1,Fr=xr=null,t.updateQueue=null,Nw.current=zee,e=r(i,n)}while(Ng)}if(Nw.current=xb,t=xr!==null&&xr.next!==null,oh=0,Fr=xr=jt=null,$b=!1,t)throw Error(Y(300));return e}function TO(){var e=M0!==0;return M0=0,e}function Bo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fr===null?jt.memoizedState=Fr=e:Fr=Fr.next=e,Fr}function gs(){if(xr===null){var e=jt.alternate;e=e!==null?e.memoizedState:null}else e=xr.next;var t=Fr===null?jt.memoizedState:Fr.next;if(t!==null)Fr=t,xr=e;else{if(e===null)throw Error(Y(310));xr=e,e={memoizedState:xr.memoizedState,baseState:xr.baseState,baseQueue:xr.baseQueue,queue:xr.queue,next:null},Fr===null?jt.memoizedState=Fr=e:Fr=Fr.next=e}return Fr}function I0(e,t){return typeof t=="function"?t(e):t}function hx(e){var t=gs(),r=t.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=e;var i=xr,n=i.baseQueue,s=r.pending;if(s!==null){if(n!==null){var o=n.next;n.next=s.next,s.next=o}i.baseQueue=n=s,r.pending=null}if(n!==null){s=n.next,i=i.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((oh&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:e(i,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=i):l=l.next=f,jt.lanes|=h,ah|=h}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,mo(i,t.memoizedState)||(Ji=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=l,r.lastRenderedState=i}if(e=r.interleaved,e!==null){n=e;do s=n.lane,jt.lanes|=s,ah|=s,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function px(e){var t=gs(),r=t.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=e;var i=r.dispatch,n=r.pending,s=t.memoizedState;if(n!==null){r.pending=null;var o=n=n.next;do s=e(s,o.action),o=o.next;while(o!==n);mo(s,t.memoizedState)||(Ji=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,i]}function BV(){}function qV(e,t){var r=jt,i=gs(),n=t(),s=!mo(i.memoizedState,n);if(s&&(i.memoizedState=n,Ji=!0),i=i.queue,MO(JV.bind(null,r,i,e),[e]),i.getSnapshot!==t||s||Fr!==null&&Fr.memoizedState.tag&1){if(r.flags|=2048,C0(9,HV.bind(null,r,i,n,t),void 0,null),Nr===null)throw Error(Y(349));(oh&30)!==0||WV(r,t,n)}return n}function WV(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=jt.updateQueue,t===null?(t={lastEffect:null,stores:null},jt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function HV(e,t,r,i){t.value=r,t.getSnapshot=i,ZV(t)&&YV(e)}function JV(e,t,r){return r(function(){ZV(t)&&YV(e)})}function ZV(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!mo(e,r)}catch{return!0}}function YV(e){var t=fl(e,1);t!==null&&uo(t,e,1,-1)}function rF(e){var t=Bo();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:I0,lastRenderedState:e},t.queue=e,e=e.dispatch=Dee.bind(null,jt,e),[t.memoizedState,e]}function C0(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=jt.updateQueue,t===null?(t={lastEffect:null,stores:null},jt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function QV(){return gs().memoizedState}function Dw(e,t,r,i){var n=Bo();jt.flags|=e,n.memoizedState=C0(1|t,r,void 0,i===void 0?null:i)}function f2(e,t,r,i){var n=gs();i=i===void 0?null:i;var s=void 0;if(xr!==null){var o=xr.memoizedState;if(s=o.destroy,i!==null&&xO(i,o.deps)){n.memoizedState=C0(t,r,s,i);return}}jt.flags|=e,n.memoizedState=C0(1|t,r,s,i)}function iF(e,t){return Dw(8390656,8,e,t)}function MO(e,t){return f2(2048,8,e,t)}function KV(e,t){return f2(4,2,e,t)}function XV(e,t){return f2(4,4,e,t)}function ez(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function tz(e,t,r){return r=r!=null?r.concat([e]):null,f2(4,4,ez.bind(null,t,e),r)}function IO(){}function rz(e,t){var r=gs();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&xO(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function iz(e,t){var r=gs();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&xO(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function nz(e,t,r){return(oh&21)===0?(e.baseState&&(e.baseState=!1,Ji=!0),e.memoizedState=r):(mo(r,t)||(r=aV(),jt.lanes|=r,ah|=r,e.baseState=!0),t)}function Fee(e,t){var r=lt;lt=r!==0&&4>r?r:4,e(!0);var i=dx.transition;dx.transition={};try{e(!1),t()}finally{lt=r,dx.transition=i}}function sz(){return gs().memoizedState}function Nee(e,t,r){var i=Ku(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},oz(e))az(t,r);else if(r=NV(e,t,r,i),r!==null){var n=Mi();uo(r,e,i,n),lz(r,t,i)}}function Dee(e,t,r){var i=Ku(e),n={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(oz(e))az(t,n);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,r);if(n.hasEagerState=!0,n.eagerState=a,mo(a,o)){var l=t.interleaved;l===null?(n.next=n,wO(t)):(n.next=l.next,l.next=n),t.interleaved=n;return}}catch{}finally{}r=NV(e,t,n,i),r!==null&&(n=Mi(),uo(r,e,i,n),lz(r,t,i))}}function oz(e){var t=e.alternate;return e===jt||t!==null&&t===jt}function az(e,t){Ng=$b=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function lz(e,t,r){if((r&4194240)!==0){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,sO(e,r)}}var xb={readContext:ys,useCallback:Kr,useContext:Kr,useEffect:Kr,useImperativeHandle:Kr,useInsertionEffect:Kr,useLayoutEffect:Kr,useMemo:Kr,useReducer:Kr,useRef:Kr,useState:Kr,useDebugValue:Kr,useDeferredValue:Kr,useTransition:Kr,useMutableSource:Kr,useSyncExternalStore:Kr,useId:Kr,unstable_isNewReconciler:!1},jee={readContext:ys,useCallback:function(e,t){return Bo().memoizedState=[e,t===void 0?null:t],e},useContext:ys,useEffect:iF,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Dw(4194308,4,ez.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Dw(4194308,4,e,t)},useInsertionEffect:function(e,t){return Dw(4,2,e,t)},useMemo:function(e,t){var r=Bo();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=Bo();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Nee.bind(null,jt,e),[i.memoizedState,e]},useRef:function(e){var t=Bo();return e={current:e},t.memoizedState=e},useState:rF,useDebugValue:IO,useDeferredValue:function(e){return Bo().memoizedState=e},useTransition:function(){var e=rF(!1),t=e[0];return e=Fee.bind(null,e[1]),Bo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=jt,n=Bo();if(Lt){if(r===void 0)throw Error(Y(407));r=r()}else{if(r=t(),Nr===null)throw Error(Y(349));(oh&30)!==0||WV(i,t,r)}n.memoizedState=r;var s={value:r,getSnapshot:t};return n.queue=s,iF(JV.bind(null,i,s,e),[e]),i.flags|=2048,C0(9,HV.bind(null,i,s,r,t),void 0,null),r},useId:function(){var e=Bo(),t=Nr.identifierPrefix;if(Lt){var r=nl,i=il;r=(i&~(1<<32-lo(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=M0++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Ree++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Vee={readContext:ys,useCallback:rz,useContext:ys,useEffect:MO,useImperativeHandle:tz,useInsertionEffect:KV,useLayoutEffect:XV,useMemo:iz,useReducer:hx,useRef:QV,useState:function(){return hx(I0)},useDebugValue:IO,useDeferredValue:function(e){var t=gs();return nz(t,xr.memoizedState,e)},useTransition:function(){var e=hx(I0)[0],t=gs().memoizedState;return[e,t]},useMutableSource:BV,useSyncExternalStore:qV,useId:sz,unstable_isNewReconciler:!1},zee={readContext:ys,useCallback:rz,useContext:ys,useEffect:MO,useImperativeHandle:tz,useInsertionEffect:KV,useLayoutEffect:XV,useMemo:iz,useReducer:px,useRef:QV,useState:function(){return px(I0)},useDebugValue:IO,useDeferredValue:function(e){var t=gs();return xr===null?t.memoizedState=e:nz(t,xr.memoizedState,e)},useTransition:function(){var e=px(I0)[0],t=gs().memoizedState;return[e,t]},useMutableSource:BV,useSyncExternalStore:qV,useId:sz,unstable_isNewReconciler:!1};function jf(e,t){try{var r="",i=t;do r+=mX(i),i=i.return;while(i);var n=r}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:n,digest:null}}function fx(e,t,r){return{value:e,source:null,stack:r!=null?r:null,digest:t!=null?t:null}}function rM(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Uee=typeof WeakMap=="function"?WeakMap:Map;function uz(e,t,r){r=al(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){Tb||(Tb=!0,hM=i),rM(e,t)},r}function cz(e,t,r){r=al(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var n=t.value;r.payload=function(){return i(n)},r.callback=function(){rM(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){rM(e,t),typeof i!="function"&&(Qu===null?Qu=new Set([this]):Qu.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function nF(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new Uee;var n=new Set;i.set(t,n)}else n=i.get(t),n===void 0&&(n=new Set,i.set(t,n));n.has(r)||(n.add(r),e=rte.bind(null,e,t,r),t.then(e,e))}function sF(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function oF(e,t,r,i,n){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=al(-1,1),t.tag=2,Yu(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var Gee=$l.ReactCurrentOwner,Ji=!1;function _i(e,t,r,i){t.child=e===null?UV(t,null,r,i):Nf(t,e.child,r,i)}function aF(e,t,r,i,n){r=r.render;var s=t.ref;return mf(t,n),i=EO(e,t,r,i,s,n),r=TO(),e!==null&&!Ji?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,ml(e,t,n)):(Lt&&r&&pO(t),t.flags|=1,_i(e,t,i,n),t.child)}function lF(e,t,r,i,n){if(e===null){var s=r.type;return typeof s=="function"&&!FO(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,dz(e,t,s,i,n)):(e=Uw(r.type,null,i,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,(e.lanes&n)===0){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:b0,r(o,i)&&e.ref===t.ref)return ml(e,t,n)}return t.flags|=1,e=Xu(s,i),e.ref=t.ref,e.return=t,t.child=e}function dz(e,t,r,i,n){if(e!==null){var s=e.memoizedProps;if(b0(s,i)&&e.ref===t.ref)if(Ji=!1,t.pendingProps=i=s,(e.lanes&n)!==0)(e.flags&131072)!==0&&(Ji=!0);else return t.lanes=e.lanes,ml(e,t,n)}return iM(e,t,r,i,n)}function hz(e,t,r){var i=t.pendingProps,n=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(Zp,Mn),Mn|=r;else{if((r&1073741824)===0)return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,mt(Zp,Mn),Mn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:r,mt(Zp,Mn),Mn|=i}else s!==null?(i=s.baseLanes|r,t.memoizedState=null):i=r,mt(Zp,Mn),Mn|=i;return _i(e,t,n,r),t.child}function pz(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function iM(e,t,r,i,n){var s=Ki(r)?nh:ai.current;return s=Rf(t,s),mf(t,n),r=EO(e,t,r,i,s,n),i=TO(),e!==null&&!Ji?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,ml(e,t,n)):(Lt&&i&&pO(t),t.flags|=1,_i(e,t,r,n),t.child)}function uF(e,t,r,i,n){if(Ki(r)){var s=!0;yb(t)}else s=!1;if(mf(t,n),t.stateNode===null)jw(e,t),VV(t,r,i),tM(t,r,i,n),i=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=ys(c):(c=Ki(r)?nh:ai.current,c=Rf(t,c));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&eF(t,o,i,c),xu=!1;var m=t.memoizedState;o.state=m,bb(t,i,o,n),l=t.memoizedState,a!==i||m!==l||Qi.current||xu?(typeof h=="function"&&(eM(t,r,h,i),l=t.memoizedState),(a=xu||XR(t,r,a,i,m,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,DV(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Zs(t.type,a),o.props=c,f=t.pendingProps,m=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=ys(l):(l=Ki(r)?nh:ai.current,l=Rf(t,l));var y=r.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&eF(t,o,i,l),xu=!1,m=t.memoizedState,o.state=m,bb(t,i,o,n);var g=t.memoizedState;a!==f||m!==g||Qi.current||xu?(typeof y=="function"&&(eM(t,r,y,i),g=t.memoizedState),(c=xu||XR(t,r,c,i,m,g,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return nM(e,t,r,i,s,n)}function nM(e,t,r,i,n,s){pz(e,t);var o=(t.flags&128)!==0;if(!i&&!o)return n&&JR(t,r,!1),ml(e,t,s);i=t.stateNode,Gee.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&o?(t.child=Nf(t,e.child,null,s),t.child=Nf(t,null,a,s)):_i(e,t,a,s),t.memoizedState=i.state,n&&JR(t,r,!0),t.child}function fz(e){var t=e.stateNode;t.pendingContext?HR(e,t.pendingContext,t.pendingContext!==t.context):t.context&&HR(e,t.context,!1),bO(e,t.containerInfo)}function cF(e,t,r,i,n){return Ff(),mO(n),t.flags|=256,_i(e,t,r,i),t.child}var sM={dehydrated:null,treeContext:null,retryLane:0};function oM(e){return{baseLanes:e,cachePool:null,transitions:null}}function mz(e,t,r){var i=t.pendingProps,n=Nt.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(n&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),mt(Nt,n&1),e===null)return KT(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,s?(i=t.mode,s=t.child,o={mode:"hidden",children:o},(i&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=g2(o,i,0,null),e=Zd(e,i,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=oM(r),t.memoizedState=sM,e):CO(t,o));if(n=e.memoizedState,n!==null&&(a=n.dehydrated,a!==null))return Bee(e,t,o,i,a,n,r);if(s){s=i.fallback,o=t.mode,n=e.child,a=n.sibling;var l={mode:"hidden",children:i.children};return(o&1)===0&&t.child!==n?(i=t.child,i.childLanes=0,i.pendingProps=l,t.deletions=null):(i=Xu(n,l),i.subtreeFlags=n.subtreeFlags&14680064),a!==null?s=Xu(a,s):(s=Zd(s,o,r,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,o=e.child.memoizedState,o=o===null?oM(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~r,t.memoizedState=sM,i}return s=e.child,e=s.sibling,i=Xu(s,{mode:"visible",children:i.children}),(t.mode&1)===0&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function CO(e,t){return t=g2({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function g1(e,t,r,i){return i!==null&&mO(i),Nf(t,e.child,null,r),e=CO(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Bee(e,t,r,i,n,s,o){if(r)return t.flags&256?(t.flags&=-257,i=fx(Error(Y(422))),g1(e,t,o,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=i.fallback,n=t.mode,i=g2({mode:"visible",children:i.children},n,0,null),s=Zd(s,n,o,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,(t.mode&1)!==0&&Nf(t,e.child,null,o),t.child.memoizedState=oM(o),t.memoizedState=sM,s);if((t.mode&1)===0)return g1(e,t,o,null);if(n.data==="$!"){if(i=n.nextSibling&&n.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Y(419)),i=fx(s,i,void 0),g1(e,t,o,i)}if(a=(o&e.childLanes)!==0,Ji||a){if(i=Nr,i!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=(n&(i.suspendedLanes|o))!==0?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,fl(e,n),uo(i,e,n,-1))}return RO(),i=fx(Error(Y(421))),g1(e,t,o,i)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=ite.bind(null,e),n._reactRetry=t,null):(e=s.treeContext,kn=Zu(n.nextSibling),Ln=t,Lt=!0,to=null,e!==null&&(ss[os++]=il,ss[os++]=nl,ss[os++]=sh,il=e.id,nl=e.overflow,sh=t),t=CO(t,i.children),t.flags|=4096,t)}function dF(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),XT(e.return,t,r)}function mx(e,t,r,i,n){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:n}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=r,s.tailMode=n)}function yz(e,t,r){var i=t.pendingProps,n=i.revealOrder,s=i.tail;if(_i(e,t,i.children,r),i=Nt.current,(i&2)!==0)i=i&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&dF(e,r,t);else if(e.tag===19)dF(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(mt(Nt,i),(t.mode&1)===0)t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&Sb(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),mx(t,!1,n,r,s);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Sb(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}mx(t,!0,r,null,s);break;case"together":mx(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function jw(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ml(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ah|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(Y(153));if(t.child!==null){for(e=t.child,r=Xu(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Xu(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function qee(e,t,r){switch(t.tag){case 3:fz(t),Ff();break;case 5:GV(t);break;case 1:Ki(t.type)&&yb(t);break;case 4:bO(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,n=t.memoizedProps.value;mt(wb,i._currentValue),i._currentValue=n;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(mt(Nt,Nt.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?mz(e,t,r):(mt(Nt,Nt.current&1),e=ml(e,t,r),e!==null?e.sibling:null);mt(Nt,Nt.current&1);break;case 19:if(i=(r&t.childLanes)!==0,(e.flags&128)!==0){if(i)return yz(e,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),mt(Nt,Nt.current),i)break;return null;case 22:case 23:return t.lanes=0,hz(e,t,r)}return ml(e,t,r)}var gz,aM,vz,wz;gz=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};aM=function(){};vz=function(e,t,r,i){var n=e.memoizedProps;if(n!==i){e=t.stateNode,Od(ea.current);var s=null;switch(r){case"input":n=CT(e,n),i=CT(e,i),s=[];break;case"select":n=Vt({},n,{value:void 0}),i=Vt({},i,{value:void 0}),s=[];break;case"textarea":n=OT(e,n),i=OT(e,i),s=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=fb)}PT(r,i);var o;r=null;for(c in n)if(!i.hasOwnProperty(c)&&n.hasOwnProperty(c)&&n[c]!=null)if(c==="style"){var a=n[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(f0.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=n!=null?n[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(f0.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&vt("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};wz=function(e,t,r,i){r!==i&&(t.flags|=4)};function ey(e,t){if(!Lt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Xr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags&14680064,i|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function Wee(e,t,r){var i=t.pendingProps;switch(fO(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xr(t),null;case 1:return Ki(t.type)&&mb(),Xr(t),null;case 3:return i=t.stateNode,Df(),St(Qi),St(ai),$O(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(m1(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,to!==null&&(mM(to),to=null))),aM(e,t),Xr(t),null;case 5:SO(t);var n=Od(T0.current);if(r=t.type,e!==null&&t.stateNode!=null)vz(e,t,r,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(Y(166));return Xr(t),null}if(e=Od(ea.current),m1(t)){i=t.stateNode,r=t.type;var s=t.memoizedProps;switch(i[Jo]=t,i[x0]=s,e=(t.mode&1)!==0,r){case"dialog":vt("cancel",i),vt("close",i);break;case"iframe":case"object":case"embed":vt("load",i);break;case"video":case"audio":for(n=0;n<Py.length;n++)vt(Py[n],i);break;case"source":vt("error",i);break;case"img":case"image":case"link":vt("error",i),vt("load",i);break;case"details":vt("toggle",i);break;case"input":_R(i,s),vt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},vt("invalid",i);break;case"textarea":SR(i,s),vt("invalid",i)}PT(r,s),n=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&f1(i.textContent,a,e),n=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&f1(i.textContent,a,e),n=["children",""+a]):f0.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&vt("scroll",i)}switch(r){case"input":o1(i),bR(i,s,!0);break;case"textarea":o1(i),$R(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=fb)}i=n,t.updateQueue=i,i!==null&&(t.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=W8(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=o.createElement(r,{is:i.is}):(e=o.createElement(r),r==="select"&&(o=e,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):e=o.createElementNS(e,r),e[Jo]=t,e[x0]=i,gz(e,t,!1,!1),t.stateNode=e;e:{switch(o=RT(r,i),r){case"dialog":vt("cancel",e),vt("close",e),n=i;break;case"iframe":case"object":case"embed":vt("load",e),n=i;break;case"video":case"audio":for(n=0;n<Py.length;n++)vt(Py[n],e);n=i;break;case"source":vt("error",e),n=i;break;case"img":case"image":case"link":vt("error",e),vt("load",e),n=i;break;case"details":vt("toggle",e),n=i;break;case"input":_R(e,i),n=CT(e,i),vt("invalid",e);break;case"option":n=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},n=Vt({},i,{value:void 0}),vt("invalid",e);break;case"textarea":SR(e,i),n=OT(e,i),vt("invalid",e);break;default:n=i}PT(r,n),a=n;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Z8(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&H8(e,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&m0(e,l):typeof l=="number"&&m0(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(f0.hasOwnProperty(s)?l!=null&&s==="onScroll"&&vt("scroll",e):l!=null&&XL(e,s,l,o))}switch(r){case"input":o1(e),bR(e,i,!1);break;case"textarea":o1(e),$R(e);break;case"option":i.value!=null&&e.setAttribute("value",""+ac(i.value));break;case"select":e.multiple=!!i.multiple,s=i.value,s!=null?df(e,!!i.multiple,s,!1):i.defaultValue!=null&&df(e,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=fb)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xr(t),null;case 6:if(e&&t.stateNode!=null)wz(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Y(166));if(r=Od(T0.current),Od(ea.current),m1(t)){if(i=t.stateNode,r=t.memoizedProps,i[Jo]=t,(s=i.nodeValue!==r)&&(e=Ln,e!==null))switch(e.tag){case 3:f1(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&f1(i.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Jo]=t,t.stateNode=i}return Xr(t),null;case 13:if(St(Nt),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Lt&&kn!==null&&(t.mode&1)!==0&&(t.flags&128)===0)FV(),Ff(),t.flags|=98560,s=!1;else if(s=m1(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(Y(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Y(317));s[Jo]=t}else Ff(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Xr(t),s=!1}else to!==null&&(mM(to),to=null),s=!0;if(!s)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Nt.current&1)!==0?Tr===0&&(Tr=3):RO())),t.updateQueue!==null&&(t.flags|=4),Xr(t),null);case 4:return Df(),aM(e,t),e===null&&S0(t.stateNode.containerInfo),Xr(t),null;case 10:return vO(t.type._context),Xr(t),null;case 17:return Ki(t.type)&&mb(),Xr(t),null;case 19:if(St(Nt),s=t.memoizedState,s===null)return Xr(t),null;if(i=(t.flags&128)!==0,o=s.rendering,o===null)if(i)ey(s,!1);else{if(Tr!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=Sb(e),o!==null){for(t.flags|=128,ey(s,!1),i=o.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)s=r,e=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return mt(Nt,Nt.current&1|2),t.child}e=e.sibling}s.tail!==null&&rr()>Vf&&(t.flags|=128,i=!0,ey(s,!1),t.lanes=4194304)}else{if(!i)if(e=Sb(o),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ey(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Lt)return Xr(t),null}else 2*rr()-s.renderingStartTime>Vf&&r!==1073741824&&(t.flags|=128,i=!0,ey(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(r=s.last,r!==null?r.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=rr(),t.sibling=null,r=Nt.current,mt(Nt,i?r&1|2:r&1),t):(Xr(t),null);case 22:case 23:return PO(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&(t.mode&1)!==0?(Mn&1073741824)!==0&&(Xr(t),t.subtreeFlags&6&&(t.flags|=8192)):Xr(t),null;case 24:return null;case 25:return null}throw Error(Y(156,t.tag))}function Hee(e,t){switch(fO(t),t.tag){case 1:return Ki(t.type)&&mb(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Df(),St(Qi),St(ai),$O(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return SO(t),null;case 13:if(St(Nt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Y(340));Ff()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return St(Nt),null;case 4:return Df(),null;case 10:return vO(t.type._context),null;case 22:case 23:return PO(),null;case 24:return null;default:return null}}var v1=!1,si=!1,Jee=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Jp(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Jt(e,t,i)}else r.current=null}function lM(e,t,r){try{r()}catch(i){Jt(e,t,i)}}var hF=!1;function Zee(e,t){if(qT=db,e=$V(),hO(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var n=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,h=0,f=e,m=null;t:for(;;){for(var y;f!==r||n!==0&&f.nodeType!==3||(a=o+n),f!==s||i!==0&&f.nodeType!==3||(l=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===e)break t;if(m===r&&++c===n&&(a=o),m===s&&++h===i&&(l=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(WT={focusedElem:e,selectionRange:r},db=!1,ue=t;ue!==null;)if(t=ue,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ue=e;else for(;ue!==null;){t=ue;try{var g=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,_=g.memoizedState,w=t.stateNode,b=w.getSnapshotBeforeUpdate(t.elementType===t.type?v:Zs(t.type,v),_);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(M){Jt(t,t.return,M)}if(e=t.sibling,e!==null){e.return=t.return,ue=e;break}ue=t.return}return g=hF,hF=!1,g}function Dg(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&e)===e){var s=n.destroy;n.destroy=void 0,s!==void 0&&lM(t,r,s)}n=n.next}while(n!==i)}}function m2(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function uM(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function _z(e){var t=e.alternate;t!==null&&(e.alternate=null,_z(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Jo],delete t[x0],delete t[ZT],delete t[Lee],delete t[Oee])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function bz(e){return e.tag===5||e.tag===3||e.tag===4}function pF(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bz(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cM(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=fb));else if(i!==4&&(e=e.child,e!==null))for(cM(e,t,r),e=e.sibling;e!==null;)cM(e,t,r),e=e.sibling}function dM(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(dM(e,t,r),e=e.sibling;e!==null;)dM(e,t,r),e=e.sibling}var Ur=null,Qs=!1;function Il(e,t,r){for(r=r.child;r!==null;)Sz(e,t,r),r=r.sibling}function Sz(e,t,r){if(Xo&&typeof Xo.onCommitFiberUnmount=="function")try{Xo.onCommitFiberUnmount(a2,r)}catch{}switch(r.tag){case 5:si||Jp(r,t);case 6:var i=Ur,n=Qs;Ur=null,Il(e,t,r),Ur=i,Qs=n,Ur!==null&&(Qs?(e=Ur,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ur.removeChild(r.stateNode));break;case 18:Ur!==null&&(Qs?(e=Ur,r=r.stateNode,e.nodeType===8?lx(e.parentNode,r):e.nodeType===1&&lx(e,r),w0(e)):lx(Ur,r.stateNode));break;case 4:i=Ur,n=Qs,Ur=r.stateNode.containerInfo,Qs=!0,Il(e,t,r),Ur=i,Qs=n;break;case 0:case 11:case 14:case 15:if(!si&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){n=i=i.next;do{var s=n,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&lM(r,t,o),n=n.next}while(n!==i)}Il(e,t,r);break;case 1:if(!si&&(Jp(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(a){Jt(r,t,a)}Il(e,t,r);break;case 21:Il(e,t,r);break;case 22:r.mode&1?(si=(i=si)||r.memoizedState!==null,Il(e,t,r),si=i):Il(e,t,r);break;default:Il(e,t,r)}}function fF(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Jee),t.forEach(function(i){var n=nte.bind(null,e,i);r.has(i)||(r.add(i),i.then(n,n))})}}function $s(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var n=r[i];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ur=a.stateNode,Qs=!1;break e;case 3:Ur=a.stateNode.containerInfo,Qs=!0;break e;case 4:Ur=a.stateNode.containerInfo,Qs=!0;break e}a=a.return}if(Ur===null)throw Error(Y(160));Sz(s,o,n),Ur=null,Qs=!1;var l=n.alternate;l!==null&&(l.return=null),n.return=null}catch(c){Jt(n,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$z(t,e),t=t.sibling}function $z(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if($s(t,e),bo(e),i&4){try{Dg(3,e,e.return),m2(3,e)}catch(v){Jt(e,e.return,v)}try{Dg(5,e,e.return)}catch(v){Jt(e,e.return,v)}}break;case 1:$s(t,e),bo(e),i&512&&r!==null&&Jp(r,r.return);break;case 5:if($s(t,e),bo(e),i&512&&r!==null&&Jp(r,r.return),e.flags&32){var n=e.stateNode;try{m0(n,"")}catch(v){Jt(e,e.return,v)}}if(i&4&&(n=e.stateNode,n!=null)){var s=e.memoizedProps,o=r!==null?r.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&B8(n,s),RT(a,o);var c=RT(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?Z8(n,f):h==="dangerouslySetInnerHTML"?H8(n,f):h==="children"?m0(n,f):XL(n,h,f,c)}switch(a){case"input":kT(n,s);break;case"textarea":q8(n,s);break;case"select":var m=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?df(n,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?df(n,!!s.multiple,s.defaultValue,!0):df(n,!!s.multiple,s.multiple?[]:"",!1))}n[x0]=s}catch(v){Jt(e,e.return,v)}}break;case 6:if($s(t,e),bo(e),i&4){if(e.stateNode===null)throw Error(Y(162));n=e.stateNode,s=e.memoizedProps;try{n.nodeValue=s}catch(v){Jt(e,e.return,v)}}break;case 3:if($s(t,e),bo(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{w0(t.containerInfo)}catch(v){Jt(e,e.return,v)}break;case 4:$s(t,e),bo(e);break;case 13:$s(t,e),bo(e),n=e.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(OO=rr())),i&4&&fF(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(si=(c=si)||h,$s(t,e),si=c):$s(t,e),bo(e),i&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!h&&(e.mode&1)!==0)for(ue=e,h=e.child;h!==null;){for(f=ue=h;ue!==null;){switch(m=ue,y=m.child,m.tag){case 0:case 11:case 14:case 15:Dg(4,m,m.return);break;case 1:Jp(m,m.return);var g=m.stateNode;if(typeof g.componentWillUnmount=="function"){i=m,r=m.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){Jt(i,r,v)}}break;case 5:Jp(m,m.return);break;case 22:if(m.memoizedState!==null){yF(f);continue}}y!==null?(y.return=m,ue=y):yF(f)}h=h.sibling}e:for(h=null,f=e;;){if(f.tag===5){if(h===null){h=f;try{n=f.stateNode,c?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=J8("display",o))}catch(v){Jt(e,e.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){Jt(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:$s(t,e),bo(e),i&4&&fF(e);break;case 21:break;default:$s(t,e),bo(e)}}function bo(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(bz(r)){var i=r;break e}r=r.return}throw Error(Y(160))}switch(i.tag){case 5:var n=i.stateNode;i.flags&32&&(m0(n,""),i.flags&=-33);var s=pF(e);dM(e,s,n);break;case 3:case 4:var o=i.stateNode.containerInfo,a=pF(e);cM(e,a,o);break;default:throw Error(Y(161))}}catch(l){Jt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Yee(e,t,r){ue=e,xz(e)}function xz(e,t,r){for(var i=(e.mode&1)!==0;ue!==null;){var n=ue,s=n.child;if(n.tag===22&&i){var o=n.memoizedState!==null||v1;if(!o){var a=n.alternate,l=a!==null&&a.memoizedState!==null||si;a=v1;var c=si;if(v1=o,(si=l)&&!c)for(ue=n;ue!==null;)o=ue,l=o.child,o.tag===22&&o.memoizedState!==null?gF(n):l!==null?(l.return=o,ue=l):gF(n);for(;s!==null;)ue=s,xz(s),s=s.sibling;ue=n,v1=a,si=c}mF(e)}else(n.subtreeFlags&8772)!==0&&s!==null?(s.return=n,ue=s):mF(e)}}function mF(e){for(;ue!==null;){var t=ue;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:si||m2(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!si)if(r===null)i.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:Zs(t.type,r.memoizedProps);i.componentDidUpdate(n,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&KR(t,s,i);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}KR(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&w0(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}si||t.flags&512&&uM(t)}catch(m){Jt(t,t.return,m)}}if(t===e){ue=null;break}if(r=t.sibling,r!==null){r.return=t.return,ue=r;break}ue=t.return}}function yF(e){for(;ue!==null;){var t=ue;if(t===e){ue=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ue=r;break}ue=t.return}}function gF(e){for(;ue!==null;){var t=ue;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{m2(4,t)}catch(l){Jt(t,r,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var n=t.return;try{i.componentDidMount()}catch(l){Jt(t,n,l)}}var s=t.return;try{uM(t)}catch(l){Jt(t,s,l)}break;case 5:var o=t.return;try{uM(t)}catch(l){Jt(t,o,l)}}}catch(l){Jt(t,t.return,l)}if(t===e){ue=null;break}var a=t.sibling;if(a!==null){a.return=t.return,ue=a;break}ue=t.return}}var Qee=Math.ceil,Eb=$l.ReactCurrentDispatcher,kO=$l.ReactCurrentOwner,ps=$l.ReactCurrentBatchConfig,He=0,Nr=null,pr=null,qr=0,Mn=0,Zp=mc(0),Tr=0,k0=null,ah=0,y2=0,LO=0,jg=null,Bi=null,OO=0,Vf=1/0,Ya=null,Tb=!1,hM=null,Qu=null,w1=!1,Du=null,Mb=0,Vg=0,pM=null,Vw=-1,zw=0;function Mi(){return(He&6)!==0?rr():Vw!==-1?Vw:Vw=rr()}function Ku(e){return(e.mode&1)===0?1:(He&2)!==0&&qr!==0?qr&-qr:Pee.transition!==null?(zw===0&&(zw=aV()),zw):(e=lt,e!==0||(e=window.event,e=e===void 0?16:fV(e.type)),e)}function uo(e,t,r,i){if(50<Vg)throw Vg=0,pM=null,Error(Y(185));fv(e,r,i),((He&2)===0||e!==Nr)&&(e===Nr&&((He&2)===0&&(y2|=r),Tr===4&&Pu(e,qr)),Xi(e,i),r===1&&He===0&&(t.mode&1)===0&&(Vf=rr()+500,h2&&yc()))}function Xi(e,t){var r=e.callbackNode;PX(e,t);var i=cb(e,e===Nr?qr:0);if(i===0)r!==null&&TR(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&TR(r),t===1)e.tag===0?Aee(vF.bind(null,e)):AV(vF.bind(null,e)),Cee(function(){(He&6)===0&&yc()}),r=null;else{switch(lV(i)){case 1:r=nO;break;case 4:r=sV;break;case 16:r=ub;break;case 536870912:r=oV;break;default:r=ub}r=Oz(r,Ez.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Ez(e,t){if(Vw=-1,zw=0,(He&6)!==0)throw Error(Y(327));var r=e.callbackNode;if(yf()&&e.callbackNode!==r)return null;var i=cb(e,e===Nr?qr:0);if(i===0)return null;if((i&30)!==0||(i&e.expiredLanes)!==0||t)t=Ib(e,i);else{t=i;var n=He;He|=2;var s=Mz();(Nr!==e||qr!==t)&&(Ya=null,Vf=rr()+500,Jd(e,t));do try{ete();break}catch(a){Tz(e,a)}while(1);gO(),Eb.current=s,He=n,pr!==null?t=0:(Nr=null,qr=0,t=Tr)}if(t!==0){if(t===2&&(n=VT(e),n!==0&&(i=n,t=fM(e,n))),t===1)throw r=k0,Jd(e,0),Pu(e,i),Xi(e,rr()),r;if(t===6)Pu(e,i);else{if(n=e.current.alternate,(i&30)===0&&!Kee(n)&&(t=Ib(e,i),t===2&&(s=VT(e),s!==0&&(i=s,t=fM(e,s))),t===1))throw r=k0,Jd(e,0),Pu(e,i),Xi(e,rr()),r;switch(e.finishedWork=n,e.finishedLanes=i,t){case 0:case 1:throw Error(Y(345));case 2:Pc(e,Bi,Ya);break;case 3:if(Pu(e,i),(i&130023424)===i&&(t=OO+500-rr(),10<t)){if(cb(e,0)!==0)break;if(n=e.suspendedLanes,(n&i)!==i){Mi(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=JT(Pc.bind(null,e,Bi,Ya),t);break}Pc(e,Bi,Ya);break;case 4:if(Pu(e,i),(i&4194240)===i)break;for(t=e.eventTimes,n=-1;0<i;){var o=31-lo(i);s=1<<o,o=t[o],o>n&&(n=o),i&=~s}if(i=n,i=rr()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Qee(i/1960))-i,10<i){e.timeoutHandle=JT(Pc.bind(null,e,Bi,Ya),i);break}Pc(e,Bi,Ya);break;case 5:Pc(e,Bi,Ya);break;default:throw Error(Y(329))}}}return Xi(e,rr()),e.callbackNode===r?Ez.bind(null,e):null}function fM(e,t){var r=jg;return e.current.memoizedState.isDehydrated&&(Jd(e,t).flags|=256),e=Ib(e,t),e!==2&&(t=Bi,Bi=r,t!==null&&mM(t)),e}function mM(e){Bi===null?Bi=e:Bi.push.apply(Bi,e)}function Kee(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var n=r[i],s=n.getSnapshot;n=n.value;try{if(!mo(s(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Pu(e,t){for(t&=~LO,t&=~y2,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-lo(t),i=1<<r;e[r]=-1,t&=~i}}function vF(e){if((He&6)!==0)throw Error(Y(327));yf();var t=cb(e,0);if((t&1)===0)return Xi(e,rr()),null;var r=Ib(e,t);if(e.tag!==0&&r===2){var i=VT(e);i!==0&&(t=i,r=fM(e,i))}if(r===1)throw r=k0,Jd(e,0),Pu(e,t),Xi(e,rr()),r;if(r===6)throw Error(Y(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pc(e,Bi,Ya),Xi(e,rr()),null}function AO(e,t){var r=He;He|=1;try{return e(t)}finally{He=r,He===0&&(Vf=rr()+500,h2&&yc())}}function lh(e){Du!==null&&Du.tag===0&&(He&6)===0&&yf();var t=He;He|=1;var r=ps.transition,i=lt;try{if(ps.transition=null,lt=1,e)return e()}finally{lt=i,ps.transition=r,He=t,(He&6)===0&&yc()}}function PO(){Mn=Zp.current,St(Zp)}function Jd(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Iee(r)),pr!==null)for(r=pr.return;r!==null;){var i=r;switch(fO(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&mb();break;case 3:Df(),St(Qi),St(ai),$O();break;case 5:SO(i);break;case 4:Df();break;case 13:St(Nt);break;case 19:St(Nt);break;case 10:vO(i.type._context);break;case 22:case 23:PO()}r=r.return}if(Nr=e,pr=e=Xu(e.current,null),qr=Mn=t,Tr=0,k0=null,LO=y2=ah=0,Bi=jg=null,Ld!==null){for(t=0;t<Ld.length;t++)if(r=Ld[t],i=r.interleaved,i!==null){r.interleaved=null;var n=i.next,s=r.pending;if(s!==null){var o=s.next;s.next=n,i.next=o}r.pending=i}Ld=null}return e}function Tz(e,t){do{var r=pr;try{if(gO(),Nw.current=xb,$b){for(var i=jt.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}$b=!1}if(oh=0,Fr=xr=jt=null,Ng=!1,M0=0,kO.current=null,r===null||r.return===null){Tr=1,k0=t,pr=null;break}e:{var s=e,o=r.return,a=r,l=t;if(t=qr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,f=h.tag;if((h.mode&1)===0&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=sF(o);if(y!==null){y.flags&=-257,oF(y,o,a,s,t),y.mode&1&&nF(s,c,t),t=y,l=c;var g=t.updateQueue;if(g===null){var v=new Set;v.add(l),t.updateQueue=v}else g.add(l);break e}else{if((t&1)===0){nF(s,c,t),RO();break e}l=Error(Y(426))}}else if(Lt&&a.mode&1){var _=sF(o);if(_!==null){(_.flags&65536)===0&&(_.flags|=256),oF(_,o,a,s,t),mO(jf(l,a));break e}}s=l=jf(l,a),Tr!==4&&(Tr=2),jg===null?jg=[s]:jg.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var w=uz(s,l,t);QR(s,w);break e;case 1:a=l;var b=s.type,S=s.stateNode;if((s.flags&128)===0&&(typeof b.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Qu===null||!Qu.has(S)))){s.flags|=65536,t&=-t,s.lanes|=t;var M=cz(s,a,t);QR(s,M);break e}}s=s.return}while(s!==null)}Cz(r)}catch(T){t=T,pr===r&&r!==null&&(pr=r=r.return);continue}break}while(1)}function Mz(){var e=Eb.current;return Eb.current=xb,e===null?xb:e}function RO(){(Tr===0||Tr===3||Tr===2)&&(Tr=4),Nr===null||(ah&268435455)===0&&(y2&268435455)===0||Pu(Nr,qr)}function Ib(e,t){var r=He;He|=2;var i=Mz();(Nr!==e||qr!==t)&&(Ya=null,Jd(e,t));do try{Xee();break}catch(n){Tz(e,n)}while(1);if(gO(),He=r,Eb.current=i,pr!==null)throw Error(Y(261));return Nr=null,qr=0,Tr}function Xee(){for(;pr!==null;)Iz(pr)}function ete(){for(;pr!==null&&!EX();)Iz(pr)}function Iz(e){var t=Lz(e.alternate,e,Mn);e.memoizedProps=e.pendingProps,t===null?Cz(e):pr=t,kO.current=null}function Cz(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=Wee(r,t,Mn),r!==null){pr=r;return}}else{if(r=Hee(r,t),r!==null){r.flags&=32767,pr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Tr=6,pr=null;return}}if(t=t.sibling,t!==null){pr=t;return}pr=t=e}while(t!==null);Tr===0&&(Tr=5)}function Pc(e,t,r){var i=lt,n=ps.transition;try{ps.transition=null,lt=1,tte(e,t,r,i)}finally{ps.transition=n,lt=i}return null}function tte(e,t,r,i){do yf();while(Du!==null);if((He&6)!==0)throw Error(Y(327));r=e.finishedWork;var n=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Y(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(RX(e,s),e===Nr&&(pr=Nr=null,qr=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||w1||(w1=!0,Oz(ub,function(){return yf(),null})),s=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||s){s=ps.transition,ps.transition=null;var o=lt;lt=1;var a=He;He|=4,kO.current=null,Zee(e,r),$z(r,e),bee(WT),db=!!qT,WT=qT=null,e.current=r,Yee(r),TX(),He=a,lt=o,ps.transition=s}else e.current=r;if(w1&&(w1=!1,Du=e,Mb=n),s=e.pendingLanes,s===0&&(Qu=null),CX(r.stateNode),Xi(e,rr()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],i(n.value,{componentStack:n.stack,digest:n.digest});if(Tb)throw Tb=!1,e=hM,hM=null,e;return(Mb&1)!==0&&e.tag!==0&&yf(),s=e.pendingLanes,(s&1)!==0?e===pM?Vg++:(Vg=0,pM=e):Vg=0,yc(),null}function yf(){if(Du!==null){var e=lV(Mb),t=ps.transition,r=lt;try{if(ps.transition=null,lt=16>e?16:e,Du===null)var i=!1;else{if(e=Du,Du=null,Mb=0,(He&6)!==0)throw Error(Y(331));var n=He;for(He|=4,ue=e.current;ue!==null;){var s=ue,o=s.child;if((ue.flags&16)!==0){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ue=c;ue!==null;){var h=ue;switch(h.tag){case 0:case 11:case 15:Dg(8,h,s)}var f=h.child;if(f!==null)f.return=h,ue=f;else for(;ue!==null;){h=ue;var m=h.sibling,y=h.return;if(_z(h),h===c){ue=null;break}if(m!==null){m.return=y,ue=m;break}ue=y}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}ue=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,ue=o;else e:for(;ue!==null;){if(s=ue,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:Dg(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,ue=w;break e}ue=s.return}}var b=e.current;for(ue=b;ue!==null;){o=ue;var S=o.child;if((o.subtreeFlags&2064)!==0&&S!==null)S.return=o,ue=S;else e:for(o=b;ue!==null;){if(a=ue,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:m2(9,a)}}catch(T){Jt(a,a.return,T)}if(a===o){ue=null;break e}var M=a.sibling;if(M!==null){M.return=a.return,ue=M;break e}ue=a.return}}if(He=n,yc(),Xo&&typeof Xo.onPostCommitFiberRoot=="function")try{Xo.onPostCommitFiberRoot(a2,e)}catch{}i=!0}return i}finally{lt=r,ps.transition=t}}return!1}function wF(e,t,r){t=jf(r,t),t=uz(e,t,1),e=Yu(e,t,1),t=Mi(),e!==null&&(fv(e,1,t),Xi(e,t))}function Jt(e,t,r){if(e.tag===3)wF(e,e,r);else for(;t!==null;){if(t.tag===3){wF(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Qu===null||!Qu.has(i))){e=jf(r,e),e=cz(t,e,1),t=Yu(t,e,1),e=Mi(),t!==null&&(fv(t,1,e),Xi(t,e));break}}t=t.return}}function rte(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=Mi(),e.pingedLanes|=e.suspendedLanes&r,Nr===e&&(qr&r)===r&&(Tr===4||Tr===3&&(qr&130023424)===qr&&500>rr()-OO?Jd(e,0):LO|=r),Xi(e,t)}function kz(e,t){t===0&&((e.mode&1)===0?t=1:(t=u1,u1<<=1,(u1&130023424)===0&&(u1=4194304)));var r=Mi();e=fl(e,t),e!==null&&(fv(e,t,r),Xi(e,r))}function ite(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),kz(e,r)}function nte(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(Y(314))}i!==null&&i.delete(t),kz(e,r)}var Lz;Lz=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Qi.current)Ji=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return Ji=!1,qee(e,t,r);Ji=(e.flags&131072)!==0}else Ji=!1,Lt&&(t.flags&1048576)!==0&&PV(t,vb,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;jw(e,t),e=t.pendingProps;var n=Rf(t,ai.current);mf(t,r),n=EO(null,t,i,e,n,r);var s=TO();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ki(i)?(s=!0,yb(t)):s=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,_O(t),n.updater=p2,t.stateNode=n,n._reactInternals=t,tM(t,i,e,r),t=nM(null,t,i,!0,s,r)):(t.tag=0,Lt&&s&&pO(t),_i(null,t,n,r),t=t.child),t;case 16:i=t.elementType;e:{switch(jw(e,t),e=t.pendingProps,n=i._init,i=n(i._payload),t.type=i,n=t.tag=ote(i),e=Zs(i,e),n){case 0:t=iM(null,t,i,e,r);break e;case 1:t=uF(null,t,i,e,r);break e;case 11:t=aF(null,t,i,e,r);break e;case 14:t=lF(null,t,i,Zs(i.type,e),r);break e}throw Error(Y(306,i,""))}return t;case 0:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Zs(i,n),iM(e,t,i,n,r);case 1:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Zs(i,n),uF(e,t,i,n,r);case 3:e:{if(fz(t),e===null)throw Error(Y(387));i=t.pendingProps,s=t.memoizedState,n=s.element,DV(e,t),bb(t,i,null,r);var o=t.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){n=jf(Error(Y(423)),t),t=cF(e,t,i,r,n);break e}else if(i!==n){n=jf(Error(Y(424)),t),t=cF(e,t,i,r,n);break e}else for(kn=Zu(t.stateNode.containerInfo.firstChild),Ln=t,Lt=!0,to=null,r=UV(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ff(),i===n){t=ml(e,t,r);break e}_i(e,t,i,r)}t=t.child}return t;case 5:return GV(t),e===null&&KT(t),i=t.type,n=t.pendingProps,s=e!==null?e.memoizedProps:null,o=n.children,HT(i,n)?o=null:s!==null&&HT(i,s)&&(t.flags|=32),pz(e,t),_i(e,t,o,r),t.child;case 6:return e===null&&KT(t),null;case 13:return mz(e,t,r);case 4:return bO(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Nf(t,null,i,r):_i(e,t,i,r),t.child;case 11:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Zs(i,n),aF(e,t,i,n,r);case 7:return _i(e,t,t.pendingProps,r),t.child;case 8:return _i(e,t,t.pendingProps.children,r),t.child;case 12:return _i(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,n=t.pendingProps,s=t.memoizedProps,o=n.value,mt(wb,i._currentValue),i._currentValue=o,s!==null)if(mo(s.value,o)){if(s.children===n.children&&!Qi.current){t=ml(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=al(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),XT(s.return,r,t),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Y(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),XT(o,r,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}_i(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,i=t.pendingProps.children,mf(t,r),n=ys(n),i=i(n),t.flags|=1,_i(e,t,i,r),t.child;case 14:return i=t.type,n=Zs(i,t.pendingProps),n=Zs(i.type,n),lF(e,t,i,n,r);case 15:return dz(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Zs(i,n),jw(e,t),t.tag=1,Ki(i)?(e=!0,yb(t)):e=!1,mf(t,r),VV(t,i,n),tM(t,i,n,r),nM(null,t,i,!0,e,r);case 19:return yz(e,t,r);case 22:return hz(e,t,r)}throw Error(Y(156,t.tag))};function Oz(e,t){return nV(e,t)}function ste(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cs(e,t,r,i){return new ste(e,t,r,i)}function FO(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ote(e){if(typeof e=="function")return FO(e)?1:0;if(e!=null){if(e=e.$$typeof,e===tO)return 11;if(e===rO)return 14}return 2}function Xu(e,t){var r=e.alternate;return r===null?(r=cs(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Uw(e,t,r,i,n,s){var o=2;if(i=e,typeof e=="function")FO(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case jp:return Zd(r.children,n,s,t);case eO:o=8,n|=8;break;case ET:return e=cs(12,r,t,n|2),e.elementType=ET,e.lanes=s,e;case TT:return e=cs(13,r,t,n),e.elementType=TT,e.lanes=s,e;case MT:return e=cs(19,r,t,n),e.elementType=MT,e.lanes=s,e;case z8:return g2(r,n,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case j8:o=10;break e;case V8:o=9;break e;case tO:o=11;break e;case rO:o=14;break e;case $u:o=16,i=null;break e}throw Error(Y(130,e==null?e:typeof e,""))}return t=cs(o,r,t,n),t.elementType=e,t.type=i,t.lanes=s,t}function Zd(e,t,r,i){return e=cs(7,e,i,t),e.lanes=r,e}function g2(e,t,r,i){return e=cs(22,e,i,t),e.elementType=z8,e.lanes=r,e.stateNode={isHidden:!1},e}function yx(e,t,r){return e=cs(6,e,null,t),e.lanes=r,e}function gx(e,t,r){return t=cs(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ate(e,t,r,i,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Q$(0),this.expirationTimes=Q$(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Q$(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function NO(e,t,r,i,n,s,o,a,l){return e=new ate(e,t,r,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=cs(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},_O(s),e}function lte(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Dp,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function Az(e){if(!e)return lc;e=e._reactInternals;e:{if($h(e)!==e||e.tag!==1)throw Error(Y(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ki(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Y(171))}if(e.tag===1){var r=e.type;if(Ki(r))return OV(e,r,t)}return t}function Pz(e,t,r,i,n,s,o,a,l){return e=NO(r,i,!0,e,n,s,o,a,l),e.context=Az(null),r=e.current,i=Mi(),n=Ku(r),s=al(i,n),s.callback=t!=null?t:null,Yu(r,s,n),e.current.lanes=n,fv(e,n,i),Xi(e,i),e}function v2(e,t,r,i){var n=t.current,s=Mi(),o=Ku(n);return r=Az(r),t.context===null?t.context=r:t.pendingContext=r,t=al(s,o),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Yu(n,t,o),e!==null&&(uo(e,n,o,s),Fw(e,n,o)),o}function Cb(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function _F(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function DO(e,t){_F(e,t),(e=e.alternate)&&_F(e,t)}function ute(){return null}var Rz=typeof reportError=="function"?reportError:function(e){console.error(e)};function jO(e){this._internalRoot=e}w2.prototype.render=jO.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Y(409));v2(e,t,null,null)};w2.prototype.unmount=jO.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;lh(function(){v2(null,e,null,null)}),t[pl]=null}};function w2(e){this._internalRoot=e}w2.prototype.unstable_scheduleHydration=function(e){if(e){var t=dV();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Au.length&&t!==0&&t<Au[r].priority;r++);Au.splice(r,0,e),r===0&&pV(e)}};function VO(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function bF(){}function cte(e,t,r,i,n){if(n){if(typeof i=="function"){var s=i;i=function(){var c=Cb(o);s.call(c)}}var o=Pz(t,i,e,0,null,!1,!1,"",bF);return e._reactRootContainer=o,e[pl]=o.current,S0(e.nodeType===8?e.parentNode:e),lh(),o}for(;n=e.lastChild;)e.removeChild(n);if(typeof i=="function"){var a=i;i=function(){var c=Cb(l);a.call(c)}}var l=NO(e,0,!1,null,null,!1,!1,"",bF);return e._reactRootContainer=l,e[pl]=l.current,S0(e.nodeType===8?e.parentNode:e),lh(function(){v2(t,l,r,i)}),l}function b2(e,t,r,i,n){var s=r._reactRootContainer;if(s){var o=s;if(typeof n=="function"){var a=n;n=function(){var l=Cb(o);a.call(l)}}v2(t,o,e,n)}else o=cte(r,t,e,n,i);return Cb(o)}uV=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ay(t.pendingLanes);r!==0&&(sO(t,r|1),Xi(t,rr()),(He&6)===0&&(Vf=rr()+500,yc()))}break;case 13:lh(function(){var i=fl(e,1);if(i!==null){var n=Mi();uo(i,e,1,n)}}),DO(e,1)}};oO=function(e){if(e.tag===13){var t=fl(e,134217728);if(t!==null){var r=Mi();uo(t,e,134217728,r)}DO(e,134217728)}};cV=function(e){if(e.tag===13){var t=Ku(e),r=fl(e,t);if(r!==null){var i=Mi();uo(r,e,t,i)}DO(e,t)}};dV=function(){return lt};hV=function(e,t){var r=lt;try{return lt=e,t()}finally{lt=r}};NT=function(e,t,r){switch(t){case"input":if(kT(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var n=d2(i);if(!n)throw Error(Y(90));G8(i),kT(i,n)}}}break;case"textarea":q8(e,r);break;case"select":t=r.value,t!=null&&df(e,!!r.multiple,t,!1)}};K8=AO;X8=lh;var dte={usingClientEntryPoint:!1,Events:[yv,Gp,d2,Y8,Q8,AO]},ty={findFiberByHostInstance:kd,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},hte={bundleType:ty.bundleType,version:ty.version,rendererPackageName:ty.rendererPackageName,rendererConfig:ty.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$l.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=rV(e),e===null?null:e.stateNode},findFiberByHostInstance:ty.findFiberByHostInstance||ute,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_1.isDisabled&&_1.supportsFiber)try{a2=_1.inject(hte),Xo=_1}catch{}}Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dte;Dn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!VO(t))throw Error(Y(200));return lte(e,t,null,r)};Dn.createRoot=function(e,t){if(!VO(e))throw Error(Y(299));var r=!1,i="",n=Rz;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=NO(e,1,!1,null,null,r,!1,i,n),e[pl]=t.current,S0(e.nodeType===8?e.parentNode:e),new jO(t)};Dn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Y(188)):(e=Object.keys(e).join(","),Error(Y(268,e)));return e=rV(t),e=e===null?null:e.stateNode,e};Dn.flushSync=function(e){return lh(e)};Dn.hydrate=function(e,t,r){if(!_2(t))throw Error(Y(200));return b2(null,e,t,!0,r)};Dn.hydrateRoot=function(e,t,r){if(!VO(e))throw Error(Y(405));var i=r!=null&&r.hydratedSources||null,n=!1,s="",o=Rz;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Pz(t,null,e,1,r!=null?r:null,n,!1,s,o),e[pl]=t.current,S0(e),i)for(e=0;e<i.length;e++)r=i[e],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new w2(t)};Dn.render=function(e,t,r){if(!_2(t))throw Error(Y(200));return b2(null,e,t,!1,r)};Dn.unmountComponentAtNode=function(e){if(!_2(e))throw Error(Y(40));return e._reactRootContainer?(lh(function(){b2(null,null,e,!1,function(){e._reactRootContainer=null,e[pl]=null})}),!0):!1};Dn.unstable_batchedUpdates=AO;Dn.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!_2(r))throw Error(Y(200));if(e==null||e._reactInternals===void 0)throw Error(Y(38));return b2(e,t,r,!1,i)};Dn.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}t(),e.exports=Dn})(P8);var SF=P8.exports;$T.createRoot=SF.createRoot,$T.hydrateRoot=SF.hydrateRoot;function u(e,t,r,i){var n,s=arguments.length,o=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}const pte="modulepreload",fte=function(e,t){return new URL(e,t).href},$F={},V=function(t,r,i){return!r||r.length===0?t():Promise.all(r.map(n=>{if(n=fte(n,i),n in $F)return;$F[n]=!0;const s=n.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${o}`))return;const a=document.createElement("link");if(a.rel=s?"stylesheet":pte,s||(a.as="script",a.crossOrigin=""),a.href=n,document.head.appendChild(a),s)return new Promise((l,c)=>{a.addEventListener("load",l),a.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t())};function mte(e){return e&&e.release&&typeof e.release=="function"}function yte(e){return e&&e.acquire&&typeof e.acquire=="function"}class yo{constructor(t,r,i,n=1,s=0){if(this.ctor=t,this.acquireFunction=r,this.releaseFunction=i,this.allocationSize=n,this._pool=new Array(s),this._initialSize=s,this.ctor)for(let o=0;o<s;o++)this._pool[o]=new this.ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...t){let r;if(yo.test.disabled)r=new this.ctor;else{if(this._pool.length===0){const i=this.allocationSize;for(let n=0;n<i;n++)this._pool[n]=new this.ctor}r=this._pool.pop()}return this.acquireFunction?this.acquireFunction(r,...t):yte(r)&&r.acquire(...t),r}release(t){t&&!yo.test.disabled&&(this.releaseFunction?this.releaseFunction(t):mte(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let r=t;r<this._pool.length;++r){const i=this._pool[r];this._dispose(i)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}}yo.test={disabled:!1};function gte(e){e.length=0}class $i{constructor(t=50,r=50){this._pool=new yo(Array,void 0,gte,r,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return vx.acquire()}static release(t){return vx.release(t)}static prune(){vx.prune()}}const vx=new $i(100);function m5e(e){const t=[];return function*(){yield*t;for(const r of e)t.push(r),yield r}}function y5e(e,t){for(const r of e)if(r!=null&&t(r))return r}function yM(e){return e!=null&&typeof e[Symbol.iterator]=="function"}const vte=null;function I(e){return e!=null}function R(e){return e==null}function Zo(e,t){return I(e)?t(e):vte}function g5e(e){return e}function wte(e,t){if(R(e))throw new Error(t);return e}function S2(e,t){return I(e)?e:typeof t=="function"?t():t}function v5e(e,t){return I(e)?e:t}function qi(e){return I(e)&&e.destroy(),null}function w5e(e){return I(e)&&e.dispose(),null}function en(e){return I(e)&&e.remove(),null}function kb(e){return I(e)&&e.abort(),null}function _5e(e){return I(e)&&e.release(),null}function _te(e,t,r){return I(e)&&I(t)?I(r)?r(e,t):e.equals(t):e===t}function bte(e){return null}function b5e(e,t){const r=new Array;for(const i of e)r.push(Ry(i,null,t));return r}function S5e(e,t){for(const r of e)Zo(r,t)}function Ry(e,t,r){return I(e)?r(e):t}function $5e(e){return e.filter(t=>I(t))}function zO(e,...t){let r=e;for(let i=0;i<t.length&&r;++i)r=r[t[i]];return r}function x5e(e){return e}function $2(e){return dm(()=>e.forEach(t=>I(t)&&t.remove()))}function dm(e){return{remove:()=>{e&&(e(),e=void 0)}}}class ro{constructor(t=1){this._seed=t}set seed(t){this._seed=t==null?Math.random()*ro._m:t}getInt(){return this._seed=(ro._a*this._seed+ro._c)%ro._m,this._seed}getFloat(){return this.getInt()/(ro._m-1)}getIntRange(t,r){return Math.round(this.getFloatRange(t,r))}getFloatRange(t,r){const i=r-t;return t+this.getInt()/ro._m*i}}ro._m=2147483647,ro._a=48271,ro._c=0;function Ste(e,t){return t?e.filter((r,i,n)=>n.findIndex(t.bind(null,r))===i):e.filter((r,i,n)=>n.indexOf(r)===i)}function UO(e,t,r){if(R(e)&&R(t))return!0;if(R(e)||R(t)||e.length!==t.length)return!1;if(r){for(let i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function E5e(e,t){let r=e.length!==t.length;e.length=t.length;for(let i=0;i<t.length;++i)e[i]!==t[i]&&(e[i]=t[i],r=!0);return r}function T5e(e,t,r){let i,n;return r?(i=t.filter(s=>!e.some(o=>r(o,s))),n=e.filter(s=>!t.some(o=>r(o,s)))):(i=t.filter(s=>!e.includes(s)),n=e.filter(s=>!t.includes(s))),{added:i,removed:n}}function M5e(e){return e&&typeof e.length=="number"}const $te=!!Array.prototype.fill;function I5e(e,t){if($te)return new Array(e).fill(t);const r=new Array(e);for(let i=0;i<e;i++)r[i]=t;return r}function C5e(e,t){t===void 0&&(t=e,e=0);const r=new Array(t-e);for(let i=e;i<t;i++)r[i-e]=i;return r}class Fz{constructor(){this.last=0}}const Nz=new Fz;function Dz(e,t,r,i){i=i||Nz;const n=Math.max(0,i.last-10);for(let o=n;o<r;++o)if(e[o]===t)return i.last=o,o;const s=Math.min(n,r);for(let o=0;o<s;++o)if(e[o]===t)return i.last=o,o;return-1}function GO(e,t,r,i){const n=r==null?e.length:r,s=Dz(e,t,n,i);if(s!==-1)return e[s]=e[n-1],r==null&&e.pop(),t}const xs=new Set;function xte(e,t,r=e.length,i=t.length,n,s){if(i===0||r===0)return r;xs.clear();for(let a=0;a<i;++a)xs.add(t[a]);n=n||Nz;const o=Math.max(0,n.last-10);for(let a=o;a<r;++a)if(xs.has(e[a])&&(s&&s.push(e[a]),xs.delete(e[a]),e[a]=e[r-1],--r,--a,xs.size===0||r===0))return xs.clear(),r;for(let a=0;a<o;++a)if(xs.has(e[a])&&(s&&s.push(e[a]),xs.delete(e[a]),e[a]=e[r-1],--r,--a,xs.size===0||r===0))return xs.clear(),r;return xs.clear(),r}new ro;function Ete(e,t){const r=e.indexOf(t);return r!==-1?(e.splice(r,1),t):null}let ju;function j(e){return typeof ju[e]=="function"?ju[e]=ju[e](globalThis):ju[e]}var g8,v8,w8,_8;ju=((g8=globalThis.dojoConfig)==null?void 0:g8.has)||((v8=globalThis.esriConfig)==null?void 0:v8.has)?{...(w8=globalThis.dojoConfig)==null?void 0:w8.has,...(_8=globalThis.esriConfig)==null?void 0:_8.has}:{},j.add=(e,t,r,i)=>((i||ju[e]===void 0)&&(ju[e]=t),r&&j(e)),j.cache=ju,j.add("esri-deprecation-warnings",!0),(()=>{var t;j.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(j.add("host-browser",e),j.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),j.add("dom",e),j("host-browser")){const r=navigator,i=r.userAgent,n=r.appVersion,s=parseFloat(n);if(j.add("wp",parseFloat(i.split("Windows Phone")[1])||void 0),j.add("msapp",parseFloat(i.split("MSAppHost/")[1])||void 0),j.add("khtml",n.includes("Konqueror")?s:void 0),j.add("edge",parseFloat(i.split("Edge/")[1])||void 0),j.add("opr",parseFloat(i.split("OPR/")[1])||void 0),j.add("webkit",!j("wp")&&!j("edge")&&parseFloat(i.split("WebKit/")[1])||void 0),j.add("chrome",!j("edge")&&!j("opr")&&parseFloat(i.split("Chrome/")[1])||void 0),j.add("android",!j("wp")&&parseFloat(i.split("Android ")[1])||void 0),j.add("safari",!n.includes("Safari")||j("wp")||j("chrome")||j("android")||j("edge")||j("opr")?void 0:parseFloat(n.split("Version/")[1])),j.add("mac",n.includes("Macintosh")),!j("wp")&&i.match(/(iPhone|iPod|iPad)/)){const o=RegExp.$1.replace(/P/,"p"),a=i.match(/OS ([\d_]+)/)?RegExp.$1:"1",l=parseFloat(a.replace(/_/,".").replace(/_/g,""));j.add(o,l),j.add("ios",l)}j.add("trident",parseFloat(n.split("Trident/")[1])||void 0),j("webkit")||(!i.includes("Gecko")||j("wp")||j("khtml")||j("trident")||j("edge")||j.add("mozilla",s),j("mozilla")&&j.add("ff",parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&j.add("esri-mobile",t),r&&j.add("esri-iPhone",r),j.add("esri-geolocation",!!navigator.geolocation)}j.add("esri-canvas-svg-support",!j("trident")),j.add("esri-wasm","WebAssembly"in globalThis),j.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),j.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),j.add("esri-atomics","Atomics"in globalThis),j.add("esri-workers","Worker"in globalThis),j.add("web-feat:cache","caches"in globalThis),j.add("esri-workers-arraybuffer-transfer",!j("safari")||Number(j("safari"))>=12),j.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),j.add("featurelayer-simplify-payload-size-factors",[1,1,4]),j.add("featurelayer-snapshot-enabled",!0),j.add("featurelayer-snapshot-point-min-threshold",8e4),j.add("featurelayer-snapshot-point-max-threshold",4e5),j.add("featurelayer-snapshot-point-coverage",.1),j.add("featurelayer-advanced-symbols",!1),j.add("featurelayer-pbf",!0),j.add("featurelayer-pbf-statistics",!1),j.add("feature-layers-workers",!0),j.add("feature-polyline-generalization-factor",1),j.add("mapview-transitions-duration",200),j.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),j.add("mapserver-pbf-enabled",!1),j.add("mapimagelayer-popup-identify-max-tolerance",20),j.add("heatmap-allow-raster-fallback",!0),j.add("heatmap-force-raster",!1),j("host-webworker")||j("host-browser")&&(j.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),j.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{j.add("esri-image-decode",!0,!0,!0)}).catch(()=>{j.add("esri-image-decode",!1,!0,!0)})}return!1}),j.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();function k5e(e,t){if(e.forEach)e.forEach(t);else for(let r=0;r<e.length;r++)t(e[r],r,e)}function Tte(e,t,r){if(e.slice)return e.slice(t,r);t===void 0?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),r===void 0?r=e.length:(r<0&&(r+=e.length),r=Math.min(e.length,Math.max(0,r)));const i=Math.max(0,r-t),n=new e.constructor(i);for(let s=0;s<i;s++)n[s]=e[t+s];return n}function L5e(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}function Mte(e){return e instanceof Int8Array||e&&e.constructor&&e.constructor.name==="Int8Array"}function Ite(e){return e instanceof Uint8Array||e&&e.constructor&&e.constructor.name==="Uint8Array"}function Cte(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&e.constructor.name==="Uint8ClampedArray"}function kte(e){return e instanceof Int16Array||e&&e.constructor&&e.constructor.name==="Int16Array"}function Lte(e){return e instanceof Uint16Array||e&&e.constructor&&e.constructor.name==="Uint16Array"}function Ote(e){return e instanceof Int32Array||e&&e.constructor&&e.constructor.name==="Int32Array"}function Ate(e){return e instanceof Uint32Array||e&&e.constructor&&e.constructor.name==="Uint32Array"}function Pte(e){return e instanceof Float32Array||e&&e.constructor&&e.constructor.name==="Float32Array"}function Rte(e){return e instanceof Float64Array||e&&e.constructor&&e.constructor.name==="Float64Array"}function jz(e,t){let r;if(t)for(r in e)e.hasOwnProperty(r)&&(e[r]===void 0?delete e[r]:e[r]instanceof Object&&jz(e[r],!0));else for(r in e)e.hasOwnProperty(r)&&e[r]===void 0&&delete e[r];return e}function P(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=Gz(e);if(I(t))return t;if(Vz(e))return e.clone();if(zz(e))return e.map(P);if(Uz(e))return e.clone();const r={};for(const i of Object.getOwnPropertyNames(e))r[i]=P(e[i]);return r}function gM(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=Gz(e);if(I(t))return t;if(zz(e)){let r=!0;const i=e.map(n=>{const s=gM(n);return n!=null&&s==null&&(r=!1),s});return r?i:null}if(Vz(e))return e.clone();if(!Uz(e)){const r=new(Object.getPrototypeOf(e)).constructor;for(const i of Object.getOwnPropertyNames(e)){const n=e[i],s=gM(n);if(n!=null&&s==null)return null;r[i]=s}return r}return null}function Vz(e){return typeof e.clone=="function"}function zz(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function Uz(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function xF(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function Gz(e){if(Mte(e)||Ite(e)||Cte(e)||kte(e)||Lte(e)||Ote(e)||Ate(e)||Pte(e)||Rte(e))return Tte(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;return e.forEach((r,i)=>{t.set(i,P(r))}),t}if(e instanceof Set){const t=new Set;return e.forEach(r=>{t.add(P(r))}),t}return null}function BO(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e||{}).getTime=="function"&&typeof(t||{}).getTime=="function"&&e.getTime()===t.getTime()||!1}function Fte(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&UO(e,t):e instanceof Set?t instanceof Set&&Dte(e,t):e instanceof Map?t instanceof Map&&jte(e,t):!!xF(e)&&xF(t)&&Nte(e,t))}function Nte(e,t){if(e===null||t===null)return!1;const r=Object.keys(e);if(t===null||Object.keys(t).length!==r.length)return!1;for(const i of r)if(e[i]!==t[i]||!Object.prototype.hasOwnProperty.call(t,i))return!1;return!0}function Dte(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function jte(e,t){if(e.size!==t.size)return!1;for(const[r,i]of e){const n=t.get(r);if(n!==i||n===void 0&&!t.has(r))return!1}return!0}function li(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null}function Vte(e,t){return e!=null&&e.metadatas&&e.metadatas[t]!=null}function Gw(e,t,r){return r?Lb(e,t,{policy:r,path:""}):Lb(e,t,null)}function Lb(e,t,r){return t?Object.keys(t).reduce((i,n)=>{let s=null,o="merge";if(r&&(s=r.path?`${r.path}.${n}`:n,o=r.policy(s)),o==="replace")return i[n]=t[n],i;if(i[n]===void 0)return i[n]=P(t[n]),i;let a=i[n],l=t[n];if(a===l)return i;if(Array.isArray(l)||Array.isArray(i))a=a?Array.isArray(a)?i[n]=a.concat():i[n]=[a]:i[n]=[],l&&(Array.isArray(l)||(l=[l]),l.forEach(c=>{a.includes(c)||a.push(c)}));else if(l&&typeof l=="object")if(r){const c=r.path;r.path=s,i[n]=Lb(a,l,r),r.path=c}else i[n]=Lb(a,l,null);else i.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(i[n]=l);return i},e||{}):e}function Bz(e){return Array.isArray(e)?e:e.split(".")}function EF(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function zte(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...EF(r));return t}return EF(e)}function qz(e,t,r,i){const n=zte(t);if(n.length!==1){const s=n.map(o=>i(e,o,r));return $2(s)}return i(e,n[0],r)}function Wz(e){let t=!1;return()=>{t||(t=!0,e())}}function Hz(e,t){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const n=parseInt(r,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.getItemAt(n)}const i=li(t);return Vte(i,r)?i.get(r):t[r]}function Jz(e,t,r){if(e==null)return e;const i=Hz(t[r],e);return!i&&r<t.length-1?void 0:r===t.length-1?i:Jz(i,t,r+1)}function vv(e,t,r=0){return typeof t!="string"||t.includes(".")?Jz(e,Bz(t),r):Hz(t,e)}function Ob(e,t){return vv(e,t)}function TF(e,t){return vv(t,e)!==void 0}var Yo;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED"})(Yo||(Yo={}));class MF{constructor(t){this.autoDestroy=!1,this.properties=t}}function wv(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){const i=Object.create(t.properties),n=t.autoDestroy;for(const s in i)i[s]=P(i[s]);t=new MF(i),t.autoDestroy=n,Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t=new MF({}),Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function Ute(e){return wv(e).properties}function x2(e,t){const r=Ute(e);let i=r[t];return i||(i=r[t]={}),i}function Gte(e,t){return Gw(e,t,qte)}const Bte=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function qte(e){return Bte.test(e)?"replace":"merge"}function Zz(e,t,r=!1){return Qz(e,t,r)}function hm(e,t){if(t!=null)return t[e]||Yz(e.split("."),!1,t)}function sn(e,t,r){const i=e.split("."),n=i.pop(),s=Yz(i,!0,r);s&&n&&(s[n]=t)}function Yz(e,t,r){let i=r;for(const n of e){if(i==null)return;if(!(n in i)){if(!t)return;i[n]={}}i=i[n]}return i}function Qz(e,t,r){return t?Object.keys(t).reduce((i,n)=>{let s=i[n],o=t[n];return s===o?i:s===void 0?(i[n]=P(o),i):(Array.isArray(o)||Array.isArray(i)?(s=s?Array.isArray(s)?i[n]=s.concat():i[n]=[s]:i[n]=[],o&&(Array.isArray(o)||(o=[o]),r?o.forEach(a=>{s.includes(a)||s.push(a)}):i[n]=o.concat())):o&&typeof o=="object"?i[n]=Qz(s,o,r):i.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(i[n]=o),i)},e||{}):e}var b8;const Ve={apiKey:void 0,applicationUrl:(b8=globalThis.location)==null?void 0:b8.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(Zz(Ve,globalThis.esriConfig,!0),delete Ve.has),!Ve.assetsPath){const e="4.24.7";Ve.assetsPath=`https://js.arcgis.com/${e.slice(0,-2)}/@arcgis/core/assets`}Ve.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(Ve,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),Ve.request.corsEnabledServers=[],Ve.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0};const Wte=/\{([^\}]+)\}/g;function IF(e){return e==null?"":e}function ra(e,t){return e.replace(Wte,typeof t=="object"?(r,i)=>IF(hm(i,t)):(r,i)=>IF(t(i)))}function Kz(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,r=>t&&t.includes(r)?r:`\\${r}`)}function qO(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}function O5e(e){return new DOMParser().parseFromString(e||"","text/html").body.innerText||""}const CF={info:0,warn:1,error:2,none:3};class Z{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,Z._loggers[this.module]=this;const r=this.module.lastIndexOf(".");r!==-1&&(this._parent=Z.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){const t=this;return{loggedMessages:t._loggedMessages,clearLoggedWarnings:()=>t._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(t={}){const r=Z._loggers;return Z._loggers=t,r},set throttlingDisabled(t){Z._throttlingDisabled=t}}}static getLogger(t){let r=Z._loggers[t];return r||(r=new Z({module:t})),r}_log(t,r,...i){if(!!this._matchLevel(t)){if(r!=="always"&&!Z._throttlingDisabled){const n=this._argsToKey(i),s=this._loggedMessages[t].get(n);if(r==="once"&&s!=null||r==="oncePerTick"&&s&&s>=Z._tickCounter)return;this._loggedMessages[t].set(n,Z._tickCounter),Z._scheduleTickCounterIncrement()}for(const n of Ve.log.interceptors)if(n(t,this.module,...i))return;this._inheritedWriter()(t,this.module,...i)}}_parentWithMember(t,r){let i=this;for(;I(i);){const n=i[t];if(I(n))return n;i=i.parent}return r}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(t,r,...i){console[t](`[${r}]`,...i)}_matchLevel(t){const r=Ve.log.level?Ve.log.level:"warn";return CF[this._parentWithMember("level",r)]<=CF[t]}_argsToKey(...t){const r=(i,n)=>typeof n!="object"||Array.isArray(n)?n:"[Object]";return qO(JSON.stringify(t,r))}static _scheduleTickCounterIncrement(){Z._tickCounterScheduled||(Z._tickCounterScheduled=!0,Promise.resolve().then(()=>{Z._tickCounter++,Z._tickCounterScheduled=!1}))}}Z._loggers={},Z._tickCounter=0,Z._tickCounterScheduled=!1,Z._throttlingDisabled=!1;var xe;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.USER=6]="USER"})(xe||(xe={}));const vM=xe.USER+1;function Vu(e){switch(e){case"defaults":return xe.DEFAULTS;case"service":return xe.SERVICE;case"portal-item":return xe.PORTAL_ITEM;case"web-scene":return xe.WEB_SCENE;case"web-map":return xe.WEB_MAP;case"user":return xe.USER}}function Ab(e){switch(e){case xe.DEFAULTS:return"defaults";case xe.SERVICE:return"service";case xe.PORTAL_ITEM:return"portal-item";case xe.WEB_SCENE:return"web-scene";case xe.WEB_MAP:return"web-map";case xe.USER:return"user"}return void 0}function Hte(e){return Ab(e)}var Xe;(function(e){e[e.Dirty=1]="Dirty",e[e.Overriden=2]="Overriden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(Xe||(Xe={}));let Pb,Fy=[];const Jte=Z.getLogger("esri.core.Accessor");function Ie(e){Pb!==void 0&&Pb.onObservableAccessed(e)}let Bw=!1,qw=!1;function yl(e,t,r){if(Bw)return WO(e,t,r);Xz(e);const i=t.call(r);return e9(),i}function Zte(e,t){return yl(void 0,e,t)}function WO(e,t,r){const i=Bw;Bw=!0,Xz(e);let n=null;try{n=t.call(r)}catch(s){qw&&Jte.error(s)}return e9(),Bw=i,n}function Xz(e){Pb=e,Fy.push(e)}function e9(){const e=Fy.pop();Pb=Fy.length>0?Fy[Fy.length-1]:void 0,e!==void 0&&e.onTrackingEnd()}function t9(e,t){if(t.flags&Xe.DepTrackingInitialized)return;const r=qw;qw=!1,t.flags&Xe.AutoTracked?WO(t,t.metadata.get,e):r9(e,t),qw=r}const Yte=[];function r9(e,t){t.flags&Xe.ExplicitlyTracking||(t.flags|=Xe.ExplicitlyTracking,WO(t,()=>{const r=t.metadata.dependsOn||Yte;for(const i of r)if(typeof i!="string"||i.includes(".")){const n=Bz(i);for(let s=0,o=e;s<n.length&&o!=null&&typeof o=="object";++s)o=kF(o,n[s],s!==n.length-1)}else kF(e,i,!1)}),t.flags&=~Xe.ExplicitlyTracking)}function kF(e,t,r){var s;const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const o=parseInt(i,10);if(!isNaN(o))return Array.isArray(e)?e[o]:e.getItemAt(o)}const n=(s=li(e))==null?void 0:s.properties.get(i);return n&&(Ie(n),t9(e,n)),r?e[i]:void 0}class i9{constructor(t,r){this._observers=t,this._observer=r}remove(){Ete(this._observers,this._observer)}}class LF{constructor(t,r,i){this.properties=t,this.propertyName=r,this.metadata=i,this._observers=null,this._accessed=null,this._handles=null,this.flags=Xe.Dirty|(i.nonNullable?Xe.NonNullable:0)|(i.hasOwnProperty("value")?Xe.HasDefaultValue:0)|(i.get===void 0?Xe.DepTrackingInitialized:0)|(i.dependsOn===void 0?Xe.AutoTracked:0)}destroy(){if(this.flags&Xe.Dirty&&this._observers){const t=this._observers.slice();for(const r of t)r.onCommitted()}this._accessed=null,this._observers=null,this._clearObservationHandles()}getComputed(){Ie(this);const t=this.properties.store,r=this.propertyName,i=this.flags,n=t.get(r);if(i&Xe.Computing||~i&Xe.Dirty&&t.has(r))return n;this.flags|=Xe.Computing;const s=this.properties.host;let o;i&Xe.AutoTracked?o=yl(this,this.metadata.get,s):(r9(s,this),o=this.metadata.get.call(s)),t.set(r,o,xe.COMPUTED);const a=t.get(r);return a===n?this.flags&=~Xe.Dirty:Zte(this.commit,this),this.flags&=~Xe.Computing,a}onObservableAccessed(t){t!==this&&(this._accessed===null&&(this._accessed=[]),this._accessed.includes(t)||this._accessed.push(t))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=Xe.DepTrackingInitialized;const t=this._accessed;if(t===null)return;let r=this._handles;r===null&&(r=this._handles=[]);for(let i=0;i<t.length;++i)r.push(t[i].observe(this));t.length=0}observe(t){return this._observers===null&&(this._observers=[]),this._observers.includes(t)||this._observers.push(t),new i9(this._observers,t)}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}onInvalidated(){~this.flags&Xe.Overriden&&(this.flags|=Xe.Dirty);const t=this._observers;if(t!==null)for(let r=0;r<t.length;++r)t[r].onInvalidated()}commit(){this.flags&=~Xe.Dirty,this.onCommitted()}onCommitted(){if(this._observers===null)return;const t=this._observers.slice();for(let r=0;r<t.length;++r)t[r].onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let r=0;r<t.length;++r)t[r].remove();t.length=0}}}class HO{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new HO;return this._values.forEach((i,n)=>{t&&t.has(n)||r.set(n,P(i))}),r}get(t){return this._values.get(t)}originOf(){return xe.USER}keys(){return[...this._values.keys()]}set(t,r){this._values.set(t,r)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}}function b1(e,t,r){return e!==void 0}function OF(e,t,r,i){return e!==void 0&&(!(r==null&&e.flags&Xe.NonNullable)||(i.lifecycle,Yo.INITIALIZING,!1))}function Qte(e){return e&&typeof e.destroy=="function"}Z.getLogger("esri.core.accessorSupport.Properties");class Kte{constructor(t){this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=Yo.INITIALIZING,this.store=new HO,this._origin=xe.USER;const r=this.host.constructor.__accessorMetadata__,i=r.properties;for(const n in i){const s=new LF(this,n,i[n]);this.properties.set(n,s)}this.metadatas=i,this._autoDestroy=r.autoDestroy}initialize(){this.lifecycle=Yo.CONSTRUCTING}constructed(){this.lifecycle=Yo.CONSTRUCTED}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[t,r]of this.properties){const i=this.internalGet(t);i&&Qte(i)&&(i.destroy(),~r.flags&Xe.NonNullable&&this._internalSet(r,null)),r.destroy()}else for(const[t,r]of this.properties)r.destroy()}get initialized(){return this.lifecycle!==Yo.INITIALIZING}get(t){const r=this.properties.get(t);if(r.metadata.get)return r.getComputed();Ie(r);const i=this.store;return i.has(t)?i.get(t):r.metadata.value}originOf(t){const r=this.store.originOf(t);if(r===void 0){const i=this.properties.get(t);if(i!==void 0&&i.flags&Xe.HasDefaultValue)return"defaults"}return Ab(r)}has(t){return!!this.properties.has(t)&&this.store.has(t)}keys(){return[...this.properties.keys()]}internalGet(t){const r=this.properties.get(t);if(b1(r))return this.store.has(t)?this.store.get(t):r.metadata.value}internalSet(t,r){const i=this.properties.get(t);b1(i)&&this._internalSet(i,r)}getDependsInfo(t,r,i){const n=this.properties.get(r);if(!b1(n))return"";const s=new Set,o=yl({onObservableAccessed:l=>s.add(l),onTrackingEnd:()=>{}},()=>{var l;return(l=n.metadata.get)==null?void 0:l.call(t)});let a=`${i}${t.declaredClass.split(".").pop()}.${r}: ${o}
`;if(s.size===0)return a;i+="  ";for(const l of s){if(!(l instanceof LF))continue;const c=l.properties.host,h=l.propertyName,f=li(c);a+=f?f.getDependsInfo(c,h,i):`${i}${h}: undefined
`}return a}setAtOrigin(t,r,i){const n=this.properties.get(t);if(b1(n))return this._setAtOrigin(n,r,i)}isOverridden(t){const r=this.properties.get(t);return r!==void 0&&!!(r.flags&Xe.Overriden)}clearOverride(t){const r=this.properties.get(t);r!==void 0&&r.flags&Xe.Overriden&&(r.flags&=~Xe.Overriden,r.notifyChange())}override(t,r){const i=this.properties.get(t);if(!OF(i,t,r,this))return;const n=i.metadata.cast;if(n){const s=this._cast(n,r),{valid:o,value:a}=s;if(wx.release(s),!o)return;r=a}i.flags|=Xe.Overriden,this._internalSet(i,r)}set(t,r){const i=this.properties.get(t);if(!OF(i,t,r,this))return;const n=i.metadata.cast;if(n){const o=this._cast(n,r),{valid:a,value:l}=o;if(wx.release(o),!a)return;r=l}const s=i.metadata.set;s?s.call(this.host,r):this._internalSet(i,r)}setDefaultOrigin(t){this._origin=Vu(t)}getDefaultOrigin(){return Ab(this._origin)}notifyChange(t){const r=this.properties.get(t);r!==void 0&&r.notifyChange()}invalidate(t){const r=this.properties.get(t);r!==void 0&&r.invalidate()}commit(t){const r=this.properties.get(t);r!==void 0&&r.commit()}_internalSet(t,r){const i=this.lifecycle!==Yo.INITIALIZING?this._origin:xe.DEFAULTS;this._setAtOrigin(t,r,i)}_setAtOrigin(t,r,i){const n=this.store,s=t.propertyName;n.has(s,i)&&BO(r,n.get(s))&&~t.flags&Xe.Overriden&&i===n.originOf(s)||(t.invalidate(),n.set(s,r,i),t.commit(),t9(this.host,t))}_cast(t,r){const i=wx.acquire();return i.valid=!0,i.value=r,t&&(i.value=t.call(this.host,r,i)),i}}class Xte{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}}const wx=new yo(Xte);function ere(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(r,i)=>{if(i==="")return"$";const n=hm(i,t),s=n==null?"":n;if(s===void 0)throw new Error(`could not find key "${i}" in template`);return s.toString()})}class E2{constructor(t,r,i){this.name=t,this.details=i,this.message=void 0,this instanceof E2&&(this.message=r&&ere(r,i)||"")}toString(){return"["+this.name+"]: "+this.message}}class O extends E2{constructor(t,r,i){if(super(t,r,i),!(this instanceof O))return new O(t,r,i)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,r)=>{if(r&&typeof r=="object"&&typeof r.toJSON=="function")return r;try{return P(r)}catch{return"[object]"}}))}}catch(t){throw Z.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new O(t.name,t.message,t.details)}}O.prototype.type="error";function Rb(e,t,r){if(e&&t)if(typeof t=="object")for(const i of Object.getOwnPropertyNames(t))Rb(e,i,t[i]);else{if(t.includes(".")){const n=t.split("."),s=n.splice(n.length-1,1)[0];return void Rb(Ob(e,n),s,r)}const i=e.__accessor__;i!=null&&tre(t,i),e[t]=r}}function tre(e,t){if(j("esri-unknown-property-errors")&&!rre(e,t))throw new O("set:unknown-property",ire(e,t))}function rre(e,t){return t.metadatas[e]!=null}function ire(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}Z.getLogger("esri.core.accessorSupport.set");class n9 extends yo{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=bte(this._set)}acquire(...t){const r=super.acquire(...t);return this._set.delete(r),r}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}}const S1=[];function Fb(e){S1.push(e),S1.length===1&&queueMicrotask(()=>{const t=S1.slice();S1.length=0;for(const r of t)r()})}const nre=29;class zg{constructor(t,r=nre){this.name=t,this._counter=0,this._items=new Array(r)}record(t){this._items[++this._counter%this._items.length]=t}get median(){return this._items.slice().sort((t,r)=>t-r)[Math.floor(this._items.length/2)]}get average(){return this._items.reduce((t,r)=>t+r,0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}var wM;(function(e){const t=(s,o,a,l)=>{let c=o,h=o;const f=a>>>1,m=s[c-1];for(;h<=f;){h=c<<1,h<a&&l(s[h-1],s[h])<0&&++h;const y=s[h-1];if(l(y,m)<=0)break;s[c-1]=y,c=h}s[c-1]=m},r=(s,o)=>s<o?-1:s>o?1:0;function i(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=r);for(let h=a>>>1;h>o;h--)t(s,h,a,l);const c=o+1;for(let h=a-1;h>o;h--){const f=s[o];s[o]=s[h],s[h]=f,t(s,c,h,l)}}function*n(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=r);for(let h=a>>>1;h>o;h--)t(s,h,a,l),yield;const c=o+1;for(let h=a-1;h>o;h--){const f=s[o];s[o]=s[h],s[h]=f,t(s,c,h,l),yield}}e.sort=i,e.iterableSort=n})(wM||(wM={}));const AF=wM,sre=1.5,ore=1.1;class Yd{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new Fz,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>PF(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const r=new Array;for(let i=0;i<this._length;i++){const n=this.data[i];t(n)&&r.push(n)}return r}getItemAt(t){if(!(t<0||t>=this._length))return this.data[t]}includes(t,r){const i=this.data.indexOf(t,r);return i!==-1&&i<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let r=t;r<this._length;++r)this.data[r]=this._deallocator(this.data[r]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,r=t.length){for(let i=0;i<r;i++)this.data[this._length++]=t[i]}fill(t,r){for(let i=0;i<r;i++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,PF(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const r=Dz(this.data,t,this.length,this._hint);if(r!==-1)return this.data.splice(r,1),this.length=this.length-1,t}removeUnordered(t){const r=GO(this.data,t,this.length,this._hint);return r!==void 0&&(this.length=this.length-1),this._shrink(),r}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,r=t.length,i){this.length=xte(this.data,t,this.length,r,this._hint,i),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,r){t>=this.length||r>=this.length||t===r||([this.data[t],this.data[r]]=[this.data[r],this.data[t]])}sort(t){AF.sort(this.data,0,this.length,t)}iterableSort(t){return AF.iterableSort(this.data,0,this.length,t)}some(t,r){for(let i=0;i<this.length;++i)if(t.call(r,this.data[i],i,this.data))return!0;return!1}filterInPlace(t,r){let i=0;for(let n=0;n<this._length;++n){const s=this.data[n];t.call(r,s,n,this.data)&&(this.data[n]=this.data[i],this.data[i]=s,i++)}if(this._deallocator)for(let n=i;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=i,this._shrink(),this}forAll(t,r){const i=this.length,n=this.data;for(let s=0;s<i;++s)t.call(r,n[s],s,n)}forEach(t,r){for(let i=0;i<this.length;++i)t.call(r,this.data[i],i,this.data)}map(t,r){const i=new Array(this.length);for(let n=0;n<this.length;++n)i[n]=t.call(r,this.data[n],n,this.data);return i}reduce(t,r){let i=r;for(let n=0;n<this.length;++n)i=t(i,this.data[n],n,this.data);return i}has(t){const r=this.length,i=this.data;for(let n=0;n<r;++n)if(i[n]===t)return!0;return!1}}function PF(e){e.data.length>sre*e.length&&(e.data.length=Math.floor(e.length*ore))}function are(e){return{setTimeout:(t,r)=>{const i=e.setTimeout(t,r);return{remove:()=>e.clearTimeout(i)}}}}const _v=are(globalThis),RF=new Set;function lre(e,t,r=!1){r&&RF.has(t)||(r&&RF.add(t),e.warn(`\u{1F6D1} DEPRECATED - ${t}`))}function ure(e,t,r={}){if(j("esri-deprecation-warnings")){const{moduleName:i}=r;s9(e,`Property: ${(i?i+"::":"")+t}`,r)}}function s9(e,t,r={}){if(j("esri-deprecation-warnings")){const{replacement:i,version:n,see:s,warnOnce:o}=r;let a=t;i&&(a+=`
	\u{1F6E0}\uFE0F Replacement: ${i}`),n&&(a+=`
	\u2699\uFE0F Version: ${n}`),s&&(a+=`
	\u{1F517} See ${s} for more details.`),lre(e,a,o)}}function T2(e){return e&&(typeof e.on=="function"||typeof e.addEventListener=="function")}function M2(e,t,r){if(!T2(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,r);if(Array.isArray(t)){const i=t.slice();for(const n of i)e.addEventListener(n,r);return{remove(){for(const n of i)e.removeEventListener(n,r)}}}return e.addEventListener(t,r),{remove(){e.removeEventListener(t,r)}}}function o9(e,t,r){if(!T2(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const i=M2(e,t,n=>{i.remove(),r.call(e,n)});return{remove(){i.remove()}}}const cre={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function vd({key:e}){return cre[e]||e}function Ot(e="Aborted"){return new O("AbortError",e)}function yt(e,t="Aborted"){if(go(e))throw Ot(t)}function I2(e){return I(e)?"aborted"in e?e:e.signal:e}function go(e){const t=I2(e);return I(t)&&t.aborted}function bv(e){if(ui(e))throw e}function _M(e){if(!ui(e))throw e}function vs(e,t){const r=I2(e);if(!R(r)){if(!r.aborted)return o9(r,"abort",()=>t());t()}}function JO(e,t){const r=I2(e);if(!R(r))return yt(r),o9(r,"abort",()=>t(Ot()))}function dre(e,t){const r=I2(t);return R(r)?e:new Promise((i,n)=>{let s=vs(t,()=>n(Ot()));const o=()=>s=en(s);e.then(o,o),e.then(i,n)})}function ui(e){return e&&e.name==="AbortError"}async function bM(e){try{return await e}catch(t){if(!ui(t))throw t}}function gl(){let e=null;const t=new Promise((r,i)=>{e={promise:void 0,resolve:r,reject:i}});return e.promise=t,e}async function Zt(e){if(!e)return;if(typeof e.forEach!="function"){const r=Object.keys(e),i=r.map(o=>e[o]),n=await Zt(i),s={};return r.map((o,a)=>s[o]=n[a]),s}const t=e;return new Promise(r=>{const i=[];let n=t.length;n===0&&r(i),t.forEach(s=>{const o={promise:s||Promise.resolve(s)};i.push(o),o.promise.then(a=>{o.value=a}).catch(a=>{o.error=a}).then(()=>{--n,n===0&&r(i)})})})}async function hre(e){return(await Zt(e)).filter(t=>!!t.value).map(t=>t.value)}function ZO(e,t,r){const i=new AbortController;return vs(r,()=>i.abort()),new Promise((n,s)=>{let o=setTimeout(()=>{o=0,n(t)},e);vs(i,()=>{o&&(clearTimeout(o),s(Ot()))})})}function xl(e){return e&&typeof e.then=="function"}function SM(e){return xl(e)?e:Promise.resolve(e)}function C2(e,t=-1){let r,i,n,s,o=null;const a=(...l)=>{if(r){i=l,s&&s.reject(Ot()),s=gl();const m=s.promise;if(o){const y=o;o=null,y.abort()}return m}if(n=s||gl(),s=null,t>0){const m=new AbortController;r=SM(e(...l,m.signal));const y=r;ZO(t).then(()=>{r===y&&(s?m.abort():o=m)})}else r=1,r=SM(e(...l));const c=()=>{const m=i;i=n=r=o=null,m!=null&&a(...m)},h=r,f=n;return h.then(c,c),h.then(f.resolve,f.reject),f.promise};return a}function a9(){let e,t;const r=new Promise((n,s)=>{e=n,t=s}),i=n=>{e(n)};return i.resolve=n=>e(n),i.reject=n=>t(n),i.timeout=(n,s)=>_v.setTimeout(()=>i.reject(s),n),i.promise=r,i}function l9(e,t){let r,i=new AbortController;const n=e(i.signal);let s={promise:n,finished:!1,abort:()=>{i&&(i.abort(),i=null)}};const o=()=>{s&&(s.finished=!0,s=null),I(r)&&(r.remove(),r=null),i=null};return n.then(o,o),r=vs(t,()=>{I(s)&&s.abort()}),s}async function FF(e){await Promise.resolve(),yt(e)}function A5e(e){return e}class pre{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}}class fre{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}}let $M=0;const ry={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},xM=["prepare","preRender","render","postRender","update","finish"],EM=[],uh=new Yd;class mre{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}const Nb={frameTasks:uh,willDispatch:!1,clearFrameTasks:yre,dispatch:d9,executeFrameTasks:gre};function pm(e){const t=new fre(e);return EM.push(t),Nb.willDispatch||(Nb.willDispatch=!0,Fb(d9)),t}function zf(e){const t=new pre(e);return uh.push(t),Db==null&&($M=performance.now(),Db=requestAnimationFrame(u9)),new mre(t)}let Db=null;function yre(e=!1){uh.forAll(t=>{t.removed=!0}),e&&c9()}function u9(){const e=performance.now();Db=null,Db=uh.length>0?requestAnimationFrame(u9):null,Nb.executeFrameTasks(e)}function gre(e){const t=e-$M;$M=e;const r=1e3/60,i=Math.max(0,t-r);for(let n=0;n<xM.length;n++){const s=performance.now(),o=xM[n];uh.forAll(a=>{var l;a.paused||a.removed||(n===0&&a.ticks++,a.phases[o]&&(ry.time=e,ry.deltaTime=a.ticks===0?0:t,ry.elapsedFrameTime=performance.now()-e,ry.frameDuration=r-i,(l=a.phases[o])==null||l.call(a,ry)))}),vre[n].record(performance.now()-s)}c9(),wre.record(performance.now()-e)}const $1=new Yd;function c9(){uh.forAll(e=>{e.removed&&$1.push(e)}),uh.removeUnorderedMany($1.data,$1.length),$1.clear()}function d9(){for(;EM.length;){const e=EM.shift();e.isActive&&e.callback()}Nb.willDispatch=!1}function P5e(e=1,t){const r=a9(),i=()=>{go(t)?r.reject(Ot()):e===0?r():(--e,Fb(()=>i()))};return i(),r.promise}const vre=xM.map(e=>new zg(e)),wre=new zg("total");function _re(e,t){for(const r of e.entries())if(t(r[0]))return!0;return!1}let bre=0;function Ug(){return++bre}class k2{constructor(t){this._notify=t,this._accessed=[],this._handles=[],this._invalidCount=0}destroy(){this._accessed.length=0,this.clear()}onInvalidated(){this._invalidCount++}onCommitted(){const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}onObservableAccessed(t){this._accessed.includes(t)||this._accessed.push(t)}onTrackingEnd(){const t=this._handles,r=this._accessed;for(let i=0;i<r.length;++i)t.push(r[i].observe(this));r.length=0}clear(){const t=this._handles;for(let r=0;r<t.length;++r)t[r].remove();t.length=0}}let gf=!1;const jb=[];function h9(e,t){let r=new k2(s),i=null,n=!1;function s(){if(!r||n)return;if(gf)return void m9(s);const a=i;r.clear(),gf=!0,n=!0,i=yl(r,e),n=!1,gf=!1,t(i,a),y9()}function o(){r&&(r.destroy(),r=null,i=null)}return n=!0,i=yl(r,e),n=!1,{remove:o}}function p9(e,t){let r=new k2(n),i=null;function n(){t(i,o)}function s(){r&&(r.destroy(),r=null),i=null}function o(){return r?(r.clear(),i=yl(r,e),i):null}return o(),{remove:s}}function f9(e){let t=new k2(i),r=!1;function i(){t&&!r&&(gf?m9(i):(t.clear(),gf=!0,r=!0,yl(t,e),r=!1,gf=!1,y9()))}function n(){t&&(t.destroy(),t=null)}return r=!0,yl(t,e),r=!1,{remove:n}}function m9(e){jb.includes(e)||jb.unshift(e)}function y9(){for(;jb.length;)jb.pop()()}var Gg;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(Gg||(Gg={}));class L0{constructor(){this.uid=Ug(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,r,i,n,s){return this.pool.acquire(Gg.Untracked,t,r,i,n,s,BO)}static acquireTracked(t,r,i,n){return this.pool.acquire(Gg.Tracked,t,r,i,null,null,n)}notify(t,r){this.type===Gg.Untracked?this.callback.call(this.target,t,r,this.path,this.target):this.callback.call(null,t,r)}acquire(t,r,i,n,s,o,a){this.uid=Ug(),this.removed=!1,this.type=t,this.oldValue=r,this.callback=i,this.getValue=n,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=Ug(),this.removed=!0}}L0.pool=new n9(L0);const Ww=new $i,ll=new Set;let Vb;function zb(e){ll.delete(e),ll.add(e),Vb||(Vb=pm(xre))}function Sre(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function $re(e){for(const t of ll.values())t.target===e&&(t.removed=!0)}function xre(){let e=10;for(;Vb&&e--;){Vb=null;const t=Ere(),r=Ww.acquire();for(const i of t){const n=i.uid;Sre(i),n===i.uid&&i.removed&&r.push(i)}for(const i of ll)i.removed&&(r.push(i),ll.delete(i));for(const i of r)L0.pool.release(i);Ww.release(r),Ww.release(t),TM.forEach(i=>i())}}function Ere(){const e=Ww.acquire();e.length=ll.size;let t=0;for(const r of ll)e[t]=r,++t;return ll.clear(),e}const TM=new Set;function Tre(e){return TM.add(e),{remove(){TM.delete(e)}}}function Mre(e,t,r){let i=qz(e,t,r,(n,s,o)=>{let a,l,c=p9(()=>vv(n,s),(h,f)=>{n.__accessor__.destroyed||a&&a.uid!==l?i.remove():(a||(a=L0.acquireUntracked(h,o,f,n,s),l=a.uid),zb(a))});return{remove:Wz(()=>{c.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,zb(a)),a=null),i=c=null})}});return i}function Ire(e,t,r){const i=qz(e,t,r,(n,s,o)=>{let a=!1;return h9(()=>vv(n,s),(l,c)=>{n.__accessor__.destroyed?i.remove():a||(a=!0,BO(c,l)||o.call(n,l,c,s,n),a=!1)})});return i}function Cre(e,t,r,i=!1){return!e.__accessor__||e.__accessor__.destroyed?{remove(){}}:i?Ire(e,t,r):Mre(e,t,r)}function kre(e,t,r){let i,n,s=p9(e,(o,a)=>{i&&i.uid!==n?s.remove():(i||(i=L0.acquireTracked(o,t,a,r),n=i.uid),zb(i))});return{remove:Wz(()=>{s.remove(),i&&(i.uid!==n||i.removed||(i.removed=!0,zb(i)),i=null),s=null})}}function Lre(e,t,r){let i=!1;return h9(e,(n,s)=>{i||(i=!0,r(s,n)||t(n,s),i=!1)})}function Ore(e,t,r=!1,i=Fte){return r?Lre(e,t,i):kre(e,t,i)}function NF(e){return _re(ll,t=>t.oldValue===e)}function L2(e,t){for(const[r,i]of e)if(t(i,r))return!0;return!1}function g9(e,t,r){const i=e.get(t);if(i!==void 0)return i;const n=r();return e.set(t,n),n}const vf=Z.getLogger("esri.core.Accessor");function Are(e){return e==null?e:new Date(e)}function Pre(e){return e==null?e:!!e}function Sv(e){return e==null?e:e.toString()}function as(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function YO(e){return e==null?e:Math.round(parseFloat(e))}function v9(e){return e&&e.constructor&&e.constructor.__accessorMetadata__!==void 0}function Ub(e,t){return t!=null&&e&&!(t instanceof e)}function w9(e){return e&&"isCollection"in e}function DF(e){return e&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function Rre(e,t){if(!t||!t.constructor||!w9(t.constructor))return MM(e,t)?t:new e(t);const r=DF(e.prototype.itemType),i=DF(t.constructor.prototype.itemType);return r?i?r===i?t:r.prototype.isPrototypeOf(i.prototype)?new e(t):(MM(e,t),t):new e(t):t}function MM(e,t){return!!v9(t)&&(vf.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+O2(e)+"'"),!0)}function QO(e,t){return t==null?t:w9(e)?Rre(e,t):Ub(e,t)?MM(e,t)?t:new e(t):t}function O2(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}const Fre=new WeakMap;function Nre(e){switch(e){case Number:return as;case ct:return YO;case Boolean:return Pre;case String:return Sv;case Date:return Are;default:return g9(Fre,e,()=>QO.bind(null,e))}}function dt(e,t){const r=Nre(e);return arguments.length===1?r:r(t)}function O0(e,t,r){return arguments.length===1?O0.bind(null,e):t&&(Array.isArray(t)?t.map(i=>e(i,r)):[e(t,r)])}function Dre(e,t){return arguments.length===1?O0(dt.bind(null,e)):O0(dt.bind(null,e),t)}function _9(e,t,r){return t!==0&&Array.isArray(r)?r.map(i=>_9(e,t-1,i)):e(r)}function Gb(e,t,r){if(arguments.length===2)return Gb.bind(null,e,t);if(!r)return r;let i=t,n=r=_9(e,t,r);for(;i>0&&Array.isArray(n);)i--,n=n[0];if(n!==void 0)for(let s=0;s<i;s++)r=[r];return r}function jre(e,t,r){return arguments.length===2?Gb(dt.bind(null,e),t):Gb(dt.bind(null,e),t,r)}function b9(e){return!!Array.isArray(e)&&!e.some(t=>{const r=typeof t;return!(r==="string"||r==="number"||r==="function"&&e.length>1)})}function IM(e,t){if(arguments.length===2)return IM(e).call(null,t);const r=new Set,i=e.filter(a=>typeof a!="function"),n=e.filter(a=>typeof a=="function");for(const a of e)typeof a!="string"&&typeof a!="number"||r.add(a);let s=null,o=null;return(a,l)=>{if(a==null)return a;const c=typeof a,h=c==="string"||c==="number";return h&&(r.has(a)||n.some(f=>c==="string"&&f===String||c==="number"&&f===Number))||c==="object"&&n.some(f=>!Ub(a,f))?a:(h&&i.length?(s||(s=i.map(f=>typeof f=="string"?`'${f}'`:`${f}`).join(", ")),vf.error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&n.length?(o||(o=n.map(f=>O2(f)).join(", ")),vf.error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):vf.error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function ia(e,t){if(arguments.length===2)return ia(e).call(null,t);const r={},i=[],n=[];for(const l in e.typeMap){const c=e.typeMap[l];r[l]=dt(c),i.push(O2(c)),n.push(l)}const s=()=>`'${i.join("', '")}'`,o=()=>`'${n.join("', '")}'`,a=typeof e.key=="string"?l=>l[e.key]:e.key;return l=>{if(e.base&&!Ub(e.base,l)||l==null)return l;const c=a(l)||e.defaultKeyValue,h=r[c];if(!h)return vf.error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!Ub(e.typeMap[c],l))return l;if(typeof e.key=="string"&&!v9(l)){const f={};for(const m in l)m!==e.key&&(f[m]=l[m]);return h(f)}return h(l)}}class ct{}const R5e={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function Vre(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function S9(e){switch(e.type){case"native":return dt(e.value);case"array":return O0(S9(e.value));case"one-of":return zre(e);default:return null}}function zre(e){let t=null;return(r,i)=>kM(r,e)?r:(t==null&&(t=CM(e)),vf.error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),i&&(i.valid=!1),null)}function CM(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case ct:return"integer";case Date:return"date";default:return O2(e.value)}case"array":return`array of ${CM(e.value)}`;case"one-of":{const t=e.values.map(r=>CM(r));return`one of ${t.slice(0,t.length-1)} or ${t[t.length-1]}`}}return"unknown"}function kM(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case ct:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string"}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(r=>!kM(r,t.value));case"one-of":return t.values.some(r=>kM(e,r))}}function d(e={}){return(t,r)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const i=Object.getOwnPropertyDescriptor(t,r),n=x2(t,r);i&&(i.get||i.set?(n.get=i.get||n.get,n.set=i.set||n.set):"value"in i&&("value"in e&&Z.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),n.value=e.value=i.value)),e.readOnly!=null&&(n.readOnly=e.readOnly);const s=e.aliasOf;if(s){const l=typeof s=="string"?s:s.source,c=typeof s=="string"?null:s.overridable===!0;let h;n.dependsOn=[l],n.get=function(){let f=Ob(this,l);if(typeof f=="function"){h||(h=l.split(".").slice(0,-1).join("."));const m=Ob(this,h);m&&(f=f.bind(m))}return f},n.readOnly||(n.set=c?function(f){f!==void 0?this._override(r,f):this._clearOverride(r)}:function(f){Rb(this,l,f)})}const o=e.type,a=e.types;n.cast||(o?n.cast=Ure(o):a&&(Array.isArray(a)?n.cast=O0(ia(a[0])):n.cast=ia(a))),e.range&&(n.cast=Gre(n.cast,e.range)),Gte(n,e)}}function $9(e,t,r){const i=x2(e,r);i.json||(i.json={});let n=i.json;return t!==void 0&&(n.origins||(n.origins={}),n.origins[t]||(n.origins[t]={}),n=n.origins[t]),n}function Ure(e){let t=0,r=e;if(Vre(e))return S9(e);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],t++;const i=r;if(b9(i))return t===0?IM(i):Gb(IM(i),t);if(t===1)return Dre(i);if(t>1)return jre(i,t);const n=e;return n.from?n.from:dt(n)}function Gre(e,t){return r=>{let i=+e(r);return t.step!=null&&(i=Math.round(i/t.step)*t.step),t.min!=null&&(i=Math.max(t.min,i)),t.max!=null&&(i=Math.min(t.max,i)),i}}function Bre(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const i in r)if(t[i]){const n=t[i];r[i].forEach(s=>{t[s]=n}),delete t[i]}}}class ki extends E2{constructor(t,r,i){if(super(t,r,i),!(this instanceof ki))return new ki(t,r,i)}}ki.prototype.type="warning";function x9(e){return!!e&&e.prototype&&e.prototype.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const LM=Z.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function jF(e,t,r){var i,n;e&&(!r&&!t.read||((i=t.read)==null?void 0:i.reader)||((n=t.read)==null?void 0:n.enabled)===!1||Hre(e)&&sn("read.reader",fm(e),t))}function fm(e){var r,i,n;const t=(r=e.ndimArray)!=null?r:0;if(t>1)return Wre(e);if(t===1)return VF(e);if("type"in e&&T9(e.type)){const s=(n=(i=e.type.prototype)==null?void 0:i.itemType)==null?void 0:n.Type,o=VF(typeof s=="function"?{type:s}:{types:s});return(a,l,c)=>{const h=o(a,l,c);return h&&new e.type(h)}}return KO(e)}function KO(e){return"type"in e?qre(e.type):Jre(e.types)}function qre(e){return e.prototype.read?(t,r,i)=>{if(t==null)return t;const n=typeof t;if(n!=="object")return void LM.error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${n}'`);const s=new e;return s.read(t,i),s}:e.fromJSON}function E9(e,t,r,i){return i!==0&&Array.isArray(t)?t.map(n=>E9(e,n,r,i-1)):e(t,void 0,r)}function Wre(e){var n;const t=KO(e),r=E9.bind(null,t),i=(n=e.ndimArray)!=null?n:0;return(s,o,a)=>{if(s==null)return s;s=r(s,a,i);let l=i,c=s;for(;l>0&&Array.isArray(c);)l--,c=c[0];if(c!==void 0)for(let h=0;h<l;h++)s=[s];return s}}function VF(e){const t=KO(e);return(r,i,n)=>{if(r==null)return r;if(Array.isArray(r)){const o=[];for(const a of r){const l=t(a,void 0,n);l!==void 0&&o.push(l)}return o}const s=t(r,void 0,n);return s!==void 0?[s]:void 0}}function T9(e){if(!x9(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?XO(t.Type):M9(t.Type))}function Hre(e){return"types"in e?M9(e.types):XO(e.type)}function XO(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||T9(e))}function M9(e){for(const t in e.typeMap)if(!XO(e.typeMap[t]))return!1;return!0}function Jre(e){var i;let t=null;const r=(i=e.errorContext)!=null?i:"type";return(n,s,o)=>{if(n==null)return n;const a=typeof n;if(a!=="object")return void LM.error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);t||(t=Zre(e));const l=e.key;if(typeof l!="string")return;const c=n[l],h=c?t[c]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!h){const m=`Type '${c||"unknown"}' is not supported`;return o&&o.messages&&n&&o.messages.push(new ki(`${r}:unsupported`,m,{definition:n,context:o})),void LM.error(m)}const f=new h;return f.read(n,o),f}}function Zre(e){var r,i;const t={};for(const n in e.typeMap){const s=e.typeMap[n],o=wv(s.prototype);if(typeof e.key=="function")continue;const a=o.properties[e.key];if(!a)continue;((r=a.json)==null?void 0:r.type)&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"&&(t[a.json.type[0]]=s);const l=(i=a.json)==null?void 0:i.write;if(!l||!l.writer){t[n]=s;continue}const c=l.target,h=typeof c=="string"?c:e.key,f={};l.writer(n,f,h),f[h]&&(t[f[h]]=s)}return t}function Yre(e){if(e.json||(e.json={}),UF(e.json),GF(e.json),zF(e.json),e.json.origins)for(const t in e.json.origins)UF(e.json.origins[t]),GF(e.json.origins[t]),zF(e.json.origins[t]);return!0}function zF(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function UF(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function GF(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}const Qre=Z.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer");function BF(e,t){var i;if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const r=(i=e==null?void 0:e.ndimArray)!=null?i:0;e&&(r===1||"type"in e&&x9(e.type))?t.write.writer=eie:r>1?t.write.writer=tie(r):t.types?Array.isArray(t.types)?t.write.writer=Xre(t.types[0]):t.write.writer=Kre(t.types):t.write.writer=A0}function Kre(e){return(t,r,i,n)=>t?I9(t,e,n)?A0(t,r,i,n):void 0:A0(t,r,i,n)}function I9(e,t,r){var i,n;for(const s in t.typeMap)if(e instanceof t.typeMap[s])return!0;if(r!=null&&r.messages){const s=(i=t.errorContext)!=null?i:"type",o=`Values of type '${(n=typeof t.key!="function"?e[t.key]:e.declaredClass)!=null?n:"Unknown"}' cannot be written`;r&&r.messages&&e&&r.messages.push(new O(`${s}:unsupported`,o,{definition:e,context:r})),Qre.error(o)}return!1}function Xre(e){return(t,r,i,n)=>!t||!Array.isArray(t)?A0(t,r,i,n):A0(t.filter(s=>I9(s,e,n)),r,i,n)}function A0(e,t,r,i){sn(r,Bb(e,i),t)}function Bb(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?qb(e):e}function qb(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function eie(e,t,r,i){let n;e===null?n=null:e&&typeof e.map=="function"?(n=e.map(s=>Bb(s,i)),typeof n.toArray=="function"&&(n=n.toArray())):n=[Bb(e,i)],sn(r,n,t)}function C9(e,t,r){return r!==0&&Array.isArray(e)?e.map(i=>C9(i,t,r-1)):Bb(e,t)}function tie(e){return(t,r,i,n)=>{let s;if(t===null)s=null;else{s=C9(t,n,e);let o=e,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)s=[s]}sn(i,s,r)}}function OM(e,t){return e3(e,"read",t)}function k9(e,t){return e3(e,"write",t)}function e3(e,t,r){let i=e&&e.json;if(e&&e.json&&e.json.origins&&r){const n=e.json.origins[r.origin];n&&(t==="any"||t in n)&&(i=n)}return i}function rie(e){const t=iie(e);if(e.json.origins)for(const r in e.json.origins){const i=e.json.origins[r],n=i.types?nie(i):t;jF(n,i,!1),i.types&&!i.write&&e.json.write&&e.json.write.enabled&&(i.write={...e.json.write}),BF(n,i)}jF(t,e.json,!0),BF(t,e.json)}function iie(e){return e.json.types?AM(e.json):e.type?L9(e):AM(e)}function nie(e){return e.type?L9(e):AM(e)}function L9(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!b9(r);)r=r[0],t++;return{type:r,ndimArray:t}}function AM(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}function sie(e){Yre(e)&&(Bre(e),rie(e))}const _x=new Set,bx=new Set;function E(e){return t=>{t.prototype.declaredClass=e,aie(t);const r=[],i=[];let n=t.prototype;for(;n;)n.hasOwnProperty("initialize")&&!_x.has(n.initialize)&&(_x.add(n.initialize),r.push(n.initialize)),n.hasOwnProperty("destroy")&&!bx.has(n.destroy)&&(bx.add(n.destroy),i.push(n.destroy)),n=Object.getPrototypeOf(n);_x.clear(),bx.clear();class s extends t{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=r.length-1;l>=0;l--)r[l].call(this)}}),i.length){let l=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){l=!0;for(let c=0;c<i.length;c++)i[c].call(this)}}})}this.postscript(...a)}}}return s.__accessorMetadata__=wv(t.prototype),s.prototype.declaredClass=e,s}}function oie(e,t){return t.get==null?function(){const r=this.__accessor__.properties.get(e);if(r===void 0)return;Ie(r);const i=this.__accessor__.store;return i.has(e)?i.get(e):r.metadata.value}:function(){const r=this.__accessor__.properties.get(e);if(r!==void 0)return r.getComputed()}}function aie(e){const t=e.prototype,r=wv(t).properties,i={};for(const n of Object.getOwnPropertyNames(r)){const s=r[n];sie(s),i[n]={enumerable:!0,configurable:!0,get:oie(n,s),set(o){const a=this.__accessor__;if(a!==void 0){if(!Object.isFrozen(this)){if(a.initialized&&s.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${n}' of ${this.declaredClass}`);if(a.lifecycle===Yo.CONSTRUCTED&&s.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${n}' of ${this.declaredClass}`);a.set(n,o)}}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(e.prototype,i)}var O9;function lie(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return((t=e.constructor)==null?void 0:t.__accessorMetadata__)||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const Ny=Symbol("Accessor-Handles");class le{constructor(...t){if(this[O9]=null,this.constructor===le)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new Kte(this)}),t.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,t))}static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:i,constructor:n}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const s=this;class o extends s{constructor(...l){super(...l),this.inherited=null,n&&n.apply(this,l)}}wv(o.prototype);for(const a in t){const l=t[a];o.prototype[a]=typeof l=="function"?function(...c){const h=this.inherited;let f;this.inherited=function(...m){if(s.prototype[a])return s.prototype[a].apply(this,m)};try{f=l.apply(this,c)}catch(m){throw this.inherited=h,m}return this.inherited=h,f}:t[a]}for(const a in r){const l=lie(r[a]);d(l)(o.prototype,a)}return E(i)(o)}postscript(t){const r=this.__accessor__,i=r.ctorArgs||t;r.initialize(),i&&(this.set(i),r.ctorArgs=null),r.constructed(),this.initialize()}initialize(){}destroy(){this.destroyed||(Zo(this[Ny],t=>{t.forEach(r=>r.remove())}),this[Ny]=null,$re(this),this.__accessor__.destroy())}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&this.__accessor__.lifecycle===Yo.CONSTRUCTED||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(t){this.get(t)}get(t){return Ob(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return Rb(this,t,r),this}watch(t,r,i){return Cre(this,t,r,i)}own(t){let r=this[Ny];if(R(r)&&(r=this[Ny]=new Set),yM(t))for(const i of t)r.add(i);else r.add(t)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_override(t,r){return this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}}O9=Ny;class wf{constructor(){this._emitter=new wf.EventEmitter(this)}emit(t,r){return this._emitter.emit(t,r)}on(t,r){return this._emitter.on(t,r)}once(t,r){return this._emitter.once(t,r)}hasEventListener(t){return this._emitter.hasEventListener(t)}}(function(e){class t{constructor(n=null){this.target=n,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(n,s){const o=this._listenersMap&&this._listenersMap.get(n);if(!o)return!1;const a=this.target||this;return[...o].forEach(l=>{l.call(a,s)}),o.length>0}on(n,s){if(Array.isArray(n)){const a=n.map(l=>this.on(l,s));return $2(a)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const o=this._listenersMap.get(n)||[];return o.push(s),this._listenersMap.set(n,o),{remove:()=>{const a=this._listenersMap&&this._listenersMap.get(n)||[],l=a.indexOf(s);l>=0&&a.splice(l,1)}}}once(n,s){const o=this.on(n,a=>{o.remove(),s.call(null,a)});return o}hasEventListener(n){const s=this._listenersMap&&this._listenersMap.get(n);return s!=null&&s.length>0}}e.EventEmitter=t,e.EventedMixin=i=>{let n=class extends i{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(s,o){return this._emitter.emit(s,o)}on(s,o){return this._emitter.on(s,o)}once(s,o){return this._emitter.once(s,o)}hasEventListener(s){return this._emitter.hasEventListener(s)}};return n=u([E("esri.core.Evented")],n),n};let r=class extends le{constructor(){super(...arguments),this._emitter=new wf.EventEmitter(this)}destroy(){this._emitter.clear()}emit(i,n){return this._emitter.emit(i,n)}on(i,n){return this._emitter.on(i,n)}once(i,n){return this._emitter.once(i,n)}hasEventListener(i){return this._emitter.hasEventListener(i)}};r=u([E("esri.core.Evented")],r),e.EventedAccessor=r})(wf||(wf={}));const ua=wf;var Ye;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(Ye||(Ye={}));function t3(e){return(t,r)=>{t[r]=e}}class A9{constructor(){this._observers=[]}observe(t){return this._observers.includes(t)||this._observers.push(t),new i9(this._observers,t)}notify(){const t=this._observers.slice();for(let r=0;r<t.length;++r){const i=t[r];i.onInvalidated(),i.onCommitted()}}}var el;class uie{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}}const Un=new yo(uie,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1}),cie=()=>{};function Sx(e){return e?e instanceof wd?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function $x(e){if(e&&e.length)return e[0]}function die(e,t,r,i){const n=Math.min(e.length-r,t.length-i);let s=0;for(;s<n&&e[r+s]===t[i+s];)s++;return s}function P9(e,t,r,i){t&&t.forEach((n,s,o)=>{e.push(n),P9(e,r.call(i,n,s,o),r,i)})}const Cl=new Set,kl=new Set,Ll=new Set,xx=new Map;let hie=0,wd=el=class extends ua.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new A9,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:hie++})}static isCollection(e){return e!=null&&e instanceof el}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof el?{items:e}:e:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return Ie(this._observable),this._items}set items(e){this._emitBeforeChanges(Ye.ADD)||(this._splice(0,this.length,Sx(e)),this._emitAfterChanges(Ye.ADD))}hasEventListener(e){return e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if(e==="change"){const r=this._chgListeners,i={removed:!1,callback:t};return r.push(i),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=cie,i.removed=!0,r.splice(r.indexOf(i),1)}}}return this._emitter.on(e,t)}once(e,t){const r=this.on(e,t);return{remove(){r.remove()}}}add(e,t){if(Ie(this._observable),this._emitBeforeChanges(Ye.ADD))return this;const r=this.getNextIndex(t!=null?t:null);return this._splice(r,0,[e]),this._emitAfterChanges(Ye.ADD),this}addMany(e,t=this._items.length){if(Ie(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(Ye.ADD))return this;const r=this.getNextIndex(t);return this._splice(r,0,Sx(e)),this._emitAfterChanges(Ye.ADD),this}at(e){if(Ie(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(Ie(this._observable),!this.length||this._emitBeforeChanges(Ye.REMOVE))return[];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(Ye.REMOVE),e}clone(){return Ie(this._observable),this._createNewInstance({items:this._items.map(P)})}concat(...e){Ie(this._observable);const t=e.map(Sx);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(Ie(this._observable),!this.length||this._emitBeforeChanges(Ye.REMOVE))return;const r=this._splice(0,this.length),i=r.length;for(let n=0;n<i;n++)e.call(t,r[n],n,r);this._emitAfterChanges(Ye.REMOVE)}every(e,t){return Ie(this._observable),this._items.every(e,t)}filter(e,t){let r;return Ie(this._observable),r=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:r})}find(e,t){return Ie(this._observable),this._items.find(e,t)}findIndex(e,t){return Ie(this._observable),this._items.findIndex(e,t)}flatten(e,t){Ie(this._observable);const r=[];return P9(r,this,e,t),new el(r)}forEach(e,t){return Ie(this._observable),this._items.forEach(e,t)}getItemAt(e){return Ie(this._observable),this._items[e]}getNextIndex(e){Ie(this._observable);const t=this.length;return(e=e==null?t:e)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return Ie(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return Ie(this._observable),this._items.indexOf(e,t)}join(e=","){return Ie(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return Ie(this._observable),this._items.lastIndexOf(e,t)}map(e,t){Ie(this._observable);const r=this._items.map(e,t);return new el({items:r})}reorder(e,t=this.length-1){Ie(this._observable);const r=this.indexOf(e);if(r!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(Ye.MOVE))return e;this._splice(r,1),this._splice(t,0,[e]),this._emitAfterChanges(Ye.MOVE)}return e}}pop(){if(Ie(this._observable),!this.length||this._emitBeforeChanges(Ye.REMOVE))return;const e=$x(this._splice(this.length-1,1));return this._emitAfterChanges(Ye.REMOVE),e}push(...e){return Ie(this._observable),this._emitBeforeChanges(Ye.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(Ye.ADD)),this.length}reduce(e,t){Ie(this._observable);const r=this._items;return arguments.length===2?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){Ie(this._observable);const r=this._items;return arguments.length===2?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return Ie(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(Ie(this._observable),e<0||e>=this.length||this._emitBeforeChanges(Ye.REMOVE))return;const t=$x(this._splice(e,1));return this._emitAfterChanges(Ye.REMOVE),t}removeMany(e){if(Ie(this._observable),!e||!e.length||this._emitBeforeChanges(Ye.REMOVE))return[];const t=e instanceof el?e.toArray():e,r=this._items,i=[],n=t.length;for(let s=0;s<n;s++){const o=t[s],a=r.indexOf(o);if(a>-1){const l=1+die(t,r,s+1,a+1),c=this._splice(a,l);c&&c.length>0&&i.push.apply(i,c),s+=l-1}}return this._emitAfterChanges(Ye.REMOVE),i}reverse(){if(Ie(this._observable),this._emitBeforeChanges(Ye.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(Ye.MOVE),this}shift(){if(Ie(this._observable),!this.length||this._emitBeforeChanges(Ye.REMOVE))return;const e=$x(this._splice(0,1));return this._emitAfterChanges(Ye.REMOVE),e}slice(e=0,t=this.length){return Ie(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return Ie(this._observable),this._items.some(e,t)}sort(e){if(Ie(this._observable),!this.length||this._emitBeforeChanges(Ye.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(Ye.MOVE),this}splice(e,t,...r){Ie(this._observable);const i=(t?Ye.REMOVE:0)|(r.length?Ye.ADD:0);if(this._emitBeforeChanges(i))return[];const n=this._splice(e,t,r)||[];return this._emitAfterChanges(i),n}toArray(){return Ie(this._observable),this._items.slice()}toJSON(){return Ie(this._observable),this.toArray()}toLocaleString(){return Ie(this._observable),this._items.toLocaleString()}toString(){return Ie(this._observable),this._items.toString()}unshift(...e){return Ie(this._observable),!e.length||this._emitBeforeChanges(Ye.ADD)||(this._splice(0,0,e),this._emitAfterChanges(Ye.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,r){const i=this._items,n=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=pm(()=>this._dispatchChange())),t){if(o=i.splice(e,t),this.hasEventListener("before-remove")){const a=Un.acquire();a.target=this,a.cancellable=!0;for(let l=0,c=o.length;l<c;l++)s=o[l],a.reset(s),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),i.splice(e,0,s),e+=1,l-=1,c-=1);Un.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=Un.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let c=0;c<l;c++)a.reset(o[c]),this.emit("after-remove",a);Un.release(a)}}if(r&&r.length){if(n){const h=[];for(const f of r){const m=n.ensureType(f);m==null&&f!=null||h.push(m)}r=h}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),c=e===this.length;if(a||l){const h=Un.acquire();h.target=this,h.cancellable=!0;const f=Un.acquire();f.target=this,f.cancellable=!1;for(const m of r)a?(h.reset(m),this.emit("before-add",h),h.defaultPrevented||(c?i.push(m):i.splice(e++,0,m),this._set("length",i.length),l&&(f.reset(m),this.emit("after-add",f)))):(c?i.push(m):i.splice(e++,0,m),this._set("length",i.length),f.reset(m),this.emit("after-add",f));Un.release(f),Un.release(h)}else{if(c)for(const h of r)i.push(h);else i.splice(e,0,...r);this._set("length",i.length)}}return(r&&r.length||o&&o.length)&&this._notifyChangeEvent(r,o),o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const r=Un.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,Un.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=Un.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),Un.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const r=t.changes;Cl.clear(),kl.clear(),Ll.clear();for(const{added:l,removed:c}of r){if(l)if(Ll.size===0&&kl.size===0)for(const h of l)Cl.add(h);else for(const h of l)kl.has(h)?(Ll.add(h),kl.delete(h)):Ll.has(h)||Cl.add(h);if(c)if(Ll.size===0&&Cl.size===0)for(const h of c)kl.add(h);else for(const h of c)Cl.has(h)?Cl.delete(h):(Ll.delete(h),kl.add(h))}const i=$i.acquire();Cl.forEach(l=>{i.push(l)});const n=$i.acquire();kl.forEach(l=>{n.push(l)});const s=this._items,o=t.items,a=$i.acquire();if(Ll.forEach(l=>{o.indexOf(l)!==s.indexOf(l)&&a.push(l)}),t.listeners&&(i.length||n.length||a.length)){const l={target:this,added:i,removed:n,moved:a},c=t.listeners.length;for(let h=0;h<c;h++){const f=t.listeners[h];f.removed||f.callback.call(this,l)}}$i.release(i),$i.release(n),$i.release(a)}Cl.clear(),kl.clear(),Ll.clear()}};wd.ofType=e=>{if(!e)return el;if(xx.has(e))return xx.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const i in e.typeMap){const n=e.typeMap[i].prototype.declaredClass;t?t+=` | ${n}`:t=n}let r=class extends el{};return u([t3({Type:e,ensureType:typeof e=="function"?dt(e):ia(e)})],r.prototype,"itemType",void 0),r=u([E(`esri.core.Collection<${t}>`)],r),xx.set(e,r),r},u([d()],wd.prototype,"length",void 0),u([d()],wd.prototype,"items",null),wd=el=u([E("esri.core.Collection")],wd);const de=wd;function ch(e,t,r=de){return t||(t=new r),t===e||(t.removeAll(),pie(e)?t.addMany(e):e&&t.add(e)),t}function R9(e){return e}function pie(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}class r3{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new r3;return this._values.forEach((i,n)=>{t&&t.has(n)||r.set(n,P(i.value),i.origin)}),r}get(t,r){r=this._normalizeOrigin(r);const i=this._values.get(t);return r==null||(i==null?void 0:i.origin)===r?i==null?void 0:i.value:void 0}originOf(t){var r,i;return(i=(r=this._values.get(t))==null?void 0:r.origin)!=null?i:xe.USER}keys(t){t=this._normalizeOrigin(t);const r=[...this._values.keys()];return t==null?r:r.filter(i=>{var n;return((n=this._values.get(i))==null?void 0:n.origin)===t})}set(t,r,i){if((i=this._normalizeOrigin(i))===xe.DEFAULTS){const n=this._values.get(t);if(n&&n.origin!=null&&n.origin>i)return}this._values.set(t,new fie(r,i))}delete(t,r){var i;(r=this._normalizeOrigin(r))!=null&&((i=this._values.get(t))==null?void 0:i.origin)!==r||this._values.delete(t)}has(t,r){var i;return(r=this._normalizeOrigin(r))!=null?((i=this._values.get(t))==null?void 0:i.origin)===r:this._values.has(t)}forEach(t){this._values.forEach(({value:r},i)=>t(r,i))}_normalizeOrigin(t){if(t!=null)return t===xe.DEFAULTS?t:xe.USER}}class fie{constructor(t,r){this.value=t,this.origin=r}}function F9(e,t,r){t.keys().forEach(n=>{r.set(n,t.get(n),xe.DEFAULTS)});const i=e.metadatas;Object.keys(i).forEach(n=>{e.internalGet(n)&&r.set(n,e.internalGet(n),xe.DEFAULTS)})}function mie(e,t,r){if(!e||!e.read||e.read.enabled===!1||!e.read.source)return!1;const i=e.read.source;if(typeof i=="string"){if(i===t||i.includes(".")&&i.indexOf(t)===0&&TF(i,r))return!0}else for(const n of i)if(n===t||n.includes(".")&&n.indexOf(t)===0&&TF(n,r))return!0;return!1}function yie(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function gie(e,t,r,i,n){let s=OM(t[r],n);yie(s)&&(e[r]=!0);for(const o of Object.getOwnPropertyNames(t))s=OM(t[o],n),mie(s,r,i)&&(e[o]=!0)}function vie(e,t,r,i){const n=r.metadatas,s=e3(n[t],"any",i),o=s&&s.default;if(o===void 0)return;const a=typeof o=="function"?o.call(e,t,i):o;a!==void 0&&r.set(t,a)}const N9={origin:"service"};function D9(e,t,r=N9){if(!t||typeof t!="object")return;const i=li(e),n=i.metadatas,s={};for(const o of Object.getOwnPropertyNames(t))gie(s,n,o,t,r);i.setDefaultOrigin(r.origin);for(const o of Object.getOwnPropertyNames(s)){const a=OM(n[o],r).read,l=a&&a.source;let c;c=l&&typeof l=="string"?vv(t,l):t[o],a&&a.reader&&(c=a.reader.call(e,c,t,r)),c!==void 0&&i.set(o,c)}if(!r||!r.ignoreDefaults){i.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(n))s[o]||vie(e,o,i,r)}i.setDefaultOrigin("user")}function wie(e,t,r,i=N9){var s;const n={...i,messages:[]};r(n),(s=n.messages)==null||s.forEach(o=>{o.type!=="warning"||e.loaded?i&&i.messages&&i.messages.push(o):e.loadWarnings.push(o)})}const _ie=Z.getLogger("esri.core.accessorSupport.write");function bie(e,t,r,i,n){var o,a;const s={};return(a=(o=t.write)==null?void 0:o.writer)==null||a.call(e,i,s,r,n),s}function j9(e,t,r,i,n,s){if(!i||!i.write)return!1;const o=e.get(r);if(!n&&i.write.overridePolicy){const a=i.write.overridePolicy.call(e,o,r,s);a!==void 0&&(n=a)}if(n||(n=i.write),!n||n.enabled===!1)return!1;if((o===null&&!n.allowNull&&!n.writerEnsuresNonNull||o===void 0)&&n.isRequired){const a=new O("web-document-write:property-required",`Missing value for required property '${r}' on '${e.declaredClass}'`,{propertyName:r,target:e});return a&&s&&s.messages?s.messages.push(a):a&&!s&&_ie.error(a.name,a.message),!1}return!(o===void 0||o===null&&!n.allowNull&&!n.writerEnsuresNonNull||(!t.store.multipleOriginsSupported||t.store.originOf(r)===xe.DEFAULTS)&&Sie(e,r,s,i,o)||!n.ignoreOrigin&&s&&s.origin&&t.store.multipleOriginsSupported&&t.store.originOf(r)<Vu(s.origin))}function Sie(e,t,r,i,n){const s=i.default;if(s===void 0)return!1;if(i.defaultEquals!=null)return i.defaultEquals(n);if(typeof s=="function"){if(Array.isArray(n)){const o=s.call(e,t,r);return UO(o,n)}return!1}return s===n}function $ie(e,t,r,i){const n=li(e),s=n.metadatas,o=k9(s[t],i);return!!o&&j9(e,n,t,o,r,i)}function V9(e,t,r){var s,o;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return Gw(t,e.toJSON(r));const i=li(e),n=i.metadatas;for(const a in n){const l=k9(n[a],r);if(!j9(e,i,a,l,void 0,r))continue;const c=e.get(a),h=bie(e,l,l.write&&typeof l.write.target=="string"?l.write.target:a,c,r);Object.keys(h).length>0&&(t=Gw(t,h),(o=(s=r==null?void 0:r.resources)==null?void 0:s.pendingOperations)!=null&&o.length&&Promise.all(r.resources.pendingOperations).then(()=>Gw(t,h)),r&&r.writtenProperties&&r.writtenProperties.push({target:e,propName:a,oldOrigin:Hte(i.store.originOf(a)),newOrigin:r.origin}))}return t}const $v=e=>{let t=class extends e{constructor(...r){super(...r);const i=li(this),n=i.store,s=new r3;i.store=s,F9(i,n,s)}read(r,i){D9(this,r,i)}write(r={},i){return V9(this,r,i)}toJSON(r){return this.write({},r)}static fromJSON(r,i){return xie.call(this,r,i)}};return t=u([E("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function xie(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(e,t),r}let B=class extends $v(le){};B=u([E("esri.core.JSONSupport")],B);var Eu;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(Eu||(Eu={}));class Eie{constructor(t){this.instance=t,this._resolver=gl(),this._status=Eu.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Eu.RESOLVED,this._cleanUp()},()=>{this._status=Eu.REJECTED,this._cleanUp()})}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===Eu.RESOLVED}isRejected(){return this._status===Eu.REJECTED}isFulfilled(){return this._status!==Eu.PENDING}abort(){this._resolver.reject(Ot())}when(t,r){return this._resolver.promise.then(t,r)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const t=gl(),r=[...this._resolvingPromises,t.promise],i=this._allPromise=Promise.all(r);i.then(()=>{this.isFulfilled()||this._allPromise!==i||this._resolver.resolve(this.instance)},n=>{this.isFulfilled()||this._allPromise!==i||ui(n)||this._resolver.reject(n)}),t.resolve()}}const xv=e=>{let t=class extends e{constructor(...r){super(...r),this._promiseProps=new Eie(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,i){return new Promise((n,s)=>{this._promiseProps.when(n,s)}).then(r,i)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}};return t=u([E("esri.core.Promise")],t),t};let Wb=class extends xv(le){};Wb=u([E("esri.core.Promise")],Wb);const Tie="not-loaded",Mie="loading",Iie="failed",qF="loaded",z9=e=>{let t=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(i=>{const n=this.load.bind(this);this.load=s=>{const o=new Promise((a,l)=>{const c=JO(s,l);this.destroyed&&l(new O("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(a,l).finally(()=>{c&&c.remove()})});if(this.loadStatus===Tie){this._set("loadStatus",Mie);const a=this._loadController=new AbortController;n({signal:a.signal}),vs(a.signal,()=>{this._promiseProps.abort()})}return i(),o}})),this.when(()=>{this._set("loadStatus",qF),this._loadController=null},i=>{this._set("loadStatus",Iie),this._set("loadError",i),this._loadController=null})}get loaded(){return this.loadStatus===qF}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var r;return this.isFulfilled()||(this._set("loadError",new O("load:cancelled","Cancelled")),(r=this._loadController)==null||r.abort()),this}};return u([d({readOnly:!0})],t.prototype,"loaded",null),u([d({readOnly:!0})],t.prototype,"loadError",void 0),u([d({clonable:!1})],t.prototype,"loadStatus",void 0),u([d({type:[ki],readOnly:!0})],t.prototype,"loadWarnings",null),t=u([E("esri.core.Loadable")],t),t};let Dy=class extends z9(Wb){};Dy=u([E("esri.core.Loadable")],Dy),function(e){function t(r){return!(!r||!r.load)}e.LoadableMixin=z9,e.isLoadable=t}(Dy||(Dy={}));const Nn=Dy;function Cie(e,t,r){return Zt(e.map((i,n)=>t.apply(r,[i,n])))}async function kie(e,t,r){return(await Zt(e.map((i,n)=>t.apply(r,[i,n])))).map(i=>i.value)}async function A2(e){if(R(e))return{ok:!1,error:new Error("no promise provided")};try{return{ok:!0,value:await e}}catch(t){return{ok:!1,error:t}}}async function F5e(e){try{return{ok:!0,value:await e}}catch(t){return bv(t),{ok:!1,error:t}}}async function U9(e,t){return await e.load(),Lie(e,t)}async function Lie(e,t){const r=[],i=(...s)=>{for(const o of s)R(o)||(Array.isArray(o)?i(...o):de.isCollection(o)?o.forEach(a=>i(a)):Nn.isLoadable(o)&&r.push(o))};t(i);let n=null;if(await kie(r,async s=>{(await A2(Oie(s)?s.loadAll():s.load())).ok!==!1||n||(n=s)}),n)throw n.loadError;return e}function Oie(e){return"loadAll"in e&&typeof e.loadAll=="function"}const Aie=Z.getLogger("esri.core.urlUtils"),mm=Ve.request,WF="esri/config: esriConfig.request.proxyUrl is not set.",G9=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,B9=/^\s*http:/i,Pie=/^\s*https:/i,Rie=/^\s*file:/i,Fie=/:\d+$/,Nie=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,Die=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),jie=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class _f{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let r=this.uri.match(Die);this.scheme=r[2]||(r[1]?"":null),this.authority=r[4]||(r[3]?"":null),this.path=r[5],this.query=r[7]||(r[6]?"":null),this.fragment=r[9]||(r[8]?"":null),this.authority!=null&&(r=this.authority.match(jie),this.user=r[3]||null,this.password=r[4]||null,this.host=r[6]||r[7],this.port=r[9]||null)}toString(){return this.uri}}const x1={},Vie=new _f(Ve.applicationUrl);let oi=Vie;const zie=Uie();let i3=zie;const n3=()=>oi,N5e=()=>i3;function Uie(){const e=oi.path,t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${`${oi.scheme}://${oi.host}${oi.port!=null?`:${oi.port}`:""}`}${t}`}function Qt(e){const t={path:null,query:null},r=new _f(e),i=e.indexOf("?");return r.query===null?t.path=e:(t.path=e.substring(0,i),t.query=q9(r.query)),r.fragment&&(t.hash=r.fragment,r.query===null&&(t.path=t.path.substring(0,t.path.length-(r.fragment.length+1)))),t}function q9(e){const t=e.split("&"),r={};for(const i of t){if(!i)continue;const n=i.indexOf("=");let s,o;n<0?(s=decodeURIComponent(i),o=""):(s=decodeURIComponent(i.slice(0,n)),o=decodeURIComponent(i.slice(n+1)));let a=r[s];typeof a=="string"&&(a=r[s]=[a]),Array.isArray(a)?a.push(o):r[s]=o}return r}function HF(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}function P0(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(r=>encodeURIComponent(r)+"="+encodeURIComponent(t(r,e[r]))).join("&"):Object.keys(e).map(r=>{const i=e[r];if(i==null)return"";const n=encodeURIComponent(r)+"=",s=t&&t[r];return s?n+encodeURIComponent(s(i)):Array.isArray(i)?i.map(o=>HF(o)?n+encodeURIComponent(JSON.stringify(o)):n+encodeURIComponent(o)).join("&"):HF(i)?n+encodeURIComponent(JSON.stringify(i)):n+encodeURIComponent(i)}).filter(r=>r).join("&"):""}function Gie(e=!1){let t,r=mm.proxyUrl;if(typeof e=="string"){t=Zie(e);const i=P2(e);i&&(r=i.proxyUrl)}else t=!!e;if(!r)throw Aie.warn(WF),new O("urlutils:proxy-not-set",WF);return t&&PM()&&(r=u3(r)),Qt(r)}function D5e(e){const t=P2(e);let r,i;if(t){const n=s3(t.proxyUrl);r=n.path,i=n.query?q9(n.query):null}if(r){const n=Qt(e);e=r+"?"+n.path;const s=P0({...i,...n.query});s&&(e=`${e}?${s}`)}return e}const iy={path:"",query:""};function s3(e){const t=e.indexOf("?");return t!==-1?(iy.path=e.slice(0,t),iy.query=e.slice(t+1)):(iy.path=e,iy.query=null),iy}function W9(e){return e=(e=Hb(e=ene(e=s3(e).path),!0)).toLowerCase()}function Bie(e){const t={proxyUrl:e.proxyUrl,urlPrefix:W9(e.urlPrefix)},r=mm.proxyRules,i=t.urlPrefix;let n=r.length;for(let s=0;s<r.length;s++){const o=r[s].urlPrefix;if(i.indexOf(o)===0){if(i.length===o.length)return-1;n=s;break}o.indexOf(i)===0&&(n=s+1)}return r.splice(n,0,t),n}function P2(e){const t=mm.proxyRules,r=W9(e);for(let i=0;i<t.length;i++)if(r.indexOf(t[i].urlPrefix)===0)return t[i]}function H9(e,t){return e=JF(e),t=JF(t),Hb(e)===Hb(t)}function JF(e){const t=(e=fs(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function J9(e){const t=i=>i==null||i instanceof RegExp&&i.test(e)||typeof i=="string"&&e.startsWith(i),r=mm.interceptors;if(r){for(const i of r)if(Array.isArray(i.urls)){if(i.urls.some(t))return i}else if(t(i.urls))return i}return null}function R0(e,t,r=!1){const i=FM(e),n=FM(t);return!(!r&&i.scheme!==n.scheme)&&i.host!=null&&n.host!=null&&i.host.toLowerCase()===n.host.toLowerCase()&&i.port===n.port}function o3(e){if(typeof e=="string"){if(!On(e))return!0;e=FM(e)}if(R0(e,oi))return!0;const t=mm.trustedServers||[];for(let r=0;r<t.length;r++){const i=qie(t[r]);for(let n=0;n<i.length;n++)if(R0(e,i[n]))return!0}return!1}function qie(e){return x1[e]||(l3(e)||na(e)?x1[e]=[new _f(no(e))]:x1[e]=[new _f(`http://${e}`),new _f(`https://${e}`)]),x1[e]}function no(e,t=i3,r){return na(e)?r&&r.preserveProtocolRelative?e:oi.scheme==="http"&&oi.authority===co(e).slice(2)?`http:${e}`:`https:${e}`:l3(e)?e:dh(e[0]==="/"?Xie(t):t,e)}function a3(e,t=i3,r){if(!On(e))return e;const i=fs(e),n=i.toLowerCase(),s=fs(t).toLowerCase().replace(/\/+$/,""),o=r?fs(r).toLowerCase().replace(/\/+$/,""):null;if(o&&s.indexOf(o)!==0)return e;const a=(f,m,y)=>(y=f.indexOf(m,y))===-1?f.length:y;let l=a(n,"/",n.indexOf("//")+2),c=-1;for(;n.slice(0,l+1)===s.slice(0,l)+"/"&&(c=l+1,l!==n.length);)l=a(n,"/",l+1);if(c===-1||o&&c<o.length)return e;e=i.slice(c);const h=s.slice(c-1).replace(/[^/]+/g,"").length;if(h>0)for(let f=0;f<h;f++)e=`../${e}`;else e=`./${e}`;return e}function fs(e){return e=ine(e=rne(e=tne(e=no(e=e.trim()))))}function dh(...e){const t=e.filter(I);if(!t||!t.length)return;const r=[];if(On(t[0])){const n=t[0],s=n.indexOf("//");s!==-1&&(r.push(n.slice(0,s+1)),Qie(t[0])&&(r[0]+="/"),t[0]=n.slice(s+2))}else t[0][0]==="/"&&r.push("");const i=t.reduce((n,s)=>s?n.concat(s.split("/")):n,[]);for(let n=0;n<i.length;n++){const s=i[n];s===".."&&r.length>0&&r[r.length-1]!==".."?r.pop():(!s&&n===i.length-1||s&&(s!=="."||r.length===0))&&r.push(s)}return r.join("/")}function co(e,t=!1){if(R2(e)||xh(e))return null;let r=e.indexOf("://");if(r===-1&&na(e))r=2;else{if(r===-1)return null;r+=3}const i=e.indexOf("/",r);return i!==-1&&(e=e.slice(0,i)),t&&(e=Hb(e,!0)),e}function On(e){return na(e)||l3(e)}function R2(e){return e!=null&&e.slice(0,5)==="blob:"}function xh(e){return e.slice(0,5)==="data:"}function j5e(e){const t=Z9(e);if(!t||!t.isBase64)return null;const r=atob(t.data),i=new Uint8Array(r.length);for(let n=0;n<r.length;n++)i[n]=r.charCodeAt(n);return i.buffer}function V5e(e){return btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const Wie=/^data:(.*?)(;base64)?,(.*)$/;function Z9(e){const t=e.match(Wie);if(!t)return null;const[,r,i,n]=t;return{mediaType:r,isBase64:!!i,data:n}}function Y9(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}function z5e(e,t){Hie(e,t)||Jie(e,t)}function Hie(e,t){if(!e)return!1;const r=document.createElement("a");if(!("download"in r))return!1;const i=URL.createObjectURL(e);return r.download=t,r.href=i,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(i),!0}function Jie(e,t){return!!window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(e,t)}function na(e){return e!=null&&e!==void 0&&e[0]==="/"&&e[1]==="/"}function l3(e){return G9.test(e)}function Zie(e){return Pie.test(e)||oi.scheme==="https"&&na(e)}function Yie(e){return B9.test(e)||oi.scheme==="http"&&na(e)}function Qie(e){return Rie.test(e)}function u3(e){return na(e)?`https:${e}`:e.replace(B9,"https:")}function Kie(){return oi.scheme==="http"}function PM(){return oi.scheme==="https"}function Hb(e,t=!1){return na(e)?e.slice(2):(e=e.replace(G9,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function Xie(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return r===-1?e:e.slice(0,r)}function c3(e){let t=0;if(On(e)){const i=e.indexOf("//");i!==-1&&(t=i+2)}const r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function U5e(e,t){if(!e)return"";const r=Qt(e).path.replace(/\/+$/,""),i=r.substring(r.lastIndexOf("/")+1);if(!(t!=null&&t.length))return i;const n=new RegExp(`.(${t.join("|")})$`,"ig");return i.replace(n,"")}function ene(e){return e&&e[e.length-1]==="/"?e:`${e}/`}function Q9(e){return e.replace(/\/+$/,"")}function tne(e){if(/^https?:\/\//i.test(e)){const t=s3(e);e=(e=t.path.replace(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function rne(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function ine(e){const t=mm.httpsDomains;if(!Yie(e))return e;const r=e.indexOf("/",7);let i;if(i=r===-1?e:e.slice(0,r),i=i.toLowerCase().slice(7),Fie.test(i)){if(!i.endsWith(":80"))return e;i=i.slice(0,-3),e=e.replace(":80","")}return Kie()&&i===oi.authority&&!Nie.test(e)||(PM()&&i===oi.authority||t&&t.some(n=>i===n||i.endsWith(`.${n}`))||PM()&&!P2(e))&&(e=u3(e)),e}function RM(e,t,r){if(!(t&&r&&e&&On(e)))return e;const i=e.indexOf("//"),n=e.indexOf("/",i+2),s=e.indexOf(":",i+2),o=Math.min(n<0?e.length:n,s<0?e.length:s);return e.slice(i+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,i+2)}${r}${e.slice(o)}`}function FM(e){return typeof e=="string"?new _f(no(e)):(e.scheme||(e.scheme=oi.scheme),e)}function G5e(e){return sne.test(e)}function K9(e,t){const r=Qt(e),i=Object.keys(r.query||{});return i.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${i.join(", ")}.`),r.path}function X9(e,t,r){const i=Qt(e),n=i.query||{};return n[t]=String(r),`${i.path}?${P0(n)}`}function Hw(e,t){const r=Qt(e),i=r.query||{};for(const s in t)i[s]=t[s];const n=P0(i);return n?`${r.path}?${n}`:r.path}function B5e(e){if(R(e))return null;const t=e.match(nne);return t?t[1]:null}const nne=/.*?\.([^\/]*)$/,sne=/(^data:image\/svg|\.svg$)/i;function se(e,t,r){let i,n;return t===void 0?(n=e,i=[void 0]):typeof t!="string"?(n=e,i=[void 0],r=t):(n=t,i=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;for(const l of i){const c=$9(s,l,n);c.write&&typeof c.write=="object"||(c.write={}),r&&(c.write.target=r),c.write.writer=a[o]}}}var us;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(us||(us={}));let p;const $={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(p=2e3;p<=2045;p++)$[p]=0;for(p=2056;p<=2065;p++)$[p]=0;for(p=2067;p<=2135;p++)$[p]=0;for(p=2137;p<=2154;p++)$[p]=0;for(p=2161;p<=2170;p++)$[p]=0;for(p=2172;p<=2193;p++)$[p]=0;for(p=2195;p<=2198;p++)$[p]=0;for(p=2200;p<=2203;p++)$[p]=0;for(p=2205;p<=2217;p++)$[p]=0;for(p=2222;p<=2224;p++)$[p]=1;for(p=2225;p<=2250;p++)$[p]=2;for(p=2251;p<=2253;p++)$[p]=1;for(p=2257;p<=2264;p++)$[p]=2;for(p=2274;p<=2279;p++)$[p]=2;for(p=2280;p<=2282;p++)$[p]=1;for(p=2283;p<=2289;p++)$[p]=2;for(p=2290;p<=2292;p++)$[p]=0;for(p=2308;p<=2313;p++)$[p]=0;for(p=2315;p<=2491;p++)$[p]=0;for(p=2494;p<=2866;p++)$[p]=0;for(p=2867;p<=2869;p++)$[p]=1;for(p=2870;p<=2888;p++)$[p]=2;for(p=2891;p<=2895;p++)$[p]=2;for(p=2896;p<=2898;p++)$[p]=1;for(p=2902;p<=2908;p++)$[p]=2;for(p=2915;p<=2920;p++)$[p]=2;for(p=2921;p<=2923;p++)$[p]=1;for(p=2924;p<=2930;p++)$[p]=2;for(p=2931;p<=2962;p++)$[p]=0;for(p=2964;p<=2968;p++)$[p]=2;for(p=2969;p<=2973;p++)$[p]=0;for(p=2975;p<=2991;p++)$[p]=0;for(p=2995;p<=3051;p++)$[p]=0;for(p=3054;p<=3079;p++)$[p]=0;for(p=3081;p<=3088;p++)$[p]=0;for(p=3092;p<=3101;p++)$[p]=0;for(p=3106;p<=3138;p++)$[p]=0;for(p=3146;p<=3151;p++)$[p]=0;for(p=3153;p<=3166;p++)$[p]=0;for(p=3168;p<=3172;p++)$[p]=0;for(p=3174;p<=3203;p++)$[p]=0;for(p=3294;p<=3358;p++)$[p]=0;for(p=3367;p<=3403;p++)$[p]=0;for(p=3408;p<=3416;p++)$[p]=0;for(p=3417;p<=3438;p++)$[p]=2;for(p=3441;p<=3446;p++)$[p]=2;for(p=3447;p<=3450;p++)$[p]=0;for(p=3451;p<=3459;p++)$[p]=2;for(p=3460;p<=3478;p++)$[p]=0;for(p=3554;p<=3559;p++)$[p]=0;for(p=3560;p<=3570;p++)$[p]=2;for(p=3571;p<=3581;p++)$[p]=0;for(p=3594;p<=3597;p++)$[p]=0;for(p=3601;p<=3604;p++)$[p]=0;for(p=3637;p<=3639;p++)$[p]=0;for(p=3665;p<=3667;p++)$[p]=0;for(p=3693;p<=3695;p++)$[p]=0;for(p=3701;p<=3727;p++)$[p]=0;for(p=3728;p<=3739;p++)$[p]=2;for(p=3740;p<=3751;p++)$[p]=0;for(p=3753;p<=3760;p++)$[p]=2;for(p=3761;p<=3773;p++)$[p]=0;for(p=3775;p<=3777;p++)$[p]=0;for(p=3779;p<=3781;p++)$[p]=0;for(p=3783;p<=3785;p++)$[p]=0;for(p=3788;p<=3791;p++)$[p]=0;for(p=3797;p<=3802;p++)$[p]=0;for(p=3814;p<=3816;p++)$[p]=0;for(p=3825;p<=3829;p++)$[p]=0;for(p=3832;p<=3841;p++)$[p]=0;for(p=3844;p<=3852;p++)$[p]=0;for(p=3873;p<=3885;p++)$[p]=0;for(p=3890;p<=3893;p++)$[p]=0;for(p=3907;p<=3912;p++)$[p]=0;for(p=3942;p<=3950;p++)$[p]=0;for(p=3968;p<=3970;p++)$[p]=0;for(p=3973;p<=3976;p++)$[p]=0;for(p=3986;p<=3989;p++)$[p]=0;for(p=3994;p<=3997;p++)$[p]=0;for(p=4048;p<=4051;p++)$[p]=0;for(p=4056;p<=4063;p++)$[p]=0;for(p=4093;p<=4096;p++)$[p]=0;for(p=4390;p<=4398;p++)$[p]=0;for(p=4399;p<=4413;p++)$[p]=2;for(p=4418;p<=4433;p++)$[p]=2;for(p=4455;p<=4457;p++)$[p]=2;for(p=4484;p<=4489;p++)$[p]=0;for(p=4491;p<=4554;p++)$[p]=0;for(p=4568;p<=4589;p++)$[p]=0;for(p=4652;p<=4656;p++)$[p]=0;for(p=4766;p<=4800;p++)$[p]=0;for(p=5014;p<=5016;p++)$[p]=0;for(p=5069;p<=5072;p++)$[p]=0;for(p=5105;p<=5130;p++)$[p]=0;for(p=5173;p<=5188;p++)$[p]=0;for(p=5253;p<=5259;p++)$[p]=0;for(p=5269;p<=5275;p++)$[p]=0;for(p=5292;p<=5311;p++)$[p]=0;for(p=5329;p<=5331;p++)$[p]=0;for(p=5343;p<=5349;p++)$[p]=0;for(p=5355;p<=5357;p++)$[p]=0;for(p=5387;p<=5389;p++)$[p]=0;for(p=5459;p<=5463;p++)$[p]=0;for(p=5479;p<=5482;p++)$[p]=0;for(p=5518;p<=5520;p++)$[p]=0;for(p=5530;p<=5539;p++)$[p]=0;for(p=5550;p<=5552;p++)$[p]=0;for(p=5562;p<=5583;p++)$[p]=0;for(p=5623;p<=5625;p++)$[p]=2;for(p=5631;p<=5639;p++)$[p]=0;for(p=5649;p<=5653;p++)$[p]=0;for(p=5663;p<=5680;p++)$[p]=0;for(p=5682;p<=5685;p++)$[p]=0;for(p=5875;p<=5877;p++)$[p]=0;for(p=5896;p<=5899;p++)$[p]=0;for(p=5921;p<=5940;p++)$[p]=0;for(p=6050;p<=6125;p++)$[p]=0;for(p=6244;p<=6275;p++)$[p]=0;for(p=6328;p<=6348;p++)$[p]=0;for(p=6350;p<=6356;p++)$[p]=0;for(p=6366;p<=6372;p++)$[p]=0;for(p=6381;p<=6387;p++)$[p]=0;for(p=6393;p<=6404;p++)$[p]=0;for(p=6480;p<=6483;p++)$[p]=0;for(p=6511;p<=6514;p++)$[p]=0;for(p=6579;p<=6581;p++)$[p]=0;for(p=6619;p<=6624;p++)$[p]=0;for(p=6625;p<=6627;p++)$[p]=2;for(p=6628;p<=6632;p++)$[p]=0;for(p=6634;p<=6637;p++)$[p]=0;for(p=6669;p<=6692;p++)$[p]=0;for(p=6707;p<=6709;p++)$[p]=0;for(p=6720;p<=6723;p++)$[p]=0;for(p=6732;p<=6738;p++)$[p]=0;for(p=6931;p<=6933;p++)$[p]=0;for(p=6956;p<=6959;p++)$[p]=0;for(p=7005;p<=7007;p++)$[p]=0;for(p=7057;p<=7070;p++)$[p]=2;for(p=7074;p<=7082;p++)$[p]=0;for(p=7109;p<=7118;p++)$[p]=0;for(p=7119;p<=7127;p++)$[p]=1;for(p=7374;p<=7376;p++)$[p]=0;for(p=7528;p<=7586;p++)$[p]=0;for(p=7587;p<=7645;p++)$[p]=2;for(p=7692;p<=7696;p++)$[p]=0;for(p=7755;p<=7787;p++)$[p]=0;for(p=7791;p<=7795;p++)$[p]=0;for(p=7799;p<=7801;p++)$[p]=0;for(p=7803;p<=7805;p++)$[p]=0;for(p=7825;p<=7831;p++)$[p]=0;for(p=7845;p<=7859;p++)$[p]=0;for(p=8013;p<=8032;p++)$[p]=0;for(p=8065;p<=8068;p++)$[p]=1;for(p=8518;p<=8529;p++)$[p]=2;for(p=8533;p<=8536;p++)$[p]=2;for(p=8538;p<=8540;p++)$[p]=2;for(p=8677;p<=8679;p++)$[p]=0;for(p=8836;p<=8840;p++)$[p]=0;for(p=8857;p<=8859;p++)$[p]=0;for(p=8908;p<=8910;p++)$[p]=0;for(p=9154;p<=9159;p++)$[p]=0;for(p=9205;p<=9218;p++)$[p]=0;for(p=9271;p<=9273;p++)$[p]=0;for(p=9295;p<=9297;p++)$[p]=0;for(p=9356;p<=9360;p++)$[p]=0;for(p=9404;p<=9407;p++)$[p]=0;for(p=9476;p<=9482;p++)$[p]=0;for(p=9487;p<=9494;p++)$[p]=0;for(p=9697;p<=9699;p++)$[p]=0;for(p=20002;p<=20032;p++)$[p]=0;for(p=20062;p<=20092;p++)$[p]=0;for(p=20135;p<=20138;p++)$[p]=0;for(p=20248;p<=20258;p++)$[p]=0;for(p=20348;p<=20358;p++)$[p]=0;for(p=20436;p<=20440;p++)$[p]=0;for(p=20822;p<=20824;p++)$[p]=0;for(p=20904;p<=20932;p++)$[p]=0;for(p=20934;p<=20936;p++)$[p]=0;for(p=21004;p<=21032;p++)$[p]=0;for(p=21035;p<=21037;p++)$[p]=0;for(p=21095;p<=21097;p++)$[p]=0;for(p=21148;p<=21150;p++)$[p]=0;for(p=21207;p<=21264;p++)$[p]=0;for(p=21307;p<=21364;p++)$[p]=0;for(p=21413;p<=21423;p++)$[p]=0;for(p=21453;p<=21463;p++)$[p]=0;for(p=21473;p<=21483;p++)$[p]=0;for(p=21780;p<=21782;p++)$[p]=0;for(p=21891;p<=21894;p++)$[p]=0;for(p=21896;p<=21899;p++)$[p]=0;for(p=22171;p<=22177;p++)$[p]=0;for(p=22181;p<=22187;p++)$[p]=0;for(p=22191;p<=22197;p++)$[p]=0;for(p=22234;p<=22236;p++)$[p]=0;for(p=22521;p<=22525;p++)$[p]=0;for(p=22991;p<=22994;p++)$[p]=0;for(p=23028;p<=23038;p++)$[p]=0;for(p=23830;p<=23853;p++)$[p]=0;for(p=23866;p<=23872;p++)$[p]=0;for(p=23877;p<=23884;p++)$[p]=0;for(p=23886;p<=23894;p++)$[p]=0;for(p=23946;p<=23948;p++)$[p]=0;for(p=24311;p<=24313;p++)$[p]=0;for(p=24342;p<=24347;p++)$[p]=0;for(p=24370;p<=24374;p++)$[p]=10;for(p=24375;p<=24381;p++)$[p]=0;for(p=24718;p<=24721;p++)$[p]=0;for(p=24817;p<=24821;p++)$[p]=0;for(p=24877;p<=24882;p++)$[p]=0;for(p=24891;p<=24893;p++)$[p]=0;for(p=25391;p<=25395;p++)$[p]=0;for(p=25828;p<=25838;p++)$[p]=0;for(p=26191;p<=26195;p++)$[p]=0;for(p=26391;p<=26393;p++)$[p]=0;for(p=26701;p<=26722;p++)$[p]=0;for(p=26729;p<=26799;p++)$[p]=2;for(p=26801;p<=26803;p++)$[p]=2;for(p=26811;p<=26813;p++)$[p]=2;for(p=26847;p<=26870;p++)$[p]=2;for(p=26891;p<=26899;p++)$[p]=0;for(p=26901;p<=26923;p++)$[p]=0;for(p=26929;p<=26946;p++)$[p]=0;for(p=26948;p<=26998;p++)$[p]=0;for(p=27037;p<=27040;p++)$[p]=0;for(p=27205;p<=27232;p++)$[p]=0;for(p=27258;p<=27260;p++)$[p]=0;for(p=27391;p<=27398;p++)$[p]=0;for(p=27561;p<=27564;p++)$[p]=0;for(p=27571;p<=27574;p++)$[p]=0;for(p=27581;p<=27584;p++)$[p]=0;for(p=27591;p<=27594;p++)$[p]=0;for(p=28191;p<=28193;p++)$[p]=0;for(p=28348;p<=28358;p++)$[p]=0;for(p=28402;p<=28432;p++)$[p]=0;for(p=28462;p<=28492;p++)$[p]=0;for(p=29118;p<=29122;p++)$[p]=0;for(p=29168;p<=29172;p++)$[p]=0;for(p=29177;p<=29185;p++)$[p]=0;for(p=29187;p<=29195;p++)$[p]=0;for(p=29900;p<=29903;p++)$[p]=0;for(p=30161;p<=30179;p++)$[p]=0;for(p=30491;p<=30494;p++)$[p]=0;for(p=30729;p<=30732;p++)$[p]=0;for(p=31251;p<=31259;p++)$[p]=0;for(p=31265;p<=31268;p++)$[p]=0;for(p=31275;p<=31279;p++)$[p]=0;for(p=31281;p<=31297;p++)$[p]=0;for(p=31461;p<=31469;p++)$[p]=0;for(p=31491;p<=31495;p++)$[p]=0;for(p=31917;p<=31922;p++)$[p]=0;for(p=31965;p<=32e3;p++)$[p]=0;for(p=32001;p<=32003;p++)$[p]=2;for(p=32005;p<=32031;p++)$[p]=2;for(p=32033;p<=32060;p++)$[p]=2;for(p=32064;p<=32067;p++)$[p]=2;for(p=32074;p<=32077;p++)$[p]=2;for(p=32081;p<=32086;p++)$[p]=0;for(p=32107;p<=32130;p++)$[p]=0;for(p=32133;p<=32158;p++)$[p]=0;for(p=32164;p<=32167;p++)$[p]=2;for(p=32180;p<=32199;p++)$[p]=0;for(p=32201;p<=32260;p++)$[p]=0;for(p=32301;p<=32360;p++)$[p]=0;for(p=32601;p<=32662;p++)$[p]=0;for(p=32664;p<=32667;p++)$[p]=2;for(p=32701;p<=32761;p++)$[p]=0;for(p=53001;p<=53004;p++)$[p]=0;for(p=53008;p<=53019;p++)$[p]=0;for(p=53021;p<=53032;p++)$[p]=0;for(p=53034;p<=53037;p++)$[p]=0;for(p=53042;p<=53046;p++)$[p]=0;for(p=53074;p<=53080;p++)$[p]=0;for(p=54001;p<=54004;p++)$[p]=0;for(p=54008;p<=54019;p++)$[p]=0;for(p=54021;p<=54032;p++)$[p]=0;for(p=54034;p<=54037;p++)$[p]=0;for(p=54042;p<=54046;p++)$[p]=0;for(p=54048;p<=54053;p++)$[p]=0;for(p=54074;p<=54080;p++)$[p]=0;for(p=54098;p<=54101;p++)$[p]=0;for(p=102001;p<=102040;p++)$[p]=0;for(p=102042;p<=102063;p++)$[p]=0;for(p=102065;p<=102067;p++)$[p]=0;for(p=102070;p<=102117;p++)$[p]=0;for(p=102122;p<=102216;p++)$[p]=0;for(p=102221;p<=102377;p++)$[p]=0;for(p=102382;p<=102388;p++)$[p]=0;for(p=102389;p<=102398;p++)$[p]=2;for(p=102399;p<=102444;p++)$[p]=0;for(p=102445;p<=102447;p++)$[p]=2;for(p=102448;p<=102458;p++)$[p]=0;for(p=102459;p<=102468;p++)$[p]=2;for(p=102469;p<=102499;p++)$[p]=0;for(p=102500;p<=102519;p++)$[p]=1;for(p=102520;p<=102524;p++)$[p]=0;for(p=102525;p<=102529;p++)$[p]=2;for(p=102530;p<=102588;p++)$[p]=0;for(p=102590;p<=102598;p++)$[p]=0;for(p=102601;p<=102603;p++)$[p]=0;for(p=102605;p<=102628;p++)$[p]=0;for(p=102629;p<=102646;p++)$[p]=2;for(p=102648;p<=102700;p++)$[p]=2;for(p=102701;p<=102703;p++)$[p]=0;for(p=102707;p<=102730;p++)$[p]=2;for(p=102733;p<=102758;p++)$[p]=2;for(p=102767;p<=102900;p++)$[p]=0;for(p=102901;p<=102933;p++)$[p]=2;for(p=102934;p<=102950;p++)$[p]=13;for(p=102951;p<=102955;p++)$[p]=0;for(p=102961;p<=102963;p++)$[p]=0;for(p=102965;p<=102969;p++)$[p]=0;for(p=102971;p<=102973;p++)$[p]=0;for(p=102975;p<=102989;p++)$[p]=0;for(p=102990;p<=102992;p++)$[p]=1;for(p=102997;p<=103002;p++)$[p]=0;for(p=103003;p<=103008;p++)$[p]=2;for(p=103009;p<=103011;p++)$[p]=0;for(p=103012;p<=103014;p++)$[p]=2;for(p=103019;p<=103021;p++)$[p]=0;for(p=103022;p<=103024;p++)$[p]=2;for(p=103029;p<=103031;p++)$[p]=0;for(p=103032;p<=103034;p++)$[p]=2;for(p=103065;p<=103068;p++)$[p]=0;for(p=103074;p<=103076;p++)$[p]=0;for(p=103077;p<=103079;p++)$[p]=1;for(p=103080;p<=103082;p++)$[p]=0;for(p=103083;p<=103085;p++)$[p]=2;for(p=103090;p<=103093;p++)$[p]=0;for(p=103097;p<=103099;p++)$[p]=0;for(p=103100;p<=103102;p++)$[p]=2;for(p=103107;p<=103109;p++)$[p]=0;for(p=103110;p<=103112;p++)$[p]=2;for(p=103113;p<=103116;p++)$[p]=0;for(p=103117;p<=103120;p++)$[p]=2;for(p=103153;p<=103157;p++)$[p]=0;for(p=103158;p<=103162;p++)$[p]=2;for(p=103163;p<=103165;p++)$[p]=0;for(p=103166;p<=103168;p++)$[p]=1;for(p=103169;p<=103171;p++)$[p]=2;for(p=103186;p<=103188;p++)$[p]=0;for(p=103189;p<=103191;p++)$[p]=2;for(p=103192;p<=103195;p++)$[p]=0;for(p=103196;p<=103199;p++)$[p]=2;for(p=103200;p<=103224;p++)$[p]=0;for(p=103225;p<=103227;p++)$[p]=1;for(p=103232;p<=103237;p++)$[p]=0;for(p=103238;p<=103243;p++)$[p]=2;for(p=103244;p<=103246;p++)$[p]=0;for(p=103247;p<=103249;p++)$[p]=2;for(p=103254;p<=103256;p++)$[p]=0;for(p=103257;p<=103259;p++)$[p]=2;for(p=103264;p<=103266;p++)$[p]=0;for(p=103267;p<=103269;p++)$[p]=2;for(p=103300;p<=103375;p++)$[p]=0;for(p=103381;p<=103383;p++)$[p]=0;for(p=103384;p<=103386;p++)$[p]=1;for(p=103387;p<=103389;p++)$[p]=0;for(p=103390;p<=103392;p++)$[p]=2;for(p=103397;p<=103399;p++)$[p]=0;for(p=103400;p<=103471;p++)$[p]=2;for(p=103476;p<=103478;p++)$[p]=0;for(p=103479;p<=103481;p++)$[p]=2;for(p=103486;p<=103488;p++)$[p]=0;for(p=103489;p<=103491;p++)$[p]=2;for(p=103492;p<=103495;p++)$[p]=0;for(p=103496;p<=103499;p++)$[p]=2;for(p=103528;p<=103543;p++)$[p]=0;for(p=103544;p<=103548;p++)$[p]=2;for(p=103549;p<=103551;p++)$[p]=0;for(p=103552;p<=103554;p++)$[p]=1;for(p=103555;p<=103557;p++)$[p]=2;for(p=103558;p<=103560;p++)$[p]=0;for(p=103571;p<=103573;p++)$[p]=0;for(p=103574;p<=103576;p++)$[p]=2;for(p=103577;p<=103580;p++)$[p]=0;for(p=103581;p<=103583;p++)$[p]=2;for(p=103595;p<=103694;p++)$[p]=0;for(p=103696;p<=103699;p++)$[p]=0;for(p=103700;p<=103793;p++)$[p]=2;for(p=103794;p<=103887;p++)$[p]=0;for(p=103900;p<=103971;p++)$[p]=2;const one={102113:!0,102100:!0,3857:!0,3785:!0},ane={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},ZF='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',E1=[-20037508342788905e-9,20037508342788905e-9],T1=[-20037508342787e-6,20037508342787e-6],e7={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:E1,origin:T1,dx:1e-5},102100:{wkTemplate:ZF,valid:E1,origin:T1,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:E1,origin:T1,dx:1e-5},3857:{wkTemplate:ZF,valid:E1,origin:T1,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function Hr(e,t){return!R(e)&&!R(t)&&(e===t||(e.wkid!=null||t.wkid!=null?e.wkid===t.wkid||hh(e)&&hh(t)||t.latestWkid!=null&&e.wkid===t.latestWkid||e.latestWkid!=null&&t.wkid===e.latestWkid:!(!e.wkt||!t.wkt)&&e.wkt.toUpperCase()===t.wkt.toUpperCase()))}function ho(e){return ci(e)&&e.wkid&&e7[e.wkid]||null}function t7(e){return!!ci(e)&&(e.wkid?$[e.wkid]==null:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function lne(e){return!(ym(e)||gm(e))}function F0(e){return ci(e)&&e.wkid===4326}function q5e(e){return ci(e)&&e.wkid===us.CGCS2000}function hh(e){return ci(e)&&e.wkid!=null&&one[e.wkid]===!0}function une(e){return ci(e)&&e.wkid===32662}function d3(e){return e===us.GCSMARS2000||e===us.GCSMARS2000_SPHERE}function ym(e){return ci(e)&&e.wkid!=null&&d3(e.wkid)}function h3(e){return e===us.GCSMOON2000}function gm(e){return ci(e)&&e.wkid!=null&&h3(e.wkid)}function cne(e){return ci(e)&&e.wkid!=null&&ane[e.wkid]===!0}function ci(e){return I(e)&&(e.wkid!=null&&e.wkid>=2e3||e.wkt!=null)}const dne={wkid:4326,wkt:ra(e7[4326].wkTemplate,{Central_Meridian:"0.0"})},hne={wkid:102100,latestWkid:3857},pne={wkid:32662};var Eo;let rt=Eo=class extends B{constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return Eo.WebMercator;if(e.wkid===4326)return Eo.WGS84}const t=new Eo;return t.read(e),t}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return F0(this)}get isWebMercator(){return hh(this)}get isGeographic(){return t7(this)}get isWrappable(){return cne(this)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===Eo.WGS84)return Eo.WGS84;if(this===Eo.WebMercator)return Eo.WebMercator;const e=new Eo;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=P(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:i}=e.imageCoordinateSystem,n=this.imageCoordinateSystem;return t==null||i?JSON.stringify(n)===JSON.stringify(e.imageCoordinateSystem):r?n.id===t&&n.referenceServiceName===r:n.id===t}return Hr(this,e)}toJSON(e){return this.write(void 0,e)}};rt.GCS_NAD_1927=null,rt.WGS84=null,rt.WebMercator=null,rt.PlateCarree=null,u([d({readOnly:!0})],rt.prototype,"isWGS84",null),u([d({readOnly:!0})],rt.prototype,"isWebMercator",null),u([d({readOnly:!0})],rt.prototype,"isGeographic",null),u([d({readOnly:!0})],rt.prototype,"isWrappable",null),u([d({type:ct,json:{write:!0}})],rt.prototype,"latestWkid",void 0),u([d({type:ct,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt===null}}}}}}})],rt.prototype,"wkid",void 0),u([d({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid===null}}}}}}})],rt.prototype,"wkt",void 0),u([se("wkt"),se("web-scene","wkt")],rt.prototype,"writeWkt",null),u([d({type:ct,json:{write:!0}})],rt.prototype,"vcsWkid",void 0),u([d({type:ct,json:{write:!0}})],rt.prototype,"latestVcsWkid",void 0),u([d()],rt.prototype,"imageCoordinateSystem",void 0),rt=Eo=u([E("esri.geometry.SpatialReference")],rt),rt.prototype.toJSON.isDefaultToJSON=!0,rt.GCS_NAD_1927=new rt({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),rt.WGS84=new rt(dne),rt.WebMercator=new rt(hne),rt.PlateCarree=new rt(pne),Object.freeze&&(Object.freeze(rt.GCS_NAD_1927),Object.freeze(rt.WGS84),Object.freeze(rt.WebMercator));const Te=rt,r7="20220708",i7="7fd01dbc0e83d753fcf101c8ff2a8d215430252d",n7="4.24",fne={async request(e,t){var a;const{default:r}=await V(()=>Promise.resolve().then(()=>One),void 0,import.meta.url),i=e.options,n=i.responseType;i.signal=t==null?void 0:t.signal,i.responseType=n==="native"||n==="native-request-init"?"native-request-init":["blob","json","text"].includes(n)&&((a=J9(e.url))==null?void 0:a.after)?n:"array-buffer";const s=await r(e.url,i),o={data:s.data,ssl:s.ssl};switch(s.requestOptions.responseType){case"native-request-init":return delete o.data.signal,o;case"blob":o.data=await o.data.arrayBuffer();break;case"json":o.data=new TextEncoder().encode(JSON.stringify(o.data)).buffer;break;case"text":o.data=new TextEncoder().encode(o.data).buffer}return{result:o,transferList:[o.data]}}};let $t;function W5e(e){$t=e}function mne(e){const t=$t&&$t.findCredential(e);return t&&t.token?X9(e,"token",t.token):e}j("host-webworker")||(j("edge")||j("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser");const yne=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function s7(e){const t=co(e,!0);return t&&t.endsWith(".arcgis.com")&&!yne.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}function gne(e,t,r=!1,i){return new Promise((n,s)=>{if(go(i))return void s(YF());let o=()=>{c(),s(new Error(`Unable to load ${t}`))},a=()=>{const h=e;c(),n(h)},l=()=>{if(!e)return;const h=e;c(),h.src="",s(YF())};const c=()=>{j("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",a)),o=null,a=null,e=null,I(i)&&i.removeEventListener("abort",l),l=null,r&&URL.revokeObjectURL(t)};I(i)&&i.addEventListener("abort",l),j("esri-image-decode")?e.decode().then(a,o):(e.addEventListener("error",o),e.addEventListener("load",a))})}function YF(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}function vne(e){Ve.request.crossOriginNoCorsDomains||(Ve.request.crossOriginNoCorsDomains={});const t=Ve.request.crossOriginNoCorsDomains;for(let r of e)r=r.toLowerCase(),/^https?:\/\//.test(r)?t[co(r)]=0:(t[co("http://"+r)]=0,t[co("https://"+r)]=0)}function wne(e){const t=Ve.request.crossOriginNoCorsDomains;if(t){let r=co(e);if(r)return r=r.toLowerCase(),!R0(r,n3())&&t[r]<Date.now()-36e5}return!1}async function _ne(e){var i;const t=Ve.request.crossOriginNoCorsDomains;t&&(t[co(e).toLowerCase()]=Date.now());const r=Qt(e);e=r.path,((i=r.query)==null?void 0:i.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}}async function nt(e,t){var c;const r=xh(e),i=R2(e);i||r||(e=fs(e));const n={url:e,requestOptions:{...t}};let s=J9(e);if(s){const h=await Ine(s,n);if(h!=null)return{data:h,getHeader:p3,requestOptions:n.requestOptions,url:n.url};s.after||s.error||(s=null)}if(e=n.url,(t=n.requestOptions).responseType==="image"){if(j("host-webworker")||j("host-node"))throw so("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n)}else if(r)throw so("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),n);if(t.method==="head"){if(t.body)throw so("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(r||i)throw so("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await Ene(),Jb)return Jb.execute(e,t);const o=new AbortController;vs(t,()=>o.abort());const a={controller:o,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:s,params:n,redoRequest:!1,useIdentity:Ks.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},l=await kne(a);return(c=s==null?void 0:s.after)==null||c.call(s,l),l}let Jb;const Ks=Ve.request,o7="FormData"in globalThis,bne=[499,498,403,401],Sne=["COM_0056","COM_0057","SB_0008"],$ne=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],p3=()=>null,NM=Symbol();function xne(e){const t=co(e);t&&!nt._corsServers.includes(t)&&nt._corsServers.push(t)}function QF(e){const t=co(e);return!t||t.endsWith(".arcgis.com")||nt._corsServers.includes(t)||o3(t)}function so(e,t,r,i){let n="Error";const s={url:r.url,requestOptions:r.requestOptions,getHeader:p3,ssl:!1};if(t instanceof O)return t.details?(t.details=P(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=s,t;if(t){const o=i&&(c=>i.headers.get(c)),a=i&&i.status,l=t.message;l&&(n=l),o&&(s.getHeader=o),s.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||a||0,s.subCode=t.subcode,s.messageCode=t.messageCode,typeof t.details=="string"?s.messages=[t.details]:s.messages=t.details,s.raw=NM in t?t[NM]:t}return ui(t)?Ot():new O(e,n,s)}async function Ene(){j("host-webworker")?Jb||(Jb=await V(()=>import("./request.7c619542.js"),[],import.meta.url)):nt._abortableFetch||(nt._abortableFetch=globalThis.fetch.bind(globalThis))}async function DM(){$t||await V(()=>import("./IdentityManager.4829b3e8.js"),[],import.meta.url)}async function Tne(e){var a;const t=e.params.url,r=e.params.requestOptions,i=e.controller.signal,n=r.body;let s=null,o=null;if(o7&&"HTMLFormElement"in globalThis&&(n instanceof FormData?s=n:n instanceof HTMLFormElement&&(s=new FormData(n))),typeof n=="string"&&(o=n),e.fetchOptions={cache:r.cacheBust&&!nt._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:r.method==="head"?"HEAD":"GET",mode:"cors",priority:Ks.priority,redirect:"follow",signal:i},(s||o)&&(e.fetchOptions.body=s||o),r.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||((a=r.query)==null?void 0:a.token)||(s==null?void 0:s.get("token"))),!e.hasToken&&Ve.apiKey&&s7(t)&&(r.query||(r.query={}),r.query.token=Ve.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!a7(t)&&!go(i)){let l;r.authMode==="immediate"?(await DM(),l=await $t.getCredential(t,{signal:i}),e.credential=l):r.authMode==="no-prompt"?(await DM(),l=await $t.getCredential(t,{prompt:!1,signal:i}).catch(()=>{}),e.credential=l):$t&&(l=$t.findCredential(t)),l&&(e.credentialToken=l.token,e.useSSL=!!l.ssl)}}function a7(e){return $ne.some(t=>t.test(e))}async function Mne(e){let t=e.params.url;const r=e.params.requestOptions,i=e.fetchOptions,n=R2(t)||xh(t),s=r.responseType||"json",o=n?0:r.timeout!=null?r.timeout:Ks.timeout;let a=!1;if(!n){e.useSSL&&(t=u3(t)),r.cacheBust&&i.cache==="default"&&(t=X9(t,"request.preventCache",Date.now()));let m={...r.query};e.credentialToken&&(m.token=e.credentialToken);let y=P0(m);j("esri-url-encodes-apostrophe")&&(y=y.replace(/'/g,"%27"));const g=t.length+1+y.length;let v;a=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||g>Ks.maxUrlLength;const _=r.useProxy||!!P2(t);if(_){const w=Gie(t);v=w.path,!a&&v.length+1+g>Ks.maxUrlLength&&(a=!0),w.query&&(m={...w.query,...m})}if(i.method==="HEAD"&&(a||_)){if(a)throw g>Ks.maxUrlLength?so("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):so("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(_)throw so("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(a?(i.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?t=Hw(t,m):(i.body=P0(m),i.headers["Content-Type"]="application/x-www-form-urlencoded")):t=Hw(t,m),_&&(e.useProxy=!0,t=`${v}?${t}`),m.token&&o7&&i.body instanceof FormData&&!/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)&&i.body.set("token",m.token),r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!R0(t,n3())){if(o3(t))e.withCredentials=!0;else if($t){const w=$t.findServerInfo(t);w&&w.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(i.credentials="include",wne(t)&&await _ne(a?Hw(t,m):t))}let l,c,h=0,f=!1;o>0&&(h=setTimeout(()=>{f=!0,e.controller.abort()},o));try{if(r.responseType==="native-request-init")c=i,c.url=t;else if(r.responseType!=="image"||i.cache!=="default"||i.method!=="GET"||a||Cne(r.headers)||!n&&!e.useProxy&&Ks.proxyUrl&&!QF(t)){if(l=await nt._abortableFetch(t,i),e.useProxy||xne(t),r.responseType==="native")c=l;else if(i.method!=="HEAD")if(l.ok){switch(s){case"array-buffer":c=await l.arrayBuffer();break;case"blob":case"image":c=await l.blob();break;default:c=await l.text()}if(h&&(clearTimeout(h),h=0),s==="json"||s==="xml"||s==="document")if(c)switch(s){case"json":c=JSON.parse(c);break;case"xml":c=KF(c,"application/xml");break;case"document":c=KF(c,"text/html")}else c=null;if(c){if(s==="array-buffer"||s==="blob"){const m=l.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(m)&&c[s==="blob"?"size":"byteLength"]<=750)try{const y=await new Response(c).json();y.error&&(c=y)}catch{}}s==="image"&&c instanceof Blob&&(c=await XF(URL.createObjectURL(c),e,!0))}}else c=await l.text()}else c=await XF(t,e)}catch(m){if(m.name==="AbortError")throw f?new Error("Timeout exceeded"):Ot("Request canceled");if(!(!l&&m instanceof TypeError&&Ks.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||e.useProxy||QF(t))throw m;e.redoRequest=!0,Bie({proxyUrl:Ks.proxyUrl,urlPrefix:co(t)})}finally{h&&clearTimeout(h)}return[l,c]}async function Ine(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,i;try{i=await e.before(t)}catch(n){r=so("request:interceptor",n,t)}if((i instanceof Error||i instanceof O)&&(r=so("request:interceptor",i,t)),r)throw e.error&&e.error(r),r;return i}}function Cne(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function KF(e,t){let r;try{r=new DOMParser().parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function kne(e){var s;let t,r;await Tne(e);try{do[t,r]=await Mne(e);while(!await Lne(e,t,r))}catch(o){const a=so("request:server",o,e.params,t);throw a.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(a),a}const i=e.params.url;if(r&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(i)){if(!e.hasToken&&!e.credentialToken&&((s=r.user)==null?void 0:s.username)&&!o3(i)){const o=co(i,!0);o&&Ks.trustedServers.push(o)}Array.isArray(r.authorizedCrossOriginNoCorsDomains)&&vne(r.authorizedCrossOriginNoCorsDomains)}const n=e.credential;if(n&&$t){const o=$t.findServerInfo(n.server);let a=o&&o.owningSystemUrl;if(a){a=a.replace(/\/?$/,"/sharing");const l=$t.findCredential(a,n.userId);l&&$t._getIdenticalSvcIdx(a,l)===-1&&l.resources.unshift(a)}}return{data:r,getHeader:t?o=>t.headers.get(o):p3,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function Lne(e,t,r){if(e.redoRequest)return e.redoRequest=!1,!1;const i=e.params.requestOptions;if(!t||i.responseType==="native"||i.responseType==="native-request-init")return!0;let n,s,o,a;if(!t.ok)throw n=new Error(`Unable to load ${t.url} status: ${t.status}`),n[NM]=r,n;r!=null&&r.error&&(n=r.error),n&&(s=Number(n.code),o=n.hasOwnProperty("subcode")?Number(n.subcode):null,a=n.messageCode,a=a&&a.toUpperCase());const l=i.authMode;if(s===403&&(o===4||n.message&&n.message.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(l!=="no-prompt"||s===498)&&bne.includes(s)&&!a7(e.params.url)&&(s!==403||!Sne.includes(a)&&(o==null||o===2&&e.credentialToken))){await DM();try{const c=await $t.getCredential(e.params.url,{error:so("request:server",n,e.params),prompt:l!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=c,e.credentialToken=c.token,e.useSSL=e.useSSL||c.ssl,!1}catch(c){if(l==="no-prompt")return e.credential=null,e.credentialToken=null,!1;n=c}}if(n)throw n;return!0}function XF(e,t,r=!1){const i=t.controller.signal,n=new Image;return t.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=Ks.priority,n.src=e,gne(n,e,r,i)}nt._abortableFetch=null,nt._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const One=Object.freeze(Object.defineProperty({__proto__:null,default:nt},Symbol.toStringTag,{value:"Module"}));function te(e,t,r){let i,n;return t===void 0||Array.isArray(t)?(n=e,r=t,i=[void 0]):(n=t,i=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;i.forEach(l=>{const c=$9(s,l,n);c.read&&typeof c.read=="object"||(c.read={}),c.read.reader=a[o],r&&(c.read.source=(c.read.source||[]).concat(r))})}}let To=class extends B{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Te.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,t){if(e instanceof Te)return e;if(e!=null){const r=new Te;return r.read(e,t),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,t){this.cache[e]=t}};u([d()],To.prototype,"type",void 0),u([d({readOnly:!0})],To.prototype,"cache",null),u([d({readOnly:!0})],To.prototype,"extent",null),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],To.prototype,"hasM",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],To.prototype,"hasZ",void 0),u([d({type:Te,json:{write:!0}})],To.prototype,"spatialReference",void 0),u([te("spatialReference")],To.prototype,"readSpatialReference",null),To=u([E("esri.geometry.Geometry")],To);const on=To,Ane=Object.prototype.toString;function Pne(e){const t="__accessorMetadata__"in e?dt(e):e;return function(...r){if(r.push(t),typeof r[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return Rne.apply(this,r)}}function Rne(e,t,r,i){x2(e,t).cast=i}function Fne(e){return(t,r)=>{x2(t,e).cast=t[r]}}function ze(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&Ane.call(e[0])==="[object Function]"?Pne(e[0]):e.length===1&&typeof e[0]=="string"?Fne(e[0]):void 0}function Nne(e,t,r,i){var n;return e.x=e.x+t,e.y=e.y+r,i!=null&&(e.z=((n=e.z)!=null?n:0)+i),e}function Dne(e,t){const r=e.x-t.x,i=e.y-t.y,n=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(r*r+i*i+n*n)}class f3{constructor(t,r,i,n){this.semiMajorAxis=t,this.flattening=r,this.outerAtmosphereRimWidth=i;const s=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*s,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=n||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const ht=new f3(6378137,1/298.257223563,3e5,.006694379990137799),ul=new f3(3396190,1/169.8944472236118,23e4),uc=new f3(1737400,0,0),jne=57.29577951308232,Vne=.017453292519943;function eN(e){return e*jne}function tN(e){return e*Vne}function rN(e){return e/ht.radius}function iN(e){return Math.PI/2-2*Math.atan(Math.exp(-e/ht.radius))}function jM(e){return e.wkid!=null||e.wkt!=null}const Ex=[0,0];function Zb(e,t,r,i,n){const s=e,o=n;if(o.spatialReference=r,"x"in s&&"x"in o)[o.x,o.y]=t(s.x,s.y,Ex,i);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=t(s.xmin,s.ymin,Ex,i),[o.xmax,o.ymax]=t(s.xmax,s.ymax,Ex,i);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,l=[];let c;for(let h=0;h<a.length;h++){const f=a[h];c=[],l.push(c);for(let m=0;m<f.length;m++)c.push(t(f[m][0],f[m][1],[0,0],i)),f[m].length>2&&c[m].push(f[m][2]),f[m].length>3&&c[m].push(f[m][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in s&&"points"in o){const a=s.points,l=[];for(let c=0;c<a.length;c++)l[c]=t(a[c][0],a[c][1],[0,0],i),a[c].length>2&&l[c].push(a[c][2]),a[c].length>3&&l[c].push(a[c][3]);o.points=l}return n}function Jw(e,t){const r=e&&(jM(e)?e:e.spatialReference),i=t&&(jM(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!r||!i)&&(!!Hr(i,r)||hh(i)&&F0(r)||hh(r)&&F0(i))}function F2(e,t){if(R(e))return null;const r=e.spatialReference,i=t&&(jM(t)?t:t.spatialReference);return Jw(r,i)?Hr(r,i)?P(e):hh(i)?Zb(e,Yp,Te.WebMercator,!1,P(e)):F0(i)?Zb(e,Bg,Te.WGS84,!1,P(e)):null:null}function Yp(e,t,r=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const i=tN(t);return r[0]=tN(e)*ht.radius,r[1]=ht.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),r}function Bg(e,t,r=[0,0],i=!1){const n=eN(e/ht.radius);return r[0]=i?n:n-360*Math.floor((n+180)/360),r[1]=eN(Math.PI/2-2*Math.atan(Math.exp(-t/ht.radius))),r}function cl(e,t=!1,r=P(e)){return Zb(e,Yp,Te.WebMercator,t,r)}function jy(e,t=!1,r=P(e)){return Zb(e,Bg,Te.WGS84,t,r)}var Zw;const ny=[0,0];function nN(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}const M1=Z.getLogger("esri.geometry.Point");let fi=Zw=class extends on{constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const r=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(r)?r:r.clone())}normalizeCtorArgs(e,t,r,i,n){let s;if(Array.isArray(e))s=e,n=t,e=s[0],t=s[1],r=s[2],i=s[3];else if(e&&typeof e=="object"){if(s=e,e=s.x!=null?s.x:s.longitude,t=s.y!=null?s.y:s.latitude,r=s.z,i=s.m,(n=s.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new Te(n)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)M1.warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)M1.warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&n&&n.isWebMercator){const a=Yp(s.longitude,s.latitude,ny);e=a[0],t=a[1]}}}else nN(r)?(n=r,r=null):nN(i)&&(n=i,i=null);const o={x:e,y:t};return o.x==null&&o.y!=null?M1.warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&M1.warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(o.spatialReference=n),r!=null&&(o.z=r),i!=null&&(o.m=i),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){const{spatialReference:e,x:t,y:r}=this;if(e){if(e.isWebMercator)return Bg(t,r,ny)[1];if(e.isGeographic)return r}return null}set latitude(e){const{spatialReference:t,x:r}=this;t&&(t.isWebMercator?this._set("y",Yp(r,e,ny)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){const{x:e,y:t,spatialReference:r}=this;if(r){if(r.isWebMercator)return Bg(e,t,ny)[0];if(r.isGeographic)return e}return null}set longitude(e){const{y:t,spatialReference:r}=this;r&&(r.isWebMercator?this._set("x",Yp(e,t,ny)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new Zw;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return Zw.copy(e,this),this}equals(e){if(R(e))return!1;const{x:t,y:r,z:i,m:n,spatialReference:s}=this,{z:o,m:a}=e;let{x:l,y:c,spatialReference:h}=e;if(!s.equals(h))if(s.isWebMercator&&h.isWGS84)[l,c]=Yp(l,c),h=s;else{if(!s.isWGS84||!h.isWebMercator)return!1;[l,c]=Bg(l,c),h=s}return t===l&&r===c&&i===o&&n===a&&s.wkid===h.wkid}offset(e,t,r){return Nne(this,e,t,r)}normalize(){if(!this.spatialReference)return this;const e=ho(this.spatialReference);if(!e)return this;let t=this.x;const[r,i]=e.valid,n=2*i;let s;return t>i?(s=Math.ceil(Math.abs(t-i)/n),t-=s*n):t<r&&(s=Math.ceil(Math.abs(t-r)/n),t+=s*n),this._set("x",t),this}distance(e){return Dne(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};u([d({readOnly:!0})],fi.prototype,"cache",null),u([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],fi.prototype,"hasM",null),u([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],fi.prototype,"hasZ",null),u([d({type:Number})],fi.prototype,"latitude",null),u([d({type:Number})],fi.prototype,"longitude",null),u([d({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),ze(e=>isNaN(e)?e:as(e))],fi.prototype,"x",void 0),u([se("x")],fi.prototype,"writeX",null),u([te("x")],fi.prototype,"readX",null),u([d({type:Number,json:{write:!0}})],fi.prototype,"y",void 0),u([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],fi.prototype,"z",void 0),u([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],fi.prototype,"m",void 0),fi=Zw=u([E("esri.geometry.Point")],fi),fi.prototype.toJSON.isDefaultToJSON=!0;const ye=fi,Tx=[0,0];function N2(e,t){return!!I(t)&&wi(e,t.x,t.y,t.z)}function H5e(e,t){if(!t.points||t.points.length)return!1;for(const r of t.points)if(!Uf(e,r))return!1;return!0}function zne(e,t){const{xmin:r,ymin:i,zmin:n,xmax:s,ymax:o,zmax:a}=t;return e.hasZ&&t.hasZ?wi(e,r,i,n)&&wi(e,r,o,n)&&wi(e,s,o,n)&&wi(e,s,i,n)&&wi(e,r,i,a)&&wi(e,r,o,a)&&wi(e,s,o,a)&&wi(e,s,i,a):wi(e,r,i)&&wi(e,r,o)&&wi(e,s,o)&&wi(e,s,i)}function Uf(e,t){return wi(e,t[0],t[1])}function Une(e,t){return wi(e,t[0],t[1],t[2])}function wi(e,t,r,i){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax&&(i==null||!e.hasZ||i>=e.zmin&&i<=e.zmax)}function l7(e,t){return Tx[1]=t.y,Tx[0]=t.x,Gne(e,Tx)}function Gne(e,t){return u7(e.rings,t)}function u7(e,t){if(!e)return!1;if(Bne(e))return sN(!1,e,t);let r=!1;for(let i=0,n=e.length;i<n;i++)r=sN(r,e[i],t);return r}function Bne(e){return!Array.isArray(e[0][0])}function sN(e,t,r){const[i,n]=r;let s=e,o=0;for(let a=0,l=t.length;a<l;a++){o++,o===l&&(o=0);const[c,h]=t[a],[f,m]=t[o];(h<n&&m>=n||m<n&&h>=n)&&c+(n-h)/(m-h)*(f-c)<i&&(s=!s)}return s}function qne(e,t){return N2(e,t)}function Wne(e,t){const r=e.hasZ&&t.hasZ;let i,n,s;if(e.xmin<=t.xmin){if(i=t.xmin,e.xmax<i)return!1}else if(i=e.xmin,t.xmax<i)return!1;if(e.ymin<=t.ymin){if(n=t.ymin,e.ymax<n)return!1}else if(n=e.ymin,t.ymax<n)return!1;if(r&&t.hasZ){if(e.zmin<=t.zmin){if(s=t.zmin,e.zmax<s)return!1}else if(s=e.zmin,t.zmax<s)return!1}return!0}function Hne(e,t){const{points:r,hasZ:i}=t,n=i?Une:Uf;for(const s of r)if(n(e,s))return!0;return!1}const ph=[0,0],fh=[0,0],mh=[0,0],yh=[0,0],Jne=[ph,fh,mh,yh],c7=[[mh,ph],[ph,fh],[fh,yh],[yh,mh]];function Zne(e,t){return Yne(e,t.rings)}function Yne(e,t){ph[0]=e.xmin,ph[1]=e.ymax,fh[0]=e.xmax,fh[1]=e.ymax,mh[0]=e.xmin,mh[1]=e.ymin,yh[0]=e.xmax,yh[1]=e.ymin;for(const r of Jne)if(u7(t,r))return!0;for(const r of t){if(!r.length)continue;let i=r[0];if(Uf(e,i))return!0;for(let n=1;n<r.length;n++){const s=r[n];if(Uf(e,s)||d7(i,s,c7))return!0;i=s}}return!1}function Qne(e,t){ph[0]=e.xmin,ph[1]=e.ymax,fh[0]=e.xmax,fh[1]=e.ymax,mh[0]=e.xmin,mh[1]=e.ymin,yh[0]=e.xmax,yh[1]=e.ymin;const r=t.paths;for(const i of r){if(!r.length)continue;let n=i[0];if(Uf(e,n))return!0;for(let s=1;s<i.length;s++){const o=i[s];if(Uf(e,o)||d7(n,o,c7))return!0;n=o}}return!1}const kr=[0,0];function Kne(e){for(let t=0;t<e.length;t++){const r=e[t];for(let n=0;n<r.length-1;n++){const s=r[n],o=r[n+1];for(let a=t+1;a<e.length;a++)for(let l=0;l<e[a].length-1;l++){const c=e[a][l],h=e[a][l+1];if(VM(s,o,c,h,kr)&&!(kr[0]===s[0]&&kr[1]===s[1]||kr[0]===c[0]&&kr[1]===c[1]||kr[0]===o[0]&&kr[1]===o[1]||kr[0]===h[0]&&kr[1]===h[1]))return!0}}const i=r.length;if(!(i<=4))for(let n=0;n<i-3;n++){let s=i-1;n===0&&(s=i-2);const o=r[n],a=r[n+1];for(let l=n+2;l<s;l++){const c=r[l],h=r[l+1];if(VM(o,a,c,h,kr)&&!(kr[0]===o[0]&&kr[1]===o[1]||kr[0]===c[0]&&kr[1]===c[1]||kr[0]===a[0]&&kr[1]===a[1]||kr[0]===h[0]&&kr[1]===h[1]))return!0}}}return!1}function d7(e,t,r){for(let i=0;i<r.length;i++)if(VM(e,t,r[i][0],r[i][1]))return!0;return!1}function VM(e,t,r,i,n){const[s,o]=e,[a,l]=t,[c,h]=r,[f,m]=i,y=f-c,g=s-c,v=a-s,_=m-h,w=o-h,b=l-o,S=_*v-y*b;if(S===0)return!1;const M=(y*w-_*g)/S,T=(v*w-b*g)/S;return M>=0&&M<=1&&T>=0&&T<=1&&(n&&(n[0]=s+M*(a-s),n[1]=o+M*(l-o)),!0)}function Xne(e){switch(e){case"esriGeometryEnvelope":case"extent":return Wne;case"esriGeometryMultipoint":case"multipoint":return Hne;case"esriGeometryPoint":case"point":return qne;case"esriGeometryPolygon":case"polygon":return Zne;case"esriGeometryPolyline":case"polyline":return Qne}}var Wn;function ese(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function Ol(e,t,r){return t==null?r:r==null?t:e(t,r)}let mr=Wn=class extends on{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,r,i,n){return ese(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?Te.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:r,ymax:i,spatialReference:n==null?Te.WGS84:n}}static fromBounds(e,t){return new Wn({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new Wn({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new ye({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new Wn;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&Jw(t,r)&&(e=t.isWebMercator?cl(e):jy(e,!0)),e.type==="point"?N2(this,e):e.type==="extent"&&zne(this,e)}equals(e){if(this===e)return!0;if(R(e))return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&Jw(t,r)&&(e=t.isWebMercator?cl(e):jy(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),r=this.width*t,i=this.height*t;if(this.xmin+=r,this.ymin+=i,this.xmax-=r,this.ymax-=i,this.hasZ){const n=(this.zmax-this.zmin)*t;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*t;this.mmin+=n,this.mmax-=n}return this}intersects(e){if(R(e))return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&Jw(t,r)&&(e=t.isWebMercator?cl(e):jy(e,!0)),Xne(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,r){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,r!=null&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Ol(Math.min,this.zmin,e.zmin),this.zmax=Ol(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Ol(Math.min,this.mmin,e.mmin),this.mmax=Ol(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:R(e)||!this.intersects(e)?null:(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Ol(Math.max,this.zmin,e.zmin),this.zmax=Ol(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Ol(Math.max,this.mmin,e.mmin),this.mmax=Ol(Math.min,this.mmax,e.mmax)),this)}toJSON(e){return this.write({},e)}_shiftCM(e=ho(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,r=this._getCM(e);if(r){const i=t.isWebMercator?jy(r):r;this.xmin-=r.x,this.xmax-=r.x,t.isWebMercator||(i.x=this._normalizeX(i.x,e).x),this.spatialReference=new Te(ra(t.isWGS84?e.altTemplate:e.wkTemplate,{Central_Meridian:i.x}))}return this}_getCM(e){let t=null;const[r,i]=e.valid,n=this.xmin,s=this.xmax;return n>=r&&n<=i&&s>=r&&s<=i||(t=this.center),t}_normalize(e,t,r){const i=this.spatialReference;if(!i)return this;if(!(r=r||ho(i)))return this;const n=this._getParts(r).map(a=>a.extent);if(n.length<2)return n[0]||this;if(n.length>2)return e?this._shiftCM(r):this.set({xmin:r.valid[0],xmax:r.valid[1]});if(e)return this._shiftCM(r);if(t)return n;let s=!0,o=!0;return n.forEach(a=>{a.hasZ||(s=!1),a.hasM||(o=!1)}),{rings:n.map(a=>{const l=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(s){const c=(a.zmax-a.zmin)/2;for(let h=0;h<l.length;h++)l[h].push(c)}if(o){const c=(a.mmax-a.mmin)/2;for(let h=0;h<l.length;h++)l[h].push(c)}return l}),hasZ:s,hasM:o,spatialReference:i}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:n,ymax:s,spatialReference:o}=this,a=this.width,l=this.xmin,c=this.xmax;let h;e=e||ho(o);const[f,m]=e.valid;h=this._normalizeX(this.xmin,e);const y=h.x,g=h.frameId;h=this._normalizeX(this.xmax,e);const v=h.x,_=h.frameId,w=y===v&&a>0;if(a>2*m){const b=new Wn(l<c?y:v,n,m,s,o),S=new Wn(f,n,l<c?v:y,s,o),M=new Wn(0,n,m,s,o),T=new Wn(f,n,0,s,o),k=[],N=[];b.contains(M)&&k.push(g),b.contains(T)&&N.push(g),S.contains(M)&&k.push(_),S.contains(T)&&N.push(_);for(let F=g+1;F<_;F++)k.push(F),N.push(F);t.push({extent:b,frameIds:[g]},{extent:S,frameIds:[_]},{extent:M,frameIds:k},{extent:T,frameIds:N})}else y>v||w?t.push({extent:new Wn(y,n,m,s,o),frameIds:[g]},{extent:new Wn(f,n,v,s,o),frameIds:[_]}):t.push({extent:new Wn(y,n,v,s,o),frameIds:[g]});this.cache._parts=t}const r=this.hasZ,i=this.hasM;if(r||i){const n={};r&&(n.zmin=this.zmin,n.zmax=this.zmax),i&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let s=0;s<t.length;s++)t[s].extent.set(n)}return t}_normalizeX(e,t){const[r,i]=t.valid,n=2*i;let s,o=0;return e>i?(s=Math.ceil(Math.abs(e-i)/n),e-=s*n,o=s):e<r&&(s=Math.ceil(Math.abs(e-r)/n),e+=s*n,o=-s),{x:e,frameId:o}}};u([d({readOnly:!0})],mr.prototype,"cache",null),u([d({readOnly:!0})],mr.prototype,"center",null),u([d({readOnly:!0})],mr.prototype,"extent",null),u([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],mr.prototype,"hasM",null),u([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],mr.prototype,"hasZ",null),u([d({readOnly:!0})],mr.prototype,"height",null),u([d({readOnly:!0})],mr.prototype,"width",null),u([d({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],mr.prototype,"xmin",void 0),u([d({type:Number,json:{write:!0}})],mr.prototype,"ymin",void 0),u([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],mr.prototype,"mmin",void 0),u([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],mr.prototype,"zmin",void 0),u([d({type:Number,json:{write:!0}})],mr.prototype,"xmax",void 0),u([d({type:Number,json:{write:!0}})],mr.prototype,"ymax",void 0),u([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],mr.prototype,"mmax",void 0),u([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],mr.prototype,"zmax",void 0),mr=Wn=u([E("esri.geometry.Extent")],mr),mr.prototype.toJSON.isDefaultToJSON=!0;const Je=mr;let qg;var S8,$8,x8;const Mx=(x8=(S8=globalThis.esriConfig)==null?void 0:S8.locale)!=null?x8:($8=globalThis.dojoConfig)==null?void 0:$8.locale;function h7(){var e,t;return(t=Mx!=null?Mx:(e=globalThis.navigator)==null?void 0:e.language)!=null?t:"en"}function An(){return qg===void 0&&(qg=h7()),qg}const Wg=[];function m3(e){return Wg.push(e),{remove(){Wg.splice(Wg.indexOf(e),1)}}}const zM=[];function y3(e){return zM.push(e),{remove(){Wg.splice(zM.indexOf(e),1)}}}function tse(){const e=h7();qg!==e&&(qg=e,[...zM].forEach(t=>{t.call(null,e)}),[...Wg].forEach(t=>{t.call(null,e)}))}var E8;(E8=globalThis.addEventListener)==null||E8.call(globalThis,"languagechange",tse);class Ee{constructor(t,r={ignoreUnknown:!1,useNumericKeys:!1}){this.jsonToAPI=t,this.options=r,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this._invertMap(t),this.apiValues=this._getKeysSorted(this.apiToJSON),this.jsonValues=this._getKeysSorted(this.jsonToAPI),this.read=i=>this.fromJSON(i),this.write=(i,n,s)=>{const o=this.toJSON(i);o!==void 0&&sn(s,o,n)},this.write.isJSONMapWriter=!0}toJSON(t){if(this.apiToJSON.hasOwnProperty(t)){const r=this.apiToJSON[t];return this.options.useNumericKeys?+r:r}return this.options.ignoreUnknown?void 0:t}fromJSON(t){return this.jsonToAPI.hasOwnProperty(t)?this.jsonToAPI[t]:this.options.ignoreUnknown?void 0:t}_invertMap(t){const r={};for(const i in t)r[t[i]]=i;return r}_getKeysSorted(t){const r=[];for(const i in t)r.push(i);return r.sort(),r}}function Yr(){return function(e,t){return new Ee(e,{ignoreUnknown:!0,...t})}}var UM;const rse=new Ee({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Hn=UM=class extends le{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new UM({categories:this.categories?P(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let r,i;if(this.categories&&(r=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o)),this.extent){const o=F2(this.extent,Te.WGS84);I(o)&&(i=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let n=this.query;!this.disableExtraQuery&&e.extraQuery&&(n="("+n+")"+e.extraQuery);const s={categories:r,bbox:i,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>rse.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...t,...s}}}};u([d()],Hn.prototype,"categories",void 0),u([d()],Hn.prototype,"disableExtraQuery",void 0),u([d({type:Je})],Hn.prototype,"extent",void 0),u([d()],Hn.prototype,"filter",void 0),u([d()],Hn.prototype,"num",void 0),u([d()],Hn.prototype,"query",void 0),u([d()],Hn.prototype,"sortField",void 0),u([d()],Hn.prototype,"sortOrder",null),u([d()],Hn.prototype,"start",void 0),Hn=UM=u([E("esri.portal.PortalQueryParams")],Hn);const rl=Hn;let Rc=class extends le{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};u([d()],Rc.prototype,"nextQueryParams",void 0),u([d()],Rc.prototype,"queryParams",void 0),u([d()],Rc.prototype,"results",void 0),u([d()],Rc.prototype,"total",void 0),Rc=u([E("esri.portal.PortalQueryResult")],Rc);const ise=Rc;let Ca=class extends B{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new O("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};u([d({type:Date})],Ca.prototype,"created",void 0),u([d()],Ca.prototype,"id",void 0),u([d()],Ca.prototype,"portal",void 0),u([d()],Ca.prototype,"title",void 0),u([d({readOnly:!0})],Ca.prototype,"url",null),u([d()],Ca.prototype,"username",void 0),Ca=u([E("esri.portal.PortalFolder")],Ca);const nse=Ca;let yr=class extends B{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal._request(this.url+"/categorySchema",e).then(t=>{const r=t.categorySchema||[];return r.some(i=>i.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):r})}fetchMembers(e){return this.portal._request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new O("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,t){let r=dt(rl,e);return parseFloat(this.portal.currentVersion)>5?(r=r||new rl,this.portal._queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",t)):(r=r?r.clone():new rl,r.query="group:"+this.id+(r.query?" "+r.query:""),this.portal.queryItems(r,t))}_fetchCategorySchemaSet(e,t){return this.portal._fetchSelf(this.portal.authMode,!0,t).then(r=>{const i=r.contentCategorySetsGroupQuery;if(i){const n=new rl;return n.disableExtraQuery=!0,n.num=1,n.query=i,this.portal.queryGroups(n,t)}throw new O("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const i=r.results[0],n=new rl;return n.num=1,n.query=`typekeywords:"${e}"`,i.queryItems(n,t)}throw new O("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",t).then(i=>{const n=i&&i.categorySchema;return n&&n.length?n:[]}):[])}};u([d()],yr.prototype,"access",void 0),u([d({type:Date})],yr.prototype,"created",void 0),u([d()],yr.prototype,"description",void 0),u([d()],yr.prototype,"id",void 0),u([d()],yr.prototype,"isInvitationOnly",void 0),u([d({type:Date})],yr.prototype,"modified",void 0),u([d()],yr.prototype,"owner",void 0),u([d()],yr.prototype,"portal",void 0),u([d()],yr.prototype,"snippet",void 0),u([d()],yr.prototype,"sortField",void 0),u([d()],yr.prototype,"sortOrder",void 0),u([d()],yr.prototype,"tags",void 0),u([d()],yr.prototype,"thumbnail",void 0),u([d({readOnly:!0})],yr.prototype,"thumbnailUrl",null),u([d()],yr.prototype,"title",void 0),u([d({readOnly:!0})],yr.prototype,"url",null),yr=u([E("esri.portal.PortalGroup")],yr);const GM=yr,sse=Object.freeze(Object.defineProperty({__proto__:null,default:GM},Symbol.toStringTag,{value:"Module"}));var BM;let pt=BM=class extends B{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.get("portal.restUrl");return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,r=e&&e.data,i=e&&e.folder,n={method:"post"};t&&(n.query=t.createPostQuery(),r!=null&&(typeof r=="string"?n.query.text=r:typeof r=="object"&&(n.query.text=JSON.stringify(r))));let s=this.userContentUrl;return i&&(s+="/"+(typeof i=="string"?i:i.id)),this.portal._request(s+"/addItem",n).then(o=>(t.id=o.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}deleteItem(e){let t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal._request(t+`/items/${e.id}/delete`,{method:"post"}).then(()=>{e.id=null,e.portal=null})}deleteItems(e){const t=this.userContentUrl+"/deleteItems",r=e.map(i=>i.id);if(r.length){const i={method:"post",query:{items:r.join(",")}};return this.portal._request(t,i).then(()=>{e.forEach(n=>{n.id=null,n.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const e={query:{num:1}};return this.portal._request(this.userContentUrl,e).then(t=>{let r;return r=t&&t.folders?t.folders.map(i=>{const n=nse.fromJSON(i);return n.portal=this.portal,n}):[],r})}fetchGroups(){return this.portal._request(this.url).then(e=>{let t;return t=e&&e.groups?e.groups.map(r=>{const i=GM.fromJSON(r);return i.portal=this.portal,i}):[],t})}fetchItems(e){e||(e={});let t,r=this.userContentUrl;return e.folder&&(r+="/"+e.folder.id),V(()=>Promise.resolve().then(()=>p7),void 0,import.meta.url).then(({default:i})=>{t=i;const n={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal._request(r,{query:n})}).then(i=>{let n;return i&&i.items?(n=i.items.map(s=>{const o=t.fromJSON(s);return o.portal=this.portal,o}),Promise.all(n.map(s=>s.load())).catch(s=>s).then(()=>({items:n,nextStart:i.nextStart,total:i.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal._request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new GM({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new O("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new O("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new BM;return t.sourceJSON=e,t.read(e),t}};u([d()],pt.prototype,"access",void 0),u([d({type:Date})],pt.prototype,"created",void 0),u([d()],pt.prototype,"culture",void 0),u([d()],pt.prototype,"description",void 0),u([d()],pt.prototype,"email",void 0),u([d()],pt.prototype,"favGroupId",void 0),u([d()],pt.prototype,"fullName",void 0),u([d({type:Date})],pt.prototype,"modified",void 0),u([d()],pt.prototype,"orgId",void 0),u([d()],pt.prototype,"portal",void 0),u([d()],pt.prototype,"preferredView",void 0),u([d()],pt.prototype,"privileges",void 0),u([d()],pt.prototype,"region",void 0),u([d()],pt.prototype,"role",void 0),u([d()],pt.prototype,"roleId",void 0),u([d()],pt.prototype,"sourceJSON",void 0),u([d()],pt.prototype,"thumbnail",void 0),u([d({readOnly:!0})],pt.prototype,"thumbnailUrl",null),u([d()],pt.prototype,"units",void 0),u([d({readOnly:!0})],pt.prototype,"userContentUrl",null),u([d({readOnly:!0})],pt.prototype,"url",null),u([d()],pt.prototype,"username",void 0),u([d()],pt.prototype,"userType",void 0),pt=BM=u([E("esri.portal.PortalUser")],pt);const g3=pt,ose=Object.freeze(Object.defineProperty({__proto__:null,default:g3},Symbol.toStringTag,{value:"Module"}));var vn;let Ix;const oN={PortalGroup:()=>V(()=>Promise.resolve().then(()=>sse),void 0,import.meta.url),PortalItem:()=>V(()=>Promise.resolve().then(()=>p7),void 0,import.meta.url),PortalUser:()=>V(()=>Promise.resolve().then(()=>ose),void 0,import.meta.url)};let ee=vn=class extends $v(Nn){constructor(e){super(e),this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Ve.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)Ve.request.trustedServers.includes(t)||Ve.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=g3.fromJSON(e),t.portal=this),t}load(e){const t=V(()=>Promise.resolve().then(()=>Ese),void 0,import.meta.url).then(({default:r})=>{yt(e),Ix=r}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,e)).then(r=>{if($t){const i=$t;this.credential=i.findCredential(this.restUrl),this.credential||this.authMode!==vn.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=i.on("credential-create",()=>{i.findCredential(this.restUrl)&&this._signIn()}))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await V(()=>import("./ElevationLayer.9a86c5bf.js"),["ElevationLayer.9a86c5bf.js","ArcGISCachedService.1e4bde6b.js","TilemapCache.89911c01.js"],import.meta.url)).default;return e?e.map(r=>new t({id:r.id,url:r.url})):[]}fetchBasemaps(e,t){const r=new rl;return r.query=e||(Ve.apiKey&&s7(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0,this.queryGroups(r,t).then(i=>{if(r.num=100,r.query='type:"Web Map" -type:"Web Application"',i.total){const n=i.results[0];return r.sortField=n.sortField||"name",r.sortOrder=n.sortOrder||"desc",n.queryItems(r,t)}return null}).then(i=>{let n;return n=i&&i.total?i.results.filter(s=>s.type==="Web Map").map(s=>new Ix({portalItem:s})):[],n})}fetchCategorySchema(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):go(e)?Promise.reject(Ot()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,r=new rl;if(r.num=100,r.sortField="title",t&&t.length){const i=[];for(const n of t)i.push(`(title:"${n.title}" AND owner:${n.owner})`);return r.query=i.join(" OR "),this.queryGroups(r,e).then(n=>n.results)}return go(e)?Promise.reject(Ot()):Promise.resolve([])}fetchRegions(e){var r;const t=((r=this.user)==null?void 0:r.culture)||this.culture||An();return this._request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var r;const t=((r=this.user)==null?void 0:r.culture)||this.culture||An();return this._request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return vn._default&&!vn._default.destroyed||(vn._default=new vn),vn._default}queryGroups(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this._queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)}toJSON(){throw new O("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new vn({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new O("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}_getHelperServiceUrl(e){const t=this._getHelperService(e);if(!t.url)throw new O("portal:service-url-not-found",`The \`helperServices\` entry "${e}" does not include a \`url\` value`);return t.url}_fetchSelf(e=this.authMode,t=!1,r){const i=this.restUrl+"/portals/self",n={authMode:e,query:{culture:An().toLowerCase()},...r};return n.authMode==="auto"&&(n.authMode="no-prompt"),t&&(n.query.default=!0),this._request(i,n)}_queryPortal(e,t,r,i){const n=dt(rl,t),s=o=>this._request(this.restUrl+e,{...n.toRequestOptions(this),...i}).then(a=>{const l=n.clone();return l.start=a.nextStart,new ise({nextQueryParams:l,queryParams:n,total:a.total,results:vn._resultsToTypedArray(o,{portal:this},a,i)})}).then(a=>Promise.all(a.results.map(l=>typeof l.when=="function"?l.when():a)).then(()=>a,l=>(bv(l),a)));return r&&oN[r]?oN[r]().then(({default:o})=>(yt(i),s(o))):s()}_signIn(){if(this.authMode===vn.AUTH_MODE_ANONYMOUS)return Promise.reject(new O("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this._fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this._fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return $t?$t.getCredential(this.restUrl).then(t=>e(t)):e(this.credential)}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(e){const t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}_requestToTypedArray(e,t,r){return this._request(e,t).then(i=>{const n=vn._resultsToTypedArray(r,{portal:this},i);return Promise.all(n.map(s=>typeof s.when=="function"?s.when():i)).then(()=>n,()=>n)})}_readBasemap(e){if(e){const t=Ix.fromJSON(e);return t.portalItem={portal:this},t}return null}_request(e,t={}){const r={f:"json",...t.query},{authMode:i=this.authMode===vn.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:n=null,cacheBust:s=!1,method:o="auto",responseType:a="json",signal:l}=t,c={authMode:i,body:n,cacheBust:s,method:o,query:r,responseType:a,timeout:0,signal:l};return nt(this._normalizeSSL(e),c).then(h=>h.data)}static _resultsToTypedArray(e,t,r,i){let n;if(r){const s=I(i)?i.signal:null;n=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(n=n.map(o=>{const a=Object.assign(e?e.fromJSON(o):o,t);return typeof a.load=="function"&&a.load(s),a}))}else n=[];return n}};ee.AUTH_MODE_ANONYMOUS="anonymous",ee.AUTH_MODE_AUTO="auto",ee.AUTH_MODE_IMMEDIATE="immediate",u([d()],ee.prototype,"access",void 0),u([d()],ee.prototype,"allSSL",void 0),u([d()],ee.prototype,"authMode",void 0),u([d()],ee.prototype,"authorizedCrossOriginDomains",void 0),u([te("authorizedCrossOriginDomains")],ee.prototype,"readAuthorizedCrossOriginDomains",null),u([d()],ee.prototype,"basemapGalleryGroupQuery",void 0),u([d()],ee.prototype,"bingKey",void 0),u([d()],ee.prototype,"canListApps",void 0),u([d()],ee.prototype,"canListData",void 0),u([d()],ee.prototype,"canListPreProvisionedItems",void 0),u([d()],ee.prototype,"canProvisionDirectPurchase",void 0),u([d()],ee.prototype,"canSearchPublic",void 0),u([d()],ee.prototype,"canShareBingPublic",void 0),u([d()],ee.prototype,"canSharePublic",void 0),u([d()],ee.prototype,"canSignInArcGIS",void 0),u([d()],ee.prototype,"canSignInIDP",void 0),u([d()],ee.prototype,"colorSetsGroupQuery",void 0),u([d()],ee.prototype,"commentsEnabled",void 0),u([d({type:Date})],ee.prototype,"created",void 0),u([d()],ee.prototype,"credential",void 0),u([d()],ee.prototype,"culture",void 0),u([d()],ee.prototype,"currentVersion",void 0),u([d()],ee.prototype,"customBaseUrl",void 0),u([d()],ee.prototype,"defaultBasemap",void 0),u([te("defaultBasemap")],ee.prototype,"readDefaultBasemap",null),u([d()],ee.prototype,"defaultDevBasemap",void 0),u([te("defaultDevBasemap")],ee.prototype,"readDefaultDevBasemap",null),u([d({type:Je})],ee.prototype,"defaultExtent",void 0),u([d()],ee.prototype,"defaultVectorBasemap",void 0),u([te("defaultVectorBasemap")],ee.prototype,"readDefaultVectorBasemap",null),u([d()],ee.prototype,"description",void 0),u([d()],ee.prototype,"devBasemapGalleryGroupQuery",void 0),u([d()],ee.prototype,"eueiEnabled",void 0),u([d({readOnly:!0})],ee.prototype,"extraQuery",null),u([d()],ee.prototype,"featuredGroups",void 0),u([d()],ee.prototype,"featuredItemsGroupQuery",void 0),u([d()],ee.prototype,"galleryTemplatesGroupQuery",void 0),u([d()],ee.prototype,"livingAtlasGroupQuery",void 0),u([d()],ee.prototype,"hasCategorySchema",void 0),u([d()],ee.prototype,"helpBase",void 0),u([d()],ee.prototype,"helperServices",void 0),u([d()],ee.prototype,"helpMap",void 0),u([d()],ee.prototype,"homePageFeaturedContent",void 0),u([d()],ee.prototype,"homePageFeaturedContentCount",void 0),u([d()],ee.prototype,"httpPort",void 0),u([d()],ee.prototype,"httpsPort",void 0),u([d()],ee.prototype,"id",void 0),u([d()],ee.prototype,"ipCntryCode",void 0),u([d({readOnly:!0})],ee.prototype,"isOrganization",null),u([d()],ee.prototype,"isPortal",void 0),u([d()],ee.prototype,"isReadOnly",void 0),u([d()],ee.prototype,"layerTemplatesGroupQuery",void 0),u([d()],ee.prototype,"maxTokenExpirationMinutes",void 0),u([d({type:Date})],ee.prototype,"modified",void 0),u([d()],ee.prototype,"name",void 0),u([d()],ee.prototype,"portalHostname",void 0),u([d()],ee.prototype,"portalMode",void 0),u([d()],ee.prototype,"portalProperties",void 0),u([d()],ee.prototype,"region",void 0),u([d({readOnly:!0})],ee.prototype,"restUrl",null),u([d()],ee.prototype,"rotatorPanels",void 0),u([d()],ee.prototype,"showHomePageDescription",void 0),u([d()],ee.prototype,"sourceJSON",void 0),u([d()],ee.prototype,"staticImagesUrl",void 0),u([d({json:{name:"2DStylesGroupQuery"}})],ee.prototype,"stylesGroupQuery2d",void 0),u([d({json:{name:"stylesGroupQuery"}})],ee.prototype,"stylesGroupQuery3d",void 0),u([d()],ee.prototype,"supportsHostedServices",void 0),u([d()],ee.prototype,"symbolSetsGroupQuery",void 0),u([d()],ee.prototype,"templatesGroupQuery",void 0),u([d()],ee.prototype,"thumbnail",void 0),u([d({readOnly:!0})],ee.prototype,"thumbnailUrl",null),u([d()],ee.prototype,"units",void 0),u([d()],ee.prototype,"url",void 0),u([d()],ee.prototype,"urlKey",void 0),u([te("urlKey")],ee.prototype,"readUrlKey",null),u([d()],ee.prototype,"user",void 0),u([te("user")],ee.prototype,"readUser",null),u([d()],ee.prototype,"useStandardizedQuery",void 0),u([d()],ee.prototype,"useVectorBasemaps",void 0),u([d()],ee.prototype,"vectorBasemapGalleryGroupQuery",void 0),ee=vn=u([E("esri.portal.Portal")],ee);const Mr=ee,ase=Z.getLogger("esri.assets");function De(e){if(!Ve.assetsPath)throw ase.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new O("assets:path-not-set","config.assetsPath is not set");return dh(Ve.assetsPath,e)}const lse=Z.getLogger("esri.portal.PortalItemResource");let Jl=class extends le{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this._normalizePath(e.path,e.portalItem)}:e}set path(e){I(e)&&On(e)?lse.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const r=this.url;if(R(r))throw new O("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(r,{responseType:e,query:{token:this.portalItem.apiKey},signal:zO(t,"signal")})}async update(e,t){return(await V(()=>import("./resourceUtils.cd01e7da.js"),[],import.meta.url)).addOrUpdateResource(this,"update",e,t)}hasPath(){return I(this.path)}_normalizePath(e,t){return R(e)?e:(e=e.replace(/^\/+/,""),I(t)&&On(e)&&(e=a3(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};u([d()],Jl.prototype,"portalItem",void 0),u([d({type:String,value:null})],Jl.prototype,"path",null),u([ze("path")],Jl.prototype,"_castPath",null),u([d({type:String,readOnly:!0})],Jl.prototype,"url",null),u([d({type:String,readOnly:!0})],Jl.prototype,"itemRelativeUrl",null),Jl=u([E("esri.portal.PortalItemResource")],Jl);const use=Jl;let Vy=class extends le{constructor(e){super(e),this.created=null,this.rating=null}};u([d()],Vy.prototype,"created",void 0),u([d()],Vy.prototype,"rating",void 0),Vy=u([E("esri.portal.PortalRating")],Vy);const Cx=Vy;var ep;let ke=ep=class extends $v(Nn){constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return QO(ep,e)}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return e==="Feature Service"||e==="Feature Collection"?r=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?r=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?r="Scene Layer":e==="Video Service"?r="Video Layer":e==="Scene Package"?r="Scene Layer Package":e==="Stream Service"?r="Feature Layer":e==="Geoprocessing Service"&&this.portal&&this.portal.isPortal?r=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geocoding Service"?r="Locator":e==="Geoenrichment Service"?r="GeoEnrichment Service":e==="Microsoft Powerpoint"?r="Microsoft PowerPoint":e==="GeoJson"?r="GeoJSON":e==="Globe Service"?r="Globe Layer":e==="Vector Tile Service"?r="Tile Layer":e==="netCDF"?r="NetCDF":e==="Map Service"?r=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e&&e.toLowerCase().includes("add in")?r=e.replace(/(add in)/gi,"Add-In"):e==="datastore catalog service"?r="Big Data File Share":e==="Compact Tile Package"?r="Tile Package (tpkx)":e==="OGCFeatureServer"?r="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")&&(r="Instant App"),r}readExtent(e){return e&&e.length?new Je(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[],r="esri/images/portal/",i="16";let n,s=!1,o=!1,a=!1,l=!1,c=!1,h=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(s=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=t.includes("Table"),a=t.includes("Route Layer"),l=t.includes("Markup"),c=t.includes("Spatiotemporal"),h=t.includes("UtilityNetwork"),n=c&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":c?"spatiotemporal":s?"featureshosted":h?"utilitynetwork":"features"):n=e==="map service"||e==="wms"||e==="wmts"?s||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages":e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="video service"?"mediaservice":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="geoprocessing service"?t.includes("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":e==="geodata service"?"geodataservice":"layers"):n=e==="web map"||e==="cityengine web scene"?"maps":e==="web scene"?t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?"instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?"apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?"mapsgray":e==="service definition"||e==="csv"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="360 vr experience"||e==="netcdf"||e==="administrative report"?"datafiles":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?"appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?"addindesktop":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="form"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="image"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?"datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?"toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?"layersgray":e==="scene package"?"scenepackage":e==="mobile scene package"?"mobilescenepackage":e==="tile package"||e==="compact tile package"?"tilepackage":e==="task file"?"taskfile":e==="report template"?"report-template":e==="statistical data collection"?"statisticaldatacollection":e==="insights workbook"?"workbook":e==="insights model"?"insightsmodel":e==="insights page"?"insightspage":e==="insights theme"?"insightstheme":e==="hub initiative"?"hubinitiative":e==="hubpage"?"hubpage":e==="hub event"?"hubevent":e==="hub site application"?"hubsite":e==="hub project"?"hubproject":e==="relational database connection"?"relationaldatabaseconnection":e==="big data file share"?"datastorecollection":e==="image collection"?"imagecollection":e==="style"?"style":e==="desktop style"?"desktopstyle":e==="dashboard"?"dashboard":e==="raster function template"?"rasterprocessingtemplate":e==="vector tile package"?"vectortilepackage":e==="ortho mapping project"?"orthomappingproject":e==="ortho mapping template"?"orthomappingtemplate":e==="solution"?"solutions":e==="geopackage"?"geopackage":e==="deep learning package"?"deeplearningpackage":e==="real time analytic"?"realtimeanalytics":e==="big data analytic"?"bigdataanalytics":e==="feed"?"feed":e==="excalibur imagery project"?"excaliburimageryproject":e==="notebook"?"notebook":e==="storymap"?"storymap":e==="survey123 add in"?"survey123addin":e==="mission"?"mission":e==="mission report"?"missionreport":e==="quickcapture project"?"quickcaptureproject":e==="pro report"?"proreport":e==="urban model"?"urbanmodel":e==="web experience"?"experiencebuilder":e==="web experience template"?"webexperiencetemplate":e==="experience builder widget"?"experiencebuilderwidget":e==="experience builder widget package"?"experiencebuilderwidgetpackage":e==="workflow"?"workflow":e==="insights script"?"insightsscript":e==="kernel gateway connection"?"kernelgatewayconnection":e==="hub initiative template"?"hubinitiativetemplate":e==="storymap theme"?"storymaptheme":e==="knowledge graph"?"knowledgegraph":e==="native application"?"nativeapp":e==="native application installer"?"nativeappinstaller":e==="link chart"?"linkchart":e==="investigation"?"investigation":e==="ogcfeatureserver"?"features":e==="pro project"?"proproject":e==="insights workbook package"?"insightsworkbookpackage":e==="apache parquet"?"apacheparquet":e==="notebook code snippets"?"notebookcodesnippets":e==="suitability model"?"suitabilitymodel":e==="esri classifier definition"?"classifierdefinition":e==="esri classification schema"?"classificationschema":e==="insights data engineering workbook"?"dataengineeringworkbook":e==="insights data engineering model"?"dataengineeringmodel":e==="deep learning studio project"?"deeplearningproject":"maps",n?De(r+n+i+".png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].includes(this.type)}get itemUrl(){const e=this.get("portal.restUrl");return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){this.portal||(this.portal=Mr.getDefault());const t=this.portal.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:I(e)?e.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(t),Promise.resolve(this)}addRating(e){const t={method:"post",query:{}};return e instanceof Cx&&(e=e.rating),isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then(()=>new Cx({rating:e,created:new Date}))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:P(this.applicationProxies),avgRating:this.avgRating,categories:P(this.categories),created:P(this.created),culture:this.culture,description:this.description,extent:P(this.extent),groupCategories:P(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:P(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:P(this.screenshots),size:this.size,snippet:this.snippet,spatialReference:this.spatialReference,tags:P(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:P(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new ep({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const r of["tags","typeKeywords","categories"])e[r]&&(e[r]=e[r].join(", "));const{extent:t}=e;return t&&(e.extent=JSON.stringify(t)),e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(()=>{})}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e}).then(t=>t.rating!=null?(t.created=new Date(t.created),new Cx(t)):null)}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},ep)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e&&e.data,r={method:"post"};r.query=this.createPostQuery();for(const i in r.query)r.query[i]===null&&(r.query[i]="");return r.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?r.query.text=t:typeof t=="object"&&(r.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,r).then(()=>this.reload())}):Promise.reject(new O("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e.thumbnail,r=e.filename,i={method:"post"};if(typeof t=="string")xh(t)?i.query={data:t}:i.query={url:no(t)},I(r)&&(i.query.filename=r);else{const n=new FormData;I(r)?n.append("file",t,r):n.append("file",t),i.body=n}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,i).then(()=>this.reload())}):Promise.reject(new O("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await V(()=>import("./resourceUtils.cd01e7da.js"),[],import.meta.url)).fetchResources(this,e,t)}async addResource(e,t,r){const i=await V(()=>import("./resourceUtils.cd01e7da.js"),[],import.meta.url);return e.portalItem=this,i.addOrUpdateResource(e,"add",t,r)}async removeResource(e,t){const r=await V(()=>import("./resourceUtils.cd01e7da.js"),[],import.meta.url);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new O("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r.removeResource(this,e,t)}async removeAllResources(e){return(await V(()=>import("./resourceUtils.cd01e7da.js"),[],import.meta.url)).removeAllResources(this,e)}resourceFromPath(e){return new use({portalItem:this,path:e})}toJSON(){const e=this.extent,t={accessInformation:this.accessInformation,categories:P(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,spatialReference:this.spatialReference,tags:P(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:P(this.typeKeywords),url:this.url};return jz(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new ep({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};u([d({type:["private","shared","org","public"]})],ke.prototype,"access",void 0),u([d()],ke.prototype,"accessInformation",void 0),u([d({type:String})],ke.prototype,"apiKey",void 0),u([d({json:{read:{source:"appProxies"}}})],ke.prototype,"applicationProxies",void 0),u([d()],ke.prototype,"avgRating",void 0),u([d()],ke.prototype,"categories",void 0),u([d({type:Date})],ke.prototype,"created",void 0),u([d()],ke.prototype,"culture",void 0),u([d()],ke.prototype,"description",void 0),u([d({readOnly:!0})],ke.prototype,"displayName",null),u([d({type:Je})],ke.prototype,"extent",void 0),u([te("extent")],ke.prototype,"readExtent",null),u([d()],ke.prototype,"groupCategories",void 0),u([d({readOnly:!0})],ke.prototype,"iconUrl",null),u([d()],ke.prototype,"id",void 0),u([d({readOnly:!0})],ke.prototype,"isLayer",null),u([d()],ke.prototype,"itemControl",void 0),u([d({readOnly:!0})],ke.prototype,"itemUrl",null),u([d()],ke.prototype,"licenseInfo",void 0),u([d({type:Date})],ke.prototype,"modified",void 0),u([d()],ke.prototype,"name",void 0),u([d()],ke.prototype,"numComments",void 0),u([d()],ke.prototype,"numRatings",void 0),u([d()],ke.prototype,"numViews",void 0),u([d()],ke.prototype,"owner",void 0),u([d()],ke.prototype,"ownerFolder",void 0),u([d({type:Mr})],ke.prototype,"portal",void 0),u([d()],ke.prototype,"screenshots",void 0),u([d()],ke.prototype,"size",void 0),u([d()],ke.prototype,"snippet",void 0),u([d()],ke.prototype,"sourceJSON",void 0),u([d({type:String})],ke.prototype,"spatialReference",void 0),u([d()],ke.prototype,"tags",void 0),u([d()],ke.prototype,"thumbnail",void 0),u([d({readOnly:!0})],ke.prototype,"thumbnailUrl",null),u([d()],ke.prototype,"title",void 0),u([d()],ke.prototype,"type",void 0),u([d()],ke.prototype,"typeKeywords",void 0),u([d({type:String,json:{read(e,t){var i;if(t.type!=="KML")return e;const r=(i=this.portal)==null?void 0:i.restUrl;return e||(e=r&&this.id?`${r}/content/items/${this.id}/data`:null),e}}})],ke.prototype,"url",void 0),u([d({readOnly:!0})],ke.prototype,"userItemUrl",null),ke=ep=u([E("esri.portal.PortalItem")],ke);const Yb=ke,p7=Object.freeze(Object.defineProperty({__proto__:null,default:Yb},Symbol.toStringTag,{value:"Module"})),aN=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,cse={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function lN(e){var t;return(t=cse[e])!=null?t:!1}const zy=[],bf=new Map;function uN(e){for(const t of bf.keys())f7(e.pattern,t)&&bf.delete(t)}function dse(e){return zy.includes(e)||(uN(e),zy.unshift(e)),{remove(){const t=zy.indexOf(e);t>-1&&(zy.splice(t,1),uN(e))}}}async function v3(e){const t=An();bf.has(e)||bf.set(e,pse(e,t));const r=bf.get(e);return await fse.add(r),r}function hse(e){if(!aN.test(e))return null;const[,t,r]=aN.exec(e),i=t+(r?"-"+r.toUpperCase():"");return lN(i)?i:lN(t)?t:null}async function pse(e,t){const r=[];for(const i of zy)if(f7(i.pattern,e))try{return await i.fetchMessageBundle(e,t)}catch(n){r.push(n)}throw r.length?new O("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r}):new O("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function f7(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}y3(()=>{bf.clear()});const fse=new class{constructor(){this._numLoading=0}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=gl())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function mse(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e,r=await v3("esri/t9n/basemaps");return r[e]||r[t]}const qM={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return De("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return De("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return De("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return De("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return De("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return De("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return De("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return De("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return De("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return De("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return De("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return De("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return De("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return De("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return De("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return De("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return De("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return De("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return De("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return De("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return De("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return De("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return De("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return De("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return De("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return De("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return De("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}};function cN(e){const t=e==null?void 0:e.type;return t==="imagery-tile"||t==="tile"||t==="open-street-map"||t==="vector-tile"||t==="web-tile"||t==="wmts"}function yse(e){const t=e==null?void 0:e.type;return t==="base-tile"||t==="tile"||t==="elevation"||t==="imagery-tile"||t==="base-elevation"||t==="open-street-map"||t==="wcs"||t==="web-tile"||t==="wmts"||t==="vector-tile"}function w3(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function J5e(e){var t;return(e==null?void 0:e.type)==="feature"&&((t=e.source)==null?void 0:t.type)==="feature-layer"}function gse(e){if(e.activeLayer){const t=e.activeLayer.tileMatrixSet;if(t)return t;const r=e.activeLayer.tileMatrixSets;if(r)return r}return null}const vse=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),wse=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","ogc-feature","route","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function _se(e){return e.layerContainerType==="basemap"?vse:e.layerContainerType==="operational-layers"?wse:null}function bse(e,t){if(t.restrictedWebMapWriting){const r=_se(t);return!I(r)||r.has(e.type)&&!w3(e)}return!0}function Sse(e,t){if(w3(e)){const r=hm("featureCollection.layers",t),i=r&&r[0]&&r[0].layerDefinition;i&&kx(e,i)}else e.type==="stream"?kx(e,t.layerDefinition=t.layerDefinition||{}):e.type!=="group"&&kx(e,t)}function kx(e,t){"maxScale"in e&&(t.maxScale=qb(e.maxScale)),"minScale"in e&&(t.minScale=qb(e.minScale))}function $se(e,t){if(Sse(e,t),"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=qb(e.opacity),t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts")if(w3(e)){const r=t.featureCollection;r&&(r.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function dN(e,t,r){if(!("write"in e)||!e.write)return r&&r.messages&&r.messages.push(new O("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(bse(e,r)){const i={};return e.write(i,r)?i:null}return I(t)&&$se(e,t=P(t)),t}var Yw;let xse=0;const Lx=Z.getLogger("esri.Basemap");let Jn=Yw=class extends $v(Nn){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+xse++,this.baseLayers=new de,this.referenceLayers=new de;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type==="elevation"&&Lx.error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=i=>{i.parent=null};this.baseLayers.on("after-add",i=>t(i.item)),this.referenceLayers.on("after-add",i=>t(i.item)),this.baseLayers.on("after-remove",i=>r(i.item)),this.referenceLayers.on("after-remove",i=>r(i.item))}initialize(){this.when().catch(e=>{Lx.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var r;const e=this.baseLayers.removeAll();for(const i of e)i.destroy();const t=this.referenceLayers.removeAll();for(const i of t)i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),(r=this.portalItem)==null||r.destroy(),this.portalItem=null}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",ch(e,this._get("baseLayers")))}_writeBaseLayers(e,t,r){const i=[];e&&(r={...r,layerContainerType:"basemap"},this.baseLayers.forEach(n=>{const s=dN(n,r.webmap?r.webmap.getLayerJSONFromResourceInfo(n):null,r);I(s)&&i.push(s)}),this.referenceLayers.forEach(n=>{const s=dN(n,r.webmap?r.webmap.getLayerJSONFromResourceInfo(n):null,r);I(s)&&(s.isReference=!0,i.push(s))})),t.baseMapLayers=i}set referenceLayers(e){this._set("referenceLayers",ch(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return U9(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new Yw({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(r=>{const i=P(r);return i.url&&na(i.url)&&(i.url=`https:${i.url}`),i.templateUrl&&na(i.templateUrl)&&(i.templateUrl=`https:${i.templateUrl}`),i})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:r}=this;yt(e);const i=[];if(t){const n=t.context?t.context.url:null;if(i.push(this._loadLayersFromJSON(t.data,n,e)),t.data.id&&!t.data.title){const s=t.data.id;i.push(mse(s).then(o=>{o&&this.read({title:o},t.context)}))}}else r&&i.push(this._loadFromItem(r,e));await Promise.all(i)}async _loadLayersFromJSON(e,t,r){const i=this.resourceInfo&&this.resourceInfo.context,n=this.portalItem&&this.portalItem.portal||i&&i.portal||null,s=i&&i.origin==="web-scene"?"web-scene":"web-map",{populateOperationalLayers:o}=await V(()=>import("./layersCreator.b5feb1c7.js"),["layersCreator.b5feb1c7.js","lazyLayerLoader.1843a866.js","portalLayers.17344aab.js","layersLoader.11bbb3cf.js","jsonContext.36e23314.js","portalItemUtils.8f42d832.js"],import.meta.url),a=[];if(yt(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const l={context:{origin:s,url:t,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},c=o(this.baseLayers,e.baseMapLayers.filter(f=>!f.isReference),l);a.push(c);const h=o(this.referenceLayers,e.baseMapLayers.filter(f=>f.isReference),l);a.push(h)}await Zt(a)}async _loadFromItem(e,t){const r=await e.load(t),i=await r.fetchData("json",t),n=Qt(e.itemUrl);return this._set("resourceInfo",{data:i.baseMap,context:{origin:"web-map",portal:e.portal||Mr.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||Mr.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,t)}static fromId(e){const t=qM[e];if(t){if(t.deprecated){let r=null;e==="dark-gray"?r="dark-gray-vector":e==="gray"?r="gray-vector":e==="streets"?r="streets-vector":e==="topo"&&(r="topo-vector"),s9(Lx,`The ${e} basemap has entered mature support and is no longer being updated.`,{replacement:r,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return Yw.fromJSON(t)}return null}};u([d({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,r,i){this._writeBaseLayers(e,t,i)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:de}},writer(e,t,r,i){this._writeBaseLayers(e,t,i)}}}}}})],Jn.prototype,"baseLayers",null),u([d({type:String,json:{origins:{"web-scene":{write:!0}}}})],Jn.prototype,"id",void 0),u([d({type:Yb})],Jn.prototype,"portalItem",void 0),u([d()],Jn.prototype,"referenceLayers",null),u([d({readOnly:!0})],Jn.prototype,"resourceInfo",void 0),u([d({type:Te})],Jn.prototype,"spatialReference",void 0),u([d()],Jn.prototype,"thumbnailUrl",void 0),u([d({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Jn.prototype,"title",void 0),u([se("title")],Jn.prototype,"writeTitle",null),Jn=Yw=u([E("esri.Basemap")],Jn);const ta=Jn,Ese=Object.freeze(Object.defineProperty({__proto__:null,default:ta},Symbol.toStringTag,{value:"Module"})),Qb={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function m7(e){return Qb[e]||Qb[e.toLowerCase()]}function _3(e){var t;return(t=Qb[e])!=null?t:Qb[e.toLowerCase()]}function Tse(e){return[..._3(e)]}function Ox(e,t,r){r<0&&++r,r>1&&--r;const i=6*r;return i<1?e+(t-e)*i:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function y7(e,t,r,i=1){const n=(e%360+360)%360/360,s=r<=.5?r*(t+1):r+t-r*t,o=2*r-s;return[Math.round(255*Ox(o,s,n+1/3)),Math.round(255*Ox(o,s,n)),Math.round(255*Ox(o,s,n-1/3)),i]}function Mse(e){const t=e.length>5,r=t?8:4,i=(1<<r)-1,n=t?1:17,s=t?e.length===9:e.length===5;let o=Number("0x"+e.substr(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return s&&(l=o&i,o>>=r,a[3]=n*l/255),l=o&i,o>>=r,a[2]=n*l,l=o&i,o>>=r,a[1]=n*l,l=o&i,o>>=r,a[0]=n*l,a}function cn(){return[0,0,0]}function Ise(e){return[e[0],e[1],e[2]]}function vm(e,t,r){return[e,t,r]}function Cse(e){const t=cn(),r=Math.min(3,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function kse(e,t){return new Float64Array(e,t,3)}function g7(){return cn()}function v7(){return vm(1,1,1)}function w7(){return vm(1,0,0)}function _7(){return vm(0,1,0)}function b7(){return vm(0,0,1)}const Lse=g7(),S7=v7(),Ose=w7(),Ase=_7(),Pse=b7();Object.freeze(Object.defineProperty({__proto__:null,create:cn,clone:Ise,fromValues:vm,fromArray:Cse,createView:kse,zeros:g7,ones:v7,unitX:w7,unitY:_7,unitZ:b7,ZEROS:Lse,ONES:S7,UNIT_X:Ose,UNIT_Y:Ase,UNIT_Z:Pse},Symbol.toStringTag,{value:"Module"}));const $e=1e-6,zu=Math.random,Rse=Math.PI/180,Fse=180/Math.PI;function b3(e){return e*Rse}function Nse(e){return e*Fse}function Dse(e,t){return Math.abs(e-t)<=$e*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,EPSILON:$e,RANDOM:zu,toRadian:b3,toDegree:Nse,equals:Dse},Symbol.toStringTag,{value:"Module"}));function S3(e){const t=e[0],r=e[1],i=e[2];return Math.sqrt(t*t+r*r+i*i)}function Kb(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function $7(e,t,r,i){return e[0]=t,e[1]=r,e[2]=i,e}function x7(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function Hg(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function E7(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function T7(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function jse(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function Vse(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function zse(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function Use(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function Gse(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function Bse(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function qse(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function $3(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function Wse(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e}function M7(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(r*r+i*i+n*n)}function I7(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return r*r+i*i+n*n}function C7(e){const t=e[0],r=e[1],i=e[2];return t*t+r*r+i*i}function Hse(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function Jse(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function WM(e,t){const r=t[0],i=t[1],n=t[2];let s=r*r+i*i+n*n;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e}function Xb(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Zse(e,t,r){const i=t[0],n=t[1],s=t[2],o=r[0],a=r[1],l=r[2];return e[0]=n*l-s*a,e[1]=s*o-i*l,e[2]=i*a-n*o,e}function Yse(e,t,r,i){const n=t[0],s=t[1],o=t[2];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e[2]=o+i*(r[2]-o),e}function Qse(e,t,r,i,n,s){const o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,c=o*(s-1),h=o*(3-2*s);return e[0]=t[0]*a+r[0]*l+i[0]*c+n[0]*h,e[1]=t[1]*a+r[1]*l+i[1]*c+n[1]*h,e[2]=t[2]*a+r[2]*l+i[2]*c+n[2]*h,e}function Kse(e,t,r,i,n,s){const o=1-s,a=o*o,l=s*s,c=a*o,h=3*s*a,f=3*l*o,m=l*s;return e[0]=t[0]*c+r[0]*h+i[0]*f+n[0]*m,e[1]=t[1]*c+r[1]*h+i[1]*f+n[1]*m,e[2]=t[2]*c+r[2]*h+i[2]*f+n[2]*m,e}function Xse(e,t){t=t||1;const r=2*zu()*Math.PI,i=2*zu()-1,n=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(r)*n,e[1]=Math.sin(r)*n,e[2]=i*t,e}function eoe(e,t,r){const i=t[0],n=t[1],s=t[2];return e[0]=r[0]*i+r[4]*n+r[8]*s+r[12],e[1]=r[1]*i+r[5]*n+r[9]*s+r[13],e[2]=r[2]*i+r[6]*n+r[10]*s+r[14],e}function toe(e,t,r){const i=t[0],n=t[1],s=t[2];return e[0]=i*r[0]+n*r[3]+s*r[6],e[1]=i*r[1]+n*r[4]+s*r[7],e[2]=i*r[2]+n*r[5]+s*r[8],e}function roe(e,t,r){const i=r[0],n=r[1],s=r[2],o=r[3],a=t[0],l=t[1],c=t[2];let h=n*c-s*l,f=s*a-i*c,m=i*l-n*a,y=n*m-s*f,g=s*h-i*m,v=i*f-n*h;const _=2*o;return h*=_,f*=_,m*=_,y*=2,g*=2,v*=2,e[0]=a+h+y,e[1]=l+f+g,e[2]=c+m+v,e}function ioe(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[0],s[1]=n[1]*Math.cos(i)-n[2]*Math.sin(i),s[2]=n[1]*Math.sin(i)+n[2]*Math.cos(i),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function noe(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[2]*Math.sin(i)+n[0]*Math.cos(i),s[1]=n[1],s[2]=n[2]*Math.cos(i)-n[0]*Math.sin(i),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function soe(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[0]*Math.cos(i)-n[1]*Math.sin(i),s[1]=n[0]*Math.sin(i)+n[1]*Math.cos(i),s[2]=n[2],e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function ooe(e,t){Kb(I1,e),Kb(C1,t),WM(I1,I1),WM(C1,C1);const r=Xb(I1,C1);return r>1?0:r<-1?Math.PI:Math.acos(r)}const I1=cn(),C1=cn();function aoe(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function loe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function uoe(e,t){if(e===t)return!0;const r=e[0],i=e[1],n=e[2],s=t[0],o=t[1],a=t[2];return Math.abs(r-s)<=$e*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-o)<=$e*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(n-a)<=$e*Math.max(1,Math.abs(n),Math.abs(a))}function coe(e,t,r){const i=r[0]-t[0],n=r[1]-t[1],s=r[2]-t[2];let o=i*i+n*n+s*s;return o>0?(o=1/Math.sqrt(o),e[0]=i*o,e[1]=n*o,e[2]=s*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const doe=Hg,hoe=E7,poe=T7,foe=M7,moe=I7,yoe=S3,goe=C7;Object.freeze(Object.defineProperty({__proto__:null,length:S3,copy:Kb,set:$7,add:x7,subtract:Hg,multiply:E7,divide:T7,ceil:jse,floor:Vse,abs:zse,sign:Use,min:Gse,max:Bse,round:qse,scale:$3,scaleAndAdd:Wse,distance:M7,squaredDistance:I7,squaredLength:C7,negate:Hse,inverse:Jse,normalize:WM,dot:Xb,cross:Zse,lerp:Yse,hermite:Qse,bezier:Kse,random:Xse,transformMat4:eoe,transformMat3:toe,transformQuat:roe,rotateX:ioe,rotateY:noe,rotateZ:soe,angle:ooe,str:aoe,exactEquals:loe,equals:uoe,direction:coe,sub:doe,mul:hoe,div:poe,dist:foe,sqrDist:moe,len:yoe,sqrLen:goe},Symbol.toStringTag,{value:"Module"}));function voe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function woe(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}function _oe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function k7(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function L7(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function O7(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function boe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function Soe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function $oe(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function xoe(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function Eoe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function Toe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function Moe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e}function A7(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(r*r+i*i+n*n+s*s)}function P7(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return r*r+i*i+n*n+s*s}function R7(e){const t=e[0],r=e[1],i=e[2],n=e[3];return Math.sqrt(t*t+r*r+i*i+n*n)}function F7(e){const t=e[0],r=e[1],i=e[2],n=e[3];return t*t+r*r+i*i+n*n}function Ioe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function Coe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function koe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3];let o=r*r+i*i+n*n+s*s;return o>0&&(o=1/Math.sqrt(o),e[0]=r*o,e[1]=i*o,e[2]=n*o,e[3]=s*o),e}function Loe(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function N7(e,t,r,i){const n=t[0],s=t[1],o=t[2],a=t[3];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e[2]=o+i*(r[2]-o),e[3]=a+i*(r[3]-a),e}function Ooe(e,t){let r,i,n,s,o,a;t=t||1;do r=2*zu()-1,i=2*zu()-1,o=r*r+i*i;while(o>=1);do n=2*zu()-1,s=2*zu()-1,a=n*n+s*s;while(a>=1);const l=Math.sqrt((1-o)/a);return e[0]=t*r,e[1]=t*i,e[2]=t*n*l,e[3]=t*s*l,e}function Aoe(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3];return e[0]=r[0]*i+r[4]*n+r[8]*s+r[12]*o,e[1]=r[1]*i+r[5]*n+r[9]*s+r[13]*o,e[2]=r[2]*i+r[6]*n+r[10]*s+r[14]*o,e[3]=r[3]*i+r[7]*n+r[11]*s+r[15]*o,e}function Poe(e,t,r){const i=t[0],n=t[1],s=t[2],o=r[0],a=r[1],l=r[2],c=r[3],h=c*i+a*s-l*n,f=c*n+l*i-o*s,m=c*s+o*n-a*i,y=-o*i-a*n-l*s;return e[0]=h*c+y*-o+f*-l-m*-a,e[1]=f*c+y*-a+m*-o-h*-l,e[2]=m*c+y*-l+h*-a-f*-o,e[3]=t[3],e}function Roe(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function Foe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function Noe(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],o=t[0],a=t[1],l=t[2],c=t[3];return Math.abs(r-o)<=$e*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-a)<=$e*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(n-l)<=$e*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(s-c)<=$e*Math.max(1,Math.abs(s),Math.abs(c))}const Doe=k7,joe=L7,Voe=O7,zoe=A7,Uoe=P7,Goe=R7,Boe=F7;Object.freeze(Object.defineProperty({__proto__:null,copy:voe,set:woe,add:_oe,subtract:k7,multiply:L7,divide:O7,ceil:boe,floor:Soe,min:$oe,max:xoe,round:Eoe,scale:Toe,scaleAndAdd:Moe,distance:A7,squaredDistance:P7,length:R7,squaredLength:F7,negate:Ioe,inverse:Coe,normalize:koe,dot:Loe,lerp:N7,random:Ooe,transformMat4:Aoe,transformQuat:Poe,str:Roe,exactEquals:Foe,equals:Noe,sub:Doe,mul:joe,div:Voe,dist:zoe,sqrDist:Uoe,len:Goe,sqrLen:Boe},Symbol.toStringTag,{value:"Module"}));const hN=new Float32Array(1);function Z5e(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function an(e,t,r){return Math.min(Math.max(e,t),r)}function Y5e(e){return(e&e-1)==0}function Q5e(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function K5e(e,t,r){return e+(t-e)*r}function Uy(e){return e*Math.PI/180}function D7(e){return 180*e/Math.PI}function X5e(e){return Math.acos(an(e,-1,1))}function j7(e){return Math.asin(an(e,-1,1))}function qoe(e,t,r=1e-6){if(isNaN(e)||isNaN(t))return!1;if(e===t)return!0;const i=Math.abs(e-t),n=Math.abs(e),s=Math.abs(t);if(e===0||t===0||n<1e-12&&s<1e-12){if(i>.01*r)return!1}else if(i/(n+s)>r)return!1;return!0}function Sf(e,t,r=1e-6){return isNaN(e)||isNaN(t)?!1:(e>t?e-t:t-e)<=r}function Woe(e){return V7(Math.max(-HM,Math.min(e,HM)))}function V7(e){return hN[0]=e,hN[0]}function eDe(e,t){const r=S3(e),i=j7(e[2]/r),n=Math.atan2(e[1]/r,e[0]/r);return $7(t,r,i,n),t}function tDe(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],i=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(Sf(t,1)&&Sf(r,1)&&Sf(i,1))}const HM=V7(34028234663852886e22);function k1(e){return an(YO(e),0,255)}function L1(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}class er{constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}static blendColors(t,r,i,n=new er){return n.r=Math.round(t.r+(r.r-t.r)*i),n.g=Math.round(t.g+(r.g-t.g)*i),n.b=Math.round(t.b+(r.b-t.b)*i),n.a=t.a+(r.a-t.a)*i,n._sanitize()}static fromRgb(t,r){const i=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(i){const n=i[2].split(/\s*,\s*/),s=i[1];if(s==="rgb"&&n.length===3||s==="rgba"&&n.length===4){const o=n[0];if(o.charAt(o.length-1)==="%"){const a=n.map(l=>2.56*parseFloat(l));return n.length===4&&(a[3]=parseFloat(n[3])),er.fromArray(a,r)}return er.fromArray(n.map(a=>parseFloat(a)),r)}if(s==="hsl"&&n.length===3||s==="hsla"&&n.length===4)return er.fromArray(y7(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3])),r)}return null}static fromHex(t,r=new er){if(t.length!==4&&t.length!==7||t[0]!=="#")return null;const i=t.length===4?4:8,n=(1<<i)-1;let s=Number("0x"+t.substr(1));return isNaN(s)?null:(["b","g","r"].forEach(o=>{const a=s&n;s>>=i,r[o]=i===4?17*a:a}),r.a=1,r)}static fromArray(t,r=new er){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(t,r){const i=m7(t)?_3(t):null;return i&&er.fromArray(i,r)||er.fromRgb(t,r)||er.fromHex(t,r)}static fromJSON(t){return t&&new er([t[0],t[1],t[2],t[3]/255])}static toUnitRGB(t){return I(t)?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return I(t)?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){var r,i,n,s;return typeof t=="string"?er.fromString(t,this):Array.isArray(t)?er.fromArray(t,this):(this._set((r=t.r)!=null?r:0,(i=t.g)!=null?i:0,(n=t.b)!=null?n:0,(s=t.a)!=null?s:1),t instanceof er||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const t=this.r.toString(16),r=this.g.toString(16),i=this.b.toString(16);return`#${t.length<2?"0"+t:t}${r.length<2?"0"+r:r}${i.length<2?"0"+i:i}`}toCss(t=!1){const r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=er.AlphaMode.ALWAYS){const r=k1(this.r),i=k1(this.g),n=k1(this.b);return t===er.AlphaMode.ALWAYS||this.a!==1?[r,i,n,k1(255*this.a)]:[r,i,n]}clone(){return new er(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return I(t)&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(L1(this.r,0,255)),this.g=Math.round(L1(this.g,0,255)),this.b=Math.round(L1(this.b,0,255)),this.a=L1(this.a,0,1),this}_set(t,r,i,n){this.r=t,this.g=r,this.b=i,this.a=n}}er.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(er||(er={}));const ae=er;function rDe(e){}function Hoe(e){return()=>e}function me(e,t={}){var n;const r=e instanceof Ee?e:new Ee(e,t),i={type:(n=t==null?void 0:t.ignoreUnknown)==null||n?r.apiValues:String,json:{type:r.jsonValues,read:!(t!=null&&t.readOnly)&&{reader:r.read},write:{writer:r.write}}};return(t==null?void 0:t.readOnly)!==void 0&&(i.readOnly=!!t.readOnly),(t==null?void 0:t.default)!==void 0&&(i.json.default=t.default),(t==null?void 0:t.name)!==void 0&&(i.json.name=t.name),d(i)}var JM;let Qw=JM=class extends B{constructor(e){super(e),this.type="none"}clone(){return new JM({type:this.type})}};u([me({none:"none",stayAbove:"stay-above"})],Qw.prototype,"type",void 0),Qw=JM=u([E("esri.ground.NavigationConstraint")],Qw);function D2(e){const t=YO(100*(1-e));return Math.max(0,Math.min(t,100))}function N0(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var ZM;const pN=Z.getLogger("esri.Ground");let ka=ZM=class extends $v(Nn){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new de;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type!=="elevation"&&i.type!=="base-elevation"&&pN.error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},r=i=>{i.parent=null};this.layers.on("after-add",i=>t(i.item)),this.layers.on("after-remove",i=>r(i.item))}initialize(){this.when().catch(e=>{pN.error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",ch(e,this._get("layers")))}writeLayers(e,t,r,i){const n=[];e&&(i={...i,layerContainerType:"ground"},e.forEach(s=>{if("write"in s){const o={};Hoe(s)().write(o,i)&&n.push(o)}else i&&i.messages&&i.messages.push(new O("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),t.layers=n}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return U9(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:r}=await V(()=>import("./ElevationQuery.00e68b1d.js"),[],import.meta.url);yt(t);const i=new r,n=this.layers.filter(fN).toArray();return i.queryAll(n,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:r}=await V(()=>import("./ElevationQuery.00e68b1d.js"),[],import.meta.url);yt(t);const i=new r,n=this.layers.filter(fN).toArray();return i.createSamplerAll(n,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:P(this.surfaceColor),navigationConstraint:P(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new ZM({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve(null)}_loadLayersFromJSON(e,t,r){const i=t&&t.origin||"web-scene",n=t&&t.portal||null,s=t&&t.url||null;return V(()=>import("./layersCreator.b5feb1c7.js"),["layersCreator.b5feb1c7.js","lazyLayerLoader.1843a866.js","portalLayers.17344aab.js","layersLoader.11bbb3cf.js","jsonContext.36e23314.js","portalItemUtils.8f42d832.js"],import.meta.url).then(({populateOperationalLayers:o})=>{yt(r);const a=[];if(e.layers&&Array.isArray(e.layers)){const l={context:{origin:i,url:s,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,e.layers,l))}return Zt(a)}).then(()=>{})}};function Joe(e){return e&&"createElevationSampler"in e}function fN(e){return e.type==="elevation"||Joe(e)}u([d({json:{read:!1}})],ka.prototype,"layers",null),u([se("layers")],ka.prototype,"writeLayers",null),u([d({readOnly:!0})],ka.prototype,"resourceInfo",void 0),u([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:ct,read:{reader:N0,source:"transparency"},write:{writer:(e,t)=>{t.transparency=D2(e)},target:"transparency"}}})],ka.prototype,"opacity",void 0),u([d({type:ae,json:{type:[ct],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],ka.prototype,"surfaceColor",void 0),u([d({type:Qw,json:{write:!0}})],ka.prototype,"navigationConstraint",void 0),ka=ZM=u([E("esri.Ground")],ka);const eS=ka;let Kw=class extends le{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(t=>{e+=t.length}),e}add(e,t){if(!this._isHandle(e)&&!Array.isArray(e)&&!de.isCollection(e))return this;const r=this._getOrCreateGroup(t);return Array.isArray(e)||de.isCollection(e)?e.forEach(i=>this._isHandle(i)&&r.push(i)):r.push(e),this.notifyChange("size"),this}forEach(e,t){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&t&&r.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||de.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;const t=this._getGroup(e);for(let r=0;r<t.length;r++)t[r].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach(e=>{for(let t=0;t<e.length;t++)e[t].remove()}),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};u([d({readOnly:!0})],Kw.prototype,"size",null),Kw=u([E("esri.core.Handles")],Kw);const zt=Kw;function G(e,t,r={}){return x3(e,t,r,z7)}function di(e,t,r={}){return x3(e,t,r,U7)}function x3(e,t,r={},i){let n=null;const s=r.once?(o,a)=>{i(o)&&(en(n),t(o,a))}:(o,a)=>{i(o)&&t(o,a)};if(n=Ore(e,s,r.sync,r.equals),r.initial){const o=e();s(o,o)}return n}function tn(e,t,r,i={}){let n=null,s=null,o=null;function a(){var h;n&&s&&(s.remove(),(h=i.onListenerRemove)==null||h.call(i,n),n=null,s=null)}function l(h){i.once&&i.once&&en(o),r(h)}const c=G(e,(h,f)=>{var m;a(),T2(h)&&(n=h,s=M2(h,t,l),(m=i.onListenerAdd)==null||m.call(i,h))},{sync:i.sync,initial:!0});return o=dm(()=>{c.remove(),a()}),o}function Ev(e,t){return Zoe(e,U7,t)}function Zoe(e,t,r){if(go(r))return Promise.reject(Ot());const i=e();if(t!=null&&t(i))return Promise.resolve(i);let n=null;function s(){n=en(n)}return new Promise((o,a)=>{n=$2([vs(r,()=>{s(),a(Ot())}),x3(e,l=>{s(),o(l)},{sync:!1,once:!0},t!=null?t:z7)])})}function z7(e){return!0}function U7(e){return!!e}function Yoe(e,t,r={}){let i=!1;const n=G(e,(s,o)=>{i||t(s,o)},r);return{remove(){n.remove()},pause(){i=!0},resume(){i=!1}}}const Gf={sync:!0},je={initial:!0},Fc={sync:!0,initial:!0};let $f=class extends le{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new zt,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,r={}){return this._installWatch(e,t,r,G)}addWhen(e,t,r={}){return this._installWatch(e,t,r,di)}addOnCollectionChange(e,t,{initial:r=!1,final:i=!1}={}){const n=++this.handleId;return this.handles.add([tn(e,"after-changes",this._createSyncUpdatingCallback(),Gf),tn(e,"change",t,{onListenerAdd:r?s=>t({added:s.toArray(),removed:[]}):void 0,onListenerRemove:i?s=>t({added:[],removed:s.toArray()}):void 0})],n),{remove:()=>this.handles.remove(n)}}addPromise(e){if(R(e))return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(this.pendingPromises.size!==0||this.handles.has(O1)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const r=()=>this.handles.remove(t);return e.then(r,r),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}_installWatch(e,t,r={},i){const n=++this.handleId;r.sync||this._installSyncUpdatingWatch(e,n);const s=i(e,t,r);return this.handles.add(s,n),{remove:()=>this.handles.remove(n)}}_installSyncUpdatingWatch(e,t){const r=this._createSyncUpdatingCallback(),i=G(e,r,{sync:!0,equals:()=>!1});return this.handles.add(i,t),i}_createSyncUpdatingCallback(){return()=>{this.handles.remove(O1),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(pm(()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(O1))}),O1)}}};u([d({readOnly:!0})],$f.prototype,"updating",void 0),$f=u([E("esri.core.support.WatchUpdatingTracking")],$f);const O1=-42;var mN;(function(e){e[e.NONE=0]="NONE",e[e.SYNC=1]="SYNC",e[e.INIT=2]="INIT"})(mN||(mN={}));const ca=e=>{let t=class extends e{destroy(){var r,i;this.destroyed||((r=this._get("handles"))==null||r.destroy(),(i=this._get("updatingHandles"))==null||i.destroy())}get handles(){return this._get("handles")||new zt}get updatingHandles(){return this._get("updatingHandles")||new $f}};return u([d({readOnly:!0})],t.prototype,"handles",null),u([d({readOnly:!0})],t.prototype,"updatingHandles",null),t=u([E("esri.core.HandleOwner")],t),t};let D0=class extends ca(le){};D0=u([E("esri.core.HandleOwner")],D0);let tp=class extends ca(de){constructor(e){super(e),this.getCollections=null}initialize(){this.handles.add(f9(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=I(this.getCollections)?this.getCollections():null;if(R(e))return void this.removeAll();let t=0;for(const r of e)I(r)&&(t=this._processCollection(t,r));this.splice(t,this.length)}_createNewInstance(e){return new de(e)}_processCollection(e,t){if(!t)return e;const r=this.itemFilterFunction?this.itemFilterFunction:i=>!!i;for(const i of t)if(i){if(r(i)){const n=this.indexOf(i,e);n>=0?n!==e&&this.reorder(i,e):this.add(i,e),++e}if(this.getChildrenFunction){const n=this.getChildrenFunction(i);if(Array.isArray(n))for(const s of n)e=this._processCollection(e,s);else e=this._processCollection(e,n)}}return e}};u([d()],tp.prototype,"getCollections",void 0),u([d()],tp.prototype,"getChildrenFunction",void 0),u([d()],tp.prototype,"itemFilterFunction",void 0),tp=u([E("esri.core.CollectionFlattener")],tp);const Bf=tp;function Qoe(e){var t;return!!(e&&e.loaded&&"capabilities"in e&&((t=e==null?void 0:e.capabilities)==null?void 0:t.operations)&&"supportsEditing"in e.capabilities.operations&&e.capabilities.operations.supportsEditing===!0)&&!("editingEnabled"in e&&!e.editingEnabled)}const yN=Z.getLogger("esri.support.basemapUtils");function Koe(){return{}}function Xoe(e){for(const t in e){const r=e[t];(r==null?void 0:r.destroyed)===!1&&r.destroy(),delete e[t]}}function eae(e,t){let r;if(typeof e=="string"){if(!(e in qM)){const i=Object.entries(qM).filter(([n,s])=>Ve.apiKey&&!s.classic||!Ve.apiKey&&s.classic&&!s.deprecated).map(([n])=>`"${n}"`).join(", ");return yN.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${i}`),null}t&&(r=t[e]),r||(r=ta.fromId(e),t&&(t[e]=r))}else r=dt(ta,e);return r!=null&&r.destroyed&&(yN.warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}function tae(e,t){return e===t?!0:oae(gN(e),gN(t),{mustMatchReferences:!0})==="equal"}function rae(e,t){var n,s,o;if(R(t)||R(e))return{spatialReference:null,updating:!1};if(t.loadStatus==="not-loaded")return t.load(),{spatialReference:null,updating:!0};if(t.spatialReference)return{spatialReference:t.spatialReference,updating:!1};if(t.baseLayers.length===0)return{spatialReference:null,updating:!1};const r=t.baseLayers.getItemAt(0);switch(r.loadStatus){case"not-loaded":r.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const i=(("supportedSpatialReferences"in r?r.supportedSpatialReferences:null)||["tileInfo"in r?(n=r.tileInfo)==null?void 0:n.spatialReference:r.spatialReference]).filter(Boolean);return e.spatialReference?{spatialReference:(o=(s=i.find(a=>e.spatialReference.equals(a)))!=null?s:i[0])!=null?o:null,updating:!1}:{spatialReference:i[0],updating:!1}}function gN(e){return e?!e.loaded&&e.resourceInfo?nae(e.resourceInfo.data):{baseLayers:vN(e.baseLayers),referenceLayers:vN(e.referenceLayers)}:null}function vN(e){return(de.isCollection(e)?e.toArray():e).map(iae)}function iae(e){var t,r;return{type:e.type,url:G7("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl),minScale:"minScale"in e&&e.minScale!=null?e.minScale:0,maxScale:"maxScale"in e&&e.maxScale!=null?e.maxScale:0,opacity:e.opacity!=null?e.opacity:1,visible:e.visible==null||!!e.visible,sublayers:e.type!=="map-image"&&e.type!=="wms"||!I(e.sublayers)||(t=e.sublayers)==null?void 0:t.map(i=>({id:i.id,visible:i.visible})),activeLayerId:e.type==="wmts"?(r=e.activeLayer)==null?void 0:r.id:void 0}}function nae(e){return e?{baseLayers:wN(e.baseMapLayers.filter(t=>!t.isReference)),referenceLayers:wN(e.baseMapLayers.filter(t=>t.isReference))}:null}function wN(e){return e.map(t=>sae(t))}function sae(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;default:t="unknown"}return{type:t,url:G7(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:e.minScale!=null?e.minScale:0,maxScale:e.maxScale!=null?e.maxScale:0,opacity:e.opacity!=null?e.opacity:1,visible:e.visibility==null||!!e.visibility,sublayers:void 0,activeLayerId:void 0}}function oae(e,t,r){return e!=null!=(t!=null)?"not-equal":e?_N(e.baseLayers,t.baseLayers)?_N(e.referenceLayers,t.referenceLayers)?"equal":r.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function _N(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!aae(e[r],t[r]))return!1;return!0}function aae(e,t){if(e.type!==t.type||e.url!==t.url||e.minScale!==t.minScale||e.maxScale!==t.maxScale||e.visible!==t.visible||e.opacity!==t.opacity)return!1;if(I(e.activeLayerId)||I(t.activeLayerId))return e.activeLayerId===t.activeLayerId;if(I(e.sublayers)||I(t.sublayers)){if(R(e.sublayers)||R(t.sublayers)||e.sublayers.length!==t.sublayers.length)return!1;for(let r=0;r<e.sublayers.length;r++){const i=e.sublayers.at(r),n=t.sublayers.at(r);if(i.id!==n.id||i.visible!==n.visible)return!1}}return!0}function G7(e){return e?fs(e).replace(/^\s*https?:/i,"").toLowerCase():""}function lae(e){return new Bf({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const r=[];return"tables"in t&&r.push(t.tables),"layers"in t&&r.push(t.layers),r},itemFilterFunction:t=>{const r=t.parent;return r&&"tables"in r&&r.tables.includes(t)}})}const uae=Z.getLogger("esri.support.groundUtils"),bN={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function cae(e){let t=null;if(typeof e=="string")if(e in bN){const r=bN[e];t=new eS({resourceInfo:{data:{layers:[r]}}})}else uae.warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=dt(eS,e);return t}function qf(e,t,r=!1){let{hasM:i,hasZ:n}=e;Array.isArray(t)?t.length!==4||i||n?t.length===3&&r&&!i?(n=!0,i=!1):t.length===3&&i&&n&&(i=!1,n=!1):(i=!0,n=!0):(n=!n&&t.hasZ&&(!i||t.hasM),i=!i&&t.hasM&&(!n||t.hasZ)),e.hasZ=n,e.hasM=i}var YM;function SN(e){return(t,r)=>t==null?r:r==null?t:e(t,r)}function dae(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Zl=YM=class extends on{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return null;const r={};Array.isArray(e)?(r.points=e,r.spatialReference=t):dae(e)?r.spatialReference=e:(e.points&&(r.points=e.points),e.spatialReference&&(r.spatialReference=e.spatialReference),e.hasZ&&(r.hasZ=e.hasZ),e.hasM&&(r.hasM=e.hasM));const i=r.points&&r.points[0];return i&&(r.hasZ===void 0&&r.hasM===void 0?(r.hasZ=i.length>2,r.hasM=!1):r.hasZ===void 0?r.hasZ=i.length>3:r.hasM===void 0&&(r.hasM=i.length>3)),r}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new Je,r=this.hasZ,i=this.hasM,n=r?3:2,s=e[0],o=SN(Math.min),a=SN(Math.max);let l,c,h,f,[m,y]=s,[g,v]=s;for(let _=0,w=e.length;_<w;_++){const b=e[_],[S,M]=b;if(m=o(m,S),y=o(y,M),g=a(g,S),v=a(v,M),r&&b.length>2){const T=b[2];l=o(l,T),h=a(h,T)}if(i&&b.length>n){const T=b[n];c=o(c,T),f=a(f,T)}}return t.xmin=m,t.ymin=y,t.xmax=g,t.ymax=v,t.spatialReference=this.spatialReference,r?(t.zmin=l,t.zmax=h):(t.zmin=null,t.zmax=null),i?(t.mmin=c,t.mmax=f):(t.mmin=null,t.mmax=null),t}writePoints(e,t){t.points=P(this.points)}addPoint(e){return qf(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:P(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new YM(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],r={x:t[0],y:t[1],spatialReference:this.spatialReference};let i=2;return this.hasZ&&(r.z=t[2],i=3),this.hasM&&(r.m=t[i]),new ye(r)}removePoint(e){if(!this._validateInputs(e))return null;const t=new ye(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(qf(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};u([d({readOnly:!0})],Zl.prototype,"cache",null),u([d()],Zl.prototype,"extent",null),u([d({type:[[Number]],json:{write:{isRequired:!0}}})],Zl.prototype,"points",void 0),u([se("points")],Zl.prototype,"writePoints",null),Zl=YM=u([E("esri.geometry.Multipoint")],Zl),Zl.prototype.toJSON.isDefaultToJSON=!0;const wm=Zl;function hae(e,t){const r=t[0]-e[0],i=t[1]-e[1];if(e.length>2&&t.length>2){const n=e[2]-t[2];return Math.sqrt(r*r+i*i+n*n)}return Math.sqrt(r*r+i*i)}function pae(e,t,r){const i=e[0]+r*(t[0]-e[0]),n=e[1]+r*(t[1]-e[1]);return e.length>2&&t.length>2?[i,n,e[2]+r*(t[2]-e[2])]:[i,n]}function fae(e,t,r,i){const[n,s]=t,[o,a]=r[i],[l,c]=r[i+1],h=l-o,f=c-a,m=h*h+f*f,y=(n-o)*h+(s-a)*f,g=Math.min(1,Math.max(0,y/m));return e[0]=o+h*g,e[1]=a+f*g,e}function mae(e,t){return pae(e,t,.5)}function E3(e,t,r){const i=e.length;let n=0,s=0,o=0;for(let a=0;a<i;a++){const l=e[a],c=e[(a+1)%i];let h=2;n+=l[0]*c[1]-c[0]*l[1],l.length>2&&c.length>2&&r&&(s+=l[0]*c[2]-c[0]*l[2],h=3),l.length>h&&c.length>h&&t&&(o+=l[0]*c[h]-c[0]*l[h])}return n<=0&&s<=0&&o<=0}function iDe(e){if("rings"in e){for(const t of e.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]);if(e.rings.length>0&&!E3(e.rings[0],e.hasM,e.hasZ))for(let t=0;t<e.rings.length;++t)e.rings[t]=e.rings[t].reverse()}}function nDe(e){if("rings"in e)for(const t of e.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]])}function sDe(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function yae(e){return e?gae(e.rings,e.hasZ):null}function gae(e,t){if(!e||!e.length)return null;const r=[],i=[],n=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=e.length;s<o;s++){const a=vae(e[s],t,n);a&&i.push(a)}if(i.sort((s,o)=>{let a=s[2]-o[2];return a===0&&t&&(a=s[4]-o[4]),a}),i.length&&(r[0]=i[0][0],r[1]=i[0][1],t&&(r[2]=i[0][3]),(r[0]<n[0]||r[0]>n[1]||r[1]<n[2]||r[1]>n[3]||t&&(r[2]<n[4]||r[2]>n[5]))&&(r.length=0)),!r.length){const s=e[0]&&e[0].length?wae(e[0],t):null;if(!s)return null;r[0]=s[0],r[1]=s[1],t&&s.length>2&&(r[2]=s[2])}return r}function vae(e,t,r){let i=0,n=0,s=0,o=0,a=0;const l=e.length?e[0][0]:0,c=e.length?e[0][1]:0,h=e.length&&t?e[0][2]:0;for(let m=0;m<e.length;m++){const y=e[m],g=e[(m+1)%e.length],[v,_,w]=y,b=v-l,S=_-c,M=t?w-h:void 0,[T,k,N]=g,F=T-l,q=k-c,z=t?N-h:void 0,Q=b*q-F*S;if(o+=Q,i+=(b+F)*Q,n+=(S+q)*Q,t&&y.length>2&&g.length>2){const K=b*z-F*M;s+=(M+z)*K,a+=K}v<r[0]&&(r[0]=v),v>r[1]&&(r[1]=v),_<r[2]&&(r[2]=_),_>r[3]&&(r[3]=_),t&&(w<r[4]&&(r[4]=w),w>r[5]&&(r[5]=w))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const f=[i/(6*o)+l,n/(6*o)+c,o];return t&&(r[4]===r[5]||a===0?(f[3]=(r[4]+r[5])/2,f[4]=0):(f[3]=s/(6*a)+h,f[4]=a)),f}function wae(e,t){const r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;for(let l=0,c=e.length;l<c-1;l++){const h=e[l],f=e[l+1];if(h&&f){r[0]=h[0],r[1]=h[1],i[0]=f[0],i[1]=f[1],t&&h.length>2&&f.length>2&&(r[2]=h[2],i[2]=f[2]);const m=hae(r,i);if(m){n+=m;const y=mae(h,f);s+=m*y[0],o+=m*y[1],t&&y.length>2&&(a+=m*y[2])}}}return n>0?t?[s/n,o/n,a/n]:[s/n,o/n]:e.length?e[0]:null}function B7(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function q7(e){return e.points!==void 0}function W7(e){return e.x!==void 0&&e.y!==void 0}function H7(e){return e.paths!==void 0}function J7(e){return e.rings!==void 0}function Z7(e){return(t,r)=>t==null?r:r==null?t:e(t,r)}const Uu=Z7(Math.min),Gu=Z7(Math.max);function oDe(e,t){return H7(t)?Wf(e,t.paths,!1,!1):J7(t)?Wf(e,t.rings,!1,!1):q7(t)?T3(e,t.points,!1,!1,!1,!1):B7(t)?Y7(e,t):(W7(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function aDe(e,t){return H7(t)?Wf(e,t.paths,!0,!1):J7(t)?Wf(e,t.rings,!0,!1):q7(t)?T3(e,t.points,!0,!1,!0,!1):B7(t)?Y7(e,t,!0,!1,!0,!1):(W7(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function Wf(e,t,r,i){const n=r?3:2;if(!t.length||!t[0].length)return null;let s,o,a,l,[c,h]=t[0][0],[f,m]=t[0][0];for(let y=0;y<t.length;y++){const g=t[y];for(let v=0;v<g.length;v++){const _=g[v],[w,b]=_;if(c=Uu(c,w),h=Uu(h,b),f=Gu(f,w),m=Gu(m,b),r&&_.length>2){const S=_[2];s=Uu(s,S),o=Gu(o,S)}if(i&&_.length>n){const S=_[n];a=Uu(s,S),l=Gu(o,S)}}}return r?i?(e[0]=c,e[1]=h,e[2]=s,e[3]=a,e[4]=f,e[5]=m,e[6]=o,e[7]=l,e.length=8,e):(e[0]=c,e[1]=h,e[2]=s,e[3]=f,e[4]=m,e[5]=o,e.length=6,e):i?(e[0]=c,e[1]=h,e[2]=a,e[3]=f,e[4]=m,e[5]=l,e.length=6,e):(e[0]=c,e[1]=h,e[2]=f,e[3]=m,e.length=4,e)}function Y7(e,t,r,i,n,s){const o=t.xmin,a=t.xmax,l=t.ymin,c=t.ymax;let h=t.zmin,f=t.zmax,m=t.mmin,y=t.mmax;return n?(h=h||0,f=f||0,s?(m=m||0,y=y||0,e[0]=o,e[1]=l,e[2]=h,e[3]=m,e[4]=a,e[5]=c,e[6]=f,e[7]=y,e):(e[0]=o,e[1]=l,e[2]=h,e[3]=a,e[4]=c,e[5]=f,e)):s?(m=m||0,y=y||0,e[0]=o,e[1]=l,e[2]=m,e[3]=a,e[4]=c,e[5]=y,e):(e[0]=o,e[1]=l,e[2]=a,e[3]=c,e)}function T3(e,t,r,i,n,s){const o=r?3:2,a=i&&s,l=r&&n;if(!t.length||!t[0].length)return null;let c,h,f,m,[y,g]=t[0],[v,_]=t[0];for(let w=0;w<t.length;w++){const b=t[w],[S,M]=b;if(y=Uu(y,S),g=Uu(g,M),v=Gu(v,S),_=Gu(_,M),l&&b.length>2){const T=b[2];c=Uu(c,T),h=Gu(h,T)}if(a&&b.length>o){const T=b[o];f=Uu(c,T),m=Gu(h,T)}}return n?(c=c||0,h=h||0,s?(f=f||0,m=m||0,e[0]=y,e[1]=g,e[2]=c,e[3]=f,e[4]=v,e[5]=_,e[6]=h,e[7]=m,e):(e[0]=y,e[1]=g,e[2]=c,e[3]=v,e[4]=_,e[5]=h,e)):s?(f=f||0,m=m||0,e[0]=y,e[1]=g,e[2]=f,e[3]=v,e[4]=_,e[5]=m,e):(e[0]=y,e[1]=g,e[2]=v,e[3]=_,e)}function _ae(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function bae(e){return e.points!==void 0}function Sae(e){return e.x!==void 0&&e.y!==void 0}function $ae(e){return e.paths!==void 0}function xae(e){return e.rings!==void 0}const M3=[];function Q7(e,t,r,i){return{xmin:e,ymin:t,xmax:r,ymax:i}}function K7(e,t,r,i,n,s){return{xmin:e,ymin:t,zmin:r,xmax:i,ymax:n,zmax:s}}function X7(e,t,r,i,n,s){return{xmin:e,ymin:t,mmin:r,xmax:i,ymax:n,mmax:s}}function eU(e,t,r,i,n,s,o,a){return{xmin:e,ymin:t,zmin:r,mmin:i,xmax:n,ymax:s,zmax:o,mmax:a}}function I3(e,t=!1,r=!1){return t?r?eU(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):K7(e[0],e[1],e[2],e[3],e[4],e[5]):r?X7(e[0],e[1],e[2],e[3],e[4],e[5]):Q7(e[0],e[1],e[2],e[3])}function lDe(e){return e?_ae(e)?e:Sae(e)?Tae(e):xae(e)?tU(e):$ae(e)?rU(e):bae(e)?Eae(e):null:null}function Eae(e){const{hasZ:t,hasM:r,points:i}=e;return I3(T3(M3,i,t,r),t,r)}function Tae(e){const{x:t,y:r,z:i,m:n}=e,s=n!=null;return i!=null?s?eU(t,r,i,n,t,r,i,n):K7(t,r,i,t,r,i):s?X7(t,r,n,t,r,n):Q7(t,r,t,r)}function tU(e){const{hasZ:t,hasM:r,rings:i}=e,n=Wf(M3,i,t,r);return n?I3(n,t,r):null}function rU(e){const{hasZ:t,hasM:r,paths:i}=e,n=Wf(M3,i,t,r);return n?I3(n,t,r):null}var Xw;function $N(e){return!Array.isArray(e[0])}let Mo=Xw=class extends on{constructor(...e){super(...e),this.rings=[],this.type="polygon"}static fromExtent(e){const t=e.clone().normalize(),r=e.spatialReference;let i=!1,n=!1;for(const o of t)o.hasZ&&(i=!0),o.hasM&&(n=!0);const s={rings:t.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(i&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(n&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a}),spatialReference:r};return i&&(s.hasZ=!0),n&&(s.hasM=!0),new Xw(s)}normalizeCtorArgs(e,t){let r,i,n=null,s=null;return e&&!Array.isArray(e)?(n=e.rings?e.rings:null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),r=e.hasZ,i=e.hasM):n=e,n=n||[],t=t||Te.WGS84,n.length&&n[0]&&n[0][0]!=null&&typeof n[0][0]=="number"&&(n=[n]),s=n[0]&&n[0][0],s&&(r===void 0&&i===void 0?(r=s.length>2,i=s.length>3):r===void 0?r=i?s.length>3:s.length>2:i===void 0&&(i=r?s.length>3:s.length>2)),{rings:n,spatialReference:t,hasZ:r,hasM:i}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=yae(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new ye;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=tU(this);if(!t)return null;const r=new Je(t);return r.spatialReference=e,r}get isSelfIntersecting(){return Kne(this.rings)}writeRings(e,t){t.rings=P(this.rings)}addRing(e){if(!e)return;const t=this.rings,r=t.length;if($N(e)){const i=[];for(let n=0,s=e.length;n<s;n++)i[n]=e[n].toArray();t[r]=i}else t[r]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new Xw;return e.spatialReference=this.spatialReference,e.rings=P(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(R(e))return!1;const t=this.spatialReference,r=e.spatialReference;if(I(t)!==I(r)||I(t)&&I(r)&&!t.equals(r)||this.rings.length!==e.rings.length)return!1;const i=([n,s,o,a],[l,c,h,f])=>n===l&&s===c&&(o==null&&h==null||o===h)&&(a==null&&f==null||a===f);for(let n=0;n<this.rings.length;n++){const s=this.rings[n],o=e.rings[n];if(!UO(s,o,i))return!1}return!0}contains(e){if(!e)return!1;const t=F2(e,this.spatialReference);return l7(this,I(t)?t:e)}isClockwise(e){let t;return t=$N(e)?e.map(r=>this.hasZ?this.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y]):e,E3(t,this.hasM,this.hasZ)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.rings[e][t],i=this.hasZ,n=this.hasM;return i&&!n?new ye(r[0],r[1],r[2],void 0,this.spatialReference):n&&!i?new ye(r[0],r[1],void 0,r[2],this.spatialReference):i&&n?new ye(r[0],r[1],r[2],r[3],this.spatialReference):new ye(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(qf(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e].splice(t,0,r),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new ye(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),r}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],r=this.spatialReference,i=t.map(n=>new ye(n,r));return this.notifyChange("rings"),i}setPoint(e,t,r){return this._validateInputs(e,t)?(qf(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e][t]=r,this.notifyChange("rings"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const i=this.rings[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};u([d({readOnly:!0})],Mo.prototype,"cache",null),u([d({readOnly:!0})],Mo.prototype,"centroid",null),u([d({readOnly:!0})],Mo.prototype,"extent",null),u([d({readOnly:!0})],Mo.prototype,"isSelfIntersecting",null),u([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],Mo.prototype,"rings",void 0),u([se("rings")],Mo.prototype,"writeRings",null),Mo=Xw=u([E("esri.geometry.Polygon")],Mo),Mo.prototype.toJSON.isDefaultToJSON=!0;const ws=Mo;var QM;function Mae(e){return!Array.isArray(e[0])}let Yl=QM=class extends on{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){let r,i,n=null,s=null;return e&&!Array.isArray(e)?(n=e.paths?e.paths:null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),r=e.hasZ,i=e.hasM):n=e,n=n||[],t=t||Te.WGS84,n.length&&n[0]&&n[0][0]!=null&&typeof n[0][0]=="number"&&(n=[n]),s=n[0]&&n[0][0],s&&(r===void 0&&i===void 0?(r=s.length>2,i=!1):r===void 0?r=!i&&s.length>3:i===void 0&&(i=!r&&s.length>3)),{paths:n,spatialReference:t,hasZ:r,hasM:i}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=rU(this);if(!t)return null;const r=new Je(t);return r.spatialReference=e,r}writePaths(e,t){t.paths=P(this.paths)}addPath(e){if(!e)return;const t=this.paths,r=t.length;if(Mae(e)){const i=[];for(let n=0,s=e.length;n<s;n++)i[n]=e[n].toArray();t[r]=i}else t[r]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new QM;return e.spatialReference=this.spatialReference,e.paths=P(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.paths[e][t],i=this.hasZ,n=this.hasM;return i&&!n?new ye(r[0],r[1],r[2],void 0,this.spatialReference):n&&!i?new ye(r[0],r[1],void 0,r[2],this.spatialReference):i&&n?new ye(r[0],r[1],r[2],r[3],this.spatialReference):new ye(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(qf(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e].splice(t,0,r),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],r=this.spatialReference,i=t.map(n=>new ye(n,r));return this.notifyChange("paths"),i}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new ye(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(e,t,r){return this._validateInputs(e,t)?(qf(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e][t]=r,this.notifyChange("paths"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const i=this.paths[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};u([d({readOnly:!0})],Yl.prototype,"cache",null),u([d({readOnly:!0})],Yl.prototype,"extent",null),u([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],Yl.prototype,"paths",void 0),u([se("paths")],Yl.prototype,"writePaths",null),Yl=QM=u([E("esri.geometry.Polyline")],Yl),Yl.prototype.toJSON.isDefaultToJSON=!0;const Ei=Yl,C3=Yr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),xN=Yr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function iU(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function k3(e){return e.points!==void 0}function L3(e){return e.x!==void 0&&e.y!==void 0}function O3(e){return e.paths!==void 0}function Qd(e){return e.rings!==void 0}function Li(e){return R(e)?null:e instanceof on?e:L3(e)?ye.fromJSON(e):O3(e)?Ei.fromJSON(e):Qd(e)?ws.fromJSON(e):k3(e)?wm.fromJSON(e):iU(e)?Je.fromJSON(e):null}function _m(e){return e?L3(e)?"esriGeometryPoint":O3(e)?"esriGeometryPolyline":Qd(e)?"esriGeometryPolygon":iU(e)?"esriGeometryEnvelope":k3(e)?"esriGeometryMultipoint":null:null}const Iae={esriGeometryPoint:ye,esriGeometryPolyline:Ei,esriGeometryPolygon:ws,esriGeometryEnvelope:Je,esriGeometryMultipoint:wm};function nU(e){return e&&Iae[e]||null}const Eh={base:on,key:"type",typeMap:{extent:Je,multipoint:wm,point:ye,polyline:Ei,polygon:ws}};ia(Eh);let Cae=0;const A3=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+Cae++})}};return t=u([E("esri.core.Identifiable")],t),t};let EN=class extends A3(class{}){};EN=u([E("esri.core.Identifiable")],EN);const kae=Z.getLogger("esri.layers.support.fromPortalItem");async function Lae(e){const t="portalItem"in e?e:{portalItem:e},r=await V(()=>import("./portalLayers.17344aab.js"),["portalLayers.17344aab.js","lazyLayerLoader.1843a866.js","layersLoader.11bbb3cf.js","jsonContext.36e23314.js","portalItemUtils.8f42d832.js"],import.meta.url);try{return await r.fromItem(t)}catch(i){const n=t&&t.portalItem,s=n&&n.id||"unset",o=n&&n.portal&&n.portal.url||Ve.portalUrl;throw kae.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+s+"')",i),i}}let Oae=0,gr=class extends ua.EventedMixin(A3(Nn)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Je(-180,-90,180,90,Te.WGS84),this.id=Date.now().toString(16)+"-layer-"+Oae++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Te.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t=typeof e=="string"?{url:e}:e;return(await V(()=>import("./arcgisLayers.964b6847.js"),["arcgisLayers.964b6847.js","lazyLayerLoader.1843a866.js"],import.meta.url)).fromUrl(t)}static fromPortalItem(e){return Lae(e)}initialize(){this.when().catch(e=>{var t,r;ui(e)||Z.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${(t=this.title)!=null?t:"no title"}', id: '${(r=this.id)!=null?r:"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){const e=this.url;return e?Qt(e):null}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await nt(e,{query:{f:"json"},responseType:"json"})).data;throw new O("layer:no-attribution-data","Layer does not have attribution data")}};u([d({type:String})],gr.prototype,"attributionDataUrl",void 0),u([d({type:Je})],gr.prototype,"fullExtent",void 0),u([d({readOnly:!0})],gr.prototype,"hasAttributionData",null),u([d({type:String,clonable:!1})],gr.prototype,"id",void 0),u([d({type:Boolean,nonNullable:!0})],gr.prototype,"legendEnabled",void 0),u([d({type:["show","hide","hide-children"]})],gr.prototype,"listMode",void 0),u([d({type:Number,range:{min:0,max:1},nonNullable:!0})],gr.prototype,"opacity",void 0),u([d({clonable:!1})],gr.prototype,"parent",void 0),u([d({readOnly:!0})],gr.prototype,"parsedUrl",null),u([d({type:Boolean})],gr.prototype,"popupEnabled",void 0),u([d({type:Boolean})],gr.prototype,"attributionVisible",void 0),u([d({type:Te})],gr.prototype,"spatialReference",void 0),u([d({type:String})],gr.prototype,"title",void 0),u([d({readOnly:!0,json:{read:!1}})],gr.prototype,"type",void 0),u([d()],gr.prototype,"url",void 0),u([d({type:Boolean,nonNullable:!0})],gr.prototype,"visible",void 0),gr=u([E("esri.layers.Layer")],gr);const j0=gr;function KM(e,t,r){let i,n;if(e)for(let s=0,o=e.length;s<o;s++){if(i=e.getItemAt(s),i[t]===r)return i;if((i==null?void 0:i.type)==="group"&&(n=KM(i.layers,t,r),n))return n}}const TN=Z.getLogger("esri.support.LayersMixin"),Aae=e=>{let t=class extends e{constructor(...r){super(...r),this.layers=new de;const i=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},n=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||TN.error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},s=o=>{o.parent=null,this.layerRemoved(o)};this.layers.on("before-add",o=>i(o.item)),this.layers.on("after-add",o=>n(o.item)),this.layers.on("after-remove",o=>s(o.item))}destroy(){const r=this.layers.removeAll();for(const i of r)this.layerRemoved(i),i.destroy();this.layers.destroy()}set layers(r){this._set("layers",ch(r,this._get("layers")))}add(r,i){const n=this.layers;if(i=n.getNextIndex(i),r instanceof j0){const s=r;s.parent===this?this.reorder(s,i):n.add(s,i)}else xl(r)?r.then(s=>{this.destroyed||this.add(s,i)}):TN.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,i){const n=this.layers;i=n.getNextIndex(i),r.slice().forEach(s=>{s.parent!==this?(n.add(s,i),i+=1):this.reorder(s,i)})}findLayerById(r){return KM(this.layers,"id",r)}findLayerByUid(r){return KM(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,i){return this.layers.reorder(r,i)}layerAdded(r){}layerRemoved(r){}};return u([d()],t.prototype,"layers",null),t=u([E("esri.support.LayersMixin")],t),t},sU="esri.support.TablesMixin",Pae=Z.getLogger(sU);function XM(e,t,r){if(e)for(let i=0,n=e.length;i<n;i++){const s=e.getItemAt(i);if(s[t]===r)return s;if((s==null?void 0:s.type)==="group"){const o=XM(s.tables,t,r);if(o)return o}}}const Rae=e=>{let t=class extends e{constructor(...r){super(...r),this.tables=new de,this.tables.on("after-add",i=>{const n=i.item;n.parent&&n.parent!==this&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=this,n.type!=="feature"&&Pae.error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",i=>{i.item.parent=null})}destroy(){const r=this.tables.removeAll();for(const i of r)i.destroy();this.tables.destroy()}set tables(r){this._set("tables",ch(r,this._get("tables")))}findTableById(r){return XM(this.tables,"id",r)}findTableByUid(r){return XM(this.tables,"uid",r)}};return u([d()],t.prototype,"tables",null),t=u([E(sU)],t),t};let Io=class extends Rae(Aae(ua.EventedMixin(le))){constructor(e){super(e),this.allLayers=new Bf({getCollections:()=>{var t,r,i;return[(t=this.basemap)==null?void 0:t.baseLayers,(r=this.ground)==null?void 0:r.layers,this.layers,(i=this.basemap)==null?void 0:i.referenceLayers]},getChildrenFunction:t=>"layers"in t?t.layers:null}),this.allTables=lae(this),this.basemap=null,this.editableLayers=new Bf({getCollections:()=>[this.allLayers],itemFilterFunction:Qoe}),this.ground=new eS,this._basemapCache=Koe()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(t=this.basemap)==null||t.destroy(),Xoe(this._basemapCache),this._basemapCache=null}castBasemap(e){return eae(e,this._basemapCache)}castGround(e){const t=cae(e);return R(t)?this._get("ground"):t}findLayerById(e){return this.allLayers.find(t=>t.id===e)}findTableById(e){return this.allTables.find(t=>t.id===e)}};u([d({readOnly:!0,dependsOn:[]})],Io.prototype,"allLayers",void 0),u([d({readOnly:!0})],Io.prototype,"allTables",void 0),u([d({type:ta})],Io.prototype,"basemap",void 0),u([ze("basemap")],Io.prototype,"castBasemap",null),u([d({readOnly:!0})],Io.prototype,"editableLayers",void 0),u([d({type:eS,nonNullable:!0})],Io.prototype,"ground",void 0),u([ze("ground")],Io.prototype,"castGround",null),Io=u([E("esri.Map")],Io);const oU=Io;var Hf;function Fae(e,t){switch(e.type){case"range":{const r="range"in e?e.range[0]:e.minValue,i="range"in e?e.range[1]:e.maxValue;if(+t<r||+t>i)return Hf.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(e.codedValues==null||e.codedValues.every(r=>r==null||r.code!==t))return Hf.INVALID_CODED_VALUE}return null}(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(Hf||(Hf={}));let Ax;function vl(){return Ax||(Ax=(async()=>{const e=await V(()=>import("./arcadeUtils.dd2b837b.js").then(t=>t.t),[],import.meta.url);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),Ax}const uDe=(e,t,r)=>Tv.create(e,t,r,null,["$feature"]),cDe=(e,t,r)=>Tv.create(e,t,r,null,["$feature","$view"]),Nae=(e,t,r,i)=>Tv.create(e,t,r,i,["$feature","$view"]);class Tv{constructor(t,r,i,n,s,o,a,l){this.script=t,this.evaluate=s;const c=Array.isArray(a)?a:a.fields;this.fields=c,this._syntaxTree=n,this._arcade=r,this._arcadeDictionary=i,this._arcadeFeature=o,this._spatialReference=l,this._referencesGeometry=r.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,r,i,n,s,o){const{arcade:a,Feature:l,Dictionary:c}=await vl(),h=Te.fromJSON(r),f=a.parseScript(t,o),m=s.reduce((T,k)=>({...T,[k]:null}),{});let y=null;I(n)&&(y=new c(n),y.immutable=!0,m.$config=null);const g=a.scriptUsesGeometryEngine(f)&&a.enableGeometrySupport(),v=a.scriptUsesFeatureSet(f)&&a.enableFeatureSetSupport(),_=a.scriptIsAsync(f)&&a.enableAsyncSupport(),w={vars:m,spatialReference:h,useAsync:!!_},b=new c;b.immutable=!1,b.setField("scale",0);const S=a.compileScript(f,w),M=T=>("$view"in T&&T.$view&&(b.setField("scale",T.$view.scale),T.$view=b),y&&(T.$config=y),S({vars:T,spatialReference:h}));return await Promise.all([g,v,_]),new Tv(t,a,c,f,M,new l,i,h)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(t){return this._arcade.referencesMember(this._syntaxTree,t)}referencesFunction(t){return this._arcade.referencesFunction(this._syntaxTree,t)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}const Dae=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],jae=["field","normalizationField"];function tS(e,t){if(e!=null&&t!=null){for(const r of Array.isArray(e)?e:[e])if(MN(Dae,r,t),"visualVariables"in r&&r.visualVariables)for(const i of r.visualVariables)MN(jae,i,t)}}function MN(e,t,r){if(e)for(const i of e){const n=hm(i,t),s=n&&typeof n!="function"&&r.get(n);s&&sn(i,s.name,t)}}function P3(e,t){if(e!=null&&(t==null?void 0:t.fields.length))if("startField"in e){const r=t.get(e.startField),i=t.get(e.endField);e.startField=r&&r.name||null,e.endField=i&&i.name||null}else{const r=t.get(e.startTimeField),i=t.get(e.endTimeField);e.startTimeField=r&&r.name||null,e.endTimeField=i&&i.name||null}}const Px=new Set;function aU(e,t){return e&&t?(Px.clear(),V0(Px,e,t),Array.from(Px).sort()):[]}function V0(e,t,r){var i;if(r)if((i=t==null?void 0:t.fields)!=null&&i.length)if(r.includes("*"))for(const{name:n}of t.fields)e.add(n);else for(const n of r)ms(e,t,n);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const n of r)e.add(n)}}function ms(e,t,r){if(typeof r=="string")if(t){const i=t.get(r);i&&e.add(i.name)}else e.add(r)}function dDe(e,t){return R(t)||R(e)?[]:t.includes("*")?e.fields.map(r=>r.name):t}async function Oi(e,t,r){var s;if(!r)return;const{arcadeUtils:i}=await vl(),n=i.extractFieldNames(r,(s=t==null?void 0:t.fields)==null?void 0:s.map(o=>o.name));for(const o of n)ms(e,t,o)}async function lU(e,t,r){if(r&&r!=="1=1"){const i=(await V(()=>import("./WhereClause.7fe2a07f.js"),[],import.meta.url)).WhereClause.create(r,t);if(!i.isStandardized)throw new O("fieldUtils:collectFilterFields","Where clause is not standardized",{where:r});V0(e,t,i.fieldNames)}}function Vae({displayField:e,fields:t}){return e||(t&&t.length?Rx(t,"name-or-title")||Rx(t,"unique-identifier")||Rx(t,"type-or-category")||zae(t):null)}function zae(e){for(const t of e){if(!t||!t.name)continue;const r=t.name.toLowerCase();if(r.includes("name")||r.includes("title"))return t.name}return null}function Rx(e,t){for(const r of e)if(r&&r.valueType&&r.valueType===t)return r.name;return null}async function hDe(e,t){if(!t)return;const r=hm("elevationInfo.featureExpressionInfo",t);return r?r.collectRequiredFields(e,t.fieldsIndex):void 0}async function Uae(e,t,r){r.outStatistic.onStatisticValueExpression?Oi(e,t,r.outStatistic.onStatisticValueExpression):e.add(r.outStatistic.onStatisticField)}async function pDe(e,t,r){var n,s;if(!t||!r||!("fields"in r))return;const i=[];if((n=r.popupTemplate)!=null&&n.expressionInfos&&i.push(...r.popupTemplate.expressionInfos.map(o=>Oi(e,t.fieldsIndex,o.expression))),Array.isArray((s=r.popupTemplate)==null?void 0:s.content)){const o=r.popupTemplate.content;for(const a of o)a.type==="expression"&&a.expressionInfo&&i.push(Oi(e,t.fieldsIndex,a.expressionInfo.expression))}r.fields&&i.push(...r.fields.map(o=>Uae(e,t.fieldsIndex,o))),await Promise.all(i)}async function fDe(e,t,r){t&&(t.timeInfo&&I(r)&&r.timeExtent&&V0(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&V0(e,t.fieldsIndex,[t.floorInfo.floorField]),I(r)&&I(r.where)&&await lU(e,t.fieldsIndex,r.where))}async function mDe(e,t,r){t&&r&&await Promise.all(r.map(i=>Gae(e,t,i)))}async function Gae(e,t,r){t&&r&&(r.valueExpression?await Oi(e,t.fieldsIndex,r.valueExpression):r.field&&ms(e,t.fieldsIndex,r.field))}function yDe(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?aU(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}async function gDe(e,t){const{labelingInfo:r,fieldsIndex:i}=t;r&&r.length&&await Promise.all(r.map(n=>Bae(e,i,n)))}async function Bae(e,t,r){if(!r)return;const i=r.getLabelExpression(),n=r.where;if(i.type==="arcade")await Oi(e,t,i.expression);else{const s=i.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{ms(e,t,o.slice(1,-1))})}await lU(e,t,n)}function qae(e){const t=e.defaultValue;return t!==void 0&&dU(e,t)?t:e.nullable?null:void 0}function uU(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function Wae(e){return e===null||uU(e)}const R3="isInteger"in Number?Number.isInteger:e=>typeof e=="number"&&isFinite(e)&&Math.floor(e)===e;function Hae(e){return e===null||R3(e)}function cU(e){return e!=null&&typeof e=="string"}function Jae(e){return e===null||cU(e)}function Zae(){return!0}function dU(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":r=e.nullable?Hae:R3;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?Wae:uU;break;case"string":case"esriFieldTypeString":r=e.nullable?Jae:cU;break;default:r=Zae}return arguments.length===1?r:r(t)}const Yae=["integer","small-integer","single","double"],Qae=new Set([...Yae,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function F3(e){return e!=null&&Qae.has(e.type)}function vDe(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function Kae(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}var rS,iS;function wDe(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function _De(e,t){return e.nullable&&t===null?null:F3(e)&&!Xae(e.type,Number(t))?rS.OUT_OF_RANGE:dU(e,t)?e.domain?Fae(e.domain,t):null:iS.INVALID_TYPE}function Xae(e,t){const r=typeof e=="string"?hU(e):e;return!!r&&(r.isInteger?R3(t)&&t>=r.min&&t<=r.max:t>=r.min&&t<=r.max)}function hU(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return ele;case"esriFieldTypeInteger":case"integer":return tle;case"esriFieldTypeSingle":case"single":return rle;case"esriFieldTypeDouble":case"double":return ile}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(rS||(rS={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(iS||(iS={}));const ele={min:-32768,max:32767,isInteger:!0},tle={min:-2147483648,max:2147483647,isInteger:!0},rle={min:-34e37,max:12e37,isInteger:!1},ile={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function bDe(e,t,r){switch(e){case Hf.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Hf.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case iS.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case rS.OUT_OF_RANGE:{const{min:i,max:n}=hU(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${i} to ${n}`}}}function nle(e,t){return!sle(e,t,null)}function sle(e,t,r){if(!t||!t.attributes||!e){if(I(r))for(const s of e)r.add(s);return!0}const i=t.attributes;let n=!1;for(const s of e)if(!(s in i)){if(n=!0,!I(r))break;r.add(s)}return n}function pU(e){return["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}let e_=class extends B{constructor(e){super(e),this.type=null}};u([d({type:["attachments","custom","fields","media","text","expression"],readOnly:!0,json:{read:!1,write:!0}})],e_.prototype,"type",void 0),e_=u([E("esri.popup.content.Content")],e_);const Th=e_;var eI;let Nc=eI=class extends Th{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new eI({description:this.description,displayType:this.displayType,title:this.title})}};u([d({type:String,json:{write:!0}})],Nc.prototype,"description",void 0),u([d({type:["auto","preview","list"],json:{write:!0}})],Nc.prototype,"displayType",void 0),u([d({type:String,json:{write:!0}})],Nc.prototype,"title",void 0),u([d({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],Nc.prototype,"type",void 0),Nc=eI=u([E("esri.popup.content.AttachmentsContent")],Nc);const z0=Nc;var tI;let Dc=tI=class extends Th{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new tI({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?P(this.outFields):null})}};u([d()],Dc.prototype,"creator",void 0),u([d()],Dc.prototype,"destroyer",void 0),u([d()],Dc.prototype,"outFields",void 0),u([d({type:["custom"],readOnly:!0})],Dc.prototype,"type",void 0),Dc=tI=u([E("esri.popup.content.CustomContent")],Dc);const ole=Dc;var rI;let rp=rI=class extends B{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new rI({title:this.title,expression:this.expression})}};u([d({type:String,json:{write:!0}})],rp.prototype,"title",void 0),u([d({type:String,json:{write:!0}})],rp.prototype,"expression",void 0),u([d({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],rp.prototype,"returnType",void 0),rp=rI=u([E("esri.popup.ElementExpressionInfo")],rp);const fU=rp;var iI;let Gy=iI=class extends Th{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new iI({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};u([d({type:fU,json:{write:!0}})],Gy.prototype,"expressionInfo",void 0),u([d({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Gy.prototype,"type",void 0),Gy=iI=u([E("esri.popup.content.ExpressionContent")],Gy);const N3=Gy,U0=Yr()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});U0.toJSON.bind(U0);U0.fromJSON.bind(U0);const So={year:"numeric",month:"numeric",day:"numeric"},sy={year:"numeric",month:"long",day:"numeric"},oy={year:"numeric",month:"short",day:"numeric"},ay={year:"numeric",month:"long",weekday:"long",day:"numeric"},Zn={hour:"numeric",minute:"numeric"},Es={...Zn,second:"numeric"},D3={"short-date":So,"short-date-short-time":{...So,...Zn},"short-date-short-time-24":{...So,...Zn,hour12:!1},"short-date-long-time":{...So,...Es},"short-date-long-time-24":{...So,...Es,hour12:!1},"short-date-le":So,"short-date-le-short-time":{...So,...Zn},"short-date-le-short-time-24":{...So,...Zn,hour12:!1},"short-date-le-long-time":{...So,...Es},"short-date-le-long-time-24":{...So,...Es,hour12:!1},"long-month-day-year":sy,"long-month-day-year-short-time":{...sy,...Zn},"long-month-day-year-short-time-24":{...sy,...Zn,hour12:!1},"long-month-day-year-long-time":{...sy,...Es},"long-month-day-year-long-time-24":{...sy,...Es,hour12:!1},"day-short-month-year":oy,"day-short-month-year-short-time":{...oy,...Zn},"day-short-month-year-short-time-24":{...oy,...Zn,hour12:!1},"day-short-month-year-long-time":{...oy,...Es},"day-short-month-year-long-time-24":{...oy,...Es,hour12:!1},"long-date":ay,"long-date-short-time":{...ay,...Zn},"long-date-short-time-24":{...ay,...Zn,hour12:!1},"long-date-long-time":{...ay,...Es},"long-date-long-time-24":{...ay,...Es,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Zn,"long-time":Es},G0=Yr()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});G0.apiValues;G0.toJSON.bind(G0);G0.fromJSON.bind(G0);const ale={ar:"ar-u-nu-latn-ca-gregory"};let t_=new WeakMap,mU=D3["short-date-short-time"];function lle(e){const t=e||mU;if(!t_.has(t)){const r=An(),i=ale[An()]||r;t_.set(t,new Intl.DateTimeFormat(i,t))}return t_.get(t)}function j3(e){return D3[e]||null}function wl(e,t){return lle(t).format(e)}y3(()=>{t_=new WeakMap,mU=D3["short-date-short-time"]});const ule={ar:"ar-u-nu-latn"};let r_=new WeakMap,yU={};function cle(e){const t=e||yU;if(!r_.has(t)){const r=An(),i=ule[An()]||r;r_.set(t,new Intl.NumberFormat(i,e))}return r_.get(t)}function gU(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function sa(e,t){return e===-0&&(e=0),cle(t).format(e)}y3(()=>{r_=new WeakMap,yU={}});var nI;let jc=nI=class extends B{constructor(e){super(e),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new nI({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(e){return this.dateFormat?wl(e,{...j3(this.dateFormat),...this.dateTimeFormatOptions}):sa(e,gU(this))}formatRasterPixelValue(e){let t,r;return e.trim().includes(",")?(t=",",r=t+" ",this._formatDelimitedString(e,t,r,this)):e.trim().includes(";")?(t=";",r=t+" ",this._formatDelimitedString(e,t,r,this)):e.trim().includes(" ")?(t=r=" ",this._formatDelimitedString(e,t,r,this)):this.format(Number(e))}_formatDelimitedString(e,t,r,i){return e&&t&&r&&i?e.trim().split(t).map(n=>this.format(Number(n))).join(r):e}};u([me(U0)],jc.prototype,"dateFormat",void 0),u([d({type:Object,json:{read:!1}})],jc.prototype,"dateTimeFormatOptions",void 0),u([d({type:Boolean,json:{write:!0}})],jc.prototype,"digitSeparator",void 0),u([d({type:ct,json:{write:!0}})],jc.prototype,"places",void 0),jc=nI=u([E("esri.popup.support.FieldInfoFormat")],jc);const Qp=jc;var sI;let Os=sI=class extends B{constructor(e){super(e),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new sI({fieldName:this.fieldName,format:this.format?P(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};u([d({type:String,json:{write:!0}})],Os.prototype,"fieldName",void 0),u([d({type:Qp,json:{write:!0}})],Os.prototype,"format",void 0),u([d({type:Boolean,json:{write:!0,default:!1}})],Os.prototype,"isEditable",void 0),u([d({type:String,json:{write:!0}})],Os.prototype,"label",void 0),u([me(new Ee({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Os.prototype,"stringFieldOption",void 0),u([d({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Os.prototype,"statisticType",void 0),u([d({type:String,json:{write:!0}})],Os.prototype,"tooltip",void 0),u([d({type:Boolean,json:{write:!0}})],Os.prototype,"visible",void 0),Os=sI=u([E("esri.popup.FieldInfo")],Os);const Mv=Os;var oI;let La=oI=class extends Th{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(r=>r.toJSON())}clone(){return new oI(P({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};u([d({type:Object,json:{write:!0}})],La.prototype,"attributes",void 0),u([d({type:String,json:{write:!0}})],La.prototype,"description",void 0),u([d({type:[Mv]})],La.prototype,"fieldInfos",void 0),u([se("fieldInfos")],La.prototype,"writeFieldInfos",null),u([d({type:String,json:{write:!0}})],La.prototype,"title",void 0),u([d({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],La.prototype,"type",void 0),La=oI=u([E("esri.popup.content.FieldsContent")],La);const Jf=La;let Vc=class extends B{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};u([d({type:String,json:{write:!0}})],Vc.prototype,"altText",void 0),u([d({type:String,json:{write:!0}})],Vc.prototype,"caption",void 0),u([d({type:String,json:{write:!0}})],Vc.prototype,"title",void 0),u([d({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Vc.prototype,"type",void 0),Vc=u([E("esri.popup.content.mixins.MediaInfo")],Vc);const V3=Vc;var aI;let ip=aI=class extends le{constructor(e){super(e),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new aI({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};u([d()],ip.prototype,"fieldName",void 0),u([d()],ip.prototype,"tooltip",void 0),u([d()],ip.prototype,"value",void 0),ip=aI=u([E("esri.popup.content.support.ChartMediaInfoValueSeries")],ip);const vU=ip;var lI;let zc=lI=class extends B{constructor(e){super(e),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new lI({fields:P(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};u([d({type:[String],json:{write:!0}})],zc.prototype,"fields",void 0),u([d({type:String,json:{write:!0}})],zc.prototype,"normalizeField",void 0),u([d({type:[vU],json:{read:!1}})],zc.prototype,"series",void 0),u([d({type:String,json:{write:!0}})],zc.prototype,"tooltipField",void 0),zc=lI=u([E("esri.popup.content.support.ChartMediaInfoValue")],zc);const dle=zc;let By=class extends V3{constructor(e){super(e),this.type=null,this.value=null}};u([d({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],By.prototype,"type",void 0),u([d({type:dle,json:{write:!0}})],By.prototype,"value",void 0),By=u([E("esri.popup.content.mixins.ChartMediaInfo")],By);const j2=By,V2=Yr()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var uI;let i_=uI=class extends j2{constructor(e){super(e),this.type="bar-chart"}clone(){return new uI({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};u([d({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:V2.write}})],i_.prototype,"type",void 0),i_=uI=u([E("esri.popup.content.BarChartMediaInfo")],i_);const wU=i_;var cI;let n_=cI=class extends j2{constructor(e){super(e),this.type="column-chart"}clone(){return new cI({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};u([d({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:V2.write}})],n_.prototype,"type",void 0),n_=cI=u([E("esri.popup.content.ColumnChartMediaInfo")],n_);const _U=n_;var dI;let qy=dI=class extends B{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new dI({linkURL:this.linkURL,sourceURL:this.sourceURL})}};u([d({type:String,json:{write:!0}})],qy.prototype,"linkURL",void 0),u([d({type:String,json:{write:!0}})],qy.prototype,"sourceURL",void 0),qy=dI=u([E("esri.popup.content.support.ImageMediaInfoValue")],qy);const hle=qy;var hI;let np=hI=class extends V3{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new hI({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};u([d({type:Number,json:{write:!0}})],np.prototype,"refreshInterval",void 0),u([d({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],np.prototype,"type",void 0),u([d({type:hle,json:{write:!0}})],np.prototype,"value",void 0),np=hI=u([E("esri.popup.content.ImageMediaInfo")],np);const bU=np;var pI;let s_=pI=class extends j2{constructor(e){super(e),this.type="line-chart"}clone(){return new pI({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};u([d({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:V2.write}})],s_.prototype,"type",void 0),s_=pI=u([E("esri.popup.content.LineChartMediaInfo")],s_);const SU=s_;var fI;let o_=fI=class extends j2{constructor(e){super(e),this.type="pie-chart"}clone(){return new fI({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};u([d({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:V2.write}})],o_.prototype,"type",void 0),o_=fI=u([E("esri.popup.content.PieChartMediaInfo")],o_);const $U=o_,xU={base:V3,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":wU,"column-chart":_U,"line-chart":SU,"pie-chart":$U,image:bU}};var mI;let As=mI=class extends Th{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?bU.fromJSON(t):t.type==="barchart"?wU.fromJSON(t):t.type==="columnchart"?_U.fromJSON(t):t.type==="linechart"?SU.fromJSON(t):t.type==="piechart"?$U.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(r=>r.toJSON())}clone(){return new mI(P({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};u([d()],As.prototype,"activeMediaInfoIndex",void 0),u([d({type:Object,json:{write:!0}})],As.prototype,"attributes",void 0),u([d({type:String,json:{write:!0}})],As.prototype,"description",void 0),u([d({types:[xU]})],As.prototype,"mediaInfos",void 0),u([te("mediaInfos")],As.prototype,"readMediaInfos",null),u([se("mediaInfos")],As.prototype,"writeMediaInfos",null),u([d({type:String,json:{write:!0}})],As.prototype,"title",void 0),u([d({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],As.prototype,"type",void 0),As=mI=u([E("esri.popup.content.MediaContent")],As);const B0=As;var yI;let Wy=yI=class extends Th{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new yI({text:this.text})}};u([d({type:String,json:{write:!0}})],Wy.prototype,"text",void 0),u([d({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Wy.prototype,"type",void 0),Wy=yI=u([E("esri.popup.content.TextContent")],Wy);const Zf=Wy,ple={base:null,key:"type",typeMap:{attachment:z0,media:B0,text:Zf,expression:N3,field:Jf}};var gI;let Uc=gI=class extends B{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new gI({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};u([d({type:String,json:{write:!0}})],Uc.prototype,"name",void 0),u([d({type:String,json:{write:!0}})],Uc.prototype,"title",void 0),u([d({type:String,json:{write:!0}})],Uc.prototype,"expression",void 0),u([d({type:["string","number"],json:{write:!0}})],Uc.prototype,"returnType",void 0),Uc=gI=u([E("esri.popup.ExpressionInfo")],Uc);const EU=Uc;var vI;let Hy=vI=class extends B{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new vI({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};u([d({type:Boolean,json:{write:!0}})],Hy.prototype,"returnTopmostRaster",void 0),u([d({type:Boolean,json:{write:!0}})],Hy.prototype,"showNoDataRecords",void 0),Hy=vI=u([E("esri.popup.LayerOptions")],Hy);const fle=Hy;var wI;let Jy=wI=class extends B{constructor(e){super(e),this.field=null,this.order=null}clone(){return new wI({field:this.field,order:this.order})}};u([d({type:String,json:{write:!0}})],Jy.prototype,"field",void 0),u([d({type:["asc","desc"],json:{write:!0}})],Jy.prototype,"order",void 0),Jy=wI=u([E("esri.popup.support.RelatedRecordsInfoFieldOrder")],Jy);const TU=Jy;var _I;let Zy=_I=class extends B{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new _I({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?P(this.orderByFields):null})}};u([d({type:Boolean,json:{write:!0}})],Zy.prototype,"showRelatedRecords",void 0),u([d({type:[TU],json:{write:!0}})],Zy.prototype,"orderByFields",void 0),Zy=_I=u([E("esri.popup.RelatedRecordsInfo")],Zy);const mle=Zy;var bI;let Ps=bI=class extends A3(le){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new bI({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};u([d()],Ps.prototype,"active",void 0),u([d()],Ps.prototype,"className",void 0),u([d()],Ps.prototype,"disabled",void 0),u([d()],Ps.prototype,"id",void 0),u([d()],Ps.prototype,"indicator",void 0),u([d()],Ps.prototype,"title",void 0),u([d()],Ps.prototype,"type",void 0),u([d()],Ps.prototype,"visible",void 0),Ps=bI=u([E("esri.support.actions.ActionBase")],Ps);const z2=Ps;var SI;let a_=SI=class extends z2{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new SI({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};u([d()],a_.prototype,"image",void 0),a_=SI=u([E("esri.support.Action.ActionButton")],a_);const bm=a_;var $I;let Yy=$I=class extends z2{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new $I({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};u([d()],Yy.prototype,"image",void 0),u([d()],Yy.prototype,"value",void 0),Yy=$I=u([E("esri.support.Action.ActionToggle")],Yy);const MU=Yy;var xI;const yle=de.ofType({key:"type",defaultKeyValue:"button",base:z2,typeMap:{button:bm,toggle:MU}}),gle={base:Th,key:"type",typeMap:{media:B0,custom:ole,text:Zf,attachments:z0,fields:Jf,expression:N3}},IU="esri.PopupTemplate",vle=Z.getLogger(IU),wle=["attachments","fields","media","text","expression"];let sr=xI=class extends B{constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title="",this.relatedRecordsInfo=null}castContent(e){return Array.isArray(e)?e.map(t=>ia(gle,t)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||xl(e)?e:(vle.error("content error","unsupported content value",{value:e}),null)}readContent(e,t){const{popupElements:r}=t;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(t):this._readPopupInfo(t)}writeContent(e,t,r,i){typeof e!="string"?Array.isArray(e)&&(t.popupElements=e.filter(n=>wle.includes(n.type)).map(n=>n&&n.toJSON(i)),t.popupElements.forEach(n=>{n.type==="attachments"?this._writeAttachmentContent(t):n.type==="media"?this._writeMediaContent(n,t):n.type==="text"&&this._writeTextContent(n,t)})):t.description=e}writeFieldInfos(e,t,r,i){const{content:n}=this,s=Array.isArray(n)?n:null;if(e){const o=s?s.filter(l=>l.type==="fields"):[],a=o.length&&o.every(l=>{var c;return(c=l.fieldInfos)==null?void 0:c.length});t.fieldInfos=e.filter(Boolean).map(l=>{const c=l.toJSON(i);return a&&(c.visible=!1),c})}if(s)for(const o of s)o.type==="fields"&&this._writeFieldsContent(o,t)}writeLayerOptions(e,t,r,i){t[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(i)}writeTitle(e,t){t.title=e||""}clone(){const{actions:e}=this,t=e?P(e.toArray()):[];return new xI({actions:t,content:Array.isArray(this.content)?P(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?P(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?P(this.fieldInfos):null,layerOptions:this.layerOptions?P(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?P(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?P(this.relatedRecordsInfo):null})}async collectRequiredFields(e,t){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(e,t,[...r,...this._getContentExpressionInfos(this.content,r)]),V0(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const t=new Set;return await this.collectRequiredFields(t,e),[...t].sort()}_writeFieldsContent(e,t){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const r=P(e.fieldInfos);Array.isArray(t.fieldInfos)?r.forEach(i=>{const n=t.fieldInfos.find(s=>s.fieldName.toLowerCase()===i.fieldName.toLowerCase());n?n.visible=!0:t.fieldInfos.push(i)}):t.fieldInfos=r}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=P(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...r]:t.mediaInfos=r}_readPopupInfoElements({description:e,mediaInfos:t,popupElements:r}){const i={description:!1,mediaInfos:!1};return r.map(n=>n.type==="media"?(n.mediaInfos||!t||i.mediaInfos||(n.mediaInfos=t,i.mediaInfos=!0),B0.fromJSON(n)):n.type==="text"?(n.text||!e||i.description||(n.text=e,i.description=!0),Zf.fromJSON(n)):n.type==="attachments"?z0.fromJSON(n):n.type==="fields"?Jf.fromJSON(n):n.type==="expression"?N3.fromJSON(n):void 0).filter(Boolean)}_readPopupInfo({description:e,mediaInfos:t,showAttachments:r}){const i=[];return e?i.push(new Zf({text:e})):i.push(new Jf),Array.isArray(t)&&t.length&&i.push(B0.fromJSON({mediaInfos:t})),r&&i.push(z0.fromJSON({displayType:"auto"})),i.length?i:e}_getContentElementFields(e){const t=e==null?void 0:e.type;if(t==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(t==="custom")return e.outFields||[];if(t==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos||this.fieldInfos)];if(t==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((i,n)=>[...i,...this._getMediaInfoFields(n)],[])]}return t==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:t,title:r,value:i}=e,n=i||{},{fields:s=[],normalizeField:o,tooltipField:a,sourceURL:l,linkURL:c}=n,h=[...this._extractFieldNames(r),...this._extractFieldNames(t),...this._extractFieldNames(l),...this._extractFieldNames(c),...s];return o&&h.push(o),a&&h.push(a),h}_getContentExpressionInfos(e,t){return Array.isArray(e)?e.reduce((r,i)=>[...r,...i.type==="expression"&&i.expressionInfo?[i.expressionInfo]:[]],t):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((t,r)=>[...t,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,t,r){r&&await Promise.all(r.map(i=>Oi(e,t,i.expression)))}_getFieldInfoFields(e){return e?e.filter(t=>t.visible===void 0||!!t.visible).map(t=>t.fieldName).filter(t=>!t.includes("relationships/")&&!t.includes("expression/")):[]}_getActionsFields(e){return e?e.toArray().reduce((t,r)=>[...t,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:t,title:r,type:i}=e,n=i==="button"||i==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(t),...this._extractFieldNames(n)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const t=/{[^}]*}/g,r=e.match(t);if(!r)return[];const i=/\{(\w+):.+\}/,n=r.filter(s=>!(s.indexOf("{relationships/")===0||s.indexOf("{expression/")===0)).map(s=>s.replace(i,"{$1}"));return n?n.map(s=>s.slice(1,-1)):[]}};u([d({type:yle})],sr.prototype,"actions",void 0),u([d()],sr.prototype,"content",void 0),u([ze("content")],sr.prototype,"castContent",null),u([te("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],sr.prototype,"readContent",null),u([se("content",{popupElements:{type:de.ofType(ple)},showAttachments:{type:Boolean},mediaInfos:{type:de.ofType(xU)},description:{type:String}})],sr.prototype,"writeContent",null),u([d({type:[EU],json:{write:!0}})],sr.prototype,"expressionInfos",void 0),u([d({type:[Mv]})],sr.prototype,"fieldInfos",void 0),u([se("fieldInfos")],sr.prototype,"writeFieldInfos",null),u([d({type:fle})],sr.prototype,"layerOptions",void 0),u([se("layerOptions")],sr.prototype,"writeLayerOptions",null),u([d({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],sr.prototype,"lastEditInfoEnabled",void 0),u([d()],sr.prototype,"outFields",void 0),u([d()],sr.prototype,"overwriteActions",void 0),u([d()],sr.prototype,"returnGeometry",void 0),u([d({json:{type:String}})],sr.prototype,"title",void 0),u([se("title")],sr.prototype,"writeTitle",null),u([d({type:mle,json:{write:!0}})],sr.prototype,"relatedRecordsInfo",void 0),sr=xI=u([E(IU)],sr);const Mh=sr,IN=new Ee({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let _le=0,sp=class extends B{constructor(e){super(e),this.id="sym"+_le++,this.type=null,this.color=new ae([0,0,0,1])}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};u([d({type:IN.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:IN.write}}})],sp.prototype,"type",void 0),u([d({type:ae,json:{write:{allowNull:!0}}})],sp.prototype,"color",void 0),u([te("color")],sp.prototype,"readColor",null),sp=u([E("esri.symbols.Symbol")],sp);const dn=sp;var EI;let Ql=EI=class extends dn{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){if(e)for(const r in e)t[r]=e[r]}async collectRequiredFields(e,t){if(this.data.type==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const i=r.map(n=>{const s=n.valueExpressionInfo;return Oi(e,t,s.expression)});await Promise.all(i)}}}clone(){return new EI({data:P(this.data)})}hash(){return qO(JSON.stringify(this.data)).toString()}};u([d({json:{write:!1}})],Ql.prototype,"color",void 0),u([d({json:{write:!0}})],Ql.prototype,"data",void 0),u([te("data",["symbol"])],Ql.prototype,"readData",null),u([se("data",{})],Ql.prototype,"writeData",null),u([me({CIMSymbolReference:"cim"},{readOnly:!0})],Ql.prototype,"type",void 0),Ql=EI=u([E("esri.symbols.CIMSymbol")],Ql);const Iv=Ql;let op=class extends B{constructor(e){super(e),this.enabled=!0,this.type=null}writeEnabled(e,t,r){e||(t[r]=e)}};u([d({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],op.prototype,"enabled",void 0),u([se("enabled")],op.prototype,"writeEnabled",null),u([d({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],op.prototype,"type",void 0),op=u([E("esri.symbols.Symbol3DLayer")],op);const da=op,ble=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,Sle="screenUtils.toPt: input not recognized!",CU=96;function xt(e){return e?e/72*CU:0}function _s(e){return e?72*e/CU:0}function Be(e){if(typeof e=="string"){const t=e.match(ble);if(t){const r=Number(t[1]),i=t[3]&&t[3].toLowerCase(),n=e.charAt(0)==="-",s=i==="px"?_s(r):r;return n?-s:s}return console.warn(Sle),null}return e}function Zi(e=0,t=0){return{x:e,y:t}}function SDe(e=0,t=0){return[e,t]}function $le(e,t){const r=t.transparency!=null?N0(t.transparency):1,i=t.color;return i&&Array.isArray(i)?new ae([i[0]||0,i[1]||0,i[2]||0,r]):null}function xle(e,t){t.color=e.toJSON().slice(0,3);const r=D2(e.a);r!==0&&(t.transparency=r)}const gc={type:ae,json:{type:[ct],default:null,read:{source:["color","transparency"],reader:$le},write:{target:{color:{type:[ct]},transparency:{type:ct}},writer:xle}}},oa={type:Number,cast:Be,json:{write:!0}};let Gc=class extends B{constructor(e){super(e),this.color=new ae([0,0,0,1]),this.extensionLength=0,this.size=_s(1)}clone(){}cloneProperties(){return{color:P(this.color),size:this.size,extensionLength:this.extensionLength}}};u([d({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Gc.prototype,"type",void 0),u([d(gc)],Gc.prototype,"color",void 0),u([d({...oa,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],Gc.prototype,"extensionLength",void 0),u([d(oa)],Gc.prototype,"size",void 0),Gc=u([E("esri.symbols.edges.Edges3D")],Gc);const z3=Gc;var TI;let l_=TI=class extends z3{constructor(e){super(e),this.type="sketch"}clone(){return new TI(this.cloneProperties())}};u([me({sketch:"sketch"},{readOnly:!0})],l_.prototype,"type",void 0),l_=TI=u([E("esri.symbols.edges.SketchEdges3D")],l_);const Ele=l_;var MI;let u_=MI=class extends z3{constructor(e){super(e),this.type="solid"}clone(){return new MI(this.cloneProperties())}};u([me({solid:"solid"},{readOnly:!0})],u_.prototype,"type",void 0),u_=MI=u([E("esri.symbols.support.SolidEdges3D")],u_);const Tle=u_,kU={types:{key:"type",base:z3,typeMap:{solid:Tle,sketch:Ele}},json:{write:!0}};var II;let Pn=II=class extends B{constructor(e){super(e),this.color=null}clone(){const e={color:I(this.color)?this.color.clone():null};return new II(e)}};u([d(gc)],Pn.prototype,"color",void 0),Pn=II=u([E("esri.symbols.support.Symbol3DMaterial")],Pn);var CI;let Kl=CI=class extends da{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new CI({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:I(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};u([me({Extrude:"extrude"},{readOnly:!0})],Kl.prototype,"type",void 0),u([d({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Kl.prototype,"size",void 0),u([d({type:Pn,json:{write:!0}})],Kl.prototype,"material",void 0),u([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Kl.prototype,"castShadows",void 0),u([d(kU)],Kl.prototype,"edges",void 0),Kl=CI=u([E("esri.symbols.ExtrudeSymbol3DLayer")],Kl);const LU=Kl;let Qy=class extends dn{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};u([me({esriSLS:"simple-line"},{readOnly:!0})],Qy.prototype,"type",void 0),u([d({type:Number,cast:Be,json:{write:!0}})],Qy.prototype,"width",void 0),Qy=u([E("esri.symbols.LineSymbol")],Qy);const Mle=Qy,Ile=["begin","end","begin-end"],OU=["arrow","circle","square","diamond","cross","x"];var kI;let Co=kI=class extends B{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,r,i){t[r]=(i==null?void 0:i.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,r,i){(i==null?void 0:i.origin)==="web-map"||(t[r]=e)}clone(){return new kI({color:P(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};u([d({type:["begin","end","begin-end"],json:{write:!0}})],Co.prototype,"placement",void 0),u([me({"line-marker":"line-marker"},{readOnly:!0}),d({json:{origins:{"web-map":{write:!1}}}})],Co.prototype,"type",void 0),u([d({type:OU})],Co.prototype,"style",void 0),u([se("style")],Co.prototype,"writeStyle",null),u([d({type:ae,value:null,json:{write:{allowNull:!0}}})],Co.prototype,"color",null),u([te("color")],Co.prototype,"readColor",null),u([se("color")],Co.prototype,"writeColor",null),Co=kI=u([E("esri.symbols.LineSymbolMarker")],Co);const Cle=Co;var LI;const Fx=new Ee({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Oa=LI=class extends Mle{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,r,i,n,s){if(e&&typeof e!="string")return e;const o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),r!=null&&(o.width=Be(r)),i!=null&&(o.cap=i),n!=null&&(o.join=n),s!=null&&(o.miterLimit=Be(s)),o}clone(){var e;return new LI({color:P(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};u([me({esriSLS:"simple-line"},{readOnly:!0})],Oa.prototype,"type",void 0),u([d({type:Fx.apiValues,json:{read:Fx.read,write:Fx.write}})],Oa.prototype,"style",void 0),u([d({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null||r.origin==null)})}}})],Oa.prototype,"cap",void 0),u([d({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null||r.origin==null)})}}})],Oa.prototype,"join",void 0),u([d({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":Cle}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Oa.prototype,"marker",void 0),u([d({type:Number,json:{read:!1,write:!1}})],Oa.prototype,"miterLimit",void 0),Oa=LI=u([E("esri.symbols.SimpleLineSymbol")],Oa);const hn=Oa;let Ky=class extends dn{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};u([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":hn}},json:{default:null,write:!0}})],Ky.prototype,"outline",void 0),u([d({type:["simple-fill","picture-fill"],readOnly:!0})],Ky.prototype,"type",void 0),Ky=u([E("esri.symbols.FillSymbol")],Ky);const AU=Ky;let c_=class extends B{constructor(e){super(e)}clone(){}};u([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],c_.prototype,"type",void 0),c_=u([E("esri.symbols.patterns.LinePattern3D")],c_);const PU=c_,kle=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var OI;const Lle=Yr()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Xy=OI=class extends PU{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new OI(e)}};u([d({type:["style"]})],Xy.prototype,"type",void 0),u([me(Lle),d({type:kle})],Xy.prototype,"style",void 0),Xy=OI=u([E("esri.symbols.patterns.LineStylePattern3D")],Xy);const U3=Xy;let d_=class extends B{constructor(e){super(e)}clone(){}};u([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],d_.prototype,"type",void 0),d_=u([E("esri.symbols.patterns.Pattern3D")],d_);const RU=d_,Ole=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var AI;let eg=AI=class extends RU{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new AI(e)}};u([d({type:["style"]})],eg.prototype,"type",void 0),u([d({type:Ole,json:{read:!0,write:!0}})],eg.prototype,"style",void 0),eg=AI=u([E("esri.symbols.patterns.StylePattern3D")],eg);const FU=eg,Ale={types:{key:"type",base:RU,typeMap:{style:FU}},json:{write:!0}},NU={types:{key:"type",base:PU,typeMap:{style:U3}},json:{write:!0}},Jg=new ae("white");new ae("black");const Ple=new ae([255,255,255,0]);function Rle(e){return e.r===0&&e.g===0&&e.b===0}var PI;let Zg=PI=class extends Pn{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:I(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new PI(e)}};u([me({multiply:"multiply",replace:"replace",tint:"tint"})],Zg.prototype,"colorMixMode",void 0),Zg=PI=u([E("esri.symbols.support.Symbol3DFillMaterial")],Zg);function bs(e=Ble){return[e[0],e[1],e[2],e[3]]}function $De(e){return[e[0],e[1],e[2],e[3]]}function Fle(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function xDe(e,t,r,i,n=bs()){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}function Nle(e,t=bs()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function EDe(e,t){return new Je({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function TDe(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function Dle(e){return R(e)||e[0]>=e[2]?0:e[2]-e[0]}function jle(e){return e[1]>=e[3]?0:e[3]-e[1]}function MDe(e){return Dle(e)*jle(e)}function Vle(e,t){return zle(e,t[0],t[1])}function zle(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function Ule(e,t,r){return t[0]>=e[0]-r&&t[1]>=e[1]-r&&t[0]<=e[2]+r&&t[1]<=e[3]+r}function IDe(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function Gle(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function CDe(e){return e?Fle(e,CN):bs(CN)}const CN=[1/0,1/0,-1/0,-1/0],Ble=[0,0,0,0];function G3(e=Zle){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function B3(e,t,r,i,n,s,o=G3()){return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=n,o[5]=s,o}function kDe(e,t){const r=isFinite(e[2])||isFinite(e[5]);return new Je(r?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function LDe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function ODe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function qle(e){return e[0]>=e[3]?0:e[3]-e[0]}function Wle(e){return e[1]>=e[4]?0:e[4]-e[1]}function Hle(e){return e[2]>=e[5]?0:e[5]-e[2]}function ADe(e,t=[0,0,0]){return t[0]=qle(e),t[1]=Wle(e),t[2]=Hle(e),t}function PDe(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function RDe(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function Jle(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function FDe(e){return e?Jle(e,LN):G3(LN)}function NDe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function kN(e){return e.length===6}function DDe(e,t,r){if(R(e)||R(t))return e===t;if(!kN(e)||!kN(t))return!1;if(r){for(let i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}const LN=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Zle=[0,0,0,0,0,0];G3();function jDe(e,{isPrimitive:t,width:r,depth:i,height:n}){const s=t?10:1;if(r==null&&n==null&&i==null)return[s*e[0],s*e[1],s*e[2]];const o=vm(r,i,n);let a;for(let l=0;l<3;l++){const c=o[l];if(c!=null){a=c/e[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=e[l]*a);return o}const Yle=B3(-.5,-.5,-.5,.5,.5,.5),Qle=B3(-.5,-.5,0,.5,.5,1),Kle=B3(-.5,-.5,0,.5,.5,.5);function VDe(e){switch(e){case"sphere":case"cube":case"diamond":return Yle;case"cylinder":case"cone":case"inverted-cone":return Qle;case"tetrahedron":return Kle;default:return}}const q3=["butt","square","round"],Xle=[...q3,"none"],DU=["miter","bevel","round"];var RI;let Bc=RI=class extends B{constructor(e){super(e),this.color=new ae([0,0,0,1]),this.size=_s(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:I(this.color)?this.color.clone():null,size:this.size,pattern:I(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new RI(e)}};u([d(gc)],Bc.prototype,"color",void 0),u([d(oa)],Bc.prototype,"size",void 0),u([d(NU)],Bc.prototype,"pattern",void 0),u([d({type:q3,json:{default:"butt",write:{overridePolicy(){return{enabled:I(this.pattern)}}}}})],Bc.prototype,"patternCap",void 0),Bc=RI=u([E("esri.symbols.support.Symbol3DOutline")],Bc);var h_;let Aa=h_=class extends da{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:I(this.edges)?this.edges.clone():null,enabled:this.enabled,material:I(this.material)?this.material.clone():null,pattern:I(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:I(this.outline)?this.outline.clone():null};return new h_(e)}static fromSimpleFillSymbol(e){var i,n,s,o,a,l;const t=e.outline&&e.outline.style&&e.outline.style!=="inside-frame"&&e.outline.style!=="solid"?new U3({style:e.outline.style}):null,r={size:(n=(i=e.outline)==null?void 0:i.width)!=null?n:0,color:((o=(s=e.outline)==null?void 0:s.color)!=null?o:Jg).clone(),pattern:t};return t&&((a=e.outline)==null?void 0:a.cap)&&(r.patternCap=e.outline.cap),new h_({material:new Zg({color:((l=e.color)!=null?l:Ple).clone()}),pattern:e.style&&e.style!=="solid"?new FU({style:e.style}):null,outline:r})}};u([me({Fill:"fill"},{readOnly:!0})],Aa.prototype,"type",void 0),u([d({type:Zg,json:{write:!0}})],Aa.prototype,"material",void 0),u([d(Ale)],Aa.prototype,"pattern",void 0),u([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Aa.prototype,"castShadows",void 0),u([d({type:Bc,json:{write:!0}})],Aa.prototype,"outline",void 0),u([d(kU)],Aa.prototype,"edges",void 0),Aa=h_=u([E("esri.symbols.FillSymbol3DLayer")],Aa);const U2=Aa,eue=["none","underline","line-through"],tue=["normal","italic","oblique"],rue=["normal","lighter","bold","bolder"],jU={type:Number,cast:e=>{const t=as(e);return t===0?1:an(t,.1,4)},nonNullable:!0},iue=["left","right","center"],nue=["baseline","top","middle","bottom"],VU={type:iue,nonNullable:!0},zU={type:nue,nonNullable:!0};var FI;let Pa=FI=class extends B{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return Be(e)}clone(){return new FI({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};u([d({type:eue,json:{default:"none",write:!0}})],Pa.prototype,"decoration",void 0),u([d({type:String,json:{write:!0}})],Pa.prototype,"family",void 0),u([d({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:!r||!r.textSymbol3D})}}})],Pa.prototype,"size",void 0),u([ze("size")],Pa.prototype,"castSize",null),u([d({type:tue,json:{default:"normal",write:!0}})],Pa.prototype,"style",void 0),u([d({type:rue,json:{default:"normal",write:!0}})],Pa.prototype,"weight",void 0),Pa=FI=u([E("esri.symbols.Font")],Pa);const G2=Pa;function cc(e,t){const r=t&&t.url&&t.url.path;if(e&&r&&(e=no(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const i=a3(e,t.portalItem.itemUrl);oue.test(i)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(i).path)}return NI(e,t&&t.portal)}function Cv(e,t,r=q0.YES){if(!e)return e;!On(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let i=no(e);if(t){const n=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(n){const s=NI(n,t.portal);i=a3(NI(i,t.portal),s,s),i!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(i)}}return i=UU(i,t&&t.portal),On(i)&&(i=fs(i)),(t==null?void 0:t.resources)&&(t==null?void 0:t.portalItem)&&!On(i)&&!xh(i)&&r===q0.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i)}),i}function W3(e,t,r){return cc(e,r)}function gh(e,t,r,i){const n=Cv(e,i);n!==void 0&&(t[r]=n)}const sue=/\/items\/([^\/]+)\/resources\//,oue=/^\.\/resources\//;function aue(e){const t=I(e)?e.match(sue):null;return I(t)?t[1]:null}function UU(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?RM(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function NI(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`,i=n3();return R0(i,`${i.scheme}://${r}`)?RM(e,t.portalHostname,r):RM(e,r,t.portalHostname)}var q0;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(q0||(q0={}));const zDe=Object.freeze(Object.defineProperty({__proto__:null,fromJSON:cc,toJSON:Cv,read:W3,write:gh,itemIdFromResourceUrl:aue,ensureMainOnlineDomain:UU,get MarkKeep(){return q0}},Symbol.toStringTag,{value:"Module"}));var DI;const lue=Yr()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let qc=DI=class extends B{constructor(e){super(e)}readHref(e,t,r){return e?cc(e,r):t.dataURI}writeHref(e,t,r,i){e&&(xh(e)?t.dataURI=e:(t.href=Cv(e,i),On(t.href)&&(t.href=fs(t.href))))}clone(){return new DI({href:this.href,primitive:this.primitive})}};u([d({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],qc.prototype,"href",void 0),u([te("href")],qc.prototype,"readHref",null),u([se("href",{href:{type:String},dataURI:{type:String}})],qc.prototype,"writeHref",null),u([me(lue)],qc.prototype,"primitive",void 0),qc=DI=u([E("esri.symbols.support.IconSymbol3DLayerResource")],qc);const uue="circle";var jI;let Kp=jI=class extends le{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new jI({x:this.x,y:this.y})}};u([d({type:Number})],Kp.prototype,"x",void 0),u([d({type:Number})],Kp.prototype,"y",void 0),Kp=jI=u([E("esri.symbols.support.Symbol3DAnchorPosition2D")],Kp);var VI;let tg=VI=class extends B{constructor(e){super(e),this.color=new ae([0,0,0,1]),this.size=_s(1)}clone(){const e={color:I(this.color)?this.color.clone():null,size:this.size};return new VI(e)}};u([d(gc)],tg.prototype,"color",void 0),u([d(oa)],tg.prototype,"size",void 0),tg=VI=u([E("esri.symbols.support.Symbol3DIconOutline")],tg);var ap;const cue=Z.getLogger("esri.symbols.IconSymbol3DLayer");let ko=ap=class extends da{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=void 0,this.outline=void 0}clone(){return new ap({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:I(this.material)?this.material.clone():null,outline:I(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||Jg,r=ON(e),i=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||Jg).clone()}:null;return new ap({size:e.size,resource:{primitive:hue(e.style)},material:{color:t},outline:i,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const t=!e.color||Rle(e.color)?Jg:e.color,r=ON(e);return new ap({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new ap({resource:{href:Y9({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};function ON(e){const t="width"in e?e.width:e.size,r="height"in e?e.height:e.size,i=AN(e.xoffset),n=AN(e.yoffset);return(i||n)&&t&&r?{x:-i/t,y:n/r}:null}function AN(e){return isFinite(e)?e:0}u([d({type:Pn,json:{write:!0}})],ko.prototype,"material",void 0),u([d({type:qc,json:{write:!0}})],ko.prototype,"resource",void 0),u([me({Icon:"icon"},{readOnly:!0})],ko.prototype,"type",void 0),u([d(oa)],ko.prototype,"size",void 0),u([me({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),d({json:{default:"center"}})],ko.prototype,"anchor",void 0),u([d({type:Kp,json:{type:[Number],read:{reader:e=>new Kp({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],ko.prototype,"anchorPosition",void 0),u([d({type:tg,json:{write:!0}})],ko.prototype,"outline",void 0),ko=ap=u([E("esri.symbols.IconSymbol3DLayer")],ko);const due={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function hue(e){return due[e]||(cue.warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Ad=ko;Z.getLogger("esri.core.Clonable");const pn=e=>{let t=class extends e{clone(){var l;const r=wte(li(this),"unable to clone instance of non-accessor class"),i=r.metadatas,n=r.store,s={},o=new Map;for(const c in i){const h=i[c],f=n==null?void 0:n.originOf(c),m=h.clonable;if(h.readOnly||m===!1||f!==xe.USER&&f!==xe.DEFAULTS&&f!==xe.WEB_MAP&&f!==xe.WEB_SCENE)continue;const y=this[c];let g=null;g=typeof m=="function"?m(y):m==="reference"?y:gM(y),y!=null&&g==null||(f===xe.DEFAULTS?o.set(c,g):s[c]=g)}const a=new(Object.getPrototypeOf(this)).constructor(s);if(o.size){const c=(l=li(a))==null?void 0:l.store;if(c)for(const[h,f]of o)c.set(h,f,xe.DEFAULTS)}return a}};return t=u([E("esri.core.Clonable")],t),t};let PN=class extends pn(le){};PN=u([E("esri.core.Clonable")],PN);let Wc=class extends pn(B){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return I(e)&&e.placement===this.placement&&e.style===this.style&&(R(this.color)&&R(e.color)||I(this.color)&&I(e.color)&&this.color.toJSON()===e.color.toJSON())}};u([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Wc.prototype,"type",void 0),u([d({type:Ile,json:{default:"begin-end",write:!0}})],Wc.prototype,"placement",void 0),u([d({type:OU,json:{default:"arrow",write:!0}})],Wc.prototype,"style",void 0),u([d({type:ae,json:{type:[ct],default:null,write:!0}})],Wc.prototype,"color",void 0),Wc=u([E("esri.symbols.LineStyleMarker3D")],Wc);const zI=Wc;var p_;let Lo=p_=class extends da{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=_s(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:I(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:I(this.pattern)?this.pattern.clone():null,marker:I(this.marker)?this.marker.clone():null};return new p_(e)}static fromSimpleLineSymbol(e){var r,i,n;const t={enabled:!0,size:(r=e.width)!=null?r:_s(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style&&e.style!=="inside-frame"?new U3({style:e.style}):null,material:new Pn({color:(e.color||Jg).clone()}),marker:e.marker?new zI({placement:e.marker.placement,style:e.marker.style,color:(n=(i=e.marker.color)==null?void 0:i.clone())!=null?n:null}):null};return new p_(t)}};u([d({type:Pn,json:{write:!0}})],Lo.prototype,"material",void 0),u([me({Line:"line"},{readOnly:!0})],Lo.prototype,"type",void 0),u([d({type:DU,json:{write:!0,default:"miter"}})],Lo.prototype,"join",void 0),u([d({type:q3,json:{write:!0,default:"butt"}})],Lo.prototype,"cap",void 0),u([d(oa)],Lo.prototype,"size",void 0),u([d(NU)],Lo.prototype,"pattern",void 0),u([d({types:{key:"type",base:zI,typeMap:{style:zI}},json:{write:!0}})],Lo.prototype,"marker",void 0),Lo=p_=u([E("esri.symbols.LineSymbol3DLayer")],Lo);const kv=Lo;var UI;const pue=Yr()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let rg=UI=class extends B{clone(){return new UI({href:this.href,primitive:this.primitive})}};u([d({type:String,json:{read:W3,write:gh}})],rg.prototype,"href",void 0),u([me(pue)],rg.prototype,"primitive",void 0),rg=UI=u([E("esri.symbols.support.ObjectSymbol3DLayerResource")],rg);const fue="sphere";var GI;let _d=GI=class extends le{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new GI({x:this.x,y:this.y,z:this.z})}};u([d({type:Number})],_d.prototype,"x",void 0),u([d({type:Number})],_d.prototype,"y",void 0),u([d({type:Number})],_d.prototype,"z",void 0),_d=GI=u([E("esri.symbols.support.Symbol3DAnchorPosition3D")],_d);var BI;let ei=BI=class extends da{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new BI({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:I(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};u([d({type:Pn,json:{write:!0}})],ei.prototype,"material",void 0),u([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ei.prototype,"castShadows",void 0),u([d({type:rg,json:{write:!0}})],ei.prototype,"resource",void 0),u([me({Object:"object"},{readOnly:!0})],ei.prototype,"type",void 0),u([d({type:Number,json:{write:!0}})],ei.prototype,"width",void 0),u([d({type:Number,json:{write:!0}})],ei.prototype,"height",void 0),u([d({type:Number,json:{write:!0}})],ei.prototype,"depth",void 0),u([me({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),d({json:{default:"origin"}})],ei.prototype,"anchor",void 0),u([d({type:_d,json:{type:[Number],read:{reader:e=>new _d({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],ei.prototype,"anchorPosition",void 0),u([d({type:Number,json:{write:!0}})],ei.prototype,"heading",void 0),u([d({type:Number,json:{write:!0}})],ei.prototype,"tilt",void 0),u([d({type:Number,json:{write:!0}})],ei.prototype,"roll",void 0),u([d({readOnly:!0})],ei.prototype,"isPrimitive",null),ei=BI=u([E("esri.symbols.ObjectSymbol3DLayer")],ei);const H3=ei;var qI;let mi=qI=class extends da{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e!=null?e:t.height==null&&t.size!=null?t.size:void 0}readHeight(e,t){return e!=null?e:t.width==null&&t.size!=null?t.size:void 0}clone(){return new qI({enabled:this.enabled,material:I(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};u([d({type:Pn,json:{write:!0}})],mi.prototype,"material",void 0),u([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],mi.prototype,"castShadows",void 0),u([me({Path:"path"},{readOnly:!0})],mi.prototype,"type",void 0),u([d({type:["circle","quad"],json:{write:!0,default:"circle"}})],mi.prototype,"profile",void 0),u([d({type:DU,json:{write:!0,default:"miter"}})],mi.prototype,"join",void 0),u([d({type:Xle,json:{write:!0,default:"butt"}})],mi.prototype,"cap",void 0),u([d({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],mi.prototype,"width",void 0),u([te("width",["width","size","height"])],mi.prototype,"readWidth",null),u([d({type:Number,json:{write:!0}})],mi.prototype,"height",void 0),u([te("height",["height","size","width"])],mi.prototype,"readHeight",null),u([d({type:["center","bottom","top"],json:{write:!0,default:"center"}})],mi.prototype,"anchor",void 0),u([d({type:["heading","all"],json:{write:!0,default:"all"}})],mi.prototype,"profileRotation",void 0),mi=qI=u([E("esri.symbols.PathSymbol3DLayer")],mi);const J3=mi;var WI;let Xp=WI=class extends B{constructor(){super(...arguments),this.color=new ae([0,0,0,1]),this.size=0}clone(){const e={color:P(this.color),size:this.size};return new WI(e)}};u([d(gc)],Xp.prototype,"color",void 0),u([d(oa)],Xp.prototype,"size",void 0),Xp=WI=u([E("esri.symbols.support.Symbol3DHalo")],Xp);let Yg=class extends pn(B){constructor(e){super(e),this.color=null}};u([d(gc)],Yg.prototype,"color",void 0),Yg=u([E("esri.symbols.support.Symbol3DTextBackground")],Yg);var f_;let Fi=f_=class extends da{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){I(e)&&I(this._userSize)&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,r,i){const n={...i,textSymbol3D:!0};t.font=e.write({},n),delete t.font.size}get size(){return I(this._userSize)?this._userSize:I(this.font)&&this.font.size!=null?this.font.size:9}set size(e){this._userSize=e,I(this.font)&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new f_({enabled:this.enabled,font:this.font&&P(this.font),halo:this.halo&&P(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:I(this.material)?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:P(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new f_({font:I(e.font)?e.font.clone():new G2,halo:mue(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new Pn({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new Yg({color:e.backgroundColor.clone()}):null})}};function mue(e,t){return e&&t>0?new Xp({color:P(e),size:t}):null}u([d({type:G2,json:{write:!0}})],Fi.prototype,"font",null),u([se("font")],Fi.prototype,"writeFont",null),u([d({type:Xp,json:{write:!0}})],Fi.prototype,"halo",void 0),u([d({...VU,json:{default:"center",write:!0}})],Fi.prototype,"horizontalAlignment",void 0),u([d({...jU,json:{default:1,write:!0}})],Fi.prototype,"lineHeight",void 0),u([d({type:Pn,json:{write:!0}})],Fi.prototype,"material",void 0),u([d({type:Yg,json:{write:!0}})],Fi.prototype,"background",void 0),u([d(oa)],Fi.prototype,"size",null),u([d({type:String,json:{write:!0}})],Fi.prototype,"text",void 0),u([me({Text:"text"},{readOnly:!0})],Fi.prototype,"type",void 0),u([d({...zU,json:{default:"baseline",write:!0}})],Fi.prototype,"verticalAlignment",void 0),Fi=f_=u([E("esri.symbols.TextSymbol3DLayer")],Fi);const Sm=Fi;var HI;let Xl=HI=class extends da{constructor(e){super(e),this.color=JI.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new HI({color:P(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};u([d({type:ae,nonNullable:!0,json:{type:[ct],write:(e,t,r)=>t[r]=e.toArray(ae.AlphaMode.UNLESS_OPAQUE),default:()=>JI.clone(),defaultEquals:e=>e.toCss(!0)===JI.toCss(!0)}})],Xl.prototype,"color",void 0),u([me({Water:"water"},{readOnly:!0})],Xl.prototype,"type",void 0),u([d({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Xl.prototype,"waterbodySize",void 0),u([d({type:Number,json:{write:!0,default:null}})],Xl.prototype,"waveDirection",void 0),u([d({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Xl.prototype,"waveStrength",void 0),Xl=HI=u([E("esri.symbols.WaterSymbol3DLayer")],Xl);const JI=new ae([0,119,190]),GU=Xl;var ZI;let Hc=ZI=class extends le{constructor(){super(...arguments),this.portal=null}clone(){return new ZI({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};u([d({type:String})],Hc.prototype,"name",void 0),u([d({type:String})],Hc.prototype,"styleUrl",void 0),u([d({type:String})],Hc.prototype,"styleName",void 0),u([d({type:Mr})],Hc.prototype,"portal",void 0),Hc=ZI=u([E("esri.symbols.support.StyleOrigin")],Hc);const W0=Hc;var YI;let Kd=YI=class extends le{clone(){return new YI({url:this.url})}};u([d({type:String})],Kd.prototype,"url",void 0),Kd=YI=u([E("esri.symbols.support.Thumbnail")],Kd);const BU={icon:Ad,object:H3,line:kv,path:J3,fill:U2,extrude:LU,text:Sm,water:GU},yue=de.ofType({base:da,key:"type",typeMap:BU,errorContext:"symbol-layer"}),gue=Z.getLogger("esri.symbols.Symbol3D");let Oo=class extends dn{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const t=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,r=t&&t.type||de;this._set("symbolLayers",new r)}get color(){return null}set color(e){this.initialized&&gue.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){ch(e,this._get("symbolLayers"))}readStyleOrigin(e,t,r){if(e.styleUrl&&e.name){const i=cc(e.styleUrl,r);return new W0({styleUrl:i,name:e.name})}if(e.styleName&&e.name)return new W0({portal:r&&r.portal||Mr.getDefault(),styleName:e.styleName,name:e.name});r&&r.messages&&r.messages.push(new ki("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,t,r,i){if(e.styleUrl&&e.name){let n=Cv(e.styleUrl,i);On(n)&&(n=fs(n)),t.styleOrigin={styleUrl:n,name:e.name}}else e.styleName&&e.name&&(e.portal&&i&&i.portal&&!H9(e.portal.restUrl,i.portal.restUrl)?i&&i.messages&&i.messages.push(new ki("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof da||e&&BU[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};u([d({json:{read:!1,write:!1}})],Oo.prototype,"color",null),u([d({type:yue,nonNullable:!0,json:{write:!0}}),ze(R9)],Oo.prototype,"symbolLayers",null),u([d({type:W0})],Oo.prototype,"styleOrigin",void 0),u([te("styleOrigin")],Oo.prototype,"readStyleOrigin",null),u([se("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Oo.prototype,"writeStyleOrigin",null),u([d({type:Kd,json:{read:!1}})],Oo.prototype,"thumbnail",void 0),u([d({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Oo.prototype,"type",void 0),Oo=u([E("esri.symbols.Symbol3D")],Oo);const $m=Oo;let ig=class extends B{constructor(e){super(e),this.visible=!0}clone(){}};u([d({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],ig.prototype,"type",void 0),u([d({readOnly:!0})],ig.prototype,"visible",void 0),ig=u([E("esri.symbols.callouts.Callout3D")],ig);const qU=ig;var QI;let m_=QI=class extends B{constructor(){super(...arguments),this.color=new ae("white")}clone(){return new QI({color:P(this.color)})}};u([d(gc)],m_.prototype,"color",void 0),m_=QI=u([E("esri.symbols.callouts.LineCallout3DBorder")],m_);const WU=m_;Object.freeze(Object.defineProperty({__proto__:null,default:WU},Symbol.toStringTag,{value:"Module"}));var KI;let eu=KI=class extends qU{constructor(e){super(e),this.type="line",this.color=new ae([0,0,0,1]),this.size=_s(1),this.border=null}get visible(){return this.size>0&&I(this.color)&&this.color.a>0}clone(){return new KI({color:P(this.color),size:this.size,border:P(this.border)})}};u([me({line:"line"},{readOnly:!0})],eu.prototype,"type",void 0),u([d(gc)],eu.prototype,"color",void 0),u([d(oa)],eu.prototype,"size",void 0),u([d({type:WU,json:{write:!0}})],eu.prototype,"border",void 0),u([d({readOnly:!0})],eu.prototype,"visible",null),eu=KI=u([E("esri.symbols.callouts.LineCallout3D")],eu);const vue=eu;function Z3(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength<=0)}function HU(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!Z3(e)}const JU={types:{key:"type",base:qU,typeMap:{line:vue}},json:{write:!0}};var XI;let bd=XI=class extends B{constructor(){super(...arguments),this.screenLength=0,this.minWorldLength=0}clone(){return new XI({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};u([d(oa)],bd.prototype,"screenLength",void 0),u([d({type:Number,json:{write:!0,default:0}})],bd.prototype,"minWorldLength",void 0),u([d({type:Number,json:{write:!0}})],bd.prototype,"maxWorldLength",void 0),bd=XI=u([E("esri.symbols.support.Symbol3DVerticalOffset")],bd);var y_;const ZU=de.ofType({base:null,key:"type",typeMap:{text:Sm}});let tu=y_=class extends $m{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new ZU,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return HU(this)}hasVisibleVerticalOffset(){return Z3(this)}clone(){return new y_({styleOrigin:P(this.styleOrigin),symbolLayers:P(this.symbolLayers),thumbnail:P(this.thumbnail),callout:P(this.callout),verticalOffset:P(this.verticalOffset)})}static fromTextSymbol(e){return new y_({symbolLayers:[Sm.fromTextSymbol(e)]})}};u([d({type:bd,json:{write:!0}})],tu.prototype,"verticalOffset",void 0),u([d(JU)],tu.prototype,"callout",void 0),u([d({json:{read:!1,write:!1}})],tu.prototype,"styleOrigin",void 0),u([d({type:ZU})],tu.prototype,"symbolLayers",void 0),u([me({LabelSymbol3D:"label-3d"},{readOnly:!0})],tu.prototype,"type",void 0),tu=y_=u([E("esri.symbols.LabelSymbol3D")],tu);const B2=tu;var g_;const YU=de.ofType({base:null,key:"type",typeMap:{line:kv,path:J3}}),wue=de.ofType({base:null,key:"type",typeMap:{line:kv,path:J3}});let ng=g_=class extends $m{constructor(e){super(e),this.symbolLayers=new YU,this.type="line-3d"}clone(){return new g_({styleOrigin:P(this.styleOrigin),symbolLayers:P(this.symbolLayers),thumbnail:P(this.thumbnail)})}static fromSimpleLineSymbol(e){return new g_({symbolLayers:[kv.fromSimpleLineSymbol(e)]})}};u([d({type:YU,json:{type:wue}})],ng.prototype,"symbolLayers",void 0),u([me({LineSymbol3D:"line-3d"},{readOnly:!0})],ng.prototype,"type",void 0),ng=g_=u([E("esri.symbols.LineSymbol3D")],ng);const q2=ng;let ru=class extends dn{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};u([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],ru.prototype,"angle",void 0),u([d({type:["simple-marker","picture-marker"],readOnly:!0})],ru.prototype,"type",void 0),u([d({type:Number,cast:Be,json:{write:!0}})],ru.prototype,"xoffset",void 0),u([d({type:Number,cast:Be,json:{write:!0}})],ru.prototype,"yoffset",void 0),u([d({type:Number,cast:e=>e==="auto"?e:Be(e),json:{write:!0}})],ru.prototype,"size",void 0),ru=u([E("esri.symbols.MarkerSymbol")],ru);const QU=ru;var eC;const KU=de.ofType({base:null,key:"type",typeMap:{fill:U2}});let sg=eC=class extends $m{constructor(e){super(e),this.symbolLayers=new KU,this.type="mesh-3d"}clone(){return new eC({styleOrigin:P(this.styleOrigin),symbolLayers:P(this.symbolLayers),thumbnail:P(this.thumbnail)})}};u([d({type:KU})],sg.prototype,"symbolLayers",void 0),u([me({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],sg.prototype,"type",void 0),sg=eC=u([E("esri.symbols.MeshSymbol3D")],sg);const Y3=sg;function _ue(e,t,r){return t.imageData?Y9({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):XU(t.url,r)}function XU(e,t){return Sue(t)&&!On(e)&&t.layer.parsedUrl?dh(t.layer.parsedUrl.path,"images",e):cc(e,t)}function bue(e,t,r,i){if(xh(e)){const n=Z9(e);t.contentType=n.mediaType,t.imageData=n.data,r&&r.imageData===t.imageData&&r.url&&gh(r.url,t,"url",i)}else gh(e,t,"url",i)}const eG={json:{read:{source:["imageData","url"],reader:_ue},write:{writer(e,t,r,i){bue(e,t,this.source,i)}}}},tG={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,r){const i={};return t.imageData&&(i.imageData=t.imageData),t.contentType&&(i.contentType=t.contentType),t.url&&(i.url=XU(t.url,r)),i}}}};function Sue(e){return e&&(e.origin==="service"||e.origin==="portal-item")&&e.layer&&(e.layer.type==="feature"||e.layer.type==="stream")}var tC;let Yn=tC=class extends AU{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const n={};return e&&(n.url=e),t&&(n.outline=t),r!=null&&(n.width=Be(r)),i!=null&&(n.height=Be(i)),n}clone(){const e=new tC({color:P(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",P(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};u([me({esriPFS:"picture-fill"},{readOnly:!0})],Yn.prototype,"type",void 0),u([d(eG)],Yn.prototype,"url",void 0),u([d({type:Number,json:{write:!0}})],Yn.prototype,"xscale",void 0),u([d({type:Number,json:{write:!0}})],Yn.prototype,"yscale",void 0),u([d({type:Number,cast:Be,json:{write:!0}})],Yn.prototype,"width",void 0),u([d({type:Number,cast:Be,json:{write:!0}})],Yn.prototype,"height",void 0),u([d({type:Number,cast:Be,json:{write:!0}})],Yn.prototype,"xoffset",void 0),u([d({type:Number,cast:Be,json:{write:!0}})],Yn.prototype,"yoffset",void 0),u([d(tG)],Yn.prototype,"source",void 0),Yn=tC=u([E("esri.symbols.PictureFillSymbol")],Yn);const rG=Yn;var rC;let Rs=rC=class extends QU{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const i={};return e&&(i.url=e),t!=null&&(i.width=Be(t)),r!=null&&(i.height=Be(r)),i}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new rC({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",P(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};u([d({json:{write:!1}})],Rs.prototype,"color",void 0),u([me({esriPMS:"picture-marker"},{readOnly:!0})],Rs.prototype,"type",void 0),u([d(eG)],Rs.prototype,"url",void 0),u([d(tG)],Rs.prototype,"source",void 0),u([d({type:Number,cast:Be,json:{write:!0}})],Rs.prototype,"height",void 0),u([te("height",["height","size"])],Rs.prototype,"readHeight",null),u([d({type:Number,cast:Be,json:{write:!0}})],Rs.prototype,"width",void 0),u([d({json:{write:!1}})],Rs.prototype,"size",void 0),Rs=rC=u([E("esri.symbols.PictureMarkerSymbol")],Rs);const Lv=Rs;var iu;const iG=de.ofType({base:null,key:"type",typeMap:{icon:Ad,object:H3,text:Sm}});let Jc=iu=class extends $m{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new iG,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return HU(this)}hasVisibleVerticalOffset(){return Z3(this)}clone(){return new iu({verticalOffset:P(this.verticalOffset),callout:P(this.callout),styleOrigin:P(this.styleOrigin),symbolLayers:P(this.symbolLayers),thumbnail:P(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new iu({symbolLayers:[Ad.fromSimpleMarkerSymbol(e)]})}static fromPictureMarkerSymbol(e){return new iu({symbolLayers:[Ad.fromPictureMarkerSymbol(e)]})}static fromCIMSymbol(e){var r,i;return((i=(r=e.data)==null?void 0:r.symbol)==null?void 0:i.type)!=="CIMPointSymbol"?null:e.data.symbol.callout?new iu({symbolLayers:[Ad.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}):new iu({symbolLayers:[Ad.fromCIMSymbol(e)]})}static fromTextSymbol(e){return new iu({symbolLayers:[Sm.fromTextSymbol(e)]})}};u([d({type:bd,json:{write:!0}})],Jc.prototype,"verticalOffset",void 0),u([d(JU)],Jc.prototype,"callout",void 0),u([d({type:iG,json:{origins:{"web-scene":{write:!0}}}})],Jc.prototype,"symbolLayers",void 0),u([me({PointSymbol3D:"point-3d"},{readOnly:!0})],Jc.prototype,"type",void 0),Jc=iu=u([E("esri.symbols.PointSymbol3D")],Jc);const Pd=Jc;var og;const nG=de.ofType({base:null,key:"type",typeMap:{extrude:LU,fill:U2,icon:Ad,line:kv,object:H3,text:Sm,water:GU}});let ag=og=class extends $m{constructor(e){super(e),this.symbolLayers=new nG,this.type="polygon-3d"}clone(){return new og({styleOrigin:P(this.styleOrigin),symbolLayers:P(this.symbolLayers),thumbnail:P(this.thumbnail)})}static fromJSON(e){const t=new og;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.getItemAt(0).type==="fill"&&t.symbolLayers.getItemAt(1).type==="line"){const r=t.symbolLayers.getItemAt(0),i=t.symbolLayers.getItemAt(1);!i.enabled||e.symbolLayers&&e.symbolLayers[1]&&e.symbolLayers[1].enable===!1||(r.outline={size:i.size,color:I(i.material)?i.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new og({symbolLayers:[U2.fromSimpleFillSymbol(e)]})}};u([d({type:nG,json:{write:!0}})],ag.prototype,"symbolLayers",void 0),u([me({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],ag.prototype,"type",void 0),ag=og=u([E("esri.symbols.PolygonSymbol3D")],ag);const Ov=ag;var iC;const Nx=new Ee({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Zc=iC=class extends AU{constructor(...e){super(...e),this.color=new ae([0,0,0,.25]),this.outline=new hn,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.style=e),t&&(i.outline=t),r&&(i.color=r),i}clone(){return new iC({color:P(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};u([d()],Zc.prototype,"color",void 0),u([d()],Zc.prototype,"outline",void 0),u([me({esriSFS:"simple-fill"},{readOnly:!0})],Zc.prototype,"type",void 0),u([d({type:Nx.apiValues,json:{read:Nx.read,write:Nx.write}})],Zc.prototype,"style",void 0),Zc=iC=u([E("esri.symbols.SimpleFillSymbol")],Zc);const ha=Zc;var nC;const Dx=new Ee({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Ao=nC=class extends QU{constructor(...e){super(...e),this.color=new ae([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new hn}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string")return e;const n={};return e&&(n.style=e),t!=null&&(n.size=Be(t)),r&&(n.outline=r),i&&(n.color=i),n}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new nC({angle:this.angle,color:P(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};u([d()],Ao.prototype,"color",void 0),u([se("color")],Ao.prototype,"writeColor",null),u([me({esriSMS:"simple-marker"},{readOnly:!0})],Ao.prototype,"type",void 0),u([d()],Ao.prototype,"size",void 0),u([d({type:Dx.apiValues,json:{read:Dx.read,write:Dx.write}})],Ao.prototype,"style",void 0),u([d({type:String,json:{write:!0}})],Ao.prototype,"path",null),u([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":hn}},json:{default:null,write:!0}})],Ao.prototype,"outline",void 0),Ao=nC=u([E("esri.symbols.SimpleMarkerSymbol")],Ao);const rn=Ao;var sC;let wt=sC=class extends dn{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new G2,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.text=e),t&&(i.font=t),r&&(i.color=r),i}writeLineWidth(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}castLineWidth(e){return Be(e)}writeLineHeight(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}clone(){return new sC({angle:this.angle,backgroundColor:P(this.backgroundColor),borderLineColor:P(this.borderLineColor),borderLineSize:this.borderLineSize,color:P(this.color),font:this.font&&this.font.clone(),haloColor:P(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};u([d({type:ae,json:{write:!0}})],wt.prototype,"backgroundColor",void 0),u([d({type:ae,json:{write:!0}})],wt.prototype,"borderLineColor",void 0),u([d({type:Number,json:{write:!0}})],wt.prototype,"borderLineSize",void 0),u([d({type:G2,json:{write:!0}})],wt.prototype,"font",void 0),u([d({...VU,json:{write:!0}})],wt.prototype,"horizontalAlignment",void 0),u([d({type:Boolean,json:{write:!0}})],wt.prototype,"kerning",void 0),u([d({type:ae,json:{write:!0}})],wt.prototype,"haloColor",void 0),u([d({type:Number,cast:Be,json:{write:!0}})],wt.prototype,"haloSize",void 0),u([d({type:Boolean,json:{write:!0}})],wt.prototype,"rightToLeft",void 0),u([d({type:Boolean,json:{write:!0}})],wt.prototype,"rotated",void 0),u([d({type:String,json:{write:!0}})],wt.prototype,"text",void 0),u([me({esriTS:"text"},{readOnly:!0})],wt.prototype,"type",void 0),u([d({...zU,json:{write:!0}})],wt.prototype,"verticalAlignment",void 0),u([d({type:Number,cast:Be,json:{write:!0}})],wt.prototype,"xoffset",void 0),u([d({type:Number,cast:Be,json:{write:!0}})],wt.prototype,"yoffset",void 0),u([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],wt.prototype,"angle",void 0),u([d({type:Number,json:{write:!0}})],wt.prototype,"width",void 0),u([d({type:Number})],wt.prototype,"lineWidth",void 0),u([se("lineWidth")],wt.prototype,"writeLineWidth",null),u([ze("lineWidth")],wt.prototype,"castLineWidth",null),u([d(jU)],wt.prototype,"lineHeight",void 0),u([se("lineHeight")],wt.prototype,"writeLineHeight",null),wt=sC=u([E("esri.symbols.TextSymbol")],wt);const xm=wt;var oC;const $ue=Z.getLogger("esri.symbols.WebStyleSymbol");let Fs=oC=class extends dn{constructor(e){super(e),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get fetchCacheKey(){const e=I(this.portal)?this.portal:Mr.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t?t.portal:void 0,super.read(e,t)}clone(){return new oC({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const r=I(t)?t.cache:null,i=r?this.fetchCacheKey:null;if(I(r)){const a=r.get(i);if(a)return a.clone()}const n=await xue();yt(t);const s=n.resolveWebStyleSymbol(this,{portal:this.portal},e,t);s.catch(a=>{$ue.error("#fetchSymbol()","Failed to create symbol from style",a)});const o=await s;return e==="webRef"&&o.type==="point-3d"||e==="cimRef"&&o.type==="cim"?(I(r)&&r.set(i,o.clone()),o):null}};function xue(){return V(()=>Promise.resolve().then(()=>vMe),void 0,import.meta.url)}u([d({json:{write:!1}})],Fs.prototype,"color",void 0),u([d({type:String,json:{write:!0}})],Fs.prototype,"styleName",void 0),u([d({type:Mr,json:{write:!1}})],Fs.prototype,"portal",void 0),u([d({type:String,json:{read:W3,write:gh}})],Fs.prototype,"styleUrl",void 0),u([d({type:Kd,json:{read:!1}})],Fs.prototype,"thumbnail",void 0),u([d({type:String,json:{write:!0}})],Fs.prototype,"name",void 0),u([me({styleSymbolReference:"web-style"},{readOnly:!0})],Fs.prototype,"type",void 0),u([d()],Fs.prototype,"fetchCacheKey",null),Fs=oC=u([E("esri.symbols.WebStyleSymbol")],Fs);const Ih=Fs;function W2(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function aa(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Xd={base:dn,key:"type",typeMap:{"simple-fill":ha,"picture-fill":rG,"picture-marker":Lv,"simple-line":hn,"simple-marker":rn,text:xm,"label-3d":B2,"line-3d":q2,"mesh-3d":Y3,"point-3d":Pd,"polygon-3d":Ov,"web-style":Ih,cim:Iv},errorContext:"symbol"},Eue={base:dn,key:"type",typeMap:{"picture-marker":Lv,"simple-marker":rn,text:xm,"web-style":Ih,cim:Iv},errorContext:"symbol"},Tue=fm({types:Xd}),sG={base:dn,key:"type",typeMap:{"simple-fill":ha,"picture-fill":rG,"picture-marker":Lv,"simple-line":hn,"simple-marker":rn,text:xm,"line-3d":q2,"mesh-3d":Y3,"point-3d":Pd,"polygon-3d":Ov,"web-style":Ih,cim:Iv},errorContext:"symbol"},Mue={base:dn,key:"type",typeMap:{text:xm,"label-3d":B2},errorContext:"symbol"},RN={base:dn,key:"type",typeMap:{"line-3d":q2,"mesh-3d":Y3,"point-3d":Pd,"polygon-3d":Ov,"web-style":Ih,cim:Iv},errorContext:"symbol"},Iue={base:dn,key:"type",typeMap:{"label-3d":B2},errorContext:"symbol"},oG=ia(Xd);function Cue(e){if(!e)return null;const t={};for(const r in e){const i=Li(e[r]);i&&(t[r]=i)}return Object.keys(t).length!==0?t:null}function kue(e){if(!I(e))return null;const t={};for(const r in e){const i=e[r];i&&(t[r]=i.toJSON())}return Object.keys(t).length!==0?t:null}let Ni=class extends pn(B){constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:Ug(),configurable:!0})}normalizeCtorArgs(e,t,r,i){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:r,popupTemplate:i}}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const t of[this.sourceLayer,this.layer])if(t){if("popupTemplate"in t&&t.popupTemplate)return t.popupTemplate;if(e&&"defaultPopupTemplate"in t&&I(t.defaultPopupTemplate))return t.defaultPopupTemplate}return null}getAttribute(e){return this.attributes&&this.attributes[e]}setAttribute(e,t){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:kue(this.aggregateGeometries),geometry:I(this.geometry)?this.geometry.toJSON():null,symbol:I(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){I(this.geometry)&&this.geometry.type==="mesh"&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(e,t,r,i){if(!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:t,newValue:r};e==="attributes"&&(n.attributeName=i),this.layer.graphicChanged(n)}};u([d({value:null,json:{read:Cue}})],Ni.prototype,"aggregateGeometries",null),u([d({value:null})],Ni.prototype,"attributes",null),u([d({value:null,types:Eh,json:{read:Li}})],Ni.prototype,"geometry",null),u([d({type:Boolean})],Ni.prototype,"isAggregate",void 0),u([d({clonable:"reference"})],Ni.prototype,"layer",void 0),u([d({type:Mh})],Ni.prototype,"popupTemplate",void 0),u([d({clonable:"reference"})],Ni.prototype,"sourceLayer",void 0),u([d({value:null,types:Xd})],Ni.prototype,"symbol",null),u([d({type:Boolean,value:!0})],Ni.prototype,"visible",null),Ni=u([E("esri.Graphic")],Ni),function(e){e.generateUID=Ug}(Ni||(Ni={}));const ln=Ni;class Q3{constructor(t,r){this.min=t,this.max=r,this.range=r-t}ndiff(t,r=0){return Math.ceil((t-r)/this.range)*this.range+r}_normalize(t,r,i,n=0,s=!1){return(i-=n)<t?i+=this.ndiff(t-i):i>r&&(i-=this.ndiff(i-r)),s&&i===r&&(i=t),i+n}normalize(t,r=0,i=!1){return this._normalize(this.min,this.max,t,r,i)}clamp(t,r=0){return an(t-r,this.min,this.max)+r}monotonic(t,r,i){return t<r?r:r+this.ndiff(t-r,i)}minimalMonotonic(t,r,i){return this._normalize(t,t+this.range,r,i)}center(t,r,i){return r=this.monotonic(t,r,i),this.normalize((t+r)/2,i)}diff(t,r,i){return this.monotonic(t,r,i)-t}shortestSignedDiff(t,r){t=this.normalize(t);const i=(r=this.normalize(r))-t,n=r<t?this.minimalMonotonic(t,r)-t:r-this.minimalMonotonic(r,t);return Math.abs(i)<Math.abs(n)?i:n}contains(t,r,i){return r=this.minimalMonotonic(t,r),(i=this.minimalMonotonic(t,i))>t&&i<r}}function K3(e){for(const t in e){const r=e[t];r instanceof Function&&(e[t]=r.bind(e))}return e}K3(new Q3(0,2*Math.PI));K3(new Q3(-Math.PI,Math.PI));const Lue=K3(new Q3(0,360));let Ra=class extends pn(B){constructor(...e){super(...e),this.position=new ye([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,r,i){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const n={position:e};return t!=null&&(n.heading=t),r!=null&&(n.tilt=r),i!=null&&(n.fov=i),n}return e}writePosition(e,t,r,i){const n=e.clone();n.x=as(e.x||0),n.y=as(e.y||0),n.z=e.hasZ?as(e.z||0):e.z,t[r]=n.write({},i)}readPosition(e,t){const r=new ye;return r.read(e,t),r.x=as(r.x||0),r.y=as(r.y||0),r.z=r.hasZ?as(r.z||0):r.z,r}equals(e){return!!e&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};u([d({type:ye,json:{write:{isRequired:!0}}})],Ra.prototype,"position",void 0),u([se("position")],Ra.prototype,"writePosition",null),u([te("position")],Ra.prototype,"readPosition",null),u([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),ze(e=>Lue.normalize(as(e)))],Ra.prototype,"heading",void 0),u([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),ze(e=>an(as(e),-180,180))],Ra.prototype,"tilt",void 0),u([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Ra.prototype,"fov",void 0),Ra=u([E("esri.Camera")],Ra);const Oue=Ra;var aC;let nu=aC=class extends B{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new aC({rotation:this.rotation,scale:this.scale,targetGeometry:I(this.targetGeometry)?this.targetGeometry.clone():null,camera:I(this.camera)?this.camera.clone():null})}};function jx(){return{enabled:!this.camera}}u([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:jx}}}}})],nu.prototype,"rotation",void 0),u([ze("rotation")],nu.prototype,"castRotation",null),u([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:jx}}}}})],nu.prototype,"scale",void 0),u([d({types:Eh,json:{read:Li,write:!0,origins:{"web-scene":{read:Li,write:{overridePolicy:jx}}}}})],nu.prototype,"targetGeometry",void 0),u([d({type:Oue,json:{write:!0}})],nu.prototype,"camera",void 0),nu=aC=u([E("esri.Viewpoint")],nu);const po=nu;class nS{constructor(t=r=>r.values().next().value){this._peeker=t,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(this._items.size===0)return;let t;for(t of this._items);return t}peek(){if(this._items.size!==0)return this._peeker(this._items)}push(t){this.contains(t)||this._items.add(t)}contains(t){return this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),t}remove(t){this._items.delete(t)}filter(t){return this._items.forEach(r=>{t(r)||this._items.delete(r)}),this}}var Ii;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(Ii||(Ii={}));let Aue=0;function aG(){return Aue++}function Pue(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function sS(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function lG(e,t,r,i){if(t.type===Ii.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==Ii.INVOKE&&t.type!==Ii.RESPONSE)return void e.postMessage(t);let n;Pue(r)?(n=FN(r.transferList),t.data=r.result):(n=FN(i),t.data=r),n?e.postMessage(t,n):e.postMessage(t)}function H0(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function FN(e){if(!e||!e.length)return null;if(j("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(r=>!Rue(r));return t.length?t:null}function Rue(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}const Fue={statsWorker:()=>V(()=>import("./statsWorker.c15273f1.js"),["statsWorker.c15273f1.js","quantizationUtils.d80604ad.js","utils.dbf7b741.js","ClassBreaksDefinition.14c17fda.js"],import.meta.url),geometryEngineWorker:()=>V(()=>import("./geometryEngineWorker.06591522.js"),["geometryEngineWorker.06591522.js","geometryEngineJSON.5a1f200e.js","geometryEngineBase.0f0d7ecf.js","json.8bd707cf.js"],import.meta.url),CSVSourceWorker:()=>V(()=>import("./CSVSourceWorker.23fb3568.js"),["CSVSourceWorker.23fb3568.js","json.8bd707cf.js","FeatureStore.51e3056b.js","PooledRBush.29c66f24.js","centroid.e2572cbc.js","projectionSupport.91dd2487.js","QueryEngine.56720835.js","QueryEngineResult.47bfdd03.js","quantizationUtils.d80604ad.js","WhereClause.7fe2a07f.js","utils.dbf7b741.js","ClassBreaksDefinition.14c17fda.js","utils.7c73fec8.js","timeSupport.e532e781.js"],import.meta.url),EdgeProcessingWorker:()=>V(()=>import("./EdgeProcessingWorker.c41ac2c6.js"),["EdgeProcessingWorker.c41ac2c6.js","deduplicate.5b46d475.js","InterleavedLayout.ac4c8284.js","BufferView.b9bb9564.js","types.4defa253.js","VertexAttribute.c697ed2b.js","enums.c60b1dad.js","VertexElementDescriptor.2400a91d.js"],import.meta.url),ElevationSamplerWorker:()=>V(()=>import("./ElevationSamplerWorker.920e8557.js"),["ElevationSamplerWorker.920e8557.js","PooledRBush.29c66f24.js","georeference.26da377c.js","quatf64.2f917dd7.js","mat4f64.0958f530.js","quat.19c5a44d.js","BufferView.b9bb9564.js","vec33.5c4b5d26.js"],import.meta.url),FeatureServiceSnappingSourceWorker:()=>V(()=>import("./FeatureServiceSnappingSourceWorker.138b2401.js"),["FeatureServiceSnappingSourceWorker.138b2401.js","FeatureStore.51e3056b.js","PooledRBush.29c66f24.js","centroid.e2572cbc.js","QueryEngine.56720835.js","QueryEngineResult.47bfdd03.js","quantizationUtils.d80604ad.js","WhereClause.7fe2a07f.js","utils.dbf7b741.js","ClassBreaksDefinition.14c17fda.js","projectionSupport.91dd2487.js","json.8bd707cf.js","utils.7c73fec8.js","timeSupport.e532e781.js"],import.meta.url),GeoJSONSourceWorker:()=>V(()=>import("./GeoJSONSourceWorker.59082b91.js"),["GeoJSONSourceWorker.59082b91.js","FeatureStore.51e3056b.js","PooledRBush.29c66f24.js","centroid.e2572cbc.js","projectionSupport.91dd2487.js","json.8bd707cf.js","QueryEngine.56720835.js","QueryEngineResult.47bfdd03.js","quantizationUtils.d80604ad.js","WhereClause.7fe2a07f.js","utils.dbf7b741.js","ClassBreaksDefinition.14c17fda.js","utils.7c73fec8.js","timeSupport.e532e781.js","geojson.8a16c745.js","sourceUtils.e8ea987f.js"],import.meta.url),LercWorker:()=>V(()=>import("./LercWorker.2f92ca25.js"),[],import.meta.url),MemorySourceWorker:()=>V(()=>import("./MemorySourceWorker.0e0930c8.js"),["MemorySourceWorker.0e0930c8.js","objectIdUtils.5d771dff.js","FeatureStore.51e3056b.js","PooledRBush.29c66f24.js","centroid.e2572cbc.js","projectionSupport.91dd2487.js","json.8bd707cf.js","QueryEngine.56720835.js","QueryEngineResult.47bfdd03.js","quantizationUtils.d80604ad.js","WhereClause.7fe2a07f.js","utils.dbf7b741.js","ClassBreaksDefinition.14c17fda.js","utils.7c73fec8.js","timeSupport.e532e781.js","sourceUtils.e8ea987f.js"],import.meta.url),PBFDecoderWorker:()=>V(()=>import("./PBFDecoderWorker.3e581854.js"),[],import.meta.url),Pipeline:()=>V(()=>import("./Pipeline.b26a43b2.js"),["Pipeline.b26a43b2.js","QueryEngine.56720835.js","QueryEngineResult.47bfdd03.js","quantizationUtils.d80604ad.js","WhereClause.7fe2a07f.js","utils.dbf7b741.js","ClassBreaksDefinition.14c17fda.js","projectionSupport.91dd2487.js","json.8bd707cf.js","utils.7c73fec8.js","timeSupport.e532e781.js","FeatureStore2D.b51fcfb8.js","CircularArray.90fbd3f7.js","ComputedAttributeStorage.bc2407ee.js","centroid.e2572cbc.js","enums.9bd521fc.js","visualVariablesUtils.ebcd76ea.js","Utils.0c18ff61.js","number.6e30c64a.js","enums.c60b1dad.js","Texture.8d083704.js","VertexElementDescriptor.2400a91d.js","visualVariablesUtils.64f629b2.js","ogcFeatureUtils.33e6a407.js","geojson.8a16c745.js"],import.meta.url),PointCloudWorker:()=>V(()=>import("./PointCloudWorker.ba34ebe5.js"),["PointCloudWorker.ba34ebe5.js","quat.19c5a44d.js","quatf64.2f917dd7.js","vec3f32.ca7a14c1.js","PointCloudUniqueValueRenderer.54a3c516.js","VertexAttribute.c697ed2b.js"],import.meta.url),RasterWorker:()=>V(()=>import("./RasterWorker.1075cb33.js"),["RasterWorker.1075cb33.js","pixelUtils.f7c7bbd7.js","RasterSymbolizer.c9cb9e8d.js","rasterProjectionHelper.813268f1.js","dataUtils.ed1da215.js","utils.b2b70a0a.js"],import.meta.url),SceneLayerSnappingSourceWorker:()=>V(()=>import("./SceneLayerSnappingSourceWorker.ecde6a31.js"),["SceneLayerSnappingSourceWorker.ecde6a31.js","lineSegment.fd978b5e.js","vectorStacks.e32f3548.js","quatf64.2f917dd7.js","mat4f64.0958f530.js","sphere.9fd8a0ce.js","QueryEngineResult.47bfdd03.js","quantizationUtils.d80604ad.js","WhereClause.7fe2a07f.js","utils.dbf7b741.js","ClassBreaksDefinition.14c17fda.js","projectionSupport.91dd2487.js","json.8bd707cf.js","utils.7c73fec8.js","EdgeProcessingWorker.c41ac2c6.js","deduplicate.5b46d475.js","InterleavedLayout.ac4c8284.js","BufferView.b9bb9564.js","types.4defa253.js","VertexAttribute.c697ed2b.js","enums.c60b1dad.js","VertexElementDescriptor.2400a91d.js"],import.meta.url),SceneLayerWorker:()=>V(()=>import("./SceneLayerWorker.96221e54.js"),["SceneLayerWorker.96221e54.js","sphere.9fd8a0ce.js","vectorStacks.e32f3548.js","quatf64.2f917dd7.js","mat4f64.0958f530.js"],import.meta.url),WFSSourceWorker:()=>V(()=>import("./WFSSourceWorker.468483a3.js"),["WFSSourceWorker.468483a3.js","FeatureStore.51e3056b.js","PooledRBush.29c66f24.js","centroid.e2572cbc.js","projectionSupport.91dd2487.js","json.8bd707cf.js","QueryEngine.56720835.js","QueryEngineResult.47bfdd03.js","quantizationUtils.d80604ad.js","WhereClause.7fe2a07f.js","utils.dbf7b741.js","ClassBreaksDefinition.14c17fda.js","utils.7c73fec8.js","timeSupport.e532e781.js","geojson.8a16c745.js","sourceUtils.e8ea987f.js","wfsUtils.7a755e3c.js","xmlUtils.fe1322c5.js"],import.meta.url),WorkerTileHandler:()=>V(()=>import("./WorkerTileHandler.14de112c.js"),["WorkerTileHandler.14de112c.js","enums.58eeda20.js","GeometryUtils.f3664fe1.js","BidiEngine.95523203.js","config.ded6d251.js","StyleDefinition.d46cb482.js","enums.9bd521fc.js","Geometry.f2d62961.js","TileClipper.363cae3c.js","GeometryUtils.b4d0dc88.js","StyleRepository.9c7eb0a7.js","enums.c60b1dad.js","VertexElementDescriptor.2400a91d.js","earcut.f65e2fcc.js"],import.meta.url)},{CLOSE:NN,ABORT:DN,INVOKE:jN,RESPONSE:ly,OPEN_PORT:VN,ON:Nue}=Ii,Due=2;class jue{constructor(t){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}push(t){t.type===Ii.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class Hi{constructor(t,r,i){this._port=t,this._getNextJob=i,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new jue(n=>this._onInvokeMessage(n)),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(t){const r=new MessageChannel;let i;i=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const n=new Hi(r.port1,{channel:r,client:i},()=>null);return typeof i=="object"&&"remoteClient"in i&&(i.remoteClient=n),Hi.clients.set(n,i),r.port2}static loadWorker(t){const r=Fue[t];return r?r():Promise.resolve(null)}close(){this._post({type:NN}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,r,i){const n=i&&i.signal,s=i&&i.transferList;if(!this._port)return Promise.reject(new O("worker:port-closed",`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:r}));const o=aG();return new Promise((a,l)=>{if(go(n))return this._processWork(),void l(Ot());const c=vs(n,()=>{const f=this._outJobs.get(o);f&&(this._outJobs.delete(o),this._processWork(),en(f.abortHandle),this._post({type:DN,jobId:o}),l(Ot()))}),h={resolve:a,reject:l,abortHandle:c,debugInfo:t};this._outJobs.set(o,h),this._post({type:jN,jobId:o,methodName:t,abortable:n!=null},r,s)})}on(t,r){const i=new MessageChannel;function n(s){r(s.data)}return this._port.postMessage({type:Ii.ON,eventType:t,port:i.port2},[i.port2]),i.port1.addEventListener("message",n),i.port1.start(),{remove(){i.port1.postMessage({type:Ii.CLOSE}),i.port1.close(),i.port1.removeEventListener("message",n)}}}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:VN,port:t.port2}),t.port1}_processWork(){if(this._outJobs.size>=Due)return;const t=this._getNextJob();if(!t)return;const{methodName:r,data:i,invokeOptions:n,deferred:s}=t;this.invoke(r,i,n).then(o=>s.resolve(o)).catch(o=>s.reject(o))}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{en(t.abortHandle),t.reject(Ot(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(t){I(this._schedule)?this._schedule(()=>this._processMessage(t)):this._processMessage(t)}_processMessage(t){const r=H0(t);if(r)switch(r.type){case ly:this._onResponseMessage(r);break;case jN:this._invokeQueue.push(r);break;case DN:this._onAbortMessage(r);break;case NN:this._onCloseMessage();break;case VN:this._onOpenPortMessage(r);break;case Nue:this._onOnMessage(r)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,n=r.get(i);this._invokeQueue.push(t),n&&(n.controller&&n.controller.abort(),r.delete(i))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&Hi.clients.get(this)===t&&t.destroy(),Hi.clients.delete(this),t&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:r,jobId:i,data:n,abortable:s}=t,o=s?new AbortController:null,a=this._inJobs;let l,c=this._client,h=c[r];try{if(!h&&r&&r.includes(".")){const f=r.split(".");for(let m=0;m<f.length-1;m++)c=c[f[m]],h=c[f[m+1]]}if(typeof h!="function")throw new TypeError(`${r} is not a function`);l=h.call(c,n,{client:this,signal:o?o.signal:null})}catch(f){return void this._post({type:ly,jobId:i,error:sS(f)})}xl(l)?(a.set(i,{controller:o,promise:l}),l.then(f=>{a.has(i)&&(a.delete(i),this._post({type:ly,jobId:i},f))},f=>{a.has(i)&&(a.delete(i),ui(f)||this._post({type:ly,jobId:i,error:sS(f||{message:`Error encountered at method ${r}`})}))})):this._post({type:ly,jobId:i},l)}_onOpenPortMessage(t){new Hi(t.port,{client:this._client},()=>null)}_onOnMessage(t){const{port:r}=t,i=this._client.on(t.eventType,s=>{r.postMessage(s)}),n=M2(t.port,"message",s=>{H0(s).type===Ii.CLOSE&&(n.remove(),i.remove(),r.close())})}_onResponseMessage(t){const{jobId:r,error:i,data:n}=t,s=this._outJobs;if(!s.has(r))return;const o=s.get(r);this._processWork(),s.delete(r),en(o.abortHandle),i?o.reject(O.fromJSON(JSON.parse(i))):o.resolve(n)}_post(t,r,i){return lG(this._port,t,r,i)}}Hi.kernelInfo={revision:i7,version:n7,buildDate:r7},Hi.clients=new Map;const Vue=Z.getLogger("esri.core.workers.Connection");class zue{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new nS}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(t,r){return new Promise((i,n)=>{let s=!0;const o=a=>{yt(r.signal),s&&(s=!1,a())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let a=0;a<t.length;++a){const l=t[a];xl(l)?this._clientPromises[a]=l.then(c=>(this._clients[a]=new Hi(c,r,()=>this._ongoingJobsQueue.pop()),o(i),this._clients[a]),()=>(o(n),null)):(this._clients[a]=new Hi(l,r,()=>this._ongoingJobsQueue.pop()),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(i))}})}broadcast(t,r,i){const n=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];n[s]=o.then(a=>a.invoke(t,r,i))}return n}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.deferred.reject(Ot(`Worker closing, aborting job calling '${t.methodName}'`));for(const r of this._clientPromises)r.then(i=>i.close());this._clients.length=0,this._clientPromises.length=0}invoke(t,r,i){let n=null;Array.isArray(i)?(Vue.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),n={transferList:i}):n=i;const s=gl();this._ongoingJobsQueue.push({methodName:t,data:r,invokeOptions:n,deferred:s});for(let o=0;o<this._clientPromises.length;o++){const a=this._clients[o];a?a.jobAdded():this._clientPromises[o].then(l=>l.jobAdded())}return s.promise}on(t,r){return Promise.all(this._clientPromises).then(()=>$2(this._clients.map(i=>i.on(t,r))))}openPorts(){return new Promise(t=>{const r=new Array(this._clientPromises.length);let i=r.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(s=>{r[n]=s.openPort(),--i==0&&t(r)})})}get test(){return{numClients:this._clients.length}}}const uG=Z.getLogger("esri.intl");function is(e,t,r={}){const{format:i={}}=r;return ra(e,n=>Uue(n,t,i))}function Uue(e,t,r){let i,n;const s=e.indexOf(":");if(s===-1?i=e.trim():(i=e.slice(0,s).trim(),n=e.slice(s+1).trim()),!i)return"";const o=hm(i,t);if(o==null)return"";const a=r[n]||r[i];return a?Gue(o,a):n?Bue(o,n):X3(o)}function Gue(e,t){switch(t.type){case"date":return wl(e,t.intlOptions);case"number":return sa(e,t.intlOptions);default:return uG.warn("missing format descriptor for key {key}"),X3(e)}}function Bue(e,t){switch(t.toLowerCase()){case"dateformat":return wl(e);case"numberformat":return sa(e);default:return uG.warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?wl(e):/^numberformat/i.test(t)?sa(e):X3(e)}}function X3(e){switch(typeof e){case"string":return e;case"number":return sa(e);case"boolean":return""+e;default:return e instanceof Date?wl(e):""}}async function que(e,t,r,i){const n=t.exec(r);if(!n)throw new O("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);const s=n[1]?`${n[1]}/`:"",o=n[2],a=hse(i),l=`${s}${o}.json`,c=a?`${s}${o}_${a}.json`:l;let h;try{h=await zN(e(c))}catch(f){if(c===l)throw new O("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:f});try{h=await zN(e(l))}catch(m){throw new O("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:m})}}return h}async function zN(e){if(I(UN.fetchBundleAsset))return UN.fetchBundleAsset(e);const t=await nt(e,{responseType:"text"});return JSON.parse(t.data)}class Wue{constructor({base:t="",pattern:r,location:i=new URL(window.location.href)}){let n;n=typeof i=="string"?s=>new URL(s,new URL(i,window.location.href)).href:i instanceof URL?s=>new URL(s,i).href:i,this.pattern=typeof r=="string"?new RegExp(`^${r}`):r,this.getAssetUrl=n,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)/)?(.*)$`)}fetchMessageBundle(t,r){return que(this.getAssetUrl,this.matcher,t,r)}}function Hue(e){return new Wue(e)}const UN={};dse(Hue({pattern:"esri/",location:De}));const GN={};function Jue(e,t){for(const r of e)if(r.name===t.name)return;e.push(t)}function Zue(e){var r;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages&&e.packages.concat()||[],paths:{...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=GN.baseUrl),(r=GN.packages)==null||r.forEach(i=>{Jue(t.packages,i)}),t}class Yue{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(r=>{this[r]=(...i)=>t[r](...i)})}}class v_{constructor(){this._dispatcher=new Yue,this._workerPostMessage({type:Ii.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){Fb(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,r,i){this._dispatcher.addEventListener(t,r,i)}removeEventListener(t,r,i){this._dispatcher.removeEventListener(t,r,i)}_workerPostMessage(t){Fb(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const r=H0(t);if(r&&r.type===Ii.OPEN){const{modulePath:i,jobId:n}=r;let s=await Hi.loadWorker(i);s||(s=await V(()=>import(i),[],import.meta.url));const o=Hi.connect(s);this._workerPostMessage({type:Ii.OPENED,jobId:n,data:o})}}}const lC=Z.getLogger("esri.core.workers"),{HANDSHAKE:Que}=Ii,Kue='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let A1,P1;const BN="Failed to create Worker. Fallback to execute module in main thread";async function Xue(){if(!j("esri-workers")||(j("mozilla"),0))return qN(new v_);if(!A1&&!P1)try{const t=Kue.replace('"{CONFIGURATION}"',`'${ece()}'`);A1=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){P1=t||{}}let e;if(A1)try{e=new Worker(A1,{name:"esri-worker-"+tce++})}catch{lC.warn(BN,P1),e=new v_}else lC.warn(BN,P1),e=new v_;return qN(e)}async function qN(e){return new Promise(t=>{function r(n){const s=H0(n);s&&s.type===Que&&(e.removeEventListener("message",r),e.removeEventListener("error",i),t(e))}function i(n){n.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",i),lC.warn("Failed to create Worker. Fallback to execute module in main thread",n),(e=new v_).addEventListener("message",r),e.addEventListener("error",i)}e.addEventListener("message",r),e.addEventListener("error",i)})}function ece(){let e;if(Ve.default!=null){const n={...Ve};delete n.default,e=JSON.parse(JSON.stringify(n))}else e=JSON.parse(JSON.stringify(Ve));e.assetsPath=no(e.assetsPath),e.request.interceptors=[],e.log.interceptors=[],e.locale=An(),e.has={"esri-csp-restrictions":j("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":j("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":j("esri-2d-query-centroid-enabled"),"featurelayer-pbf":j("featurelayer-pbf"),"featurelayer-simplify-thresholds":j("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":j("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":j("featurelayer-simplify-mobile-factor"),"esri-atomics":j("esri-atomics"),"esri-shared-array-buffer":j("esri-shared-array-buffer"),"esri-tiles-debug":j("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":j("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":j("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=no(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=no(e.workers.workerPath):e.workers.workerPath=no(De("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=Ve.workers.loaderConfig,r=Zue({baseUrl:t==null?void 0:t.baseUrl,locale:An(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]}),i={version:n7,buildDate:r7,revision:i7};return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:i})}let tce=0;const rce=Z.getLogger("esri.core.workers"),{ABORT:WN,INVOKE:ice,OPEN:nce,OPENED:sce,RESPONSE:uy}=Ii;class eA{constructor(t,r){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=r,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",i=>{i.preventDefault(),rce.error(i)})}static async create(t){const r=await Xue();return new eA(r,t)}terminate(){this.worker.terminate()}async open(t,r={}){const{signal:i}=r,n=aG();return new Promise((s,o)=>{const a={resolve:s,reject:o,abortHandle:JO(i,()=>{this._outJobs.delete(n),this._post({type:WN,jobId:n})})};this._outJobs.set(n,a),this._post({type:nce,jobId:n,modulePath:t})})}_onMessage(t){const r=H0(t);if(r)switch(r.type){case sce:this._onOpenedMessage(r);break;case uy:this._onResponseMessage(r);break;case WN:this._onAbortMessage(r);break;case ice:this._onInvokeMessage(r)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,n=r.get(i);n&&(n.controller&&n.controller.abort(),r.delete(i))}_onInvokeMessage(t){const{methodName:r,jobId:i,data:n,abortable:s}=t,o=s?new AbortController:null,a=this._inJobs,l=fne[r];let c;try{if(typeof l!="function")throw new TypeError(`${r} is not a function`);c=l.call(null,n,{signal:o?o.signal:null})}catch(h){return void this._post({type:uy,jobId:i,error:sS(h)})}xl(c)?(a.set(i,{controller:o,promise:c}),c.then(h=>{a.has(i)&&(a.delete(i),this._post({type:uy,jobId:i},h))},h=>{a.has(i)&&(a.delete(i),h||(h={message:"Error encountered at method"+r}),ui(h)||this._post({type:uy,jobId:i,error:sS(h||{message:`Error encountered at method ${r}`})}))})):this._post({type:uy,jobId:i},c)}_onOpenedMessage(t){const{jobId:r,data:i}=t,n=this._outJobs.get(r);n&&(this._outJobs.delete(r),en(n.abortHandle),n.resolve(i))}_onResponseMessage(t){const{jobId:r,error:i,data:n}=t,s=this._outJobs.get(r);s&&(this._outJobs.delete(r),en(s.abortHandle),i?s.reject(O.fromJSON(JSON.parse(i))):s.resolve(n))}_post(t,r,i){return lG(this.worker,t,r,i)}}let Rd=j("esri-workers-debug")?1:j("host-browser")?navigator.hardwareConcurrency-1:0;Rd||(Rd=j("safari")&&j("mac")||j("trident")?7:2);let HN=0;const w_=[];function oce(){dG()}async function R1(e,t){const r=new zue;return await r.open(e,t),r}async function cG(e,t={}){if(typeof e!="string")throw new O("workers:undefined-module","modulePath is missing");let r=t.strategy||"distributed";if(j("host-webworker")&&!j("esri-workers")&&(r="local"),r==="local"){let i=await Hi.loadWorker(e);i||(i=await V(()=>import(e),[],import.meta.url)),yt(t.signal);const n=t.client||i;return R1([Hi.connect(i)],{...t,client:n})}if(await dG(),yt(t.signal),r==="dedicated"){const i=HN++%Rd;return R1([await w_[i].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const i=Math.min(t.maxNumWorkers,Rd);if(i<Rd){const n=new Array(i);for(let s=0;s<i;++s){const o=HN++%Rd;n[s]=w_[o].open(e,t)}return R1(n,t)}}return R1(w_.map(i=>i.open(e,t)),t)}let F1=null;async function dG(){if(F1)return F1;new AbortController;const e=[];for(let t=0;t<Rd;t++){const r=eA.create(t).then(i=>(w_[t]=i,i));e.push(r)}return F1=Promise.all(e),F1}function tA(e){return new Te({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const hG=tA(ht),oS=tA(ul),aS=tA(uc),ace=new Te({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${ht.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});function UDe(e){return e&&(ym(e)||e===oS)?oS:e&&(gm(e)||e===aS)?aS:hG}function lce(e){return e&&(ym(e)||e===oS)?ul:e&&(gm(e)||e===aS)?uc:ht}function GDe(e){return d3(e)?ul:h3(e)?uc:ht}const BDe=39.37,uce=ht.radius*Math.PI/200,pG=/UNIT\[([^\]]+)\]\]$/i,eh=$,fG=/UNIT\[([^\]]+)\]/i,cce=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),dce=Yr()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),$o=e=>e*e,Al=e=>e*e*e,J0={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:$o(.001)},"square-centimeters":{inBaseUnits:$o(.01)},"square-decimeters":{inBaseUnits:$o(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:$o(1e3)},"square-inches":{inBaseUnits:$o(.0254)},"square-feet":{inBaseUnits:$o(.3048)},"square-yards":{inBaseUnits:$o(.9144)},"square-miles":{inBaseUnits:$o(1609.344)},"square-us-feet":{inBaseUnits:$o(1200/3937)},acres:{inBaseUnits:.0015625*$o(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Al(.001)},"cubic-centimeters":{inBaseUnits:1e3*Al(.01)},"cubic-decimeters":{inBaseUnits:1e3*Al(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Al(1e3)},"cubic-inches":{inBaseUnits:1e3*Al(.0254)},"cubic-feet":{inBaseUnits:1e3*Al(.3048)},"cubic-yards":{inBaseUnits:1e3*Al(.9144)},"cubic-miles":{inBaseUnits:1e3*Al(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},hce=(()=>{const e={};for(const t in J0)for(const r in J0[t].units)e[r]=t;return e})();function pce(e,t,r){return e*J0[r].units[t].inBaseUnits}function fce(e,t,r){return e/J0[r].units[t].inBaseUnits}function uC(e){const t=hce[e];if(!t)throw new Error("unknown type");return t}function JN(e,t=null){return t=t||uC(e),J0[t].baseUnit===e}function Qn(e,t,r){if(t===r)return e;const i=uC(t);if(i!==uC(r))throw new Error("incompatible units");const n=JN(t,i)?e:pce(e,t,i);return JN(r,i)?n:fce(n,r,i)}function mce(e,t,r){return Qn(e,t,"meters")/(r*Math.PI/180)}function mG(e){return dce.fromJSON(e.toLowerCase())||null}function Yf(e){if(e&&typeof e=="object"&&!lne(e))return 1;const t=Em(e);return t>1e5?1:t}function yce(e){return Em(e)>=(e instanceof Te?lce(e).metersPerDegree:1e5)?"meters":vce(e)}function Em(e,t=ht.metersPerDegree){return S2(gce(e,!0),t)}function gce(e,t=!1){let r,i,n=null;if(e!=null&&(typeof e=="object"?(r=e.wkid,i=e.wkt):typeof e=="number"?r=e:typeof e=="string"&&(i=e)),r){if(d3(r))return ul.metersPerDegree;if(h3(r))return uc.metersPerDegree;n=eh.values[eh[r]],!n&&t&&cce.has(r)&&(n=uce)}else i&&(vG(i)?n=ZN(pG.exec(i),n):gG(i)&&(n=ZN(fG.exec(i),n)));return n}function ZN(e,t){return e&&e[1]?yG(e[1]):t}function yG(e){return parseFloat(e.split(",")[1])}function vce(e){let t,r,i=null;if(e!=null&&(typeof e=="object"?(t=e.wkid,r=e.wkt):typeof e=="number"?t=e:typeof e=="string"&&(r=e)),t)i=eh.units[eh[t]];else if(r){const n=vG(r)?pG:gG(r)?fG:null;if(n){const s=n.exec(r);s&&s[1]&&(i=_ce(s[1]))}}return I(i)?mG(i):null}function gG(e){return/^GEOCCS/i.test(e)}function vG(e){return/^PROJCS/i.test(e)}const wce=1e-7;function _ce(e){const t=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let r=t&&t[1];if(!r||!eh.units.includes(r)){const i=yG(e);r=null;const n=eh.values;for(let s=0;s<n.length;++s)if(Math.abs(i-n[s])<wce){r=eh.units[s];break}}return r}const wG={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},_G={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},bce=Yr()(wG),Sce=Yr()(_G);Yr()({...wG,..._G});function $ce(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function vc(e,t,r,i,n,s,o,a,l,c,h,f,m,y,g,v,_){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=c,e[9]=h,e[10]=f,e[11]=m,e[12]=y,e[13]=g,e[14]=v,e[15]=_,e}function rA(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function El(e,t){if(e===t){const r=t[1],i=t[2],n=t[3],s=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=s,e[11]=t[14],e[12]=n,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function xce(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],f=t[9],m=t[10],y=t[11],g=t[12],v=t[13],_=t[14],w=t[15],b=r*a-i*o,S=r*l-n*o,M=r*c-s*o,T=i*l-n*a,k=i*c-s*a,N=n*c-s*l,F=h*v-f*g,q=h*_-m*g,z=h*w-y*g,Q=f*_-m*v,K=f*w-y*v,ce=m*w-y*_;let ie=b*ce-S*K+M*Q+T*z-k*q+N*F;return ie?(ie=1/ie,e[0]=(a*ce-l*K+c*Q)*ie,e[1]=(n*K-i*ce-s*Q)*ie,e[2]=(v*N-_*k+w*T)*ie,e[3]=(m*k-f*N-y*T)*ie,e[4]=(l*z-o*ce-c*q)*ie,e[5]=(r*ce-n*z+s*q)*ie,e[6]=(_*M-g*N-w*S)*ie,e[7]=(h*N-m*M+y*S)*ie,e[8]=(o*K-a*z+c*F)*ie,e[9]=(i*z-r*K-s*F)*ie,e[10]=(g*k-v*M+w*b)*ie,e[11]=(f*M-h*k-y*b)*ie,e[12]=(a*q-o*Q-l*F)*ie,e[13]=(r*Q-i*q+n*F)*ie,e[14]=(v*S-g*T-_*b)*ie,e[15]=(h*T-f*S+m*b)*ie,e):null}function Ece(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],f=t[9],m=t[10],y=t[11],g=t[12],v=t[13],_=t[14],w=t[15];return e[0]=a*(m*w-y*_)-f*(l*w-c*_)+v*(l*y-c*m),e[1]=-(i*(m*w-y*_)-f*(n*w-s*_)+v*(n*y-s*m)),e[2]=i*(l*w-c*_)-a*(n*w-s*_)+v*(n*c-s*l),e[3]=-(i*(l*y-c*m)-a*(n*y-s*m)+f*(n*c-s*l)),e[4]=-(o*(m*w-y*_)-h*(l*w-c*_)+g*(l*y-c*m)),e[5]=r*(m*w-y*_)-h*(n*w-s*_)+g*(n*y-s*m),e[6]=-(r*(l*w-c*_)-o*(n*w-s*_)+g*(n*c-s*l)),e[7]=r*(l*y-c*m)-o*(n*y-s*m)+h*(n*c-s*l),e[8]=o*(f*w-y*v)-h*(a*w-c*v)+g*(a*y-c*f),e[9]=-(r*(f*w-y*v)-h*(i*w-s*v)+g*(i*y-s*f)),e[10]=r*(a*w-c*v)-o*(i*w-s*v)+g*(i*c-s*a),e[11]=-(r*(a*y-c*f)-o*(i*y-s*f)+h*(i*c-s*a)),e[12]=-(o*(f*_-m*v)-h*(a*_-l*v)+g*(a*m-l*f)),e[13]=r*(f*_-m*v)-h*(i*_-n*v)+g*(i*m-n*f),e[14]=-(r*(a*_-l*v)-o*(i*_-n*v)+g*(i*l-n*a)),e[15]=r*(a*m-l*f)-o*(i*m-n*f)+h*(i*l-n*a),e}function Tce(e){const t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],h=e[9],f=e[10],m=e[11],y=e[12],g=e[13],v=e[14],_=e[15];return(t*o-r*s)*(f*_-m*v)-(t*a-i*s)*(h*_-m*g)+(t*l-n*s)*(h*v-f*g)+(r*a-i*o)*(c*_-m*y)-(r*l-n*o)*(c*v-f*y)+(i*l-n*a)*(c*g-h*y)}function bG(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],m=t[9],y=t[10],g=t[11],v=t[12],_=t[13],w=t[14],b=t[15];let S=r[0],M=r[1],T=r[2],k=r[3];return e[0]=S*i+M*a+T*f+k*v,e[1]=S*n+M*l+T*m+k*_,e[2]=S*s+M*c+T*y+k*w,e[3]=S*o+M*h+T*g+k*b,S=r[4],M=r[5],T=r[6],k=r[7],e[4]=S*i+M*a+T*f+k*v,e[5]=S*n+M*l+T*m+k*_,e[6]=S*s+M*c+T*y+k*w,e[7]=S*o+M*h+T*g+k*b,S=r[8],M=r[9],T=r[10],k=r[11],e[8]=S*i+M*a+T*f+k*v,e[9]=S*n+M*l+T*m+k*_,e[10]=S*s+M*c+T*y+k*w,e[11]=S*o+M*h+T*g+k*b,S=r[12],M=r[13],T=r[14],k=r[15],e[12]=S*i+M*a+T*f+k*v,e[13]=S*n+M*l+T*m+k*_,e[14]=S*s+M*c+T*y+k*w,e[15]=S*o+M*h+T*g+k*b,e}function Mce(e,t,r){const i=r[0],n=r[1],s=r[2];if(t===e)e[12]=t[0]*i+t[4]*n+t[8]*s+t[12],e[13]=t[1]*i+t[5]*n+t[9]*s+t[13],e[14]=t[2]*i+t[6]*n+t[10]*s+t[14],e[15]=t[3]*i+t[7]*n+t[11]*s+t[15];else{const o=t[0],a=t[1],l=t[2],c=t[3],h=t[4],f=t[5],m=t[6],y=t[7],g=t[8],v=t[9],_=t[10],w=t[11];e[0]=o,e[1]=a,e[2]=l,e[3]=c,e[4]=h,e[5]=f,e[6]=m,e[7]=y,e[8]=g,e[9]=v,e[10]=_,e[11]=w,e[12]=o*i+h*n+g*s+t[12],e[13]=a*i+f*n+v*s+t[13],e[14]=l*i+m*n+_*s+t[14],e[15]=c*i+y*n+w*s+t[15]}return e}function Ice(e,t,r){const i=r[0],n=r[1],s=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Cce(e,t,r,i){let n,s,o,a,l,c,h,f,m,y,g,v,_,w,b,S,M,T,k,N,F,q,z,Q,K=i[0],ce=i[1],ie=i[2],Oe=Math.sqrt(K*K+ce*ce+ie*ie);return Oe<$e?null:(Oe=1/Oe,K*=Oe,ce*=Oe,ie*=Oe,n=Math.sin(r),s=Math.cos(r),o=1-s,a=t[0],l=t[1],c=t[2],h=t[3],f=t[4],m=t[5],y=t[6],g=t[7],v=t[8],_=t[9],w=t[10],b=t[11],S=K*K*o+s,M=ce*K*o+ie*n,T=ie*K*o-ce*n,k=K*ce*o-ie*n,N=ce*ce*o+s,F=ie*ce*o+K*n,q=K*ie*o+ce*n,z=ce*ie*o-K*n,Q=ie*ie*o+s,e[0]=a*S+f*M+v*T,e[1]=l*S+m*M+_*T,e[2]=c*S+y*M+w*T,e[3]=h*S+g*M+b*T,e[4]=a*k+f*N+v*F,e[5]=l*k+m*N+_*F,e[6]=c*k+y*N+w*F,e[7]=h*k+g*N+b*F,e[8]=a*q+f*z+v*Q,e[9]=l*q+m*z+_*Q,e[10]=c*q+y*z+w*Q,e[11]=h*q+g*z+b*Q,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function kce(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],h=t[9],f=t[10],m=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*n+c*i,e[5]=o*n+h*i,e[6]=a*n+f*i,e[7]=l*n+m*i,e[8]=c*n-s*i,e[9]=h*n-o*i,e[10]=f*n-a*i,e[11]=m*n-l*i,e}function Lce(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[0],o=t[1],a=t[2],l=t[3],c=t[8],h=t[9],f=t[10],m=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n-c*i,e[1]=o*n-h*i,e[2]=a*n-f*i,e[3]=l*n-m*i,e[8]=s*i+c*n,e[9]=o*i+h*n,e[10]=a*i+f*n,e[11]=l*i+m*n,e}function Oce(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[0],o=t[1],a=t[2],l=t[3],c=t[4],h=t[5],f=t[6],m=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n+c*i,e[1]=o*n+h*i,e[2]=a*n+f*i,e[3]=l*n+m*i,e[4]=c*n-s*i,e[5]=h*n-o*i,e[6]=f*n-a*i,e[7]=m*n-l*i,e}function SG(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function Ace(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Pce(e,t,r){let i,n,s,o=r[0],a=r[1],l=r[2],c=Math.sqrt(o*o+a*a+l*l);return c<$e?null:(c=1/c,o*=c,a*=c,l*=c,i=Math.sin(t),n=Math.cos(t),s=1-n,e[0]=o*o*s+n,e[1]=a*o*s+l*i,e[2]=l*o*s-a*i,e[3]=0,e[4]=o*a*s-l*i,e[5]=a*a*s+n,e[6]=l*a*s+o*i,e[7]=0,e[8]=o*l*s+a*i,e[9]=a*l*s-o*i,e[10]=l*l*s+n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function Rce(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Fce(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Nce(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function $G(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=i+i,l=n+n,c=s+s,h=i*a,f=i*l,m=i*c,y=n*l,g=n*c,v=s*c,_=o*a,w=o*l,b=o*c;return e[0]=1-(y+v),e[1]=f+b,e[2]=m-w,e[3]=0,e[4]=f-b,e[5]=1-(h+v),e[6]=g+_,e[7]=0,e[8]=m+w,e[9]=g-_,e[10]=1-(h+y),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Dce(e,t){const r=jce,i=-t[0],n=-t[1],s=-t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=i*i+n*n+s*s+o*o;return f>0?(r[0]=2*(a*o+h*i+l*s-c*n)/f,r[1]=2*(l*o+h*n+c*i-a*s)/f,r[2]=2*(c*o+h*s+a*n-l*i)/f):(r[0]=2*(a*o+h*i+l*s-c*n),r[1]=2*(l*o+h*n+c*i-a*s),r[2]=2*(c*o+h*s+a*n-l*i)),$G(e,t,r),e}const jce=cn();function Vce(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function zce(e,t){const r=t[0],i=t[1],n=t[2],s=t[4],o=t[5],a=t[6],l=t[8],c=t[9],h=t[10];return e[0]=Math.sqrt(r*r+i*i+n*n),e[1]=Math.sqrt(s*s+o*o+a*a),e[2]=Math.sqrt(l*l+c*c+h*h),e}function Uce(e,t){const r=t[0]+t[5]+t[10];let i=0;return r>0?(i=2*Math.sqrt(r+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e}function Gce(e,t,r,i){const n=t[0],s=t[1],o=t[2],a=t[3],l=n+n,c=s+s,h=o+o,f=n*l,m=n*c,y=n*h,g=s*c,v=s*h,_=o*h,w=a*l,b=a*c,S=a*h,M=i[0],T=i[1],k=i[2];return e[0]=(1-(g+_))*M,e[1]=(m+S)*M,e[2]=(y-b)*M,e[3]=0,e[4]=(m-S)*T,e[5]=(1-(f+_))*T,e[6]=(v+w)*T,e[7]=0,e[8]=(y+b)*k,e[9]=(v-w)*k,e[10]=(1-(f+g))*k,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Bce(e,t,r,i,n){const s=t[0],o=t[1],a=t[2],l=t[3],c=s+s,h=o+o,f=a+a,m=s*c,y=s*h,g=s*f,v=o*h,_=o*f,w=a*f,b=l*c,S=l*h,M=l*f,T=i[0],k=i[1],N=i[2],F=n[0],q=n[1],z=n[2],Q=(1-(v+w))*T,K=(y+M)*T,ce=(g-S)*T,ie=(y-M)*k,Oe=(1-(m+w))*k,Qe=(_+b)*k,et=(g+S)*N,re=(_-b)*N,ve=(1-(m+v))*N;return e[0]=Q,e[1]=K,e[2]=ce,e[3]=0,e[4]=ie,e[5]=Oe,e[6]=Qe,e[7]=0,e[8]=et,e[9]=re,e[10]=ve,e[11]=0,e[12]=r[0]+F-(Q*F+ie*q+et*z),e[13]=r[1]+q-(K*F+Oe*q+re*z),e[14]=r[2]+z-(ce*F+Qe*q+ve*z),e[15]=1,e}function qce(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=r+r,a=i+i,l=n+n,c=r*o,h=i*o,f=i*a,m=n*o,y=n*a,g=n*l,v=s*o,_=s*a,w=s*l;return e[0]=1-f-g,e[1]=h+w,e[2]=m-_,e[3]=0,e[4]=h-w,e[5]=1-c-g,e[6]=y+v,e[7]=0,e[8]=m+_,e[9]=y-v,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Wce(e,t,r,i,n,s,o){const a=1/(r-t),l=1/(n-i),c=1/(s-o);return e[0]=2*s*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*l,e[6]=0,e[7]=0,e[8]=(r+t)*a,e[9]=(n+i)*l,e[10]=(o+s)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*c,e[15]=0,e}function Hce(e,t,r,i,n){const s=1/Math.tan(t/2);let o;return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(o=1/(i-n),e[10]=(n+i)*o,e[14]=2*n*i*o):(e[10]=-1,e[14]=-2*i),e}function Jce(e,t,r,i){const n=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+a),c=2/(n+s);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(o-a)*l*.5,e[9]=(n-s)*c*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e}function Zce(e,t,r,i,n,s,o){const a=1/(t-r),l=1/(i-n),c=1/(s-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*a,e[13]=(n+i)*l,e[14]=(o+s)*c,e[15]=1,e}function Yce(e,t,r,i){let n,s,o,a,l,c,h,f,m,y;const g=t[0],v=t[1],_=t[2],w=i[0],b=i[1],S=i[2],M=r[0],T=r[1],k=r[2];return Math.abs(g-M)<$e&&Math.abs(v-T)<$e&&Math.abs(_-k)<$e?rA(e):(h=g-M,f=v-T,m=_-k,y=1/Math.sqrt(h*h+f*f+m*m),h*=y,f*=y,m*=y,n=b*m-S*f,s=S*h-w*m,o=w*f-b*h,y=Math.sqrt(n*n+s*s+o*o),y?(y=1/y,n*=y,s*=y,o*=y):(n=0,s=0,o=0),a=f*o-m*s,l=m*n-h*o,c=h*s-f*n,y=Math.sqrt(a*a+l*l+c*c),y?(y=1/y,a*=y,l*=y,c*=y):(a=0,l=0,c=0),e[0]=n,e[1]=a,e[2]=h,e[3]=0,e[4]=s,e[5]=l,e[6]=f,e[7]=0,e[8]=o,e[9]=c,e[10]=m,e[11]=0,e[12]=-(n*g+s*v+o*_),e[13]=-(a*g+l*v+c*_),e[14]=-(h*g+f*v+m*_),e[15]=1,e)}function Qce(e,t,r,i){const n=t[0],s=t[1],o=t[2],a=i[0],l=i[1],c=i[2];let h=n-r[0],f=s-r[1],m=o-r[2],y=h*h+f*f+m*m;y>0&&(y=1/Math.sqrt(y),h*=y,f*=y,m*=y);let g=l*m-c*f,v=c*h-a*m,_=a*f-l*h;return y=g*g+v*v+_*_,y>0&&(y=1/Math.sqrt(y),g*=y,v*=y,_*=y),e[0]=g,e[1]=v,e[2]=_,e[3]=0,e[4]=f*_-m*v,e[5]=m*g-h*_,e[6]=h*v-f*g,e[7]=0,e[8]=h,e[9]=f,e[10]=m,e[11]=0,e[12]=n,e[13]=s,e[14]=o,e[15]=1,e}function Kce(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Xce(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function ede(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function xG(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function tde(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function rde(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e[9]=t[9]+r[9]*i,e[10]=t[10]+r[10]*i,e[11]=t[11]+r[11]*i,e[12]=t[12]+r[12]*i,e[13]=t[13]+r[13]*i,e[14]=t[14]+r[14]*i,e[15]=t[15]+r[15]*i,e}function ide(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function nde(e,t){if(e===t)return!0;const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],f=e[9],m=e[10],y=e[11],g=e[12],v=e[13],_=e[14],w=e[15],b=t[0],S=t[1],M=t[2],T=t[3],k=t[4],N=t[5],F=t[6],q=t[7],z=t[8],Q=t[9],K=t[10],ce=t[11],ie=t[12],Oe=t[13],Qe=t[14],et=t[15];return Math.abs(r-b)<=$e*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-S)<=$e*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(n-M)<=$e*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(s-T)<=$e*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(o-k)<=$e*Math.max(1,Math.abs(o),Math.abs(k))&&Math.abs(a-N)<=$e*Math.max(1,Math.abs(a),Math.abs(N))&&Math.abs(l-F)<=$e*Math.max(1,Math.abs(l),Math.abs(F))&&Math.abs(c-q)<=$e*Math.max(1,Math.abs(c),Math.abs(q))&&Math.abs(h-z)<=$e*Math.max(1,Math.abs(h),Math.abs(z))&&Math.abs(f-Q)<=$e*Math.max(1,Math.abs(f),Math.abs(Q))&&Math.abs(m-K)<=$e*Math.max(1,Math.abs(m),Math.abs(K))&&Math.abs(y-ce)<=$e*Math.max(1,Math.abs(y),Math.abs(ce))&&Math.abs(g-ie)<=$e*Math.max(1,Math.abs(g),Math.abs(ie))&&Math.abs(v-Oe)<=$e*Math.max(1,Math.abs(v),Math.abs(Oe))&&Math.abs(_-Qe)<=$e*Math.max(1,Math.abs(_),Math.abs(Qe))&&Math.abs(w-et)<=$e*Math.max(1,Math.abs(w),Math.abs(et))}function sde(e){const t=$e,r=e[0],i=e[1],n=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],h=e[10];return Math.abs(1-(r*r+s*s+l*l))<=t&&Math.abs(1-(i*i+o*o+c*c))<=t&&Math.abs(1-(n*n+a*a+h*h))<=t}const ode=bG,ade=xG;Object.freeze(Object.defineProperty({__proto__:null,copy:$ce,set:vc,identity:rA,transpose:El,invert:xce,adjoint:Ece,determinant:Tce,multiply:bG,translate:Mce,scale:Ice,rotate:Cce,rotateX:kce,rotateY:Lce,rotateZ:Oce,fromTranslation:SG,fromScaling:Ace,fromRotation:Pce,fromXRotation:Rce,fromYRotation:Fce,fromZRotation:Nce,fromRotationTranslation:$G,fromQuat2:Dce,getTranslation:Vce,getScaling:zce,getRotation:Uce,fromRotationTranslationScale:Gce,fromRotationTranslationScaleOrigin:Bce,fromQuat:qce,frustum:Wce,perspective:Hce,perspectiveFromFieldOfView:Jce,ortho:Zce,lookAt:Yce,targetTo:Qce,str:Kce,frob:Xce,add:ede,subtract:xG,multiplyScalar:tde,multiplyScalarAndAdd:rde,exactEquals:ide,equals:nde,isOrthoNormal:sde,mul:ode,sub:ade},Symbol.toStringTag,{value:"Module"}));let Vx,A=null;function EG(){return!!A}function lde(){return!!j("esri-wasm")}function TG(){return Vx||(Vx=V(()=>import("./pe-wasm.9649c26b.js"),[],import.meta.url).then(e=>e.p).then(({default:e})=>e({locateFile:t=>De(`esri/geometry/support/${t}`)})).then(e=>{IG(e)}),Vx)}var cC,bt,dC;(function(e){function t(s,o,a){A.ensureCache.prepare();const l=Sd(a),c=a===l,h=A.ensureFloat64(l),f=A._pe_geog_to_proj(A.getPointer(s),o,h);return f&&Ru(a,o,h,c),f}function r(s,o,a,l){switch(l){case bt.PE_TRANSFORM_P_TO_G:return i(s,o,a);case bt.PE_TRANSFORM_G_TO_P:return t(s,o,a)}return 0}function i(s,o,a){return n(s,o,a,0)}function n(s,o,a,l){A.ensureCache.prepare();const c=Sd(a),h=a===c,f=A.ensureFloat64(c),m=A._pe_proj_to_geog_center(A.getPointer(s),o,f,l);return m&&Ru(a,o,f,h),m}e.geogToProj=t,e.projGeog=r,e.projToGeog=i,e.projToGeogCenter=n})(cC||(cC={})),function(e){function t(){e.PE_BUFFER_MAX=A.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=A.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=A.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=A.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=A.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=A.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=A.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=A.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=A.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=A.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=A.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=A.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=A.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=A.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=A.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=A.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=A.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=A.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=A.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=A.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=A.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=A.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=A.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=A.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=A.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=A.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=A.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=A.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=A.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=A.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(bt||(bt={})),function(e){const t={},r={},i=y=>{if(y){const g=y.getType();switch(g){case bt.PE_TYPE_GEOGCS:y=A.castObject(y,A.PeGeogcs);break;case bt.PE_TYPE_PROJCS:y=A.castObject(y,A.PeProjcs);break;case bt.PE_TYPE_GEOGTRAN:y=A.castObject(y,A.PeGeogtran);break;default:g&bt.PE_TYPE_UNIT&&(y=A.castObject(y,A.PeUnit))}}return y};function n(){A.PeFactory.prototype.initialize(null)}function s(y){return o(bt.PE_TYPE_COORDSYS,y)}function o(y,g){let v=null,_=t[y];if(_||(_={},t[y]=_),_.hasOwnProperty(String(g)))v=_[g];else{const w=A.PeFactory.prototype.factoryByType(y,g);A.compare(w,A.NULL)||(v=w,_[g]=v)}return v=i(v),v}function a(y,g){let v=null,_=r[y];if(_||(_={},r[y]=_),_.hasOwnProperty(g))v=_[g];else{const w=A.PeFactory.prototype.fromString(y,g);A.compare(w,A.NULL)||(v=w,_[g]=v)}return v=i(v),v}function l(y){return o(bt.PE_TYPE_GEOGCS,y)}function c(y){return o(bt.PE_TYPE_GEOGTRAN,y)}function h(y){return A.PeFactory.prototype.getCode(y)}function f(y){return o(bt.PE_TYPE_PROJCS,y)}function m(y){return o(bt.PE_TYPE_UNIT,y)}e.initialize=n,e.coordsys=s,e.factoryByType=o,e.fromString=a,e.geogcs=l,e.geogtran=c,e.getCode=h,e.projcs=f,e.unit=m}(dC||(dC={}));let MG=null;var lS,hC,pC,fC,uS,mC,cS,dS,yC;function IG(e){function t(s,o,a){s[o]=a(s[o])}A=e,bt.init(),lS.init(),uS.init(),cS.init(),dS.init(),MG=class extends A.PeGCSExtent{destroy(){A.destroy(this)}};const r=[A.PeDatum,A.PeGeogcs,A.PeGeogtran,A.PeObject,A.PeParameter,A.PePrimem,A.PeProjcs,A.PeSpheroid,A.PeUnit];for(const s of r)t(s.prototype,"getName",o=>function(){return o.call(this,new Array(bt.PE_NAME_MAX))});for(const s of[A.PeGeogtran,A.PeProjcs])t(s.prototype,"getParameters",o=>function(){const a=new Array(bt.PE_PARM_MAX);let l=o.call(this);for(let c=0;c<a.length;c++){const h=A.getValue(l,"*");a[c]=h?A.wrapPointer(h,A.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});t(A.PeHorizon.prototype,"getCoord",s=>function(){const o=this.getSize();if(!o)return null;const a=[];return Ru(a,o,s.call(this)),a}),t(A.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=A._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=s.call(this);if(!A.compare(l,A.NULL)){a=[l];const c=this.getSteps();if(c>1){const h=A.getPointer(l);for(let f=1;f<c;f++)a.push(A.wrapPointer(h+o*f,A.PeGTlistExtendedGTs))}}return a}});const i=A._pe_getPeHorizonSize(),n=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const l=s.call(this);if(!A.compare(l,A.NULL)){a=[l];const c=l.getNump();if(c>1){const h=A.getPointer(l);for(let f=1;f<c;f++)a.push(A.wrapPointer(h+i*f,A.PeHorizon))}}return o.set(s,a),a};t(A.PeProjcs.prototype,"horizonGcsGenerate",n),t(A.PeProjcs.prototype,"horizonPcsGenerate",n),A.PeObject.prototype.toString=function(s=bt.PE_STR_OPTS_NONE){A.ensureCache.prepare();const o=A.getPointer(this),a=A.ensureInt8(new Array(bt.PE_BUFFER_MAX));return A.UTF8ToString(A._pe_object_to_string_ext(o,s,a))}}function wa(e){if(!e)return;const t=A.getClass(e);if(!t)return;const r=A.getCache(t);if(!r)return;const i=A.getPointer(e);i&&delete r[i]}function N1(e,t){const r=[],i=new Array(t);for(let n=0;n<e;n++)r.push(A.ensureInt8(i));return r}function Sd(e){let t;return Array.isArray(e[0])?(t=[],e.forEach(r=>{t.push(r[0],r[1])})):t=e,t}function Ru(e,t,r,i=!1){if(i)for(let n=0;n<2*t;n++)e[n]=A.getValue(r+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=e.length===0;for(let s=0;s<t;s++)n&&(e[s]=new Array(2)),e[s][0]=A.getValue(r,"double"),e[s][1]=A.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function r(){e.PE_GTLIST_OPTS_COMMON=A.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=A._pe_getPeGTlistExtendedEntrySize()}function i(n,s,o,a,l,c){let h=null;const f=new A.PeInteger(c);try{const m=A.PeGTlistExtended.prototype.getGTlist(n,s,o,a,l,f);if((c=f.val)&&(h=[m],c>1)){const y=A.getPointer(m);for(let g=1;g<c;g++)h.push(A.wrapPointer(y+t*g,A.PeGTlistExtendedEntry))}}finally{A.destroy(f)}return h}e.init=r,e.getGTlist=i})(lS||(lS={})),function(e){function t(r){if(r&&r.length){for(const i of r)wa(i),i.getEntries().forEach(n=>{wa(n);const s=n.getGeogtran();wa(s),s.getParameters().forEach(wa),[s.getGeogcs1(),s.getGeogcs2()].forEach(o=>{wa(o);const a=o.getDatum();wa(a),wa(a.getSpheroid()),wa(o.getPrimem()),wa(o.getUnit())})});A.PeGTlistExtendedEntry.prototype.Delete(r[0])}}e.destroy=t}(hC||(hC={})),function(e){function t(r,i,n,s,o){A.ensureCache.prepare();const a=Sd(n),l=n===a,c=A.ensureFloat64(a);let h=0;s&&(h=A.ensureFloat64(s));const f=A._pe_geog_to_geog(A.getPointer(r),i,c,h,o);return f&&Ru(n,i,c,l),f}e.geogToGeog=t}(pC||(pC={})),function(e){const t=(c,h,f,m,y,g)=>{let v,_;switch(A.ensureCache.prepare(),c){case"dd":v=A._pe_geog_to_dd,_=bt.PE_DD_MAX;break;case"ddm":v=A._pe_geog_to_ddm,_=bt.PE_DDM_MAX;break;case"dms":v=A._pe_geog_to_dms,_=bt.PE_DMS_MAX}let w=0;h&&(w=A.getPointer(h));const b=Sd(m),S=A.ensureFloat64(b),M=N1(f,_),T=v(w,f,S,y,A.ensureInt32(M));if(T)for(let k=0;k<f;k++)g[k]=A.UTF8ToString(M[k]);return T},r=(c,h,f,m,y)=>{let g;switch(A.ensureCache.prepare(),c){case"dd":g=A._pe_dd_to_geog;break;case"ddm":g=A._pe_ddm_to_geog;break;case"dms":g=A._pe_dms_to_geog}let v=0;h&&(v=A.getPointer(h));const _=m.map(M=>A.ensureString(M)),w=A.ensureInt32(_),b=A.ensureFloat64(new Array(2*f)),S=g(v,f,w,b);return S&&Ru(y,f,b),S};function i(c,h,f,m,y){return t("dms",c,h,f,m,y)}function n(c,h,f,m){return r("dms",c,h,f,m)}function s(c,h,f,m,y){return t("ddm",c,h,f,m,y)}function o(c,h,f,m){return r("ddm",c,h,f,m)}function a(c,h,f,m,y){return t("dd",c,h,f,m,y)}function l(c,h,f,m){return r("dd",c,h,f,m)}e.geogToDms=i,e.dmsToGeog=n,e.geogToDdm=s,e.ddmToGeog=o,e.geogToDd=a,e.ddToGeog=l}(fC||(fC={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=A.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=A.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=A.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=A.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=A.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function r(n,s,o,a,l,c,h){A.ensureCache.prepare();let f=0;n&&(f=A.getPointer(n));const m=Sd(o),y=A.ensureFloat64(m),g=N1(s,bt.PE_MGRS_MAX),v=A.ensureInt32(g),_=A._pe_geog_to_mgrs_extended(f,s,y,a,l,c,v);if(_)for(let w=0;w<s;w++)h[w]=A.UTF8ToString(g[w]);return _}function i(n,s,o,a,l){A.ensureCache.prepare();let c=0;n&&(c=A.getPointer(n));const h=o.map(g=>A.ensureString(g)),f=A.ensureInt32(h),m=A.ensureFloat64(new Array(2*s)),y=A._pe_mgrs_to_geog_extended(c,s,f,a,m);return y&&Ru(l,s,m),y}e.init=t,e.geogToMgrsExtended=r,e.mgrsToGeogExtended=i}(uS||(uS={})),function(e){function t(i,n,s,o,a,l,c){A.ensureCache.prepare();let h=0;i&&(h=A.getPointer(i));const f=Sd(s),m=A.ensureFloat64(f),y=N1(n,bt.PE_MGRS_MAX),g=A.ensureInt32(y),v=A._pe_geog_to_usng(h,n,m,o,a,l,g);if(v)for(let _=0;_<n;_++)c[_]=A.UTF8ToString(y[_]);return v}function r(i,n,s,o){A.ensureCache.prepare();let a=0;i&&(a=A.getPointer(i));const l=s.map(m=>A.ensureString(m)),c=A.ensureInt32(l),h=A.ensureFloat64(new Array(2*n)),f=A._pe_usng_to_geog(a,n,c,h);return f&&Ru(o,n,h),f}e.geogToUsng=t,e.usngToGeog=r}(mC||(mC={})),function(e){function t(){e.PE_UTM_OPTS_NONE=A.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=A.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=A.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function r(n,s,o,a,l){A.ensureCache.prepare();let c=0;n&&(c=A.getPointer(n));const h=Sd(o),f=A.ensureFloat64(h),m=N1(s,bt.PE_UTM_MAX),y=A.ensureInt32(m),g=A._pe_geog_to_utm(c,s,f,a,y);if(g)for(let v=0;v<s;v++)l[v]=A.UTF8ToString(m[v]);return g}function i(n,s,o,a,l){A.ensureCache.prepare();let c=0;n&&(c=A.getPointer(n));const h=o.map(g=>A.ensureString(g)),f=A.ensureInt32(h),m=A.ensureFloat64(new Array(2*s)),y=A._pe_utm_to_geog(c,s,f,a,m);return y&&Ru(l,s,m),y}e.init=t,e.geogToUtm=r,e.utmToGeog=i}(cS||(cS={})),function(e){const t=new Map;function r(){e.PE_PCSINFO_OPTION_NONE=A.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=A.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=A.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=A.PePCSInfo.prototype.PE_POLE_POINT}function i(n,s=e.PE_PCSINFO_OPTION_DOMAIN){let o,a;return t.has(n)&&(a=t.get(n),a[s]&&(o=a[s])),o||(o=A.PePCSInfo.prototype.generate(n,s),a||(a=[],t.set(n,a)),a[s]=o),o}e.init=r,e.generate=i}(dS||(dS={})),function(e){function t(){return A.PeVersion.prototype.version_string()}e.versionString=t}(yC||(yC={}));const ude=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return A},isLoaded:EG,isSupported:lde,load:TG,get PeCSTransformations(){return cC},get PeDefs(){return bt},get PeFactory(){return dC},get PeGCSExtent(){return MG},get PeGTlistExtended(){return lS},get PeGTlistExtendedEntry(){return hC},get PeGTTransformations(){return pC},get PeNotationDms(){return fC},get PeNotationMgrs(){return uS},get PeNotationUsng(){return mC},get PeNotationUtm(){return cS},get PePCSInfo(){return dS},get PeVersion(){return yC},_init:IG},Symbol.toStringTag,{value:"Module"})),Pl=ht.radius,Ts=ht.eccentricitySquared,cde={a1:Pl*Ts,a2:Pl*Ts*Pl*Ts,a3:Pl*Ts*Ts/2,a4:Pl*Ts*Pl*Ts*2.5,a5:Pl*Ts+Pl*Ts*Ts/2,a6:1-Ts};1/294.9786982,1/298.257222101,ht.radius,ht.flattening,uc.radius,uc.flattening,1/192.0430107526882,ul.radius,ul.flattening,1/10.2079945799458,1/43.61604095563141,ul.radius;let D1=0;class xf{constructor(t=null){this.uid=D1++,t?(this._wkt=t.wkt!==void 0?t.wkt:null,this._wkid=t.wkid!==void 0?t.wkid:-1,this._isInverse=t.isInverse!==void 0&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}static fromGE(t){const r=new xf;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=D1++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=D1++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=D1++}getInverse(){const t=new xf;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}}class Bu{constructor(t){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,t&&t.steps)for(const r of t.steps)r instanceof xf?this.steps.push(r):this.steps.push(new xf({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}static cacheKey(t,r){return[t.wkid!==void 0&&t.wkid!==null?t.wkid.toString():"-1",t.wkt!==void 0&&t.wkt!==null?t.wkt.toString():"",r.wkid!==void 0&&r.wkid!==null?r.wkid.toString():"-1",r.wkt!==void 0&&r.wkt!==null?r.wkt.toString():""].join(",")}static fromGE(t){const r=new Bu;let i="";for(const n of t.steps){const s=xf.fromGE(n);r.steps.push(s),i+=s.uid.toString()+","}return r._cached_projection={},r._gtlistentry=null,r._chain=i,r}getInverse(){const t=new Bu;t.steps=[];for(let r=this.steps.length-1;r>=0;r--){const i=this.steps[r];t.steps.push(i.getInverse())}return t}getGTListEntry(){let t="";for(const r of this.steps)t+=r.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=t),this._gtlistentry}assignCachedGe(t,r,i){this._cached_projection[Bu.cacheKey(t,r)]=i}getCachedGeTransformation(t,r){let i="";for(const s of this.steps)i+=s.uid.toString()+",";i!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=i);const n=this._cached_projection[Bu.cacheKey(t,r)];return n===void 0?null:n}}function CG(e,t,r){if(R(t)||R(r)||r.vcsWkid||Hr(t,r))return null;const i=Yf(t)/Yf(r);if(i===1)return null;switch(e){case"point":case"esriGeometryPoint":return n=>dde(n,i);case"polyline":case"esriGeometryPolyline":return n=>pde(n,i);case"polygon":case"esriGeometryPolygon":return n=>hde(n,i);case"multipoint":case"esriGeometryMultipoint":return n=>fde(n,i);case"extent":case"esriGeometryExtent":return n=>mde(n,i);default:return null}}function dde(e,t){e&&e.z!=null&&(e.z*=t)}function hde(e,t){if(e)for(const r of e.rings)for(const i of r)i.length>2&&(i[2]*=t)}function pde(e,t){if(e)for(const r of e.paths)for(const i of r)i.length>2&&(i[2]*=t)}function fde(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}function mde(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let ec=null,hS=null,zx=null,Ux={};const kG=new A9;function dc(){return!!ec&&EG()}function hc(e){return R(zx)&&(zx=Promise.all([TG(),V(()=>import("./geometryEngineBase.0f0d7ecf.js"),[],import.meta.url).then(t=>t.g),V(()=>import("./hydrated.704de72c.js"),[],import.meta.url)])),zx.then(([,t,{hydratedAdapter:r}])=>{yt(e),hS=r,ec=t.default,ec._enableProjection(ude),kG.notify()})}function Tm(e,t,r=null,i=null){return Array.isArray(e)?e.length===0?[]:YN(hS,e,e[0].spatialReference,t,r,i):YN(hS,[e],e.spatialReference,t,r,i)[0]}function YN(e,t,r,i,n=null,s=null){if(R(r)||R(i))return t;if(_l(r,i,n))return t.map(o=>vde(o,r,i));if(R(n)){const o=Bu.cacheKey(r,i);Ux[o]!==void 0?n=Ux[o]:(n=yde(r,i,null),R(n)&&(n=new Bu),Ux[o]=n)}if(R(ec))throw new iA;return I(s)?ec._project(e,t,r,i,n,s):ec._project(e,t,r,i,n)}function qDe(e,t){return R(e)?{pending:null,geometry:null}:Hr(e.spatialReference,t)?{pending:null,geometry:e}:ci(e.spatialReference)&&ci(t)?_l(e.spatialReference,t)||dc()?{pending:null,geometry:gde(e,t)}:(Ie(kG),{pending:hc(),geometry:null}):{pending:null,geometry:null}}function yde(e,t,r=null){if(R(ec))throw new iA;if(R(e)||R(t))return null;const i=ec._getTransformation(hS,e,t,r,r==null?void 0:r.spatialReference);return i!==null?Bu.fromGE(i):null}class iA extends O{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}var L;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",e[e.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=8]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=10]="GCSMOON2000",e[e.LON_LAT=11]="LON_LAT",e[e.PLATE_CARREE=12]="PLATE_CARREE"})(L||(L={}));function gde(e,t){try{const r=Tm(e,t);if(r==null)return null;"xmin"in e&&"xmin"in r&&(r.zmin=e.zmin,r.zmax=e.zmax);const i=CG(r.type,e.spatialReference,t);return I(i)&&i(r),r}catch(r){if(!(r instanceof iA))throw r;return null}}function _l(e,t,r){return!r&&(!!Hr(e,t)||ci(e)&&ci(t)&&!!PG(e,t,FG))}async function WDe(e,t,r,i){if(dc())return FF(i);if(Array.isArray(e)){for(const{source:n,dest:s,geographicTransformation:o}of e)if(!_l(n,s,o))return hc(i)}else if(!_l(e,t,r))return hc(i);return FF(i)}function vde(e,t,r){return e?"x"in e?wde(e,t,new ye,r,0):"xmin"in e?Sde(e,t,new Je,r,0):"rings"in e?LG(e,t,new ws,r,0):"paths"in e?bde(e,t,new Ei,r,0):"points"in e?_de(e,t,new wm,r,0):null:null}function wde(e,t,r,i,n){hr[0]=e.x,hr[1]=e.y;const s=e.z;return hr[2]=s!==void 0?s:n,Av(hr,t,0,hr,i,0,1)?(r.x=hr[0],r.y=hr[1],r.spatialReference=i,s===void 0?(r.z=void 0,r.hasZ=!1):(r.z=hr[2],r.hasZ=!0),e.m===void 0?(r.m=void 0,r.hasM=!1):(r.m=e.m,r.hasM=!0),r):null}function _de(e,t,r,i,n){const{points:s,hasZ:o,hasM:a}=e,l=[],c=s.length,h=[];for(const f of s)h.push(f[0],f[1],o?f[2]:n);if(!Av(h,t,0,h,i,0,c))return null;for(let f=0;f<c;++f){const m=3*f,y=h[m],g=h[m+1];o&&a?l.push([y,g,h[m+2],s[f][3]]):o?l.push([y,g,h[m+2]]):a?l.push([y,g,s[f][2]]):l.push([y,g])}return r.points=l,r.spatialReference=i,r.hasZ=o,r.hasM=a,r}function bde(e,t,r,i,n){const{paths:s,hasZ:o,hasM:a}=e,l=[];return OG(s,o,a,t,l,i,n)?(r.paths=l,r.spatialReference=i,r.hasZ=o,r.hasM=a,r):null}function HDe(e,t,r=t.spatialReference,i=0){return I(r)&&I(LG(e,e.spatialReference,t,r,i))}function LG(e,t,r,i,n){const{rings:s,hasZ:o,hasM:a}=e,l=[];return OG(s,o,a,t,l,i,n)?(r.rings=l,r.spatialReference=i,r.hasZ=o,r.hasM=a,r):null}function Sde(e,t,r,i,n){const{xmin:s,ymin:o,xmax:a,ymax:l,hasZ:c,hasM:h}=e;return QN(s,o,c?e.zmin:n,t,hr,i)?(r.xmin=hr[0],r.ymin=hr[1],c&&(r.zmin=hr[2]),QN(a,l,c?e.zmax:n,t,hr,i)?(r.xmax=hr[0],r.ymax=hr[1],c&&(r.zmax=hr[2]),h&&(r.mmin=e.mmin,r.mmax=e.mmax),r.spatialReference=i,r):null):null}function JDe(e,t,r,i=0){hr[0]=e.x,hr[1]=e.y;const n=e.z;return hr[2]=n!==void 0?n:i,Av(hr,e.spatialReference,0,t,r,0,1)}function QN(e,t,r,i,n,s){return j1[0]=e,j1[1]=t,j1[2]=r,Av(j1,i,0,n,s,0,1)}function Av(e,t,r,i,n,s,o=1){const a=PG(t,n,FG);if(R(a))return!1;if(a===ot){if(e===i&&r===s)return!0;const c=r+3*o;for(let h=r,f=s;h<c;h++,f++)i[f]=e[h];return!0}const l=r+3*o;for(let c=r,h=s;c<l;c+=3,h+=3)a(e,c,i,h);return!0}function OG(e,t,r,i,n,s,o=0){const a=new Array;for(const c of e)for(const h of c)a.push(h[0],h[1],t?h[2]:o);if(!Av(a,i,0,a,s,0,a.length/3))return!1;let l=0;n.length=0;for(const c of e){const h=new Array;for(const f of c)t&&r?h.push([a[l++],a[l++],a[l++],f[3]]):t?h.push([a[l++],a[l++],a[l++]]):r?(h.push([a[l++],a[l++],f[2]]),l++):(h.push([a[l++],a[l++]]),l++);n.push(h)}return!0}function ZDe(e,t,r,i){if(R(e)||R(i))return!1;const n=Z0(e,RG),s=Z0(i,jde);if(n===s&&!KN(s)&&(n!==L.UNKNOWN||Hr(e,i)))return SG(r,t),!0;if(KN(s)){const o=ef[n][L.LON_LAT],a=ef[L.LON_LAT][s];return!R(o)&&!R(a)&&(o(t,0,Rl,0),a(Rl,0,Fl,0),AG(Qo*Rl[0],Qo*Rl[1],r),r[12]=Fl[0],r[13]=Fl[1],r[14]=Fl[2],!0)}if((s===L.WEB_MERCATOR||s===L.PLATE_CARREE)&&(n===L.WGS84||n===L.CGCS2000&&s===L.PLATE_CARREE||n===L.SPHERICAL_ECEF||n===L.WEB_MERCATOR)){const o=ef[n][L.LON_LAT],a=ef[L.LON_LAT][s];return!R(o)&&!R(a)&&(o(t,0,Rl,0),a(Rl,0,Fl,0),n===L.SPHERICAL_ECEF?$de(Qo*Rl[0],Qo*Rl[1],r):rA(r),r[12]=Fl[0],r[13]=Fl[1],r[14]=Fl[2],!0)}return!1}function KN(e){return e===L.SPHERICAL_ECEF||e===L.SPHERICAL_MARS_PCPF||e===L.SPHERICAL_MOON_PCPF}function AG(e,t,r){const i=Math.sin(e),n=Math.cos(e),s=Math.sin(t),o=Math.cos(t),a=r;return a[0]=-i,a[4]=-s*n,a[8]=o*n,a[12]=0,a[1]=n,a[5]=-s*i,a[9]=o*i,a[13]=0,a[2]=0,a[6]=o,a[10]=s,a[14]=0,a[3]=0,a[7]=0,a[11]=0,a[15]=1,a}function $de(e,t,r){return AG(e,t,r),El(r,r),r}function Z0(e,t){return t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=Em(e,1)),e.wkt===hG.wkt?t.spatialReferenceId=L.SPHERICAL_ECEF:F0(e)?t.spatialReferenceId=L.WGS84:hh(e)?t.spatialReferenceId=L.WEB_MERCATOR:une(e)?t.spatialReferenceId=L.PLATE_CARREE:e.wkt===ace.wkt?t.spatialReferenceId=L.WGS84_ECEF:e.wkid===us.CGCS2000?t.spatialReferenceId=L.CGCS2000:e.wkt===oS.wkt?t.spatialReferenceId=L.SPHERICAL_MARS_PCPF:e.wkt===aS.wkt?t.spatialReferenceId=L.SPHERICAL_MOON_PCPF:ym(e)?t.spatialReferenceId=L.GCSMARS2000:gm(e)?t.spatialReferenceId=L.GCSMOON2000:t.spatialReferenceId=L.UNKNOWN)}function ot(e,t,r,i){e!==r&&(r[i++]=e[t++],r[i++]=e[t++],r[i]=e[t])}function Ef(e,t,r,i){r[i++]=Qf*(e[t++]/ht.radius),r[i++]=Qf*(Math.PI/2-2*Math.atan(Math.exp(-e[t++]/ht.radius))),r[i]=e[t]}function xde(e,t,r,i){Ef(e,t,r,i),Dd(r,i,r,i)}function Ede(e,t,r,i){Ef(e,t,r,i),Vd(r,i,r,i)}function Tde(e,t,r,i,n){const s=.4999999*Math.PI,o=an(Qo*e[t+1],-s,s),a=Math.sin(o);r[i++]=Qo*e[t]*n.radius,r[i++]=n.halfSemiMajorAxis*Math.log((1+a)/(1-a)),r[i]=e[t+2]}function Y0(e,t,r,i){Tde(e,t,r,i,ht)}const XN=ht.radius*Math.PI/180,e5=180/(ht.radius*Math.PI);function Fd(e,t,r,i){r[i]=e[t]*XN,r[i+1]=e[t+1]*XN,r[i+2]=e[t+2]}function Nd(e,t,r,i){r[i]=e[t]*e5,r[i+1]=e[t+1]*e5,r[i+2]=e[t+2]}function Mde(e,t,r,i){Ef(e,t,r,i),Fd(r,i,r,i)}function Ide(e,t,r,i){zd(e,t,r,i),Fd(r,i,r,i)}function Cde(e,t,r,i){jd(e,t,r,i),Fd(r,i,r,i)}function kde(e,t,r,i){Nd(e,t,r,i),Dd(r,i,r,i)}function Lde(e,t,r,i){Nd(e,t,r,i),Y0(r,i,r,i)}function Ode(e,t,r,i){Nd(e,t,r,i),Vd(r,i,r,i)}function nA(e){if(R(e))return!1;const t=Z0(e,RG);return!!ef[t][L.WGS84_COMPARABLE_LON_LAT]}function sA(e,t,r,i,n){const s=n+e[t+2],o=Qo*e[t+1],a=Qo*e[t],l=Math.cos(o);r[i++]=Math.cos(a)*l*s,r[i++]=Math.sin(a)*l*s,r[i]=Math.sin(o)*s}function t5(e,t,r,i){sA(e,t,r,i,uc.radius)}function r5(e,t,r,i){sA(e,t,r,i,ul.radius)}function Dd(e,t,r,i){sA(e,t,r,i,ht.radius)}function oA(e,t,r,i,n){const s=e[t],o=e[t+1],a=e[t+2],l=Math.sqrt(s*s+o*o+a*a),c=j7(a/(l===0?1:l)),h=Math.atan2(o,s);r[i++]=Qf*h,r[i++]=Qf*c,r[i]=l-n}function i5(e,t,r,i){oA(e,t,r,i,uc.radius)}function n5(e,t,r,i){oA(e,t,r,i,ul.radius)}function jd(e,t,r,i){oA(e,t,r,i,ht.radius)}function Ade(e,t,r,i){jd(e,t,r,i),Y0(r,i,r,i)}function Pde(e,t,r,i){jd(e,t,r,i),Vd(r,i,r,i)}function Rde(e,t,r,i,n){const s=Qo*e[t],o=Qo*e[t+1],a=e[t+2],l=Math.sin(o),c=Math.cos(o),h=n.radius/Math.sqrt(1-n.eccentricitySquared*l*l);r[i++]=(h+a)*c*Math.cos(s),r[i++]=(h+a)*c*Math.sin(s),r[i++]=(h*(1-n.eccentricitySquared)+a)*l}function Vd(e,t,r,i){Rde(e,t,r,i,ht)}function zd(e,t,r,i){const n=cde,s=e[t],o=e[t+1],a=e[t+2];let l,c,h,f,m,y,g,v,_,w,b,S,M,T,k,N,F,q,z,Q,K;l=Math.abs(a),c=s*s+o*o,h=Math.sqrt(c),f=c+a*a,m=Math.sqrt(f),Q=Math.atan2(o,s),y=a*a/f,g=c/f,T=n.a2/m,k=n.a3-n.a4/m,g>.3?(v=l/m*(1+g*(n.a1+T+y*k)/m),z=Math.asin(v),w=v*v,_=Math.sqrt(1-w)):(_=h/m*(1-y*(n.a5-T-g*k)/m),z=Math.acos(_),w=1-_*_,v=Math.sqrt(w)),b=1-ht.eccentricitySquared*w,S=ht.radius/Math.sqrt(b),M=n.a6*S,T=h-S*_,k=l-M*v,F=_*T+v*k,N=_*k-v*T,q=N/(M/b+F),z+=q,K=F+N*q/2,a<0&&(z=-z),r[i++]=Qf*Q,r[i++]=Qf*z,r[i]=K}function Fde(e,t,r,i){zd(e,t,r,i),Dd(r,i,r,i)}function Nde(e,t,r,i){zd(e,t,r,i),Y0(r,i,r,i)}const ef={[L.WGS84]:{[L.CGCS2000]:null,[L.GCSMARS2000]:null,[L.GCSMOON2000]:null,[L.LON_LAT]:ot,[L.WGS84_COMPARABLE_LON_LAT]:ot,[L.SPHERICAL_ECEF]:Dd,[L.SPHERICAL_MARS_PCPF]:null,[L.SPHERICAL_MOON_PCPF]:null,[L.UNKNOWN]:null,[L.WEB_MERCATOR]:Y0,[L.PLATE_CARREE]:Fd,[L.WGS84]:ot,[L.WGS84_ECEF]:Vd},[L.CGCS2000]:{[L.CGCS2000]:ot,[L.GCSMARS2000]:null,[L.GCSMOON2000]:null,[L.LON_LAT]:ot,[L.WGS84_COMPARABLE_LON_LAT]:ot,[L.SPHERICAL_ECEF]:Dd,[L.SPHERICAL_MARS_PCPF]:null,[L.SPHERICAL_MOON_PCPF]:null,[L.UNKNOWN]:null,[L.WEB_MERCATOR]:null,[L.PLATE_CARREE]:Fd,[L.WGS84]:null,[L.WGS84_ECEF]:Vd},[L.GCSMARS2000]:{[L.CGCS2000]:null,[L.GCSMARS2000]:ot,[L.GCSMOON2000]:null,[L.LON_LAT]:ot,[L.WGS84_COMPARABLE_LON_LAT]:null,[L.SPHERICAL_ECEF]:null,[L.SPHERICAL_MARS_PCPF]:r5,[L.SPHERICAL_MOON_PCPF]:null,[L.UNKNOWN]:null,[L.WEB_MERCATOR]:null,[L.PLATE_CARREE]:null,[L.WGS84]:null,[L.WGS84_ECEF]:null},[L.GCSMOON2000]:{[L.CGCS2000]:null,[L.GCSMARS2000]:null,[L.GCSMOON2000]:ot,[L.LON_LAT]:ot,[L.WGS84_COMPARABLE_LON_LAT]:null,[L.SPHERICAL_ECEF]:null,[L.SPHERICAL_MARS_PCPF]:null,[L.SPHERICAL_MOON_PCPF]:t5,[L.UNKNOWN]:null,[L.WEB_MERCATOR]:null,[L.PLATE_CARREE]:null,[L.WGS84]:null,[L.WGS84_ECEF]:null},[L.WEB_MERCATOR]:{[L.CGCS2000]:null,[L.GCSMARS2000]:null,[L.GCSMOON2000]:null,[L.LON_LAT]:Ef,[L.WGS84_COMPARABLE_LON_LAT]:Ef,[L.SPHERICAL_ECEF]:xde,[L.SPHERICAL_MARS_PCPF]:null,[L.SPHERICAL_MOON_PCPF]:null,[L.UNKNOWN]:null,[L.WEB_MERCATOR]:ot,[L.PLATE_CARREE]:Mde,[L.WGS84]:Ef,[L.WGS84_ECEF]:Ede},[L.WGS84_ECEF]:{[L.CGCS2000]:zd,[L.GCSMARS2000]:null,[L.GCSMOON2000]:null,[L.LON_LAT]:zd,[L.WGS84_COMPARABLE_LON_LAT]:zd,[L.SPHERICAL_ECEF]:Fde,[L.SPHERICAL_MARS_PCPF]:null,[L.SPHERICAL_MOON_PCPF]:null,[L.UNKNOWN]:null,[L.WEB_MERCATOR]:Nde,[L.PLATE_CARREE]:Ide,[L.WGS84]:zd,[L.WGS84_ECEF]:ot},[L.SPHERICAL_ECEF]:{[L.CGCS2000]:jd,[L.GCSMARS2000]:null,[L.GCSMOON2000]:null,[L.LON_LAT]:jd,[L.WGS84_COMPARABLE_LON_LAT]:jd,[L.SPHERICAL_ECEF]:ot,[L.SPHERICAL_MARS_PCPF]:null,[L.SPHERICAL_MOON_PCPF]:null,[L.UNKNOWN]:null,[L.WEB_MERCATOR]:Ade,[L.PLATE_CARREE]:Cde,[L.WGS84]:jd,[L.WGS84_ECEF]:Pde},[L.SPHERICAL_MARS_PCPF]:{[L.CGCS2000]:null,[L.GCSMARS2000]:n5,[L.GCSMOON2000]:null,[L.LON_LAT]:n5,[L.WGS84_COMPARABLE_LON_LAT]:null,[L.SPHERICAL_ECEF]:null,[L.SPHERICAL_MARS_PCPF]:ot,[L.SPHERICAL_MOON_PCPF]:null,[L.UNKNOWN]:null,[L.WEB_MERCATOR]:null,[L.PLATE_CARREE]:null,[L.WGS84]:null,[L.WGS84_ECEF]:null},[L.SPHERICAL_MOON_PCPF]:{[L.CGCS2000]:null,[L.GCSMARS2000]:null,[L.GCSMOON2000]:i5,[L.LON_LAT]:i5,[L.WGS84_COMPARABLE_LON_LAT]:null,[L.SPHERICAL_ECEF]:null,[L.SPHERICAL_MARS_PCPF]:null,[L.SPHERICAL_MOON_PCPF]:ot,[L.UNKNOWN]:null,[L.WEB_MERCATOR]:null,[L.PLATE_CARREE]:null,[L.WGS84]:null,[L.WGS84_ECEF]:null},[L.UNKNOWN]:{[L.CGCS2000]:null,[L.GCSMARS2000]:null,[L.GCSMOON2000]:null,[L.LON_LAT]:null,[L.WGS84_COMPARABLE_LON_LAT]:null,[L.SPHERICAL_ECEF]:null,[L.SPHERICAL_MARS_PCPF]:null,[L.SPHERICAL_MOON_PCPF]:null,[L.UNKNOWN]:ot,[L.WEB_MERCATOR]:null,[L.PLATE_CARREE]:null,[L.WGS84]:null,[L.WGS84_ECEF]:null},[L.LON_LAT]:{[L.CGCS2000]:ot,[L.GCSMARS2000]:ot,[L.GCSMOON2000]:ot,[L.LON_LAT]:ot,[L.WGS84_COMPARABLE_LON_LAT]:ot,[L.SPHERICAL_ECEF]:Dd,[L.SPHERICAL_MARS_PCPF]:r5,[L.SPHERICAL_MOON_PCPF]:t5,[L.UNKNOWN]:null,[L.WEB_MERCATOR]:Y0,[L.PLATE_CARREE]:Fd,[L.WGS84]:ot,[L.WGS84_ECEF]:Vd},[L.WGS84_COMPARABLE_LON_LAT]:{[L.CGCS2000]:null,[L.GCSMARS2000]:null,[L.GCSMOON2000]:null,[L.LON_LAT]:ot,[L.WGS84_COMPARABLE_LON_LAT]:ot,[L.SPHERICAL_ECEF]:Dd,[L.SPHERICAL_MARS_PCPF]:null,[L.SPHERICAL_MOON_PCPF]:null,[L.UNKNOWN]:null,[L.WEB_MERCATOR]:null,[L.PLATE_CARREE]:Fd,[L.WGS84]:ot,[L.WGS84_ECEF]:Vd},[L.PLATE_CARREE]:{[L.CGCS2000]:Nd,[L.GCSMARS2000]:null,[L.GCSMOON2000]:null,[L.LON_LAT]:Nd,[L.WGS84_COMPARABLE_LON_LAT]:Nd,[L.SPHERICAL_ECEF]:kde,[L.SPHERICAL_MARS_PCPF]:null,[L.SPHERICAL_MOON_PCPF]:null,[L.UNKNOWN]:null,[L.WEB_MERCATOR]:Lde,[L.PLATE_CARREE]:ot,[L.WGS84]:Nd,[L.WGS84_ECEF]:Ode}};function PG(e,t,r=aA()){return R(e)||R(t)?null:Dde(e,t,r).projector}function Dde(e,t,r){if(R(e)||R(t)||r.source.spatialReference===e&&r.dest.spatialReference===t)return r;const i=Z0(e,r.source),n=Z0(t,r.dest);return i===L.UNKNOWN&&n===L.UNKNOWN?Hr(e,t)?r.projector=ot:r.projector=null:r.projector=ef[i][n],r}function aA(){return{source:{spatialReference:null,spatialReferenceId:L.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:L.UNKNOWN,metersPerUnit:1},projector:ot}}const RG={spatialReference:null,spatialReferenceId:L.UNKNOWN},jde={spatialReference:null,spatialReferenceId:L.UNKNOWN},FG=aA();aA();const Qo=Uy(1),Qf=D7(1),j1=cn(),Rl=cn(),Fl=cn(),hr=cn();var gC;let Po=gC=class extends B{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new gC({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};u([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Po.prototype,"cols",void 0),u([d({type:ct,json:{write:!0}})],Po.prototype,"level",void 0),u([d({type:String,json:{write:!0}})],Po.prototype,"levelValue",void 0),u([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Po.prototype,"origin",void 0),u([d({type:Number,json:{write:!0}})],Po.prototype,"resolution",void 0),u([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Po.prototype,"rows",void 0),u([d({type:Number,json:{write:!0}})],Po.prototype,"scale",void 0),Po=gC=u([E("esri.layers.support.LOD")],Po);const lA=Po;var su;const s5=new Ee({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let vr=su=class extends B{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={}){const{resolutionFactor:t=1,scales:r,size:i=256,spatialReference:n=Te.WebMercator,numLODs:s=24}=e;if(!ci(n)){const f=[];if(r)for(let m=0;m<r.length;m++){const y=r[m];f.push({level:m,scale:y,resolution:y})}else{let m=5e-4;for(let y=s-1;y>=0;y--)f.unshift({level:y,scale:m,resolution:m}),m*=2}return new su({dpi:96,lods:f,origin:new ye(0,0,n),size:[i,i],spatialReference:n})}const o=ho(n),a=e.origin?new ye({x:e.origin.x,y:e.origin.y,spatialReference:n}):new ye(o?{x:o.origin[0],y:o.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),l=96,c=1/(Em(n)*39.37*l),h=[];if(r)for(let f=0;f<r.length;f++){const m=r[f],y=m*c;h.push({level:f,scale:m,resolution:y})}else{let f=t7(n)?512/i*5916575275917094e-7:256/i*591657527591555e-6;const m=Math.ceil(s/t);h.push({level:0,scale:f,resolution:f*c});for(let y=1;y<m;y++){const g=f/2**t,v=g*c;h.push({level:y,scale:g,resolution:v}),f=g}}return new su({dpi:l,lods:h,origin:a,size:[i,i],spatialReference:n})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const r=ho(e);return e.isWrappable&&Math.abs(r.origin[0]-t.x)<=r.dx}return!1}readOrigin(e,t){return ye.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,r=0;const i=[];this._levelToLOD={},e&&(t=-1/0,r=1/0,e.forEach(n=>{i.push(n.scale),t=n.scale>t?n.scale:t,r=n.scale<r?n.scale:r,this._levelToLOD[n.level]=n})),this._set("scales",i),this._set("minScale",t),this._set("maxScale",r),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];{const r=Math.floor(e),i=r+1;return t[r]/(t[r]/t[i])**(e-r)}}scaleToZoom(e){const t=this.scales,r=t.length-1;let i=0;for(;i<r;i++){const n=t[i],s=t[i+1];if(n<=e)return i;if(s===e)return i+1;if(n>e&&s<e)return i+Math.log(n/e)/Math.log(n/s)}return i}snapScale(e,t=.95){const r=this.scaleToZoom(e);return r%Math.floor(r)>=t?this.zoomToScale(Math.ceil(r)):this.zoomToScale(Math.floor(r))}tileAt(e,t,r,i){const n=this.lodAt(e);if(!n)return null;let s,o;if(typeof t=="number")s=t,o=r;else if(Hr(t.spatialReference,this.spatialReference))s=t.x,o=t.y,i=r;else{const c=F2(t,this.spatialReference);if(R(c))return null;s=c.x,o=c.y,i=r}const a=n.resolution*this.size[0],l=n.resolution*this.size[1];return i||(i={id:null,level:0,row:0,col:0,extent:bs()}),i.level=e,i.row=Math.floor((this.origin.y-o)/l+.001),i.col=Math.floor((s-this.origin.x)/a+.001),this.updateTileInfo(i),i}updateTileInfo(e,t=su.ExtrapolateOptions.NONE){let r=this.lodAt(e.level);if(!r&&t===su.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<e.level&&(r=o)}if(!r)return;const i=e.level-r.level,n=r.resolution*this.size[0]/2**i,s=r.resolution*this.size[1]/2**i;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=bs()),e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*s,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+s}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const{resolution:r}=this.lodAt(t.level),i=r*this.size[0],n=r*this.size[1];return e[0]=this.origin.x+t.col*i,e[1]=this.origin.y-(t.row+1)*n,e[2]=e[0]+i,e[3]=e[1]+n,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return su.fromJSON(this.write({}))}getOrCreateCompatible(e,t){if(this.size[0]===256&&this.size[1]===256)return e===256?this:null;const r=[],i=this.lods.length;for(let n=0;n<i;n++){const s=this.lods[n],o=s.resolution*t;r.push(new lA({level:s.level,scale:s.scale,resolution:o}))}return new su({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let r=0;r<e.length;r++){const i=e[r];this._upsampleLevels[i.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/i.resolution:0},t=i}}};u([d({type:Number,json:{write:!0}})],vr.prototype,"compressionQuality",void 0),u([d({type:Number,json:{write:!0}})],vr.prototype,"dpi",void 0),u([d({type:String,json:{read:s5.read,write:s5.write,origins:{"web-scene":{read:!1,write:!1}}}})],vr.prototype,"format",void 0),u([d({readOnly:!0})],vr.prototype,"isWrappable",null),u([d({type:ye,json:{write:!0}})],vr.prototype,"origin",void 0),u([te("origin")],vr.prototype,"readOrigin",null),u([d({type:[lA],value:null,json:{write:!0}})],vr.prototype,"lods",null),u([d({readOnly:!0})],vr.prototype,"minScale",void 0),u([d({readOnly:!0})],vr.prototype,"maxScale",void 0),u([d({readOnly:!0})],vr.prototype,"scales",void 0),u([d({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],vr.prototype,"size",void 0),u([te("size",["rows","cols"])],vr.prototype,"readSize",null),u([se("size",{cols:{type:ct},rows:{type:ct}})],vr.prototype,"writeSize",null),u([d({type:Te,json:{write:!0}})],vr.prototype,"spatialReference",void 0),vr=su=u([E("esri.layers.support.TileInfo")],vr),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(vr||(vr={}));const Qg=vr,__={widthBreakpoint:{getValue(e){const t=e.viewSize[0],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,r=t[0],i=t[1],n=this.values;return i>=r?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},Gx={xsmall:544,small:768,medium:992,large:1200};function Vde(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function Bx(e,t){return t?__[e].valueToClassName[t].split(" "):[]}const zde=e=>{let t=class extends e{constructor(...r){super(...r),this._breakpointsHandles=new zt,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=Gx}initialize(){this._breakpointsHandles.add(G(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),je))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=qi(this._breakpointsHandles))}set breakpoints(r){if(r===this._get("breakpoints"))return;const i=Vde(r);if(!i){const n=JSON.stringify(Gx,null,2);console.warn("provided breakpoints are not valid, using defaults:"+n)}r=i?r:Gx,this._set("breakpoints",{...r})}_updateClassNames(){if(!this.container)return;const r=$i.acquire(),i=$i.acquire();let n,s=!1;for(n in __){const o=this[n],a=__[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(s=!0,this[n]=a,Bx(n,o).forEach(l=>i.push(l)),Bx(n,a).forEach(l=>r.push(l)))}s&&(this._applyClassNameChanges(r,i),$i.release(r),$i.release(i))}_applyClassNameChanges(r,i){const n=this.container;n&&(i.forEach(s=>n.classList.remove(s)),r.forEach(s=>n.classList.add(s)))}_removeActiveClassNames(){const r=this.container;if(!r)return;let i;for(i in __)Bx(i,this[i]).forEach(n=>r.classList.remove(n))}};return u([d()],t.prototype,"breakpoints",null),u([d()],t.prototype,"orientation",void 0),u([d()],t.prototype,"widthBreakpoint",void 0),u([d()],t.prototype,"heightBreakpoint",void 0),t=u([E("esri.views.BreakpointsOwner")],t),t};function uA(e){return typeof e=="string"?document.getElementById(e):e}function NG(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function o5(e,t){const r=t.parentNode;r&&r.insertBefore(e,t)}function a5(e,t){for(;;){const r=e.firstChild;if(!r)break;t.appendChild(r)}}/*!
 * @esri/arcgis-html-sanitizer - v2.10.0 - Tue Mar 15 2022 16:38:25 GMT-0400 (Eastern Daylight Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2017 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 * 
 * Lodash/isPlainObject
 * Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 * MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 */var Ude="[object Object]";function Gde(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function Bde(e,t){return function(r){return e(t(r))}}var qde=Function.prototype,DG=Object.prototype,jG=qde.toString,Wde=DG.hasOwnProperty,Hde=jG.call(Object),Jde=DG.toString,Zde=Bde(Object.getPrototypeOf,Object);function Yde(e){return!!e&&typeof e=="object"}function Qde(e){if(!Yde(e)||Jde.call(e)!=Ude||Gde(e))return!1;var t=Zde(e);if(t===null)return!0;var r=Wde.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&jG.call(r)==Hde}var Kde=Qde,$d={exports:{}},Ut={},Q0={exports:{}},Ch={};function VG(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function Xde(e,t,r){}function ehe(e,t,r){}var the=/javascript\s*\:/img;function rhe(e,t){return the.test(t)?"":t}Ch.whiteList=VG();Ch.getDefaultWhiteList=VG;Ch.onAttr=Xde;Ch.onIgnoreAttr=ehe;Ch.safeAttrValue=rhe;var ihe={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,n;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,n=e.length;i<n;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},cy=ihe;function nhe(e,t){e=cy.trimRight(e),e[e.length-1]!==";"&&(e+=";");var r=e.length,i=!1,n=0,s=0,o="";function a(){if(!i){var h=cy.trim(e.slice(n,s)),f=h.indexOf(":");if(f!==-1){var m=cy.trim(h.slice(0,f)),y=cy.trim(h.slice(f+1));if(m){var g=t(n,o.length,m,y,h);g&&(o+=g+"; ")}}}n=s+1}for(;s<r;s++){var l=e[s];if(l==="/"&&e[s+1]==="*"){var c=e.indexOf("*/",s+2);if(c===-1)break;s=c+1,n=s+1,i=!1}else l==="("?i=!0:l===")"?i=!1:l===";"?i||a():l===`
`&&a()}return cy.trim(o)}var she=nhe,V1=Ch,ohe=she;function l5(e){return e==null}function ahe(e){var t={};for(var r in e)t[r]=e[r];return t}function zG(e){e=ahe(e||{}),e.whiteList=e.whiteList||V1.whiteList,e.onAttr=e.onAttr||V1.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||V1.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||V1.safeAttrValue,this.options=e}zG.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,n=r.onAttr,s=r.onIgnoreAttr,o=r.safeAttrValue,a=ohe(e,function(l,c,h,f,m){var y=i[h],g=!1;if(y===!0?g=y:typeof y=="function"?g=y(f):y instanceof RegExp&&(g=y.test(f)),g!==!0&&(g=!1),f=o(h,f),!!f){var v={position:c,sourcePosition:l,source:m,isWhite:g};if(g){var _=n(h,f,v);return l5(_)?h+":"+f:_}else{var _=s(h,f,v);if(!l5(_))return _}}});return a};var lhe=zG;(function(e,t){var r=Ch,i=lhe;function n(o,a){var l=new i(a);return l.process(o)}t=e.exports=n,t.FilterCSS=i;for(var s in r)t[s]=r[s]})(Q0,Q0.exports);var cA={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,n;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,n=e.length;i<n;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,r=t.exec(e);return r?r.index:-1}},uhe=Q0.exports.FilterCSS,che=Q0.exports.getDefaultWhiteList,pS=cA;function UG(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var GG=new uhe;function dhe(e,t,r){}function hhe(e,t,r){}function phe(e,t,r){}function fhe(e,t,r){}function BG(e){return e.replace(yhe,"&lt;").replace(ghe,"&gt;")}function mhe(e,t,r,i){if(r=YG(r),t==="href"||t==="src"){if(r=pS.trim(r),r==="#")return"#";if(!(r.substr(0,7)==="http://"||r.substr(0,8)==="https://"||r.substr(0,7)==="mailto:"||r.substr(0,4)==="tel:"||r.substr(0,11)==="data:image/"||r.substr(0,6)==="ftp://"||r.substr(0,2)==="./"||r.substr(0,3)==="../"||r[0]==="#"||r[0]==="/"))return""}else if(t==="background"){if(z1.lastIndex=0,z1.test(r))return""}else if(t==="style"){if(u5.lastIndex=0,u5.test(r)||(c5.lastIndex=0,c5.test(r)&&(z1.lastIndex=0,z1.test(r))))return"";i!==!1&&(i=i||GG,r=i.process(r))}return r=QG(r),r}var yhe=/</g,ghe=/>/g,vhe=/"/g,whe=/&quot;/g,_he=/&#([a-zA-Z0-9]*);?/gim,bhe=/&colon;?/gim,She=/&newline;?/gim,z1=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,u5=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,c5=/u\s*r\s*l\s*\(.*/gi;function qG(e){return e.replace(vhe,"&quot;")}function WG(e){return e.replace(whe,'"')}function HG(e){return e.replace(_he,function(r,i){return i[0]==="x"||i[0]==="X"?String.fromCharCode(parseInt(i.substr(1),16)):String.fromCharCode(parseInt(i,10))})}function JG(e){return e.replace(bhe,":").replace(She," ")}function ZG(e){for(var t="",r=0,i=e.length;r<i;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return pS.trim(t)}function YG(e){return e=WG(e),e=HG(e),e=JG(e),e=ZG(e),e}function QG(e){return e=qG(e),e=BG(e),e}function $he(){return""}function xhe(e,t){typeof t!="function"&&(t=function(){});var r=!Array.isArray(e);function i(o){return r?!0:pS.indexOf(e,o)!==-1}var n=[],s=!1;return{onIgnoreTag:function(o,a,l){if(i(o))if(l.isClosing){var c="[/removed]",h=l.position+c.length;return n.push([s!==!1?s:l.position,h]),s=!1,c}else return s||(s=l.position),"[removed]";else return t(o,a,l)},remove:function(o){var a="",l=0;return pS.forEach(n,function(c){a+=o.slice(l,c[0]),l=c[1]}),a+=o.slice(l),a}}}function Ehe(e){for(var t="",r=0;r<e.length;){var i=e.indexOf("<!--",r);if(i===-1){t+=e.slice(r);break}t+=e.slice(r,i);var n=e.indexOf("-->",i);if(n===-1)break;r=n+3}return t}function The(e){var t=e.split("");return t=t.filter(function(r){var i=r.charCodeAt(0);return i===127?!1:i<=31?i===10||i===13:!0}),t.join("")}Ut.whiteList=UG();Ut.getDefaultWhiteList=UG;Ut.onTag=dhe;Ut.onIgnoreTag=hhe;Ut.onTagAttr=phe;Ut.onIgnoreTagAttr=fhe;Ut.safeAttrValue=mhe;Ut.escapeHtml=BG;Ut.escapeQuote=qG;Ut.unescapeQuote=WG;Ut.escapeHtmlEntities=HG;Ut.escapeDangerHtml5Entities=JG;Ut.clearNonPrintableCharacter=ZG;Ut.friendlyAttrValue=YG;Ut.escapeAttrValue=QG;Ut.onIgnoreTagStripAll=$he;Ut.StripTagBody=xhe;Ut.stripCommentTag=Ehe;Ut.stripBlankChar=The;Ut.cssFilter=GG;Ut.getDefaultCSSWhiteList=che;var H2={},Tu=cA;function Mhe(e){var t=Tu.spaceIndex(e);if(t===-1)var r=e.slice(1,-1);else var r=e.slice(1,t+1);return r=Tu.trim(r).toLowerCase(),r.slice(0,1)==="/"&&(r=r.slice(1)),r.slice(-1)==="/"&&(r=r.slice(0,-1)),r}function Ihe(e){return e.slice(0,2)==="</"}function Che(e,t,r){var i="",n=0,s=!1,o=!1,a=0,l=e.length,c="",h="";e:for(a=0;a<l;a++){var f=e.charAt(a);if(s===!1){if(f==="<"){s=a;continue}}else if(o===!1){if(f==="<"){i+=r(e.slice(n,a)),s=a,n=a;continue}if(f===">"){i+=r(e.slice(n,s)),h=e.slice(s,a+1),c=Mhe(h),i+=t(s,i.length,c,h,Ihe(h)),n=a+1,s=!1;continue}if(f==='"'||f==="'")for(var m=1,y=e.charAt(a-m);y.trim()===""||y==="=";){if(y==="="){o=f;continue e}y=e.charAt(a-++m)}}else if(f===o){o=!1;continue}}return n<e.length&&(i+=r(e.substr(n))),i}var khe=/[^a-zA-Z0-9_:\.\-]/gim;function Lhe(e,t){var r=0,i=[],n=!1,s=e.length;function o(f,m){if(f=Tu.trim(f),f=f.replace(khe,"").toLowerCase(),!(f.length<1)){var y=t(f,m||"");y&&i.push(y)}}for(var a=0;a<s;a++){var l=e.charAt(a),c,h;if(n===!1&&l==="="){n=e.slice(r,a),r=a+1;continue}if(n!==!1&&a===r&&(l==='"'||l==="'")&&e.charAt(a-1)==="="){if(h=e.indexOf(l,a+1),h===-1)break;c=Tu.trim(e.slice(r+1,h)),o(n,c),n=!1,a=h,r=a+1;continue}if(/\s|\n|\t/.test(l))if(e=e.replace(/\s|\n|\t/g," "),n===!1)if(h=Ohe(e,a),h===-1){c=Tu.trim(e.slice(r,a)),o(c),n=!1,r=a+1;continue}else{a=h-1;continue}else if(h=Ahe(e,a-1),h===-1){c=Tu.trim(e.slice(r,a)),c=d5(c),o(n,c),n=!1,r=a+1;continue}else continue}return r<e.length&&(n===!1?o(e.slice(r)):o(n,d5(Tu.trim(e.slice(r))))),Tu.trim(i.join(" "))}function Ohe(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="="?t:-1}}function Ahe(e,t){for(;t>0;t--){var r=e[t];if(r!==" ")return r==="="?t:-1}}function Phe(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function d5(e){return Phe(e)?e.substr(1,e.length-2):e}H2.parseTag=Che;H2.parseAttr=Lhe;var Rhe=Q0.exports.FilterCSS,Ys=Ut,KG=H2,Fhe=KG.parseTag,Nhe=KG.parseAttr,b_=cA;function U1(e){return e==null}function Dhe(e){var t=b_.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=b_.trim(e.slice(t+1,-1));var r=e[e.length-1]==="/";return r&&(e=b_.trim(e.slice(0,-1))),{html:e,closing:r}}function jhe(e){var t={};for(var r in e)t[r]=e[r];return t}function XG(e){e=jhe(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Ys.onIgnoreTagStripAll),e.whiteList=e.whiteList||e.allowList||Ys.whiteList,e.onTag=e.onTag||Ys.onTag,e.onTagAttr=e.onTagAttr||Ys.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Ys.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Ys.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Ys.safeAttrValue,e.escapeHtml=e.escapeHtml||Ys.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new Rhe(e.css))}XG.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,n=r.onTag,s=r.onIgnoreTag,o=r.onTagAttr,a=r.onIgnoreTagAttr,l=r.safeAttrValue,c=r.escapeHtml,h=t.cssFilter;r.stripBlankChar&&(e=Ys.stripBlankChar(e)),r.allowCommentTag||(e=Ys.stripCommentTag(e));var f=!1;if(r.stripIgnoreTagBody){var f=Ys.StripTagBody(r.stripIgnoreTagBody,s);s=f.onIgnoreTag}var m=Fhe(e,function(y,g,v,_,w){var b={sourcePosition:y,position:g,isClosing:w,isWhite:i.hasOwnProperty(v)},S=n(v,_,b);if(!U1(S))return S;if(b.isWhite){if(b.isClosing)return"</"+v+">";var M=Dhe(_),T=i[v],k=Nhe(M.html,function(F,q){var z=b_.indexOf(T,F)!==-1,Q=o(v,F,q,z);if(!U1(Q))return Q;if(z)return q=l(v,F,q,h),q?F+'="'+q+'"':F;var Q=a(v,F,q,z);return U1(Q)?void 0:Q}),_="<"+v;return k&&(_+=" "+k),M.closing&&(_+=" /"),_+=">",_}else{var S=s(v,_,b);return U1(S)?c(_):S}},c);return f&&(m=f.remove(m)),m};var Vhe=XG;(function(e,t){var r=Ut,i=H2,n=Vhe;function s(l,c){var h=new n(c);return h.process(l)}t=e.exports=s,t.filterXSS=s,t.FilterXSS=n;for(var o in r)t[o]=r[o];for(var o in i)t[o]=i[o];function a(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}a()&&(self.filterXSS=e.exports)})($d,$d.exports);var zhe=function(){function e(t,r){var i=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,l){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?i.sanitizeUrl(a):$d.exports.safeAttrValue(s,o,a,l)}};var n;t&&!r?n=t:t&&r?(n=Object.create(this.arcgisFilterOptions),Object.keys(t).forEach(function(s){s==="whiteList"?n.whiteList=i._extendObjectOfArrays([i.arcgisWhiteList,t.whiteList||{}]):n[s]=t[s]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList),this.xssFilterOptions=n,this._xssFilter=new $d.exports.FilterXSS(n)}return e.prototype.sanitize=function(t,r){switch(r===void 0&&(r={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,r);default:return r.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,r){var i=(r!=null?r:{}).isProtocolRequired,n=i===void 0?!0:i,s=this._trim(t.substring(0,t.indexOf(":"))),o=t==="/",a=/^#/.test(t),l=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||l?$d.exports.escapeAttrValue(t):!s&&!n?$d.exports.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,r,i,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,r,i,n):$d.exports.safeAttrValue(t,r,i,n)},e.prototype.validate=function(t,r){r===void 0&&(r={});var i=this.sanitize(t,r);return{isValid:t===i,sanitized:i}},e.prototype._extendObjectOfArrays=function(t){var r={};return t.forEach(function(i){Object.keys(i).forEach(function(n){Array.isArray(i[n])&&Array.isArray(r[n])?r[n]=r[n].concat(i[n]):r[n]=i[n]})}),r},e.prototype._iterateOverObject=function(t,r){var i=this;r===void 0&&(r={});try{var n=!1,s=void 0;if(Array.isArray(t))s=t.reduce(function(a,l){var c=i.validate(l,r);return c.isValid?a.concat([l]):(n=!0,a.concat([c.sanitized]))},[]);else if(Kde(t)){var o=Object.keys(t);s=o.reduce(function(a,l){var c=t[l],h=i.validate(c,r);return h.isValid?a[l]=c:(n=!0,a[l]=h.sanitized),a},{})}else return r.allowUndefined&&typeof t>"u"?void 0:null;return n?s:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const J2=new Map;function eB(){J2.clear()}function Uhe(e){return J2.get(e)}function Ghe(e,t){J2.set(e,t)}function qx(e){J2.delete(e)}var vh,Kf,Bhe=function(e){if("WebkitTransition"in e.style)vh="webkitTransitionEnd",Kf="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");vh="transitionend",Kf="animationend"}},tB=function(e){vh||Bhe(e)},qhe=function(e,t){return t===void 0&&(t=e+"-active"),function(r){tB(r);var i=!1,n=function(s){i||(i=!0,r.removeEventListener(vh,n),r.removeEventListener(Kf,n),r.classList.remove(e),r.classList.remove(t))};r.classList.add(e),r.addEventListener(vh,n),r.addEventListener(Kf,n),requestAnimationFrame(function(){r.classList.add(t)})}},Whe=function(e,t){return t===void 0&&(t=e+"-active"),function(r,i){tB(r);var n=!1,s=function(o){n||(n=!0,r.removeEventListener(vh,s),r.removeEventListener(Kf,s),i())};r.classList.add(e),r.addEventListener(vh,s),r.addEventListener(Kf,s),requestAnimationFrame(function(){r.classList.add(t)})}};const Hhe=Z.getLogger("esri.widgets.support.widgetUtils");function tf(e){const t=$i.acquire();for(let i=0;i<arguments.length;i++){const n=arguments[i],s=typeof n;if(s==="string")t.push(n);else if(Array.isArray(n))t.push.apply(t,n);else if(s==="object")for(const o in n)n[o]&&t.push(o)}const r=t.join(" ");return $i.release(t),r}(()=>{const e=new Map,t=new ResizeObserver(r=>{eB();for(const i of r)e.get(i.target)(i)});return(r,i,n)=>(e.has(r)&&Hhe.error("Already observing element",r),e.set(r,i),t.observe(r,n),dm(()=>{t.unobserve(r),e.delete(r)}))})();function oo(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function h5(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function vC(e){const t="data-node-ref";this[e.getAttribute(t)]=e}function Jhe(e,t){return(e==="enter"?qhe:Whe)(t)}const Zhe=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],Yhe=Zhe.reduce((e,t)=>(e[t]=[],e),{}),Qhe=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],rB=new zhe({whiteList:Yhe,onTagAttr:(e,t,r)=>{const i=`${t}="${r}"`;if(Qhe.includes(t))return i},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function Khe(e){return e==="Enter"||e===" "}const iB="http://www.w3.org/",Z2=`${iB}2000/svg`,nB=`${iB}1999/xlink`;let fS,p5=[],dA=(e,t)=>{let r={};return Object.keys(e).forEach(i=>{r[i]=e[i]}),t&&Object.keys(t).forEach(i=>{r[i]=t[i]}),r},hA=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),sB=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},Xhe=(e,t,r)=>{if(t.vnodeSelector!==""){for(let i=r;i<e.length;i++)if(hA(e[i],t))return i}return-1},Wx=(e,t,r,i)=>{let n=e[t];if(n.vnodeSelector==="")return;let s=n.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<e.length;o++)if(o!==t){let a=e[o];if(hA(a,n))throw new Error(`${r.vnodeSelector} had a ${n.vnodeSelector} child ${i==="added"?i:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},epe=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},wC=[],_C=!1,oB=e=>{(e.children||[]).forEach(oB),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},f5=()=>{_C=!1,wC.forEach(oB),wC.length=0},m5=e=>{wC.push(e),_C||(_C=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(f5,{timeout:16}):setTimeout(f5,16))},y5=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r)return t.style.pointerEvents="none",void r(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),m5(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),m5(e))},tpe=(e,t,r)=>{if(!t)return;let i=r.eventHandlerInterceptor,n=Object.keys(t),s=n.length;for(let o=0;o<s;o++){let a=n[o],l=t[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")bC(e,l,!0);else if(a==="classes"){let c=Object.keys(l),h=c.length;for(let f=0;f<h;f++){let m=c[f];l[m]&&e.classList.add(m)}}else if(a==="styles"){let c=Object.keys(l),h=c.length;for(let f=0;f<h;f++){let m=c[f],y=l[m];y&&(sB(y),r.styleApplyer(e,m,y))}}else if(a!=="key"&&l!=null){let c=typeof l;c==="function"?(a.lastIndexOf("on",0)===0&&(i&&(l=i(a,l,e,t)),a==="oninput"&&function(){let h=l;l=function(f){h.apply(this,[f]),f.target["oninput-value"]=f.target.value}}()),e[a]=l):r.namespace===Z2?a==="href"?e.setAttributeNS(nB,a,l):e.setAttribute(a,l):c==="string"&&a!=="value"?a==="innerHTML"?e[a]=rB.sanitize(l):e.setAttribute(a,l):e[a]=l}}},rpe=(e,t,r)=>{if(t)for(let i of t)rf(i,e,void 0,r)},aB=(e,t,r)=>{rpe(e,t.children,r),t.text&&(e.textContent=t.text),tpe(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])},rf=(e,t,r,i)=>{let n,s=0,o=e.vnodeSelector,a=t.ownerDocument;if(o==="")n=e.domNode=a.createTextNode(e.text),r!==void 0?t.insertBefore(n,r):t.appendChild(n);else{for(let l=0;l<=o.length;++l){let c=o.charAt(l);if(l===o.length||c==="."||c==="#"){let h=o.charAt(s-1),f=o.slice(s,l);h==="."?n.classList.add(f):h==="#"?n.id=f:(f==="svg"&&(i=dA(i,{namespace:Z2})),i.namespace!==void 0?n=e.domNode=a.createElementNS(i.namespace,f):(n=e.domNode=e.domNode||a.createElement(f),f==="input"&&e.properties&&e.properties.type!==void 0&&n.setAttribute("type",e.properties.type)),r!==void 0?t.insertBefore(n,r):n.parentNode!==t&&t.appendChild(n)),s=l+1}}aB(n,e,i)}},bC=(e,t,r)=>{t&&t.split(" ").forEach(i=>{i&&e.classList.toggle(i,r)})},ipe=(e,t,r,i)=>{if(!r)return;let n=!1,s=Object.keys(r),o=s.length;for(let a=0;a<o;a++){let l=s[a],c=r[l],h=t[l];if(l==="class")h!==c&&(bC(e,h,!1),bC(e,c,!0));else if(l==="classes"){let f=e.classList,m=Object.keys(c),y=m.length;for(let g=0;g<y;g++){let v=m[g],_=!!c[v];_!==!!h[v]&&(n=!0,_?f.add(v):f.remove(v))}}else if(l==="styles"){let f=Object.keys(c),m=f.length;for(let y=0;y<m;y++){let g=f[y],v=c[g];v!==h[g]&&(n=!0,v?(sB(v),i.styleApplyer(e,g,v)):i.styleApplyer(e,g,""))}}else if(c||typeof h!="string"||(c=""),l==="value"){let f=e[l];f!==c&&(e["oninput-value"]?f===e["oninput-value"]:c!==h)&&(e[l]=c,e["oninput-value"]=void 0),c!==h&&(n=!0)}else if(c!==h){let f=typeof c;f==="function"&&i.eventHandlerInterceptor||(i.namespace===Z2?l==="href"?e.setAttributeNS(nB,l,c):e.setAttribute(l,c):f==="string"?l==="innerHTML"?e[l]=rB.sanitize(c):l==="role"&&c===""?e.removeAttribute(l):e.setAttribute(l,c):e[l]!==c&&(e[l]=c),n=!0)}}return n},npe=(e,t,r,i,n)=>{if(r===i)return!1;i=i||p5;let s,o=(r=r||p5).length,a=i.length,l=0,c=0,h=!1;for(;c<a;){let f=l<o?r[l]:void 0,m=i[c];if(f!==void 0&&hA(f,m))h=fS(f,m,n)||h,l++;else{let y=Xhe(r,m,l+1);if(y>=0){for(s=l;s<y;s++)y5(r[s]),Wx(r,s,e,"removed");h=fS(r[y],m,n)||h,l=y+1}else rf(m,t,l<o?r[l].domNode:void 0,n),epe(m),Wx(i,c,e,"added")}c++}if(o>l)for(s=l;s<o;s++)y5(r[s]),Wx(r,s,e,"removed");return h};fS=(e,t,r)=>{let i=e.domNode,n=!1;if(e===t)return!1;let s=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let o=i.ownerDocument.createTextNode(t.text);return i.parentNode.replaceChild(o,i),t.domNode=o,n=!0,n}t.domNode=i}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(r=dA(r,{namespace:Z2})),e.text!==t.text&&(s=!0,t.text===void 0?i.removeChild(i.firstChild):i.textContent=t.text),t.domNode=i,s=npe(t,i,e.children,t.children,r)||s,s=ipe(i,e.properties,t.properties,r)||s,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[i,r,t.vnodeSelector,t.properties,t.children]);return s&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(i,t.properties,e.properties),n};let dy=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let i=e;e=r,fS(i,r,t)},domNode:e.domNode});const spe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}};let lp=e=>dA(spe,e),qu={create:(e,t)=>(t=lp(t),rf(e,document.createElement("div"),void 0,t),dy(e,t)),append:(e,t,r)=>(r=lp(r),rf(t,e,void 0,r),dy(t,r)),insertBefore:(e,t,r)=>(r=lp(r),rf(t,e.parentNode,e,r),dy(t,r)),merge:(e,t,r)=>(r=lp(r),t.domNode=e,aB(e,t,r),dy(t,r)),replace:(e,t,r)=>(r=lp(r),rf(t,e.parentNode,e,r),e.parentNode.removeChild(e),dy(t,r))},lB,ope=(e,t)=>{let r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r};lB=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let ape=(e,t)=>{let r=e;return t.forEach(i=>{r=r&&r.children?lB(r.children,n=>n.domNode===i):void 0}),r},lpe=(e,t,r)=>{let i=function(n){r("domEvent",n);let s=t(),o=ope(n.currentTarget,s.domNode);o.reverse();let a,l=ape(s.getLastRender(),o);return e.scheduleRender(),l&&(a=l.properties[`on${n.type}`].apply(l.properties.bind||this,arguments)),r("domEventProcessed",n),a};return(n,s,o,a)=>i},mS=e=>{let t,r,i=lp(e),n=i.performanceLogger,s=!0,o=!1,a=[],l=[],c=(f,m,y)=>{let g,v=()=>g;i.eventHandlerInterceptor=lpe(t,v,n),g=f(m,y(),i),a.push(g),l.push(y)},h=()=>{if(r=void 0,s){s=!1,n("renderStart",void 0);for(let f=0;f<a.length;f++){let m=l[f]();n("rendered",void 0),a[f].update(m),n("patched",void 0)}n("renderDone",void 0),s=!0}};return t={renderNow:h,scheduleRender:()=>{r||o||(r=requestAnimationFrame(h))},stop:()=>{r&&(cancelAnimationFrame(r),r=void 0),o=!0},resume:()=>{o=!1,s=!0,t.scheduleRender()},append:(f,m)=>{c(qu.append,f,m)},insertBefore:(f,m)=>{c(qu.insertBefore,f,m)},merge:(f,m)=>{c(qu.merge,f,m)},replace:(f,m)=>{c(qu.replace,f,m)},detach:f=>{for(let m=0;m<l.length;m++)if(l[m]===f)return l.splice(m,1),a.splice(m,1)[0];throw new Error("renderFunction was not found")}},t},ou=class extends le{constructor(){super(...arguments),this.items=new de,this._watchUpdatingTracking=new $f,this._callbacks=new Map,this._projector=mS(),this._hiddenProjector=mS()}get needsRender(){return this.items.length>0}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(const r of t.added){const i=()=>r.render();this._callbacks.set(r,i),this._projector.append(this.surface,i)}for(const r of t.removed){const i=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(i.domNode),this._callbacks.delete(r)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const t=this._hiddenSurface,r=this._hiddenProjector;let i=null;const n=()=>(i=e.render(),i);r.append(t,n),r.renderNow();const s={left:0,top:0,right:0,bottom:0};if(i&&i.domNode){const o=i.domNode.getBoundingClientRect();s.left=o.left,s.top=o.top,s.right=o.right,s.bottom=o.bottom}for(r.detach(n);t.firstChild;)t.removeChild(t.firstChild);return s}overlaps(e,t){const r=this.computeBoundingRect(e),i=this.computeBoundingRect(t);return Math.max(r.left,i.left)<=Math.min(r.right,i.right)&&Math.max(r.top,i.top)<=Math.min(r.bottom,i.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}renderCanvas(e){if(!this.items.some(r=>r.visible))return;const t=e.getContext("2d");t.save(),t.font=`10px ${getComputedStyle(this.surface).fontFamily}`,this.items.forEach(r=>{t.save(),r.renderCanvas(t),t.restore()}),t.restore()}};u([d({readOnly:!0})],ou.prototype,"surface",void 0),u([d({readOnly:!0})],ou.prototype,"items",void 0),u([d({readOnly:!0})],ou.prototype,"needsRender",null),u([d({readOnly:!0})],ou.prototype,"_watchUpdatingTracking",void 0),u([d({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],ou.prototype,"updating",void 0),ou=u([E("esri.views.overlay.ViewOverlay")],ou);const g5=ou;function pA(e,t,r,i){let n=null,s=1e3;typeof t=="number"?(s=t,i=r):(n=t!=null?t:null,s=r);let o,a=0;const l=()=>{a=0,e.apply(i,o)},c=(...h)=>{n&&n.apply(i,h),o=h,s?a||(a=setTimeout(l,s)):l()};return c.remove=()=>{a&&(clearTimeout(a),a=0)},c.forceUpdate=()=>{a&&(clearTimeout(a),l())},c.hasPendingUpdates=()=>!!a,c}function X(e,t){const r=t?{...t,source:e}:e;return d({aliasOf:r})}const upe="randomUUID"in crypto;function cpe(){if(upe)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=r=>e[r].toString(16);return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}const dpe={handleInterceptedEvent:(e,t,r,i)=>(e.scheduleRender(),t.properties[`on${i.type}`].apply(t.properties.bind||r,[i]))},hpe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{e.style[t]=r}},ppe=e=>({...hpe,...e}),fpe=(e,t)=>{const r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r},mpe=(e,t)=>e.find(t),v5=(e,t,r=!1)=>{let i=e;return t.forEach((n,s)=>{const o=i!=null&&i.children?mpe(i.children,a=>a.domNode===n):void 0;r&&!o&&s!==t.length-1||(i=o)}),i},ype=e=>{let t;const r={...dpe,...e},i=ppe(r),n=i.performanceLogger;let s,o=!0,a=!1;const l=[],c=[],h=(m,y,g)=>{var w;let v;i.eventHandlerInterceptor=(b,S,M,T)=>function(k){let N;n("domEvent",k);const F=fpe(k.currentTarget,v.domNode),q=F.some(Q=>{var K;return customElements.get((K=Q==null?void 0:Q.tagName)==null?void 0:K.toLowerCase())});if(k.eventPhase===Event.CAPTURING_PHASE||!q)F.reverse(),N=v5(v.getLastRender(),F);else{const Q=k.composedPath(),K=Q.slice(Q.indexOf(k.currentTarget),Q.indexOf(v.domNode)).filter(ce=>ce.getRootNode()===ce.ownerDocument).reverse();N=v5(v.getLastRender(),K,!0)}let z;return N&&(z=r.handleInterceptedEvent(t,N,this,k)),n("domEventProcessed",k),z},(w=r.postProcessProjectionOptions)==null||w.call(r,i);const _=g();v=m(y,_,i),l.push(v),c.push(g),r.afterFirstVNodeRendered&&r.afterFirstVNodeRendered(v,_)};let f=()=>{if(s=void 0,o){o=!1,n("renderStart",void 0);for(let m=0;m<l.length;m++){const y=c[m]();n("rendered",void 0),l[m].update(y),n("patched",void 0)}n("renderDone",void 0),o=!0}};return r.modifyDoRenderImplementation&&(f=r.modifyDoRenderImplementation(f,l,c)),t={renderNow:f,scheduleRender:()=>{s||a||(s=requestAnimationFrame(f))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),a=!0},resume:()=>{a=!1,o=!0,t.scheduleRender()},append:(m,y)=>{h(qu.append,m,y)},insertBefore:(m,y)=>{h(qu.insertBefore,m,y)},merge:(m,y)=>{h(qu.merge,m,y)},replace:(m,y)=>{h(qu.replace,m,y)},detach:m=>{for(let y=0;y<c.length;y++)if(c[y]===m)return c.splice(y,1),l.splice(y,1)[0];throw new Error("renderFunction was not found")}},t},Ne={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let up,uB,Y2,cB=!1,yS=!1,fA=!1,In=!1,w5=null,SC=!1;const Mm=typeof window<"u"?window:{};Ne.cssVarShim&&Mm.CSS;const fo=Mm.document||{head:{}},YDe=Mm.HTMLElement||class{},Jr={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,r,i)=>e.addEventListener(t,r,i),rel:(e,t,r,i)=>e.removeEventListener(t,r,i),ce:(e,t)=>new CustomEvent(e,t)},gS=Ne.shadowDomShim&&Ne.shadowDom?(()=>(fo.head.attachShadow+"").indexOf("[native")>-1)():!0,gpe=(()=>{let e=!1;try{fo.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),vpe=e=>Promise.resolve(e),wpe=Ne.constructableCSS?(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replace=="function"}catch{}return!1})():!1,dB=(e,t,r,i)=>{r&&r.map(([n,s,o])=>{const a=bpe(e,n),l=_pe(t,o),c=Spe(n);Jr.ael(a,s,l,c),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>Jr.rel(a,s,l,c))})},_pe=(e,t)=>r=>{try{Ne.lazyLoad||e.$hostElement$[t](r)}catch(i){Pv(i)}},bpe=(e,t)=>t&4?fo:t&8?Mm:t&16?fo.body:e,Spe=e=>gpe?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0,_5="http://www.w3.org/1999/xlink",wh=(e,t="")=>()=>{},b5=new WeakMap,$pe=(e,t,r)=>{let i=_S.get(e);wpe&&r?(i=i||new CSSStyleSheet,i.replace(t)):i=t,_S.set(e,i)},xpe=(e,t,r,i)=>{let n=hB(t,r),s=_S.get(n);if(e=e.nodeType===11?e:fo,s)if(typeof s=="string"){e=e.head||e;let o=b5.get(e),a;o||b5.set(e,o=new Set),o.has(n)||(a=fo.createElement("style"),a.innerHTML=s,e.insertBefore(a,e.querySelector("link")),o&&o.add(n))}else e.adoptedStyleSheets.includes(s)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,s]);return n},Epe=e=>{const t=e.$cmpMeta$,r=e.$hostElement$,i=t.$flags$,n=wh("attachStyles",t.$tagName$),s=xpe(gS&&r.shadowRoot?r.shadowRoot:r.getRootNode(),t,e.$modeName$);i&10&&(r["s-sc"]=s,r.classList.add(s+"-h"),i&2&&r.classList.add(s+"-s")),n()},hB=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),Tpe=e=>rfe.map(t=>t(e)).find(t=>!!t),S5={},Mpe="http://www.w3.org/2000/svg",Ipe="http://www.w3.org/1999/xhtml",Cpe=e=>e!=null,mA=e=>(e=typeof e,e==="object"||e==="function"),pB=(e,t,...r)=>{let i=null,n=null,s=null,o=!1,a=!1,l=[];const c=f=>{for(let m=0;m<f.length;m++)i=f[m],Array.isArray(i)?c(i):i!=null&&typeof i!="boolean"&&((o=typeof e!="function"&&!mA(i))&&(i=String(i)),o&&a?l[l.length-1].$text$+=i:l.push(o?vS(null,i):i),a=o)};if(c(r),t&&(Ne.isDev&&e==="input"&&Ape(t),Ne.vdomKey&&t.key&&(n=t.key),Ne.slotRelocation&&t.name&&(s=t.name),Ne.vdomClass)){const f=t.className||t.class;f&&(t.class=typeof f!="object"?f:Object.keys(f).filter(m=>f[m]).join(" "))}if(Ne.isDev&&l.some(fB)&&tfe(`The <Host> must be the single root component. Make sure:
- You are NOT using hostData() and <Host> in the same component.
- <Host> is used once, and it's the single root component of the render() function.`),Ne.vdomFunctional&&typeof e=="function")return e(t===null?{}:t,l,Lpe);const h=vS(e,null);return h.$attrs$=t,l.length>0&&(h.$children$=l),Ne.vdomKey&&(h.$key$=n),Ne.slotRelocation&&(h.$name$=s),h},vS=(e,t)=>{const r={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return Ne.vdomAttribute&&(r.$attrs$=null),Ne.vdomKey&&(r.$key$=null),Ne.slotRelocation&&(r.$name$=null),r},kpe={},fB=e=>e&&e.$tag$===kpe,Lpe={forEach:(e,t)=>e.map($5).forEach(t),map:(e,t)=>e.map($5).map(t).map(Ope)},$5=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),Ope=e=>{if(typeof e.vtag=="function"){const r=Object.assign({},e.vattrs);return e.vkey&&(r.key=e.vkey),e.vname&&(r.name=e.vname),pB(e.vtag,r,...e.vchildren||[])}const t=vS(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},Ape=e=>{const t=Object.keys(e),r=t.indexOf("value");if(r===-1)return;const i=t.indexOf("type"),n=t.indexOf("min"),s=t.indexOf("max"),o=t.indexOf("step");(r<i||r<n||r<s||r<o)&&xB('The "value" prop of <input> should be set after "min", "max", "type" and "step"')},x5=(e,t,r,i,n,s)=>{if(r!==i){let o=I5(e,t),a=t.toLowerCase();if(t==="class"){const l=e.classList,c=E5(r),h=E5(i);l.remove(...c.filter(f=>f&&!h.includes(f))),l.add(...h.filter(f=>f&&!c.includes(f)))}else if(t==="style"){for(const l in r)(!i||i[l]==null)&&(l.includes("-")?e.style.removeProperty(l):e.style[l]="");for(const l in i)(!r||i[l]!==r[l])&&(l.includes("-")?e.style.setProperty(l,i[l]):e.style[l]=i[l])}else if(t!=="key")if(t==="ref")i&&i(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):I5(Mm,a)?t=a.slice(2):t=a[2]+t.slice(3),r&&Jr.rel(e,t,r,!1),i&&Jr.ael(e,t,i,!1);else{const l=mA(i);if((o||l&&i!==null)&&!n)try{if(e.tagName.includes("-"))e[t]=i;else{let h=i==null?"":i;t==="list"?o=!1:(r==null||e[t]!=h)&&(e[t]=h)}}catch{}let c=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(t=a,c=!0),i==null||i===!1?(i!==!1||e.getAttribute(t)==="")&&(c?e.removeAttributeNS(_5,t):e.removeAttribute(t)):(!o||s&4||n)&&!l&&(i=i===!0?"":i,c?e.setAttributeNS(_5,t,i):e.setAttribute(t,i))}}},Ppe=/\s/,E5=e=>e?e.split(Ppe):[],mB=(e,t,r,i)=>{const n=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,s=e&&e.$attrs$||S5,o=t.$attrs$||S5;for(i in s)i in o||x5(n,i,s[i],void 0,r,t.$flags$);for(i in o)x5(n,i,s[i],o[i],r,t.$flags$)},wS=(e,t,r,i)=>{let n=t.$children$[r],s=0,o,a,l;if(cB||(fA=!0,n.$tag$==="slot"&&(up&&i.classList.add(up+"-s"),n.$flags$|=n.$children$?2:1)),n.$text$!==null)o=n.$elm$=fo.createTextNode(n.$text$);else if(n.$flags$&1)o=n.$elm$=fo.createTextNode("");else{if(In||(In=n.$tag$==="svg"),o=n.$elm$=fo.createElementNS(In?Mpe:Ipe,n.$flags$&2?"slot-fb":n.$tag$),In&&n.$tag$==="foreignObject"&&(In=!1),mB(null,n,In),Cpe(up)&&o["s-si"]!==up&&o.classList.add(o["s-si"]=up),n.$children$)for(s=0;s<n.$children$.length;++s)a=wS(e,n,s,o),a&&o.appendChild(a);n.$tag$==="svg"?In=!1:o.tagName==="foreignObject"&&(In=!0)}return o["s-hn"]=Y2,n.$flags$&3&&(o["s-sr"]=!0,o["s-cr"]=uB,o["s-sn"]=n.$name$||"",l=e&&e.$children$&&e.$children$[r],l&&l.$tag$===n.$tag$&&e.$elm$&&K0(e.$elm$,!1)),o},K0=(e,t)=>{Jr.$flags$|=1;const r=e.childNodes;for(let i=r.length-1;i>=0;i--){const n=r[i];n["s-hn"]!==Y2&&n["s-ol"]&&(vB(n).insertBefore(n,yA(n)),n["s-ol"].remove(),n["s-ol"]=void 0,fA=!0),t&&K0(n,t)}Jr.$flags$&=-2},yB=(e,t,r,i,n,s)=>{let o=e["s-cr"]&&e["s-cr"].parentNode||e,a;for(o.shadowRoot&&o.tagName===Y2&&(o=o.shadowRoot);n<=s;++n)i[n]&&(a=wS(null,r,n,e),a&&(i[n].$elm$=a,o.insertBefore(a,yA(t))))},gB=(e,t,r,i,n)=>{for(;t<=r;++t)(i=e[t])&&(n=i.$elm$,bB(i),yS=!0,n["s-ol"]?n["s-ol"].remove():K0(n,!0),n.remove())},Rpe=(e,t,r,i)=>{let n=0,s=0,o=0,a=0,l=t.length-1,c=t[0],h=t[l],f=i.length-1,m=i[0],y=i[f],g,v;for(;n<=l&&s<=f;)if(c==null)c=t[++n];else if(h==null)h=t[--l];else if(m==null)m=i[++s];else if(y==null)y=i[--f];else if(G1(c,m))cp(c,m),c=t[++n],m=i[++s];else if(G1(h,y))cp(h,y),h=t[--l],y=i[--f];else if(G1(c,y))(c.$tag$==="slot"||y.$tag$==="slot")&&K0(c.$elm$.parentNode,!1),cp(c,y),e.insertBefore(c.$elm$,h.$elm$.nextSibling),c=t[++n],y=i[--f];else if(G1(h,m))(c.$tag$==="slot"||y.$tag$==="slot")&&K0(h.$elm$.parentNode,!1),cp(h,m),e.insertBefore(h.$elm$,c.$elm$),h=t[--l],m=i[++s];else{for(o=-1,a=n;a<=l;++a)if(t[a]&&t[a].$key$!==null&&t[a].$key$===m.$key$){o=a;break}o>=0?(v=t[o],v.$tag$!==m.$tag$?g=wS(t&&t[s],r,o,e):(cp(v,m),t[o]=void 0,g=v.$elm$),m=i[++s]):(g=wS(t&&t[s],r,s,e),m=i[++s]),g&&vB(c.$elm$).insertBefore(g,yA(c.$elm$))}n>l?yB(e,i[f+1]==null?null:i[f+1].$elm$,r,i,s,f):s>f&&gB(t,n,l)},G1=(e,t)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:e.$key$===t.$key$:!1,yA=e=>e&&e["s-ol"]||e,vB=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,cp=(e,t)=>{const r=t.$elm$=e.$elm$,i=e.$children$,n=t.$children$,s=t.$tag$,o=t.$text$;let a;o===null?(In=s==="svg"?!0:s==="foreignObject"?!1:In,s==="slot"||mB(e,t,In),i!==null&&n!==null?Rpe(r,i,t,n):n!==null?(e.$text$!==null&&(r.textContent=""),yB(r,null,t,n,0,n.length-1)):i!==null&&gB(i,0,i.length-1),In&&s==="svg"&&(In=!1)):(a=r["s-cr"])?a.parentNode.textContent=o:e.$text$!==o&&(r.data=o)},wB=e=>{let t=e.childNodes,r,i,n,s,o,a;for(i=0,n=t.length;i<n;i++)if(r=t[i],r.nodeType===1){if(r["s-sr"]){for(o=r["s-sn"],r.hidden=!1,s=0;s<n;s++)if(a=t[s].nodeType,t[s]["s-hn"]!==r["s-hn"]||o!==""){if(a===1&&o===t[s].getAttribute("slot")){r.hidden=!0;break}}else if(a===1||a===3&&t[s].textContent.trim()!==""){r.hidden=!0;break}}wB(r)}},io=[],_B=e=>{let t,r,i,n,s,o,a=0,l=e.childNodes,c=l.length;for(;a<c;a++){if(t=l[a],t["s-sr"]&&(r=t["s-cr"])&&r.parentNode)for(i=r.parentNode.childNodes,n=t["s-sn"],o=i.length-1;o>=0;o--)r=i[o],!r["s-cn"]&&!r["s-nr"]&&r["s-hn"]!==t["s-hn"]&&(T5(r,n)?(s=io.find(h=>h.$nodeToRelocate$===r),yS=!0,r["s-sn"]=r["s-sn"]||n,s?s.$slotRefNode$=t:io.push({$slotRefNode$:t,$nodeToRelocate$:r}),r["s-sr"]&&io.map(h=>{T5(h.$nodeToRelocate$,r["s-sn"])&&(s=io.find(f=>f.$nodeToRelocate$===r),s&&!h.$slotRefNode$&&(h.$slotRefNode$=s.$slotRefNode$))})):io.some(h=>h.$nodeToRelocate$===r)||io.push({$nodeToRelocate$:r}));t.nodeType===1&&_B(t)}},T5=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",bB=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(bB)},Fpe=(e,t)=>{const r=e.$hostElement$,i=e.$cmpMeta$,n=e.$vnode$||vS(null,null),s=fB(t)?t:pB(null,null,t);Y2=r.tagName,i.$attrsToReflect$&&(s.$attrs$=s.$attrs$||{},i.$attrsToReflect$.map(([o,a])=>s.$attrs$[a]=r[o])),s.$tag$=null,s.$flags$|=4,e.$vnode$=s,s.$elm$=n.$elm$=r.shadowRoot||r,up=r["s-sc"],uB=r["s-cr"],cB=gS&&(i.$flags$&1)!==0,yS=!1,cp(n,s);{if(Jr.$flags$|=1,fA){_B(s.$elm$);let o,a,l,c,h,f,m=0;for(;m<io.length;m++)o=io[m],a=o.$nodeToRelocate$,a["s-ol"]||(l=fo.createTextNode(""),l["s-nr"]=a,a.parentNode.insertBefore(a["s-ol"]=l,a));for(m=0;m<io.length;m++)if(o=io[m],a=o.$nodeToRelocate$,o.$slotRefNode$){for(c=o.$slotRefNode$.parentNode,h=o.$slotRefNode$.nextSibling,l=a["s-ol"];l=l.previousSibling;)if(f=l["s-nr"],f&&f["s-sn"]===a["s-sn"]&&c===f.parentNode&&(f=f.nextSibling,!f||!f["s-nr"])){h=f;break}(!h&&c!==a.parentNode||a.nextSibling!==h)&&a!==h&&(!a["s-hn"]&&a["s-ol"]&&(a["s-hn"]=a["s-ol"].parentNode.nodeName),c.insertBefore(a,h))}else a.nodeType===1&&(a.hidden=!0)}yS&&wB(s.$elm$),Jr.$flags$&=-2,io.length=0}},Npe=e=>Ne.lazyLoad?Im(e).$hostElement$:e,QDe=(e,t,r)=>{const i=Npe(e);return{emit:n=>(Ne.isDev&&!i.isConnected&&xB(`The "${t}" event was emitted, but the dispatcher node is no longer connected to the dom.`),Dpe(i,t,{bubbles:!!(r&4),composed:!!(r&2),cancelable:!!(r&1),detail:n}))}},Dpe=(e,t,r)=>{const i=Jr.ce(t,r);return e.dispatchEvent(i),i},jpe=(e,t)=>{},gA=(e,t)=>(e.$flags$|=16,jpe(e,e.$ancestorComponent$),sfe(()=>Vpe(e,t))),Vpe=(e,t)=>{const r=e.$hostElement$,i=wh("scheduleUpdate",e.$cmpMeta$.$tagName$),n=r;let s;return t?s=Tf(n,"componentWillLoad"):s=Tf(n,"componentWillUpdate"),s=M5(s,()=>Tf(n,"componentWillRender")),i(),M5(s,()=>zpe(e,n,t))},zpe=async(e,t,r)=>{const i=e.$hostElement$,n=wh("update",e.$cmpMeta$.$tagName$);i["s-rc"],r&&Epe(e);const s=wh("render",e.$cmpMeta$.$tagName$);Upe(e,t,i),s(),n(),Gpe(e)},Upe=(e,t,r)=>{try{w5=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(Ne.hasRenderFn||Ne.reflect)&&(Ne.vdomRender||Ne.reflect)&&(Ne.hydrateServerSide||Fpe(e,t))}catch(a){Pv(a,e.$hostElement$)}return w5=null,null},Gpe=e=>{const t=e.$cmpMeta$.$tagName$,r=e.$hostElement$,i=wh("postUpdate",t),n=r;e.$ancestorComponent$,Tf(n,"componentDidRender"),e.$flags$&64?(Tf(n,"componentDidUpdate"),i()):(e.$flags$|=64,Tf(n,"componentDidLoad"),i())},KDe=e=>{if(Ne.updatable){const t=Im(e),r=t.$hostElement$.isConnected;return r&&(t.$flags$&18)===2&&gA(t,!1),r}return!1},Tf=(e,t,r)=>{if(e&&e[t])try{return e[t](r)}catch(i){Pv(i)}},M5=(e,t)=>e&&e.then?e.then(t):t(),Bpe=(e,t)=>e!=null&&!mA(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,qpe=(e,t)=>Im(e).$instanceValues$.get(t),Wpe=(e,t,r,i)=>{const n=Im(e),s=e,o=n.$instanceValues$.get(t),a=n.$flags$,l=s;r=Bpe(r,i.$members$[t][0]);const c=Number.isNaN(o)&&Number.isNaN(r);if(r!==o&&!c){n.$instanceValues$.set(t,r);{if(i.$watchers$&&a&128){const f=i.$watchers$[t];f&&f.map(m=>{try{l[m](r,o,t)}catch(y){Pv(y,s)}})}if((a&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(r,o,t)===!1)return;gA(n,!1)}}}},Hpe=(e,t,r)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const i=Object.entries(t.$members$),n=e.prototype;i.map(([s,[o]])=>{(o&31||o&32)&&Object.defineProperty(n,s,{get(){return qpe(this,s)},set(a){Wpe(this,s,a,t)},configurable:!0,enumerable:!0})});{const s=new Map;n.attributeChangedCallback=function(o,a,l){Jr.jmp(()=>{const c=s.get(o);if(this.hasOwnProperty(c))l=this[c],delete this[c];else if(n.hasOwnProperty(c)&&typeof this[c]=="number"&&this[c]==l)return;this[c]=l===null&&typeof this[c]=="boolean"?!1:l})},e.observedAttributes=i.filter(([o,a])=>a[0]&15).map(([o,a])=>{const l=a[1]||o;return s.set(l,o),a[0]&512&&t.$attrsToReflect$.push([o,l]),l})}}return e},Jpe=async(e,t,r,i,n)=>{if((t.$flags$&32)===0&&(n=e.constructor,t.$flags$|=32,customElements.whenDefined(r.$tagName$).then(()=>t.$flags$|=128),n.style)){let o=n.style;typeof o!="string"&&(o=o[t.$modeName$=Tpe(e)]);const a=hB(r,t.$modeName$);if(!_S.has(a)){const l=wh("registerStyles",r.$tagName$);$pe(a,o,!!(r.$flags$&1)),l()}}t.$ancestorComponent$,(()=>gA(t,!0))()},Zpe=e=>{},Ype=e=>{if((Jr.$flags$&1)===0){const t=Im(e),r=t.$cmpMeta$,i=wh("connectedCallback",r.$tagName$);t.$flags$&1?(dB(e,t,r.$listeners$),Zpe(t.$lazyInstance$)):(t.$flags$|=1,r.$flags$&12&&Qpe(e),r.$members$&&Object.entries(r.$members$).map(([n,[s]])=>{if(s&31&&e.hasOwnProperty(n)){const o=e[n];delete e[n],e[n]=o}}),Jpe(e,t,r)),i()}},Qpe=e=>{const t=e["s-cr"]=fo.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},Kpe=e=>{if((Jr.$flags$&1)===0){const t=Im(e);t.$rmListeners$&&(t.$rmListeners$.map(r=>r()),t.$rmListeners$=void 0)}},XDe=(e,t)=>{const r={$flags$:t[0],$tagName$:t[1]};Ne.member&&(r.$members$=t[2]),Ne.hostListener&&(r.$listeners$=t[3]),Ne.watchCallback&&(r.$watchers$=e.$watchers$),Ne.reflect&&(r.$attrsToReflect$=[]),Ne.shadowDom&&!gS&&r.$flags$&1&&(r.$flags$|=8);const i=e.prototype.connectedCallback,n=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){efe(this,r)},connectedCallback(){Ype(this),Ne.connectedCallback&&i&&i.call(this)},disconnectedCallback(){Kpe(this),Ne.disconnectedCallback&&n&&n.call(this)},__attachShadow(){gS?Ne.shadowDelegatesFocus?this.attachShadow({mode:"open",delegatesFocus:!!(r.$flags$&16)}):this.attachShadow({mode:"open"}):this.shadowRoot=this}}),e.is=r.$tagName$,Hpe(e,r)},e4e=e=>{const t=new URL(e,Jr.$resourcesUrl$);return t.origin!==Mm.location.origin?t.href:t.pathname},Xpe=e=>Jr.$resourcesUrl$=e,SB=new WeakMap,Im=e=>SB.get(e),efe=(e,t)=>{const r={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return Ne.isDev&&(r.$renderCount$=0),Ne.method&&Ne.lazyLoad&&(r.$onInstancePromise$=new Promise(i=>r.$onInstanceResolve$=i)),Ne.asyncLoading&&(r.$onReadyPromise$=new Promise(i=>r.$onReadyResolve$=i),e["s-p"]=[],e["s-rc"]=[]),dB(e,r,t.$listeners$),SB.set(e,r)},I5=(e,t)=>t in e,Pv=(e,t)=>(0,console.error)(e,t),$B=Ne.isTesting?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],tfe=(...e)=>console.error(...$B,...e),xB=(...e)=>console.warn(...$B,...e),_S=new Map,rfe=[],C5=[],EB=[],ife=(e,t)=>r=>{e.push(r),SC||(SC=!0,t&&Jr.$flags$&4?nfe($C):Jr.raf($C))},k5=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(r){Pv(r)}e.length=0},$C=()=>{k5(C5),k5(EB),(SC=C5.length>0)&&Jr.raf($C)},nfe=e=>vpe().then(e),sfe=ife(EB,!0),t4e={isDev:!!Ne.isDev,isBrowser:!0,isServer:!1,isTesting:!!Ne.isTesting};let TB;function ofe(){Xpe(no(De(TB)))}TB="components/assets";const MB=Symbol("widget"),afe=[],lfe={},bS=new WeakMap;function IB(e,t){let r=t.children;if(r&&r.length)for(let n=0;n<r.length;++n)r[n]=IB(e,r[n]);else r=afe;const i=t.vnodeSelector;if(vA(i)){const n=t.properties||lfe,s=n.key||i;return{vnodeSelector:"div",properties:{key:s,afterCreate:ufe,afterUpdate:cfe,afterRemoved:CB,parentWidget:e,widgetConstructor:i,widgetProperties:{...n,key:s,children:r}},children:void 0,text:void 0,domNode:null}}return t}function ufe(e,t,r,{parentWidget:i,widgetConstructor:n,widgetProperties:s}){var a;const o=new n(s);o.container=e,bS.set(e,o),(a=o.afterCreate)==null||a.call(o,o,e),i._internalHandles.add(dm(()=>CB(e)))}function cfe(e,t,r,{widgetProperties:i}){var s;const n=bS.get(e);n&&(n.set(i),(s=n.afterUpdate)==null||s.call(n,n,e))}function CB(e){const t=bS.get(e);t&&(t.destroy(),bS.delete(e))}function vA(e){return typeof e=="function"&&e[MB]}const L5=new Set;function dfe(e){L5.add(e),e.finally(()=>L5.delete(e))}const kB="esri.widgets.Widget",hfe=Z.getLogger(kB);let pfe=0;const ffe={widgetIcon:"esri-icon-checkbox-unchecked"};function LB(e,t){for(const r in t)e[r]!=null&&(typeof e[r]=="object"&&typeof t[r]=="object"?LB(e[r],t[r]):e[r]=t[r]);return e}const mfe=ype({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,r=/capture$/i;e.eventHandlerInterceptor=(i,n,s,o)=>{const a=t(i,n,s,o),l=r.test(i);if(!((i=i.replace(r,"")).toLowerCase()in s)||l){const c=i[2].toLowerCase()+i.slice(3),h=y=>a.call(s,y);s.addEventListener(c,h,l);const f=()=>s.removeEventListener(c,h,l),m=o.afterRemoved;o.afterRemoved=y=>{m==null||m(y),f()}}return a}},handleInterceptedEvent(e,t,r,i){const{eventPhase:n,type:s}=i,o=n===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const l=t.properties;(a in l||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,a in l))&&(eB(),e.scheduleRender(),l[a].call(l.bind||r,i))}});let Hx=!1,or=class extends xv(ua.EventedAccessor){constructor(e,t){super(e,t),this._attached=!1,this._internalHandles=new zt,this._projector=mfe,this._readyForTrueRender=!1,this.domNode=null,this.iconClass=ffe.widgetIcon,this.label=this.declaredClass.split(".").pop(),this.visible=!0,this.key=this,this._loadLocale=C2(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const s=await Zt(this._messageBundleProps.map(async({bundlePath:o,propertyName:a})=>{let l=await v3(o);this.uiStrings&&Object.keys(this.uiStrings)&&(l=LB(P(l),this.uiStrings)),this[a]=l}));for(const o of s)o.error&&hfe.error("widget-intl:locale-error",this.declaredClass,o.error)}await this.loadLocale()}),ofe();const r="esri-widget-uid-"+cpe(),i=this.render.bind(this);this._trackingTarget=new k2(()=>this.scheduleRender());const n=()=>{var h;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:r,class:"",styles:{display:"none"}},domNode:void 0,children:void 0,text:void 0};const s=i();let{properties:o}=s;o||(s.properties=o={});let{key:a,styles:l}=o;a||(o.key=r),l||(o.styles=l={}),l.display||(l.display="");let c=0;return(h=s.children)==null||h.forEach(f=>{if(vA(f.vnodeSelector))return;let{properties:m}=f;m||(f.properties=m={}),m.key||(m.key=`${this.id}--${c++}`)}),IB(this,s)};this.render=()=>{if(Hx)return n();let s=Uhe(this);if(s)return s;this._trackingTarget.clear(),Hx=!0;try{s=yl(this._trackingTarget,n)}catch(o){throw console.error(o),o}finally{Hx=!1}return Ghe(this,s),s},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),dfe(this._resourcesFetch)}normalizeCtorArgs(e,t){const r={...e};return t&&(r.container=t),r}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(_M)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(qi(this._trackingTarget),qi(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,qx(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return uA(e)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+pfe++}set id(e){e&&this._set("id",e)}get renderable(){return this._resourcesFetch}get test(){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(qx(this),this._projector.scheduleRender())}classes(...e){return tf.apply(this,e)}renderNow(){qx(this),this._projector.renderNow()}_postInitialize(){var t;if(this.destroyed)return;this.scheduleRender(),(t=this._delegatedEventNames)!=null&&t.length&&this._internalHandles.add(G(()=>this.viewModel,(r,i)=>{i&&this._internalHandles.remove("delegated-events"),r&&T2(r)&&this._internalHandles.add(this._delegatedEventNames.map(n=>M2(r,n,s=>{this.emit(n,s)})),"delegated-events")},je)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(_M),this.scheduleRender()};this._internalHandles.add([m3(e),G(()=>this.uiStrings,e),di(()=>this.container,r=>{this.destroyed||this._attach(r)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1)}};or[MB]=!0,u([d()],or.prototype,"_readyForTrueRender",void 0),u([d({value:null})],or.prototype,"container",null),u([ze("container")],or.prototype,"castContainer",null),u([d({aliasOf:"container"})],or.prototype,"domNode",void 0),u([d()],or.prototype,"iconClass",void 0),u([d()],or.prototype,"id",null),u([d()],or.prototype,"label",void 0),u([d()],or.prototype,"renderable",null),u([d()],or.prototype,"uiStrings",void 0),u([d()],or.prototype,"viewModel",void 0),u([d()],or.prototype,"visible",void 0),u([d()],or.prototype,"key",void 0),u([d()],or.prototype,"children",void 0),u([d()],or.prototype,"afterCreate",void 0),u([d()],or.prototype,"afterUpdate",void 0),u([d()],or.prototype,"afterRemoved",void 0),or=u([E(kB)],or);const Kt=or;function yfe(e){return 32+e.length}function gfe(){return 16}function r4e(e){if(!e)return 0;let t=32;for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];switch(typeof i){case"string":t+=yfe(i);break;case"number":t+=gfe();break;case"boolean":t+=4}}return t}function i4e(e,t){return 32+e.length*t}var SS;(function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"})(SS||(SS={}));const O5=["B","kB","MB","GB","TB"];function vfe(e,t){let r=t===0?0:Math.floor(Math.log(t)/Math.log(SS.KILOBYTES));r=an(r,0,O5.length-1);const i=sa(t/SS.KILOBYTES**r,{maximumFractionDigits:2});return ra(e.units.bytes[O5[r]],{fileSize:i})}function wfe(e){const{exifInfo:t,exifName:r,tagName:i}=e;if(!t||!r||!i)return null;const n=t.find(s=>s.name===r);return n?_fe({tagName:i,tags:n.tags}):null}function _fe(e){const{tagName:t,tags:r}=e;if(!r||!t)return null;const i=r.find(n=>n.name===t);return i&&i.value||null}var xC;const bfe={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let Di=xC=class extends B{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:e}=this,t=wfe({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return bfe[t]||null}clone(){return new xC({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};u([d({type:String})],Di.prototype,"contentType",void 0),u([d()],Di.prototype,"exifInfo",void 0),u([d({readOnly:!0})],Di.prototype,"orientationInfo",null),u([d({type:ct})],Di.prototype,"id",void 0),u([d({type:String})],Di.prototype,"globalId",void 0),u([d({type:String})],Di.prototype,"keywords",void 0),u([d({type:String})],Di.prototype,"name",void 0),u([d({json:{read:!1}})],Di.prototype,"parentGlobalId",void 0),u([d({json:{read:!1}})],Di.prototype,"parentObjectId",void 0),u([d({type:ct})],Di.prototype,"size",void 0),u([d({json:{read:!1}})],Di.prototype,"url",void 0),Di=xC=u([E("esri.layers.support.AttachmentInfo")],Di);const Sfe=Di;var EC;let Lr=EC=class extends B{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new EC(P({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};u([d({type:[String],json:{write:!0}})],Lr.prototype,"attachmentTypes",void 0),u([d({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],Lr.prototype,"attachmentsWhere",void 0),u([d({type:Boolean,json:{write:!0}})],Lr.prototype,"cacheHint",void 0),u([d({type:[String],json:{write:!0}})],Lr.prototype,"keywords",void 0),u([d({type:[Number],json:{write:!0}})],Lr.prototype,"globalIds",void 0),u([d({json:{write:!0}})],Lr.prototype,"name",void 0),u([d({type:Number,json:{read:{source:"resultRecordCount"}}})],Lr.prototype,"num",void 0),u([d({type:[Number],json:{write:!0}})],Lr.prototype,"objectIds",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],Lr.prototype,"returnMetadata",void 0),u([d({type:[Number],json:{write:!0}})],Lr.prototype,"size",void 0),u([d({type:Number,json:{read:{source:"resultOffset"}}})],Lr.prototype,"start",void 0),u([se("start"),se("num")],Lr.prototype,"writeStart",null),u([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Lr.prototype,"where",void 0),Lr=EC=u([E("esri.rest.support.AttachmentQuery")],Lr),Lr.from=dt(Lr);const TC=Lr,$fe="esri.widgets.Feature.support.featureUtils",A5=Z.getLogger($fe),xfe=/href=(""|'')/gi,Efe=/(\{([^\{\r\n]+)\})/g,Tfe=/\'/g,OB=/^\s*expression\//i,Mfe=/(\n)/gi,Ife=/[\u00A0-\u9999<>\&]/gim,Cfe=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,kfe=/^(?:mailto:|tel:)/,AB="relationships/",MC=j3("short-date-short-time");function PB(e){if(!R(e))return e.get("sourceLayer")||e.get("layer")}async function $S(e,t){return typeof e=="function"?e.call(null,t):e}function RB(e=""){if(e)return!kfe.test(e.trim().toLowerCase())}function FB(e){return!!e&&OB.test(e)}function Lfe(e,t){if(!FB(t)||!e)return null;const r=t.replace(OB,"").toLowerCase();let i;return e.some(n=>n.name.toLowerCase()===r&&(i=n,!0)),i}function NB(e,t){const r=Lfe(t,e==null?void 0:e.fieldName);return r?r.title||null:e?e.label||e.fieldName:null}function Ofe(e,t){const r=t.get(e.toLowerCase());return`{${r&&r.fieldName||e}}`}function Afe(e){return e.replace(xfe,"")}function xS(e,t){const r=wA(t,e);return r?r.name:e}function Pfe(e,t){return e&&e.map(r=>xS(r,t))}function wA(e,t){return e&&typeof e.getField=="function"?e.getField(t):null}function DB(e){return`${e}`.trim()}function Ud({attributes:e,globalAttributes:t,layer:r,text:i,expressionAttributes:n,fieldInfoMap:s}){return i?IC({formattedAttributes:t,template:Dfe(i,{...t,...n,...e},r),fieldInfoMap:s}):""}function IC({formattedAttributes:e,template:t,fieldInfoMap:r}){return DB(Afe(ra(ra(t,i=>Ofe(i,r)),e)))}function Rfe(e,t,r=!1){const i=t[e];if(typeof i=="string"){const n="%27",s=(r?encodeURIComponent(i):i).replace(Tfe,n);t[e]=s}}function Ffe(e,t=!1){const r={...e};return Object.keys(r).forEach(i=>Rfe(i,r,t)),r}function Nfe(e,t,r){const i=(t=DB(t))&&t[0]!=="{";return ra(e,Ffe(r,i))}function CC(e,t){return e.replace(Efe,(r,i,n)=>{const s=wA(t,n);return s?`{${s.name}}`:i})}function Dfe(e,t,r){const i=CC(e,r);return i&&i.replace(Cfe,(n,s,o)=>Nfe(n,s||o,t))}function jfe(e,t){if(typeof e=="string"&&t&&t.dateFormat==null&&(t.places!=null||t.digitSeparator!=null)){const r=Number(e);if(!isNaN(r))return r}return e}function Vfe(e){return(e==null?void 0:e.type)==="feature"}function P5(e){return!!(e!=null&&e.layer)}function zfe(e){return(e==null?void 0:e.type)==="map-image"}function Ufe(e,t){var c;const r=t.fieldInfos,i=t.fieldName,n=(c=jB(r,i))==null?void 0:c.clone(),s=t.preventPlacesFormatting,o=t.layer,a=wA(o,i);if(n&&(a==null?void 0:a.type)==="date"){const h=n.format||new Qp;h.dateFormat=h.dateFormat||"short-date-short-time",h.dateTimeFormatOptions=!P5(o)&&Vfe(o)&&o.datesInUnknownTimezone||P5(o)&&zfe(o.layer)&&o.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,n.format=h}const l=n&&n.format;return typeof e=="string"&&pU(i)&&l?l.formatRasterPixelValue(e):typeof(e=jfe(e,l))=="string"||e==null||l==null?Rv(e):s?sa(e,{...gU(l),minimumFractionDigits:0,maximumFractionDigits:20}):l.format(e)}function jB(e,t){if(!e||!e.length||!t)return;const r=t.toLowerCase();let i;return e.some(n=>!(!n.fieldName||n.fieldName.toLowerCase()!==r)&&(i=n,!0)),i}function Gfe({fieldName:e,graphic:t,layer:r}){if(sl(e)||!r||typeof r.getFeatureType!="function")return null;const{typeIdField:i}=r;if(!i||e!==i)return null;const n=r.getFeatureType(t);return n?n.name:null}function Bfe({fieldName:e,value:t,graphic:r,layer:i}){if(sl(e)||!i||typeof i.getFieldDomain!="function")return null;const n=i.getFieldDomain(e,{feature:r});return n&&n.type==="coded-value"?n.getName(t):null}function qfe(e,t){const{creatorField:r,creationDateField:i,editorField:n,editDateField:s}=e;if(!t)return;const o=t[s];if(typeof o=="number"){const l=t[n];return{type:"edit",date:wl(o,MC),user:l}}const a=t[i];if(typeof a=="number"){const l=t[r];return{type:"create",date:wl(a,MC),user:l}}return null}function Wfe(e,t){const r=new Map;return e&&e.forEach(i=>{const n=xS(i.fieldName,t);i.fieldName=n,r.set(n.toLowerCase(),i)}),r}function R5(e){const t=[];if(!e)return t;const{fieldInfos:r,content:i}=e;return r&&t.push(...r),i&&Array.isArray(i)&&i.forEach(n=>{if(n.type==="fields"){const s=n&&n.fieldInfos;s&&t.push(...s)}}),t}function _A(e){return e.replace(Ife,t=>`&#${t.charCodeAt(0)};`)}function Rv(e){return typeof e=="string"?e.replace(Mfe,'<br class="esri-text-new-line" />'):e}function VB(e){const{value:t,fieldName:r,fieldInfos:i,fieldInfoMap:n,layer:s,graphic:o}=e;if(t==null)return"";const a=Bfe({fieldName:r,value:t,graphic:o,layer:s});if(a)return a;const l=Gfe({fieldName:r,graphic:o,layer:s});if(l)return l;if(n.get(r.toLowerCase()))return Ufe(t,{fieldInfos:i||Array.from(n.values()),fieldName:r,layer:s});const c=s&&s.fieldsIndex;return c&&c.isDateField(r)?wl(t,MC):Rv(t)}function Jx({fieldInfos:e,attributes:t,layer:r,graphic:i,fieldInfoMap:n,relatedInfos:s}){const o={};return s==null||s.forEach(a=>Qfe({attributes:o,relatedInfo:a,fieldInfoMap:n,fieldInfos:e,layer:r})),Object.keys(t).forEach(a=>{const l=t[a];o[a]=VB({fieldName:a,fieldInfos:e,fieldInfoMap:n,layer:r,value:l,graphic:i})}),o}async function Hfe(e,t){var h,f;const{layer:r,graphic:i,outFields:n,objectIds:s,returnGeometry:o,spatialReference:a}=e,l=s[0];if(typeof l!="number"&&typeof l!="string"){const m="Could not query required fields for the specified feature. The feature's ID is invalid.",y={layer:r,graphic:i,objectId:l,requiredFields:n};return A5.warn(m,y),null}if(!((f=(h=r.capabilities)==null?void 0:h.operations)!=null&&f.supportsQuery)){const m="The specified layer cannot be queried. The following fields will not be available.",y={layer:r,graphic:i,requiredFields:n,returnGeometry:o};return A5.warn(m,y),null}const c=r.createQuery();return c.objectIds=s,c.outFields=n!=null&&n.length?n:[r.objectIdField],c.returnGeometry=!!o,c.returnZ=!!o,c.returnM=!!o,c.outSpatialReference=a,(await r.queryFeatures(c,t)).features[0]}async function Jfe(e){var i;if(!((i=e.expressionInfos)!=null&&i.length))return!1;const t=await vl(),{arcadeUtils:{hasGeometryFunctions:r}}=t;return r(e)}async function Zfe({graphic:e,popupTemplate:t,layer:r,spatialReference:i},n){if(!r||!t||(typeof r.load=="function"&&await r.load(n),!e.attributes))return;const s=e.attributes[r.objectIdField];if(s==null)return;const o=[s],a=await t.getRequiredFields(r.fieldsIndex),l=nle(a,e),c=l?[]:a,h=t.returnGeometry||await Jfe(t);if(l&&!h)return;const f=await Hfe({layer:r,graphic:e,outFields:c,objectIds:o,returnGeometry:h,spatialReference:i},n);f&&(f.geometry&&(e.geometry=f.geometry),f.attributes&&(e.attributes={...e.attributes,...f.attributes}))}function sl(e=""){return!!e&&e.includes(AB)}function Yfe(e){return e?`${AB}${e.layerId}/${e.fieldName}`:""}function F5({attributes:e,graphic:t,relatedInfo:r,fieldInfos:i,fieldInfoMap:n,layer:s}){e&&t&&r&&Object.keys(t.attributes).forEach(o=>{const a=Yfe({layerId:r.relation.id.toString(),fieldName:o}),l=t.attributes[o];e[a]=VB({fieldName:a,fieldInfos:i,fieldInfoMap:n,layer:s,value:l,graphic:t})})}function Qfe({attributes:e,relatedInfo:t,fieldInfoMap:r,fieldInfos:i,layer:n}){e&&t&&(t.relatedFeatures&&t.relatedFeatures&&t.relatedFeatures.forEach(s=>F5({attributes:e,graphic:s,relatedInfo:t,fieldInfoMap:r,fieldInfos:i,layer:n})),t.relatedStatsFeatures&&t.relatedStatsFeatures&&t.relatedStatsFeatures.forEach(s=>F5({attributes:e,graphic:s,relatedInfo:t,fieldInfoMap:r,fieldInfos:i,layer:n})))}const N5=e=>{if(!e)return!1;const t=e.toUpperCase();return t.includes("CURRENT_TIMESTAMP")||t.includes("CURRENT_DATE")||t.includes("CURRENT_TIME")},zB=({layer:e,method:t,query:r,definitionExpression:i})=>{var o,a;if(!((a=(o=e.capabilities)==null?void 0:o.query)!=null&&a.supportsCacheHint)||t==="attachments")return;const n=I(r.where)&&r.where,s=I(r.geometry)&&r.geometry;N5(i)||N5(n)||(s==null?void 0:s.type)==="extent"||r.resultType==="tile"||(r.cacheHint=!0)},Kfe=({query:e,layer:t,method:r})=>{zB({layer:t,method:r,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},Xfe=({queryPayload:e,layer:t,method:r})=>{zB({layer:t,method:r,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},D5={editing:!1,operations:{add:!0,update:!0,delete:!0}},UB=de.ofType(Sfe),eme="graphic.layer.capabilities.operations.supportsResizeAttachments";let Ns=class extends le{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...D5},this.activeAttachmentInfo=null,this.attachmentInfos=new UB,this.graphic=null,this.mode="view",this.own(G(()=>this.graphic,()=>this._graphicChanged(),je))}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(e){return{...D5,...e}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){return this.get(eme)||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:t}=this;if(!e||typeof e.queryAttachments!="function")throw new O("invalid-layer","getAttachments(): A valid layer is required.");const r=this._getFeatureId(),i=new TC({objectIds:[r],returnMetadata:!0}),n=[],s=e.queryAttachments(i).then(a=>a[r]||n).catch(()=>n);this._getAttachmentsPromise=s,this.notifyChange("state");const o=await s;return t.removeAll(),o.length&&t.addMany(o),this._getAttachmentsPromise=null,this.notifyChange("state"),o}async addAttachment(e){const{_attachmentLayer:t,attachmentInfos:r,graphic:i,abilities:n}=this;if(!e)throw new O("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!n.operations.add)throw new O("invalid-abilities","addAttachment(): add abilities are required.");if(!t||typeof t.addAttachment!="function")throw new O("invalid-layer","addAttachment(): A valid layer is required.");const s=t.addAttachment(i,e).then(a=>this._queryAttachment(a.objectId)),o=await s;return r.add(o),o}async deleteAttachment(e){const{_attachmentLayer:t,attachmentInfos:r,graphic:i,abilities:n}=this;if(!e)throw new O("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!n.operations.delete)throw new O("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!t||typeof t.deleteAttachments!="function")throw new O("invalid-layer","deleteAttachment(): A valid layer is required.");const s=t.deleteAttachments(i,[e.id]).then(()=>e),o=await s;return r.remove(o),o}async updateAttachment(e,t=this.activeAttachmentInfo){const{_attachmentLayer:r,attachmentInfos:i,graphic:n,abilities:s}=this;if(!e)throw new O("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!t)throw new O("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!s.operations.update)throw new O("invalid-abilities","updateAttachment(): Update abilities are required.");const o=i.findIndex(c=>c===t);if(!r||typeof r.updateAttachment!="function")throw new O("invalid-layer","updateAttachment(): A valid layer is required.");const a=r.updateAttachment(n,t.id,e).then(c=>this._queryAttachment(c.objectId)),l=await a;return i.splice(o,1,l),l}async _queryAttachment(e){if(!e)throw new O("invalid-attachment-id","Could not query attachment.");const{_attachmentLayer:t}=this,r=this._getFeatureId(),i=new TC({objectIds:[r],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return t.queryAttachments(i).then(n=>n[r][0])}_getFeatureId(){const{_attachmentLayer:e,graphic:t}=this;if(!e||!t)return null;const{objectIdField:r}=e,{attributes:i}=t;return i&&i[r]}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:e}=this,t=PB(e);this._attachmentLayer=t?t.type==="scene"&&I(t.associatedLayer)?t.associatedLayer:t:null}};u([d()],Ns.prototype,"abilities",void 0),u([ze("abilities")],Ns.prototype,"castAbilities",null),u([d()],Ns.prototype,"activeAttachmentInfo",void 0),u([d({readOnly:!0,type:UB})],Ns.prototype,"attachmentInfos",void 0),u([d({type:ln})],Ns.prototype,"graphic",void 0),u([d()],Ns.prototype,"mode",void 0),u([d({readOnly:!0})],Ns.prototype,"state",null),u([d({readOnly:!0})],Ns.prototype,"supportsResizeAttachments",null),Ns=u([E("esri.widgets.Attachments.AttachmentsViewModel")],Ns);const bA=Ns;function tme(e){const t=e.toLowerCase();return t==="image/bmp"||t==="image/emf"||t==="image/exif"||t==="image/gif"||t==="image/x-icon"||t==="image/jpeg"||t==="image/png"||t==="image/tiff"||t==="image/x-wmf"}function rme(e){const t=De("esri/themes/base/images/files/");return e?e==="text/plain"?`${t}text-32.svg`:e==="application/pdf"?`${t}pdf-32.svg`:e==="text/csv"?`${t}csv-32.svg`:e==="application/gpx+xml"?`${t}gpx-32.svg`:e==="application/x-dwf"?`${t}cad-32.svg`:e==="application/postscript"||e==="application/json"||e==="text/xml"||e==="model/vrml"?`${t}code-32.svg`:e==="application/x-zip-compressed"||e==="application/x-7z-compressed"||e==="application/x-gzip"||e==="application/x-tar"||e==="application/x-gtar"||e==="application/x-bzip2"||e==="application/gzip"||e==="application/x-compress"||e==="application/x-apple-diskimage"||e==="application/x-rar-compressed"||e==="application/zip"?`${t}zip-32.svg`:e.includes("image/")?`${t}image-32.svg`:e.includes("audio/")?`${t}sound-32.svg`:e.includes("video/")?`${t}video-32.svg`:e.includes("msexcel")||e.includes("ms-excel")||e.includes("spreadsheetml")?`${t}excel-32.svg`:e.includes("msword")||e.includes("ms-word")||e.includes("wordprocessingml")?`${t}word-32.svg`:e.includes("powerpoint")||e.includes("presentationml")?`${t}report-32.svg`:`${t}generic-32.svg`:`${t}generic-32.svg`}function Et(e){return(t,r)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:r})}}var ime=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},GB=function(e,t){for(var r=0,i=e.length;r<i;r++){var n=e[r];Array.isArray(n)?GB(n,t):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=ime(n)),t.push(n))}},nme=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(r.length===1&&typeof r[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:r[0],domNode:null};var n=[];return GB(r,n),{vnodeSelector:e,properties:t||void 0,children:n,text:void 0,domNode:null}};function x(e,t,...r){return typeof e!="function"||vA(e)?nme(e,t,...r):e(t,...r)}const j5={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},oe={base:"esri-attachments",loaderContainer:"esri-attachments__loader-container",loader:"esri-attachments__loader",fadeIn:"esri-attachments--fade-in",container:"esri-attachments__container",containerList:"esri-attachments__container--list",containerPreview:"esri-attachments__container--preview",actions:"esri-attachments__actions",deleteButton:"esri-attachments__delete-button",addAttachmentButton:"esri-attachments__add-attachment-button",errorMessage:"esri-attachments__error-message",items:"esri-attachments__items",item:"esri-attachments__item",itemButton:"esri-attachments__item-button",itemMask:"esri-attachments__item-mask",itemMaskIcon:"esri-attachments__item-mask--icon",itemImage:"esri-attachments__image",itemImageResizable:"esri-attachments__image--resizable",itemLabel:"esri-attachments__label",itemFilename:"esri-attachments__filename",itemChevronIcon:"esri-attachments__item-chevron-icon",itemLink:"esri-attachments__item-link",itemLinkOverlay:"esri-attachments__item-link-overlay",itemLinkOverlayIcon:"esri-attachments__item-link-overlay-icon",itemEditIcon:"esri-attachments__item-edit-icon",itemAddIcon:"esri-attachments__item-add-icon",itemAddButton:"esri-attachments__item-add-button",formNode:"esri-attachments__form-node",fileFieldset:"esri-attachments__file-fieldset",fileLabel:"esri-attachments__file-label",fileName:"esri-attachments__file-name",fileInput:"esri-attachments__file-input",metadata:"esri-attachments__metadata",metadataFieldset:"esri-attachments__metadata-fieldset",progressBar:"esri-attachments__progress-bar",esriWidget:"esri-widget",esriButton:"esri-button",buttonDisabled:"esri-button--disabled",esriButtonSecondary:"esri-button--secondary",esriButtonTertiary:"esri-button--tertiary",esriButtonThird:"esri-button--third",esriButtonSmall:"esri-button--small",esriButtonHalf:"esri-button--half",empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},Zx=window.CSS;let ti=class extends Kt{constructor(e,t){super(e,t),this.abilities=null,this.displayType="auto",this.graphic=null,this.label=void 0,this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new bA,this.visibleElements={...j5},this._supportsImageOrientation=Zx&&Zx.supports&&Zx.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.own([tn(()=>{var e;return(e=this.viewModel)==null?void 0:e.attachmentInfos},"change",()=>this.scheduleRender()),G(()=>{var e;return(e=this.viewModel)==null?void 0:e.mode},()=>this._modeChanged(),je)])}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}castVisibleElements(e){return{...j5,...e}}addAttachment(){const{_addAttachmentForm:e,viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.addAttachment(e).then(r=>(this._set("submitting",!1),this._set("error",null),t.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new O("attachments:add-attachment",this.messages.addErrorMessage,r)),r})}deleteAttachment(e){const{viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.deleteAttachment(e).then(r=>(this._set("submitting",!1),this._set("error",null),t.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new O("attachments:delete-attachment",this.messages.deleteErrorMessage,r)),r})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:t}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(t).then(r=>(this._set("submitting",!1),this._set("error",null),e.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new O("attachments:update-attachment",this.messages.updateErrorMessage,r)),r})}render(){const{submitting:e,viewModel:t}=this,{state:r}=t;return x("div",{class:this.classes(oe.base,oe.esriWidget)},e?this.renderProgressBar():null,r==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:t}=this;return e&&t.errorMessage?x("div",{key:"error-message",class:oe.errorMessage},e.message):null}renderAttachments(){const{mode:e,activeAttachmentInfo:t}=this.viewModel;return e==="add"?this.renderAddForm():e==="edit"?this.renderDetailsForm(t):this.renderAttachmentContainer()}renderLoading(){return x("div",{class:oe.loaderContainer,key:"loader"},x("div",{class:oe.loader}))}renderProgressBar(){return this.visibleElements.progressBar?x("div",{class:oe.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:t}=this,r=e||!t,i=this.visibleElements.cancelAddButton?x("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(oe.esriButton,oe.esriButtonTertiary,oe.esriButtonSmall,oe.esriButtonHalf,e&&oe.buttonDisabled)},this.messages.cancel):null,n=this.visibleElements.addSubmitButton?x("button",{type:"submit",disabled:r,class:this.classes(oe.esriButton,oe.esriButtonSecondary,oe.esriButtonSmall,oe.esriButtonHalf,{[oe.buttonDisabled]:r})},this.messages.add):null,s=t?x("span",{key:"file-name",class:oe.fileName},t.name):null,o=x("form",{bind:this,afterCreate:vC,afterRemoved:h5,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},x("fieldset",{class:oe.fileFieldset},s,x("label",{class:this.classes(oe.fileLabel,oe.esriButton,oe.esriButtonSecondary)},t?this.messages.changeFile:this.messages.selectFile,x("input",{class:oe.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),n,i);return x("div",{key:"add-form-container",class:oe.formNode},o)}renderDetailsForm(e){const{visibleElements:t,viewModel:r,selectedFile:i,submitting:n}=this,{contentType:s,size:o,url:a}=e,{abilities:l}=r,c=n||!i,h=l.editing&&l.operations.delete&&t.deleteButton?x("button",{key:"delete-button",type:"button",disabled:n,bind:this,onclick:b=>this._submitDeleteAttachment(b,e),class:this.classes(oe.esriButton,oe.esriButtonSmall,oe.esriButtonTertiary,oe.deleteButton,{[oe.buttonDisabled]:n})},this.messages.delete):null,f=l.editing&&l.operations.update&&t.updateButton?x("button",{disabled:c,key:"update-button",type:"submit",class:this.classes(oe.esriButton,oe.esriButtonSmall,oe.esriButtonThird,{[oe.buttonDisabled]:c})},this.messages.update):null,m=this.visibleElements.cancelUpdateButton?x("button",{disabled:n,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(oe.esriButton,oe.esriButtonSmall,oe.esriButtonTertiary,oe.esriButtonThird,{[oe.buttonDisabled]:n})},this.messages.cancel):null,y=i?x("span",{key:"file-name",class:oe.fileName},i.name):null,g=l.editing&&l.operations.update?x("fieldset",{key:"file",class:oe.fileFieldset},y,x("label",{class:this.classes(oe.fileLabel,oe.esriButton,oe.esriButtonSecondary)},this.messages.changeFile,x("input",{class:oe.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null,v=x("fieldset",{key:"size",class:oe.metadataFieldset},x("label",null,vfe(this.messagesUnits,o))),_=x("fieldset",{key:"content-type",class:oe.metadataFieldset},x("label",null,s)),w=x("form",{bind:this,afterCreate:vC,afterRemoved:h5,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},x("div",{class:oe.metadata},v,_),g,x("div",{class:oe.actions},h,m,f));return x("div",{key:"edit-form-container",class:oe.formNode},x("a",{class:oe.itemLink,href:a,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:e,size:400}),x("div",{class:oe.itemLinkOverlay},x("span",{class:oe.itemLinkOverlayIcon},x("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},x("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),x("path",{fill:"none",d:"M0 0h32v32H0z"}))))),w)}renderImageMask({attachmentInfo:e,size:t}){const{supportsResizeAttachments:r}=this.viewModel,{contentType:i,name:n,url:s}=e,o=r&&tme(i),a=this._getCSSTransform(e,o),l=a?{transform:a,"image-orientation":"none"}:{},c=s.includes("?")?"&":"?",h=o?`${s}${c}w=${t}`:rme(i),f={[oe.itemMaskIcon]:!o},m={[oe.itemImageResizable]:r};return x("div",{class:this.classes(f,oe.itemMask)},x("img",{styles:l,alt:n,src:h,class:this.classes(m,oe.itemImage)}))}renderAttachmentInfo({attachmentInfo:e,displayType:t}){const{viewModel:r}=this,{abilities:i}=r,{name:n,url:s}=e,o=this.renderImageMask({attachmentInfo:e,size:t==="list"?48:400}),a=i.editing?x("span",{"aria-hidden":"true",class:this.classes(oe.itemChevronIcon,oo(this.container)?oe.iconLeft:oe.iconRight)}):null,l=[o,x("label",{class:oe.itemLabel},x("span",{class:oe.itemFilename},n||this.messages.noTitle),a)],c=i.editing?x("button",{key:"details-button",bind:this,class:oe.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},l):x("a",{key:"details-link",class:oe.itemButton,href:s,target:"_blank"},l);return x("li",{class:oe.item,key:e},c)}renderAttachmentContainer(){const{effectiveDisplayType:e,viewModel:t,visibleElements:r}=this,{attachmentInfos:i,abilities:n}=t,s=i&&i.length,o={[oe.containerList]:e!=="preview",[oe.containerPreview]:e==="preview"},a=n.editing&&n.operations.add&&r.addButton?x("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(oe.esriButton,oe.esriButtonTertiary,oe.addAttachmentButton),type:"button"},x("span",{"aria-hidden":"true",class:this.classes(oe.itemAddIcon,oe.iconPlus)}),this.messages.add):null,l=s?x("ul",{class:oe.items},i.toArray().map(c=>this.renderAttachmentInfo({attachmentInfo:c,displayType:e}))):x("div",{class:oe.empty},this.messages.noAttachments);return x("div",{key:"attachments-container",class:this.classes(oe.container,o)},l,a)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const t=e.target,r=t&&t.files&&t.files.item(0);this._set("selectedFile",r)}_submitDeleteAttachment(e,t){e.preventDefault(),this.deleteAttachment(t)}_submitAddAttachment(e){e.preventDefault(),this.addAttachment()}_submitUpdateAttachment(e){e.preventDefault(),this.updateAttachment()}_startEditAttachment(e){const{viewModel:t}=this;t.activeAttachmentInfo=e,t.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e,t){const{orientationInfo:r}=e;return!this._supportsImageOrientation&&t&&r?[r.rotation?`rotate(${r.rotation}deg)`:"",r.mirrored?"scaleX(-1)":""].join(" "):""}};u([X("viewModel.abilities")],ti.prototype,"abilities",void 0),u([d()],ti.prototype,"displayType",void 0),u([d({readOnly:!0})],ti.prototype,"effectiveDisplayType",null),u([X("viewModel.graphic")],ti.prototype,"graphic",void 0),u([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ti.prototype,"label",void 0),u([d(),Et("esri/widgets/Attachments/t9n/Attachments")],ti.prototype,"messages",void 0),u([d(),Et("esri/core/t9n/Units")],ti.prototype,"messagesUnits",void 0),u([d({readOnly:!0})],ti.prototype,"selectedFile",void 0),u([d({readOnly:!0})],ti.prototype,"submitting",void 0),u([d({readOnly:!0})],ti.prototype,"error",void 0),u([d({type:bA})],ti.prototype,"viewModel",void 0),u([d()],ti.prototype,"visibleElements",void 0),u([ze("visibleElements")],ti.prototype,"castVisibleElements",null),ti=u([E("esri.widgets.Attachments")],ti);const sme=ti;let lg=class extends bA{constructor(e){super(e),this.description=null,this.title=null}};u([d()],lg.prototype,"description",void 0),u([d()],lg.prototype,"title",void 0),lg=u([E("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],lg);const SA=lg,ome={heading:"esri-widget__heading"};function tc(e,t){const r=BB(e.level),i=`h${r}`;return delete e.level,x(i,{...e,class:tf(ome.heading,e.class),role:"heading","aria-level":String(r)},t)}function BB(e){return an(Math.ceil(e),1,6)}function ame(e,t=1){return BB(e+t)}const Yx={base:"esri-feature-element-info",title:"esri-feature-element-info__title",description:"esri-feature-element-info__description"};let dp=class extends Kt{constructor(e,t){super(e,t),this.description=null,this.headingLevel=2,this.title=null}render(){return x("div",{class:Yx.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?x(tc,{level:this.headingLevel,class:Yx.title},e):null}renderDescription(){const{description:e}=this;return e?x("div",{key:"description",class:Yx.description},e):null}};u([d()],dp.prototype,"description",void 0),u([d()],dp.prototype,"headingLevel",void 0),u([d()],dp.prototype,"title",void 0),dp=u([E("esri.widgets.Feature.support.FeatureElementInfo")],dp);const $A=dp,lme={base:"esri-feature-attachments"};let Ro=class extends Kt{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attachmentsWidget=new sme,this.description=null,this.displayType=null,this.graphic=null,this.headingLevel=2,this.title=null,this.viewModel=new SA}initialize(){this._featureElementInfo=new $A,this.own([G(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),je),G(()=>{var e;return(e=this.viewModel)==null?void 0:e.graphic},e=>this.attachmentsWidget.graphic=e,je)])}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy()}render(){var t;const{attachmentsWidget:e}=this;return x("div",{class:lme.base},(t=this._featureElementInfo)==null?void 0:t.render(),e==null?void 0:e.render())}_setupFeatureElementInfo(){const{description:e,title:t,headingLevel:r}=this;this._featureElementInfo.set({description:e,title:t,headingLevel:r})}};u([d({readOnly:!0})],Ro.prototype,"attachmentsWidget",void 0),u([X("viewModel.description")],Ro.prototype,"description",void 0),u([X("attachmentsWidget.displayType")],Ro.prototype,"displayType",void 0),u([X("viewModel.graphic")],Ro.prototype,"graphic",void 0),u([d()],Ro.prototype,"headingLevel",void 0),u([X("viewModel.title")],Ro.prototype,"title",void 0),u([d({type:SA})],Ro.prototype,"viewModel",void 0),Ro=u([E("esri.widgets.Feature.FeatureAttachments")],Ro);const ume=Ro;let au=class extends ca(le){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(G(()=>this.creator,t=>{this._destroyContent(),this._createContent(t)},je))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:t,destroyer:r}=this;e&&($S(r,{graphic:t}).catch(()=>null),this._set("created",null))}async _createContent(e){const{graphic:t}=this,r=$S(e,{graphic:t}).catch(()=>null);this._loadingPromise=r,this.notifyChange("state");const i=await r;r===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",i))}};u([d({readOnly:!0})],au.prototype,"created",void 0),u([d()],au.prototype,"creator",void 0),u([d()],au.prototype,"destroyer",void 0),u([d({type:ln})],au.prototype,"graphic",void 0),u([d({readOnly:!0})],au.prototype,"state",null),au=u([E("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],au);const ES=au;function Gr(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:dme(e[t])}}}function cme(e){const{type:t}=e;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function dme(e){return function(t,...r){cme(t)?Khe(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...r)}}function hme(e){return e.split(",").map(t=>t.trim())}function xA(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const r=t._delegatedEventNames,i=Array.isArray(e)?e:hme(e);r.push(...i)}}const qB="calcite-theme-";function pme(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function EA(){return pme().startsWith("dark")}function fme(){return`${qB}${EA()?"dark":"light"}`}function mme(e){yme(e),e.classList.add(fme())}function yme(e){Array.from(e.classList).forEach(t=>{t.startsWith(qB)&&e.classList.remove(t)})}function TS(e){return e&&typeof e.render=="function"}function WB(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}const Qx={base:"esri-feature-content",loaderContainer:"esri-feature-content__loader-container",loader:"esri-feature-content__loader"};let hp=class extends Kt{constructor(e,t){super(e,t),this.creator=null,this.graphic=null,this.viewModel=null,this._addTargetToAnchors=r=>{Array.from(r.querySelectorAll("a")).forEach(i=>{RB(i.href)&&!i.hasAttribute("target")&&i.setAttribute("target","_blank")})}}renderLoading(){return x("div",{class:Qx.loaderContainer,key:"loader"},x("div",{class:Qx.loader}))}renderCreated(){var t;const e=(t=this.viewModel)==null?void 0:t.created;return e?e instanceof HTMLElement?x("div",{key:e,bind:e,afterCreate:this._attachToNode}):TS(e)?x("div",{key:e},!e.destroyed&&e.render()):x("div",{key:e,innerHTML:e,afterCreate:this._addTargetToAnchors}):null}render(){var t;const e=(t=this.viewModel)==null?void 0:t.state;return x("div",{class:Qx.base},e==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(e){const t=this;e.appendChild(t)}};u([X("viewModel.creator")],hp.prototype,"creator",void 0),u([X("viewModel.graphic")],hp.prototype,"graphic",void 0),u([d({type:ES})],hp.prototype,"viewModel",void 0),hp=u([E("esri.widgets.Feature.FeatureContent")],hp);const S_=hp;let Fa=class extends le{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:t}=this,r=[];return t==null||t.forEach(i=>{if(!(!i.hasOwnProperty("visible")||i.visible))return;const n=i.clone();n.label=NB(n,e),r.push(n)}),r}};u([d()],Fa.prototype,"attributes",void 0),u([d({type:[EU]})],Fa.prototype,"expressionInfos",void 0),u([d()],Fa.prototype,"description",void 0),u([d({type:[Mv]})],Fa.prototype,"fieldInfos",void 0),u([d({readOnly:!0})],Fa.prototype,"formattedFieldInfos",null),u([d()],Fa.prototype,"title",void 0),Fa=u([E("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],Fa);const Q2=Fa,gme=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function vme(e){let t=null;return gme.some(r=>(r.pattern.test(e)&&(t=r),!!t)),t}function wme(e,t){if(typeof t!="string"||!t)return t;const r=vme(t);if(!r)return t;const i=t.match(r.pattern),n=i&&i[2],s=ra(ra(r.label,{messages:e,hierPart:n}),{appName:r.appName}),o=r.target?` target="${r.target}"`:"",a=r.target==="_blank"?' rel="noreferrer"':"";return t.replace(r.pattern,`<a${o} href="$1"${a}>${s}</a>`)}const hy={base:"esri-feature-fields",fieldHeader:"esri-feature-fields__field-header",fieldData:"esri-feature-fields__field-data",fieldDataDate:"esri-feature-fields__field-data--date",esriTable:"esri-widget__table"};let Ds=class extends Kt{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attributes=null,this.description=null,this.expressionInfos=null,this.fieldInfos=null,this.title=null,this.viewModel=new Q2,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new $A,this.own(G(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),je))}destroy(){this._featureElementInfo.destroy()}renderFieldInfo(e,t){const{attributes:r}=this.viewModel,i=e.fieldName,n=e.label||i,s=r?r[i]==null?"":r[i]:"",o=!(!e.format||!e.format.dateFormat),a=typeof s=="number"&&!o?this._forceLTR(s):wme(this.messagesURIUtils,s),l={[hy.fieldDataDate]:o};return x("tr",{key:`fields-element-info-row-${i}-${t}`},x("th",{key:`fields-element-info-row-header-${i}-${t}`,class:hy.fieldHeader,innerHTML:n}),x("td",{key:`fields-element-info-row-data-${i}-${t}`,class:this.classes(hy.fieldData,l),innerHTML:a}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e!=null&&e.length?x("table",{class:hy.esriTable,summary:this.messages.fieldsSummary},x("tbody",null,e.map((t,r)=>this.renderFieldInfo(t,r)))):null}render(){var e;return x("div",{class:hy.base},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_forceLTR(e){return`&lrm;${e}`}};u([X("viewModel.attributes")],Ds.prototype,"attributes",void 0),u([X("viewModel.description")],Ds.prototype,"description",void 0),u([X("viewModel.expressionInfos")],Ds.prototype,"expressionInfos",void 0),u([X("viewModel.fieldInfos")],Ds.prototype,"fieldInfos",void 0),u([X("viewModel.title")],Ds.prototype,"title",void 0),u([d({type:Q2})],Ds.prototype,"viewModel",void 0),u([d(),Et("esri/widgets/Feature/t9n/Feature")],Ds.prototype,"messages",void 0),u([d(),Et("esri/widgets/support/t9n/uriUtils")],Ds.prototype,"messagesURIUtils",void 0),Ds=u([E("esri.widgets.Feature.FeatureFields")],Ds);const HB=Ds,_me=/^-?(\d+)(\.(\d+))?$/i;function bme(e,t){return e-t}function Sme(e,t){let r,i;return r=Number(e.toFixed(t)),r<e?i=r+1/10**t:(i=r,r-=1/10**t),r=Number(r.toFixed(t)),i=Number(i.toFixed(t)),[r,i]}function $me(e,t,r,i,n){const s=$_(e,t,r,i),o=s.previous==null||s.previous<=n,a=s.next==null||s.next<=n;return o&&a||s.previous+s.next<=2*n}function MS(e){const t=String(e),r=t.match(_me);if(r&&r[1])return{integer:r[1].split("").length,fractional:r[3]?r[3].split("").length:0};if(t.toLowerCase().includes("e")){const i=t.split("e"),n=i[0],s=i[1];if(n&&s){const o=Number(n);let a=Number(s);const l=a>0;l||(a=Math.abs(a));const c=MS(o);return l?(c.integer+=a,a>c.fractional?c.fractional=0:c.fractional-=a):(c.fractional+=a,a>c.integer?c.integer=1:c.integer-=a),c}}return{integer:0,fractional:0}}function $_(e,t,r,i){const n={previous:null,next:null};if(r!=null){const s=e-r,o=t-r-s;n.previous=Math.floor(Math.abs(100*o/s))}if(i!=null){const s=i-e,o=i-t-s;n.next=Math.floor(Math.abs(100*o/s))}return n}function IS(e,t={}){const r=e.slice(0),{tolerance:i=2,strictBounds:n=!1,indexes:s=r.map((o,a)=>a)}=t;s.sort(bme);for(let o=0;o<s.length;o++){const a=s[o],l=r[a],c=a===0?null:r[a-1],h=a===r.length-1?null:r[a+1],f=MS(l).fractional;if(f){let m,y=0,g=!1;for(;y<=f&&!g;){const v=Sme(l,y);m=n&&o===0?v[1]:v[0],g=$me(l,m,c,h,i),y++}g&&(r[a]=m)}}return r}const xme={maximumFractionDigits:20};function Eme(e){return sa(e,xme)}var kC;let Yc=kC=class extends B{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,r){t[r]=e==null?0:e}clone(){return new kC({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};u([d({type:ae,json:{type:[ct],write:!0}})],Yc.prototype,"color",void 0),u([d({type:String,json:{write:!0}})],Yc.prototype,"label",void 0),u([d({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Yc.prototype,"value",void 0),u([se("value")],Yc.prototype,"writeValue",null),Yc=kC=u([E("esri.renderers.visualVariables.support.ColorStop")],Yc);const Tme=Yc;function K2(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Mme(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ime(e,t,r,i,n,s,o,a,l,c,h,f,m,y,g,v){const _=new Float32Array(16);return _[0]=e,_[1]=t,_[2]=r,_[3]=i,_[4]=n,_[5]=s,_[6]=o,_[7]=a,_[8]=l,_[9]=c,_[10]=h,_[11]=f,_[12]=m,_[13]=y,_[14]=g,_[15]=v,_}function Cme(e,t){return new Float32Array(e,t,16)}const kme=K2();Object.freeze(Object.defineProperty({__proto__:null,create:K2,clone:Mme,fromValues:Ime,createView:Cme,IDENTITY:kme},Symbol.toStringTag,{value:"Module"}));const Lme=(e,t)=>{const r=vc(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return El(r,r)},Ome=(e,t)=>{const r=vc(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return El(r,r)},Ame=(e,t)=>{const r=1-t,i=vc(e,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return El(i,i)},Pme=(e,t)=>{const r=Math.sin(t*Math.PI/180),i=Math.cos(t*Math.PI/180),n=vc(e,.213+.787*i-.213*r,.715-.715*i-.715*r,.072-.072*i+.928*r,0,.213-.213*i+.143*r,.715+.285*i+.14*r,.072-.072*i-.283*r,0,.213-.213*i-.787*r,.715-.715*i+.715*r,.072+.928*i+.072*r,0,0,0,0,1);return El(n,n)},Rme=(e,t)=>{const r=1-2*t,i=vc(e,r,0,0,t,0,r,0,t,0,0,r,t,0,0,0,1);return El(i,i)},Fme=(e,t)=>{const r=vc(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return El(r,r)},Nme=(e,t)=>{const r=1-t,i=vc(e,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return El(i,i)};class X2{constructor(t,r,i){this.strength=t,this.radius=r,this.threshold=i,this.type="bloom"}interpolate(t,r,i){this.strength=Gi(t.strength,r.strength,i),this.radius=Gi(t.radius,r.radius,i),this.threshold=Gi(t.threshold,r.threshold,i)}clone(){return new X2(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:Kg(this.radius),strength:this.strength,threshold:this.threshold}}}class e${constructor(t){this.radius=t,this.type="blur"}interpolate(t,r,i){this.radius=Math.round(Gi(t.radius,r.radius,i))}clone(){return new e$(this.radius)}toJSON(){return{type:"blur",radius:Kg(this.radius)}}}class X0{constructor(t,r){this.type=t,this.amount=r,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.amount=Gi(t.amount,r.amount,i),this._updateMatrix()}clone(){return new X0(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||K2();switch(this.type){case"brightness":this._colorMatrix=Lme(t,this.amount);break;case"contrast":this._colorMatrix=Ome(t,this.amount);break;case"grayscale":this._colorMatrix=Ame(t,this.amount);break;case"invert":this._colorMatrix=Rme(t,this.amount);break;case"saturate":this._colorMatrix=Fme(t,this.amount);break;case"sepia":this._colorMatrix=Nme(t,this.amount)}}}class t${constructor(t,r,i,n){this.offsetX=t,this.offsetY=r,this.blurRadius=i,this.color=n,this.type="drop-shadow"}interpolate(t,r,i){this.offsetX=Gi(t.offsetX,r.offsetX,i),this.offsetY=Gi(t.offsetY,r.offsetY,i),this.blurRadius=Gi(t.blurRadius,r.blurRadius,i),this.color[0]=Math.round(Gi(t.color[0],r.color[0],i)),this.color[1]=Math.round(Gi(t.color[1],r.color[1],i)),this.color[2]=Math.round(Gi(t.color[2],r.color[2],i)),this.color[3]=Gi(t.color[3],r.color[3],i)}clone(){return new t$(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:Kg(this.offsetX),yoffset:Kg(this.offsetY),blurRadius:Kg(this.blurRadius),color:t}}}class r${constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.angle=Gi(t.angle,r.angle,i),this._updateMatrix()}clone(){return new r$(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||K2();this._colorMatrix=Pme(t,this.angle)}}class i${constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,r,i){this.amount=Gi(t.amount,r.amount,i)}clone(){return new i$(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function Gi(e,t,r){return e+(t-e)*r}function Kg(e){return Math.round(1e3*_s(e))/1e3}function Dme(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new X0(e.type,0);case"saturate":case"brightness":case"contrast":return new X0(e.type,1);case"opacity":return new i$(1);case"hue-rotate":return new r$(0);case"blur":return new e$(0);case"drop-shadow":return new t$(0,0,0,[..._3("transparent")]);case"bloom":return new X2(0,0,1)}}function JB(e,t){const r=e.length>t.length?e:t;return(e.length>t.length?t:e).every((i,n)=>i.type===r[n].type)}function ZB(e,t){const r=e.length>t.length?e:t,i=e.length>t.length?t:e;for(let n=i.length;n<r.length;n++)i.push(Dme(r[n]))}function jme(e){const t=e[0];return!!t&&"type"in t}var V5,z5,YB={exports:{}};function TA(e){if(!e||e.length===0)return null;if(typeof e=="string"){const r=U5(e);return r&&r.length!==0?r:null}const t=e.map(r=>{if(!Number.isFinite(r.scale)||r.scale<=0)throw new O("effect:invalid-scale","scale must be finite and greater than 0",{stop:r});return{scale:r.scale,effects:U5(r.value)}});t.sort((r,i)=>i.effects.length-r.effects.length);for(let r=0;r<t.length-1;r++){if(!JB(t[r].effects,t[r+1].effects))throw new O("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[r].effects,b:t[r+1].effects});ZB(t[r].effects,t[r+1].effects)}return t.sort((r,i)=>i.scale-r.scale),t}function U5(e){let t;if(!e)return[];try{t=YB.exports.parse(e)}catch(r){throw new O("effect:invalid-syntax","Invalid effect syntax",{value:e,error:r})}return t.map(r=>Vme(r))}function Vme(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return zme(e);case"opacity":return Ume(e);case"hue-rotate":return Gme(e);case"blur":return Bme(e);case"drop-shadow":return qme(e);case"bloom":return Wme(e)}}catch(t){throw t.details.filter=e,t}throw new O("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function zme(e){let t=1;return Cm(e.parameters,1),e.parameters.length===1&&(t=Xs(e.parameters[0])),new X0(e.name,t)}function Ume(e){let t=1;return Cm(e.parameters,1),e.parameters.length===1&&(t=Xs(e.parameters[0])),new i$(t)}function Gme(e){let t=0;return Cm(e.parameters,1),e.parameters.length===1&&(t=Kme(e.parameters[0])),new r$(t)}function Bme(e){let t=0;return Cm(e.parameters,1),e.parameters.length===1&&(t=CA(e.parameters[0]),Fv(t,e.parameters[0])),new e$(t)}function qme(e){const t=[];let r=null;for(const i of e.parameters)if(i.type==="color"){if(t.length&&Object.freeze(t),r)throw new O("effect:type-error","Accepts only one color",{});r=Xme(i)}else{const n=CA(i);if(Object.isFrozen(t))throw new O("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(n),t.length===3&&Fv(n,i)}if(t.length<2||t.length>3)throw new O("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new t$(t[0],t[1],t[2]||0,r||QB("black"))}function Wme(e){let t=1,r=0,i=0;return Cm(e.parameters,3),e.parameters[0]&&(t=Xs(e.parameters[0])),e.parameters[1]&&(r=CA(e.parameters[1]),Fv(r,e.parameters[1])),e.parameters[2]&&(i=Xs(e.parameters[2])),new X2(t,r,i)}function Cm(e,t){if(e.length>t)throw new O("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function n$(e){if(e.type==="color")return"<color>";if(e.unit){if(IA[e.unit])return"<length>";if(MA[e.unit])return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function Fv(e,t){if(e<0)throw new O("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function Hme(e){if(e.type!=="quantity"||e.unit!==null)throw new O("effect:type-error",`Expected <double>, Actual: ${n$(e)}`,{term:e})}function Jme(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new O("effect:type-error",`Expected <double> or <percentage>, Actual: ${n$(e)}`,{term:e})}z5=function(){function e(n,s){function o(){this.constructor=n}o.prototype=s.prototype,n.prototype=new o}function t(n,s,o,a){var l=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(l,t.prototype),l.expected=s,l.found=o,l.location=a,l.name="SyntaxError",l}function r(n,s,o){return o=o||" ",n.length>s?n:(s-=n.length,n+(o+=o.repeat(s)).slice(0,s))}function i(n,s){var o,a={},l=(s=s!==void 0?s:{}).grammarSource,c={start:hR},h=hR,f="none",m=")",y=",",g="(",v="%",_="px",w="cm",b="mm",S="in",M="pt",T="pc",k="deg",N="rad",F="grad",q="turn",z="#",Q=".",K="e",ce=/^[ \t\n\r]/,ie=/^[a-z\-]/,Oe=/^[0-9a-fA-F]/,Qe=/^[+\-]/,et=/^[0-9]/,re=va("none"),ve=Ir("none",!1),Ae=Ir(")",!1),Tt=Ir(",",!1),ir=va("whitespace"),wc=Hm([" ","	",`
`,"\r"],!1,!1),ya=va("function"),Wm=Ir("(",!1),ga=va("identifier"),_c=Hm([["a","z"],"-"],!1,!1),JQ=va("percentage"),ZQ=Ir("%",!1),YQ=va("length"),QQ=Ir("px",!1),KQ=Ir("cm",!1),XQ=Ir("mm",!1),eK=Ir("in",!1),tK=Ir("pt",!1),rK=Ir("pc",!1),iK=va("angle"),nK=Ir("deg",!1),sK=Ir("rad",!1),oK=Ir("grad",!1),aK=Ir("turn",!1),lK=va("number"),uK=va("color"),cK=Ir("#",!1),lR=Hm([["0","9"],["a","f"],["A","F"]],!1,!1),uR=Hm(["+","-"],!1,!1),Ml=Hm([["0","9"]],!1,!1),dK=Ir(".",!1),hK=Ir("e",!1),pK=function(){return[]},fK=function(C,U){return{type:"function",name:C,parameters:U||[]}},mK=function(C,U){return U.length>0?JK(C,U,3):[C]},yK=function(C){return{type:"quantity",value:C.value,unit:C.unit}},gK=function(C){return{type:"color",colorType:C.type,value:C.value}},vK=function(C){return C},wK=function(){return t1()},_K=function(C){return{value:C,unit:"%"}},bK=function(C){return{value:C,unit:"px"}},SK=function(C){return{value:C,unit:"cm"}},$K=function(C){return{value:C,unit:"mm"}},xK=function(C){return{value:C,unit:"in"}},EK=function(C){return{value:C,unit:"pt"}},TK=function(C){return{value:C,unit:"pc"}},MK=function(C){return{value:C,unit:"deg"}},IK=function(C){return{value:C,unit:"rad"}},CK=function(C){return{value:C,unit:"grad"}},kK=function(C){return{value:C,unit:"turn"}},LK=function(C){return{value:C,unit:null}},OK=function(){return{type:"hex",value:t1()}},AK=function(C){return{type:"function",value:C}},PK=function(){return{type:"named",value:t1()}},RK=function(){return parseFloat(t1())},D=0,Mt=0,e1=[{line:1,column:1}],_o=0,G$=[],he=0;if("startRule"in s){if(!(s.startRule in c))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');h=c[s.startRule]}function t1(){return n.substring(Mt,D)}function Ir(C,U){return{type:"literal",text:C,ignoreCase:U}}function Hm(C,U,W){return{type:"class",parts:C,inverted:U,ignoreCase:W}}function FK(){return{type:"end"}}function va(C){return{type:"other",description:C}}function cR(C){var U,W=e1[C];if(W)return W;for(U=C-1;!e1[U];)U--;for(W={line:(W=e1[U]).line,column:W.column};U<C;)n.charCodeAt(U)===10?(W.line++,W.column=1):W.column++,U++;return e1[C]=W,W}function dR(C,U){var W=cR(C),Le=cR(U);return{source:l,start:{offset:C,line:W.line,column:W.column},end:{offset:U,line:Le.line,column:Le.column}}}function Me(C){D<_o||(D>_o&&(_o=D,G$=[]),G$.push(C))}function NK(C,U,W){return new t(t.buildMessage(C,U),C,U,W)}function hR(){var C;return(C=DK())===a&&(C=jK()),C}function DK(){var C,U;return he++,C=D,Cr(),n.substr(D,4)===f?(U=f,D+=4):(U=a,he===0&&Me(ve)),U!==a?(Cr(),Mt=C,C=pK()):(D=C,C=a),he--,C===a&&he===0&&Me(re),C}function jK(){var C,U;if(C=[],(U=B$())!==a)for(;U!==a;)C.push(U),U=B$();else C=a;return C}function B$(){var C,U,W,Le;return C=D,Cr(),(U=zK())!==a?(Cr(),(W=VK())===a&&(W=null),Cr(),n.charCodeAt(D)===41?(Le=m,D++):(Le=a,he===0&&Me(Ae)),Le!==a?(Cr(),Mt=C,C=fK(U,W)):(D=C,C=a)):(D=C,C=a),C}function VK(){var C,U,W,Le,jr,At,zn,r1;if(C=D,(U=q$())!==a){for(W=[],Le=D,jr=Cr(),n.charCodeAt(D)===44?(At=y,D++):(At=a,he===0&&Me(Tt)),At===a&&(At=null),zn=Cr(),(r1=q$())!==a?Le=jr=[jr,At,zn,r1]:(D=Le,Le=a);Le!==a;)W.push(Le),Le=D,jr=Cr(),n.charCodeAt(D)===44?(At=y,D++):(At=a,he===0&&Me(Tt)),At===a&&(At=null),zn=Cr(),(r1=q$())!==a?Le=jr=[jr,At,zn,r1]:(D=Le,Le=a);Mt=C,C=mK(U,W)}else D=C,C=a;return C}function q$(){var C,U;return C=D,(U=UK())===a&&(U=GK())===a&&(U=BK())===a&&(U=qK()),U!==a&&(Mt=C,U=yK(U)),(C=U)===a&&(C=D,(U=WK())!==a&&(Mt=C,U=gK(U)),C=U),C}function Cr(){var C,U;for(he++,C=[],ce.test(n.charAt(D))?(U=n.charAt(D),D++):(U=a,he===0&&Me(wc));U!==a;)C.push(U),ce.test(n.charAt(D))?(U=n.charAt(D),D++):(U=a,he===0&&Me(wc));return he--,U=a,he===0&&Me(ir),C}function zK(){var C,U,W;return he++,C=D,(U=pR())!==a?(n.charCodeAt(D)===40?(W=g,D++):(W=a,he===0&&Me(Wm)),W!==a?(Mt=C,C=vK(U)):(D=C,C=a)):(D=C,C=a),he--,C===a&&(U=a,he===0&&Me(ya)),C}function pR(){var C,U,W;if(he++,C=D,U=[],ie.test(n.charAt(D))?(W=n.charAt(D),D++):(W=a,he===0&&Me(_c)),W!==a)for(;W!==a;)U.push(W),ie.test(n.charAt(D))?(W=n.charAt(D),D++):(W=a,he===0&&Me(_c));else U=a;return U!==a&&(Mt=C,U=wK()),he--,(C=U)===a&&(U=a,he===0&&Me(ga)),C}function UK(){var C,U,W;return he++,C=D,Cr(),(U=Vn())!==a?(n.charCodeAt(D)===37?(W=v,D++):(W=a,he===0&&Me(ZQ)),W!==a?(Mt=C,C=_K(U)):(D=C,C=a)):(D=C,C=a),he--,C===a&&he===0&&Me(JQ),C}function GK(){var C,U,W;return he++,C=D,Cr(),(U=Vn())!==a?(n.substr(D,2)===_?(W=_,D+=2):(W=a,he===0&&Me(QQ)),W!==a?(Mt=C,C=bK(U)):(D=C,C=a)):(D=C,C=a),C===a&&(C=D,Cr(),(U=Vn())!==a?(n.substr(D,2)===w?(W=w,D+=2):(W=a,he===0&&Me(KQ)),W!==a?(Mt=C,C=SK(U)):(D=C,C=a)):(D=C,C=a),C===a&&(C=D,Cr(),(U=Vn())!==a?(n.substr(D,2)===b?(W=b,D+=2):(W=a,he===0&&Me(XQ)),W!==a?(Mt=C,C=$K(U)):(D=C,C=a)):(D=C,C=a),C===a&&(C=D,Cr(),(U=Vn())!==a?(n.substr(D,2)===S?(W=S,D+=2):(W=a,he===0&&Me(eK)),W!==a?(Mt=C,C=xK(U)):(D=C,C=a)):(D=C,C=a),C===a&&(C=D,Cr(),(U=Vn())!==a?(n.substr(D,2)===M?(W=M,D+=2):(W=a,he===0&&Me(tK)),W!==a?(Mt=C,C=EK(U)):(D=C,C=a)):(D=C,C=a),C===a&&(C=D,Cr(),(U=Vn())!==a?(n.substr(D,2)===T?(W=T,D+=2):(W=a,he===0&&Me(rK)),W!==a?(Mt=C,C=TK(U)):(D=C,C=a)):(D=C,C=a)))))),he--,C===a&&he===0&&Me(YQ),C}function BK(){var C,U,W;return he++,C=D,(U=Vn())!==a?(n.substr(D,3)===k?(W=k,D+=3):(W=a,he===0&&Me(nK)),W!==a?(Mt=C,C=MK(U)):(D=C,C=a)):(D=C,C=a),C===a&&(C=D,(U=Vn())!==a?(n.substr(D,3)===N?(W=N,D+=3):(W=a,he===0&&Me(sK)),W!==a?(Mt=C,C=IK(U)):(D=C,C=a)):(D=C,C=a),C===a&&(C=D,(U=Vn())!==a?(n.substr(D,4)===F?(W=F,D+=4):(W=a,he===0&&Me(oK)),W!==a?(Mt=C,C=CK(U)):(D=C,C=a)):(D=C,C=a),C===a&&(C=D,(U=Vn())!==a?(n.substr(D,4)===q?(W=q,D+=4):(W=a,he===0&&Me(aK)),W!==a?(Mt=C,C=kK(U)):(D=C,C=a)):(D=C,C=a)))),he--,C===a&&(U=a,he===0&&Me(iK)),C}function qK(){var C,U;return he++,C=D,Cr(),(U=Vn())!==a?(Mt=C,C=LK(U)):(D=C,C=a),he--,C===a&&he===0&&Me(lK),C}function WK(){var C,U,W,Le;if(he++,C=D,n.charCodeAt(D)===35?(U=z,D++):(U=a,he===0&&Me(cK)),U!==a){if(W=[],Oe.test(n.charAt(D))?(Le=n.charAt(D),D++):(Le=a,he===0&&Me(lR)),Le!==a)for(;Le!==a;)W.push(Le),Oe.test(n.charAt(D))?(Le=n.charAt(D),D++):(Le=a,he===0&&Me(lR));else W=a;W!==a?(Mt=C,C=OK()):(D=C,C=a)}else D=C,C=a;return C===a&&(C=D,(U=B$())!==a&&(Mt=C,U=AK(U)),(C=U)===a&&(C=D,(U=pR())!==a&&(Mt=C,U=PK()),C=U)),he--,C===a&&(U=a,he===0&&Me(uK)),C}function Vn(){var C,U,W,Le,jr,At,zn;for(C=D,Qe.test(n.charAt(D))?(n.charAt(D),D++):he===0&&Me(uR),U=D,W=[],et.test(n.charAt(D))?(Le=n.charAt(D),D++):(Le=a,he===0&&Me(Ml));Le!==a;)W.push(Le),et.test(n.charAt(D))?(Le=n.charAt(D),D++):(Le=a,he===0&&Me(Ml));if(n.charCodeAt(D)===46?(Le=Q,D++):(Le=a,he===0&&Me(dK)),Le!==a){if(jr=[],et.test(n.charAt(D))?(At=n.charAt(D),D++):(At=a,he===0&&Me(Ml)),At!==a)for(;At!==a;)jr.push(At),et.test(n.charAt(D))?(At=n.charAt(D),D++):(At=a,he===0&&Me(Ml));else jr=a;jr!==a?U=W=[W,Le,jr]:(D=U,U=a)}else D=U,U=a;if(U===a)if(U=[],et.test(n.charAt(D))?(W=n.charAt(D),D++):(W=a,he===0&&Me(Ml)),W!==a)for(;W!==a;)U.push(W),et.test(n.charAt(D))?(W=n.charAt(D),D++):(W=a,he===0&&Me(Ml));else U=a;if(U!==a){if(W=D,n.charCodeAt(D)===101?(Le=K,D++):(Le=a,he===0&&Me(hK)),Le!==a){if(Qe.test(n.charAt(D))?(jr=n.charAt(D),D++):(jr=a,he===0&&Me(uR)),jr===a&&(jr=null),At=[],et.test(n.charAt(D))?(zn=n.charAt(D),D++):(zn=a,he===0&&Me(Ml)),zn!==a)for(;zn!==a;)At.push(zn),et.test(n.charAt(D))?(zn=n.charAt(D),D++):(zn=a,he===0&&Me(Ml));else At=a;At!==a?W=Le=[Le,jr,At]:(D=W,W=a)}else D=W,W=a;W===a&&(W=null),Mt=C,C=RK()}else D=C,C=a;return C}function HK(C,U){return C.map(function(W){return W[U]})}function JK(C,U,W){return[C].concat(HK(U,W))}if((o=h())!==a&&D===n.length)return o;throw o!==a&&D<n.length&&Me(FK()),NK(G$,_o<n.length?n.charAt(_o):null,_o<n.length?dR(_o,_o+1):dR(_o,_o))}return e(t,Error),t.prototype.format=function(n){var s="Error: "+this.message;if(this.location){var o,a=null;for(o=0;o<n.length;o++)if(n[o].source===this.location.source){a=n[o].text.split(/\r\n|\n|\r/g);break}var l=this.location.start,c=this.location.source+":"+l.line+":"+l.column;if(a){var h=this.location.end,f=r("",l.line.toString().length),m=a[l.line-1],y=l.line===h.line?h.column:m.length+1;s+=`
 --> `+c+`
`+f+` |
`+l.line+" | "+m+`
`+f+" | "+r("",l.column-1)+r("",y-l.column,"^")}else s+=`
 at `+c}return s},t.buildMessage=function(n,s){var o={literal:function(y){return'"'+l(y.text)+'"'},class:function(y){var g=y.parts.map(function(v){return Array.isArray(v)?c(v[0])+"-"+c(v[1]):c(v)});return"["+(y.inverted?"^":"")+g+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(y){return y.description}};function a(y){return y.charCodeAt(0).toString(16).toUpperCase()}function l(y){return y.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function c(y){return y.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function h(y){return o[y.type](y)}function f(y){var g,v,_=y.map(h);if(_.sort(),_.length>0){for(g=1,v=1;g<_.length;g++)_[g-1]!==_[g]&&(_[v]=_[g],v++);_.length=v}switch(_.length){case 1:return _[0];case 2:return _[0]+" or "+_[1];default:return _.slice(0,-1).join(", ")+", or "+_[_.length-1]}}function m(y){return y?'"'+l(y)+'"':"end of input"}return"Expected "+f(n)+" but "+m(s)+" found."},{SyntaxError:t,parse:i}},(V5=YB).exports&&(V5.exports=z5());const MA={deg:1,grad:.9,rad:180/Math.PI,turn:360};function Zme(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&MA[e.unit]!=null))throw new O("effect:type-error",`Expected <angle>, Actual: ${n$(e)}`,{term:e})}const IA={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function Yme(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&IA[e.unit]!=null))throw new O("effect:type-error",`Expected <length>, Actual: ${n$(e)}`,{term:e})}function Xs(e){Jme(e);const t=e.value;return Fv(t,e),e.unit==="%"?.01*t:t}function Qme(e){return Hme(e),Fv(e.value,e),e.value}function Kme(e){return Zme(e),e.value*MA[e.unit]||0}function CA(e){return Yme(e),e.value*IA[e.unit]||0}function Xme(e){switch(e.colorType){case"hex":return Mse(e.value);case"named":return QB(e.value);case"function":return rye(e.value)}}function QB(e){if(!m7(e))throw new O("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return Tse(e)}const eye=/^rgba?/i,tye=/^hsla?/i;function rye(e){if(Cm(e.parameters,4),eye.test(e.name))return[Xs(e.parameters[0]),Xs(e.parameters[1]),Xs(e.parameters[2]),e.parameters[3]?Xs(e.parameters[3]):1];if(tye.test(e.name))return y7(Qme(e.parameters[0]),Xs(e.parameters[1]),Xs(e.parameters[2]),e.parameters[3]?Xs(e.parameters[3]):1);throw new O("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function kA(e,t,r){var i;try{return nye(e)}catch(n){(i=r==null?void 0:r.messages)==null||i.push(n)}return null}function LA(e,t,r,i){try{const n=iye(e);sn(r,n,t)}catch(n){i.messages&&i.messages.push(n)}}function iye(e){const t=TA(e);return t?jme(t)?t.map(r=>r.toJSON()):t.map(({scale:r,effects:i})=>({scale:r,value:i.map(n=>n.toJSON())})):null}function nye(e){if(!e||e.length===0)return null;if(sye(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:CS(r.value)});return t}return CS(e)}function sye(e){const t=e[0];return!!t&&"scale"in t}function CS(e){if(!e||!e.length)return"";const t=[];for(const r of e){let i=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":i=[_a(r,"amount")];break;case"blur":i=[_a(r,"radius","pt")];break;case"hue-rotate":i=[_a(r,"angle","deg")];break;case"drop-shadow":i=[_a(r,"xoffset","pt"),_a(r,"yoffset","pt"),_a(r,"blurRadius","pt"),oye(r,"color")];break;case"bloom":i=[_a(r,"strength"),_a(r,"radius","pt"),_a(r,"threshold")]}const n=`${r.type}(${i.filter(Boolean).join(" ")})`;TA(n),t.push(n)}return t.join(" ")}function _a(e,t,r){if(e[t]==null)throw new O("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return r?e[t]+r:""+e[t]}function oye(e,t){if(e[t]==null)throw new O("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const r=e[t];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}const Kx=-3;var Mu;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(Mu||(Mu={}));class n4e{constructor(t,r,i){this._namespace=t,this._storage=r,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",i&&(this._storage.registerRemoveFunc(this._namespace,i),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,r,i,n=0){this._storage.put(this._namespace+t,r,i,n)}get(t){const r=this._storage.get(this._namespace+t);return r===void 0?++this._miss:++this._hit,r}pop(t){const r=this._storage.pop(this._namespace+t);return r===void 0?++this._miss:++this._hit,r}updateSize(t,r,i){this._storage.updateSize(this._namespace+t,r,i)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class KB{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new Yd,this._users=new Yd}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,r){this._removeFuncs.push([t,r])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(r=>r[0]!==t)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,r,i,n){const s=this._db.get(t);if(s&&(this._size-=s.size,this._db.delete(t),s.entry!==r&&this._notifyRemove(t,s.entry,Mu.ALL)),i>this._maxSize)return void this._notifyRemove(t,r,Mu.ALL);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!i||i<0)return void console.warn("Refusing to cache entry with invalid size "+i);const o=1+Math.max(n,Kx)-Kx;this._db.set(t,{entry:r,size:i,lifetime:o,lives:o}),this._size+=i,this._checkSizeLimit()}updateSize(t,r,i){const n=this._db.get(t);if(n&&n.entry===r){for(this._size-=n.size;i>this._maxSize;){const s=this._notifyRemove(t,r,Mu.SOME);if(!(I(s)&&s>0))return void this._db.delete(t);i=s}n.size=i,this._size+=i,this._checkSizeLimit()}}pop(t){const r=this._db.get(t);if(r)return this._size-=r.size,this._db.delete(t),++this._hit,r.entry;++this._miss}get(t){const r=this._db.get(t);if(r!==void 0)return this._db.delete(t),r.lives=r.lifetime,this._db.set(t,r),++this._hit,r.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},i=new Array;this._db.forEach((o,a)=>{const l=o.lifetime;i[l]=(i[l]||0)+o.size,this._users.forAll(c=>{const h=c.namespace;if(a.startsWith(h)){const f=r[h]||0;r[h]=f+o.size}})});const n={};this._users.forAll(o=>{const a=o.namespace;if(!isNaN(o.hitRate)&&o.hitRate>0){const l=r[a]||0;r[a]=l,n[a]=Math.round(100*o.hitRate)+"%"}else n[a]="0%"});const s=Object.keys(r);s.sort((o,a)=>r[a]-r[o]),s.forEach(o=>t[o]=Math.round(r[o]/2**20)+"MB / "+n[o]);for(let o=i.length-1;o>=0;--o){const a=i[o];a&&(t["Priority "+(o+Kx-1)]=Math.round(a/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){this._db.forEach((r,i)=>{i.startsWith(t)&&(this._size-=r.size,this._db.delete(i),this._notifyRemove(i,r.entry,Mu.ALL))})}clearAll(){this._db.forEach((t,r)=>this._notifyRemove(r,t.entry,Mu.ALL)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,r,i){let n;return this._removeFuncs.some(s=>{if(t.startsWith(s[0])){const o=s[1](r,i);return typeof o=="number"&&(n=o),!0}return!1}),n}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,r]of this._db){if(this._db.delete(t),r.lives<=1){this._size-=r.size;const i=this._notifyRemove(t,r.entry,Mu.SOME);I(i)&&i>0&&(this._size+=i,r.lives=r.lifetime,r.size=i,this._db.set(t,r))}else--r.lives,this._db.set(t,r);if(this._size<=.9*this.maxSize)return}}}class aye{constructor(t,r){this._storage=new KB,this._storage.maxSize=t,r&&this._storage.registerRemoveFunc("",r)}put(t,r){this._storage.put(t,r,1,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}function lye(e){return typeof e=="function"}function s4e(e,t,r,i){return lye(e)?e(t,r,i):e}function o4e(e){return[e.r,e.g,e.b,e.a]}function a4e(e,t,r){const i=` /-,
`,n=l=>{let c=l.length;for(;c--;)if(!i.includes(l.charAt(c)))return!1;return!0},s=[];let o=0,a=-1;do if(a=t.indexOf("[",o),a>=o){if(a>o){const l=t.substr(o,a-o);s.push([l,null,n(l)])}if(o=a+1,a=t.indexOf("]",o),a>=o){if(a>o){const l=e[t.substr(o,a-o)];l&&s.push([null,l,!1])}o=a+1}}while(a!==-1);if(o<t.length-1){const l=t.substr(o);s.push([l,null,n(l)])}return l=>{let c="",h=null;for(const f of s){const[m,y,g]=f;if(m)g?h=m:(h&&(c+=h,h=null),c+=m);else{const v=l.attributes[y];v&&(h&&(c+=h,h=null),c+=v)}}return uye(c,r)}}function uye(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function l4e(e,t,r,i,n,s,o=!0){const a=t/n,l=r/s,c=Math.ceil(a/2),h=Math.ceil(l/2);for(let f=0;f<s;f++)for(let m=0;m<n;m++){const y=4*(m+(o?s-f-1:f)*n);let g=0,v=0,_=0,w=0,b=0,S=0,M=0;const T=(f+.5)*l;for(let k=Math.floor(f*l);k<(f+1)*l;k++){const N=Math.abs(T-(k+.5))/h,F=(m+.5)*a,q=N*N;for(let z=Math.floor(m*a);z<(m+1)*a;z++){let Q=Math.abs(F-(z+.5))/c;const K=Math.sqrt(q+Q*Q);K>=-1&&K<=1&&(g=2*K*K*K-3*K*K+1,g>0&&(Q=4*(z+k*t),M+=g*e[Q+3],_+=g,e[Q+3]<255&&(g=g*e[Q+3]/250),w+=g*e[Q],b+=g*e[Q+1],S+=g*e[Q+2],v+=g))}}i[y]=w/v,i[y+1]=b/v,i[y+2]=S/v,i[y+3]=M/_}}function cye(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function s$(e){var t;return(t=e.data)==null?void 0:t.symbol}function kS(e){return e.type==="CIMVectorMarker"||e.type==="CIMPictureMarker"||e.type==="CIMBarChartMarker"||e.type==="CIMCharacterMarker"||e.type==="CIMPieChartMarker"||e.type==="CIMStackedBarChartMarker"}function LS(e){return e.type==="CIMGradientStroke"||e.type==="CIMPictureStroke"||e.type==="CIMSolidStroke"}function XB(e){return e.type==="CIMGradientFill"||e.type==="CIMHatchFill"||e.type==="CIMPictureFill"||e.type==="CIMSolidFill"||e.type==="CIMWaterFill"}function OS(e){return e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices"}const u4e=e=>isNaN(e)||!e?0:e,c4e=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":return!0}return!1};function d4e(){return V(()=>import("./geometryEngineJSON.ba1441a3.js"),["geometryEngineJSON.ba1441a3.js","geometryEngineBase.0f0d7ecf.js","geometryEngineJSON.5a1f200e.js","json.8bd707cf.js"],import.meta.url)}function dye(e){const t=s$(e);if(t.type==="CIMTextSymbol")return t.height;let r=0;if(t.symbolLayers)for(const i of t.symbolLayers)kS(i)&&i.size>r?r=i.size:LS(i)&&i.width>r?r=i.width:XB(i);return r}function h4e(e,t,r){const i=s$(e),n=dye(e);if(n===0)return void hye(i,t);OA(i,t/n,!1,r)}function hye(e,t){if(e.type!=="CIMTextSymbol"){if(e.symbolLayers)for(const r of e.symbolLayers)switch(r.type){case"CIMPictureMarker":case"CIMVectorMarker":r.size=t;break;case"CIMPictureStroke":case"CIMSolidStroke":r.width=t}}else e.height=t}function OA(e,t,r,i){if(e.type!=="CIMTextSymbol"){if(r&&e.effects)for(const n of e.effects)mye(n,t);if(e.symbolLayers)for(const n of e.symbolLayers)switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":pye(n,t,i);break;case"CIMPictureStroke":case"CIMSolidStroke":!(i!=null&&i.preserveOutlineWidth)&&n.width&&(n.width*=t);break;case"CIMPictureFill":n.height&&(n.height*=t),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t);break;case"CIMHatchFill":OA(n.lineSymbol,t,!0,{...i,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t),n.separation&&(n.separation*=t)}}else e.height*=t}function pye(e,t,r){if(e.markerPlacement&&fye(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&e.anchorPointUnits==="Absolute"&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size*=t,e.type==="CIMVectorMarker"&&e.markerGraphics)for(const i of e.markerGraphics)e.scaleSymbolsProportionally||OA(i.symbol,t,!0,r)}function fye(e,t){switch(OS(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const r=e.placementTemplate.map(i=>i*t);e.placementTemplate=r}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const r=e.placementTemplate.map(i=>i*t);e.placementTemplate=r}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}function mye(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const r=e.dashTemplate.map(i=>i*t);e.dashTemplate=r}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function yye(e){const t=[];return LC(s$(e),t),t.length?new ae(cye(t[0])):null}function LC(e,t){let r;r=e.type==="CIMTextSymbol"?e.symbol:e;const i=e.type==="CIMPolygonSymbol";if(r.symbolLayers){for(const n of r.symbolLayers)if(!(n.colorLocked||i&&(LS(n)||kS(n)&&n.markerPlacement&&OS(n.markerPlacement))))switch(n.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":n.tintColor&&G5(t,n.tintColor);break;case"CIMVectorMarker":n.markerGraphics.forEach(s=>{LC(s.symbol,t)});break;case"CIMSolidStroke":case"CIMSolidFill":G5(t,n.color);break;case"CIMHatchFill":LC(n.lineSymbol,t)}}}function G5(e,t){for(const r of e)if(r.join(".")===t.join("."))return;e.push(t)}function eq(e,t,r){t instanceof ae||(t=new ae(t));const i=s$(e);i&&OC(i,t,r)}function OC(e,t,r){let i;i=e.type==="CIMTextSymbol"?e.symbol:e;const n=i.type==="CIMPolygonSymbol";if(i.symbolLayers)for(const s of i.symbolLayers){if(s.colorLocked)continue;if(n){if(r){const{layersToColor:a}=r;if((LS(s)||kS(s)&&s.markerPlacement&&OS(s.markerPlacement))&&a==="fill"||XB(s)&&a==="outline")continue}else if(LS(s)||kS(s)&&s.markerPlacement&&OS(s.markerPlacement))continue}const o=t.toArray();switch(s.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":s.tintColor=o;break;case"CIMVectorMarker":s.markerGraphics.forEach(a=>{OC(a.symbol,t,r)});break;case"CIMSolidStroke":case"CIMSolidFill":s.color=o;break;case"CIMHatchFill":OC(s.lineSymbol,t,r)}}}const tq="picture-fill",rq="simple-fill",gye="simple-line",iq="simple-marker",vye="text",wye="cim",Xx=new aye(1e3);function _ye(e){const t=e.style;let r=null;if(e)switch(e.type){case iq:t!=="cross"&&t!=="x"&&(r=e.color);break;case rq:t==="solid"?r=e.color:t!=="none"&&(r={type:"pattern",x:0,y:0,src:De(`esri/symbols/patterns/${t}.png`),width:5,height:5});break;case tq:r={type:"pattern",src:e.url,width:xt(e.width)*e.xscale,height:xt(e.height)*e.yscale,x:xt(e.xoffset),y:xt(e.yoffset)};break;case vye:r=e.color;break;case wye:r=yye(e)}return r}function bye(e,t){const r=e+"-"+t;return Xx.get(r)!==void 0?Promise.resolve(Xx.get(r)):nt(e,{responseType:"image"}).then(i=>{const n=i.data,s=n.naturalWidth,o=n.naturalHeight,a=document.createElement("canvas");a.width=s,a.height=o;const l=a.getContext("2d");l.fillStyle=t,l.fillRect(0,0,s,o),l.globalCompositeOperation="destination-in",l.drawImage(n,0,0);const c=a.toDataURL();return Xx.put(r,c),c})}function ev(e){if(!e)return null;let t;switch(e.type){case rq:case tq:case iq:t=ev(e.outline);break;case gye:{const r=xt(e.width);e.style!=="none"&&r!==0&&(t={color:e.color,style:AA(e.style),width:r,cap:e.cap,join:e.join==="miter"?xt(e.miterLimit):e.join});break}default:t=null}return t}const AA=(()=>{const e={};return t=>{if(e[t])return e[t];const r=t.replace(/-/g,"");return e[t]=r,r}})(),Sye=new ae([128,128,128]),B5=/\/resource\/(.*?)\.svg$/,$ye=new ae("white");function xye(e){const t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;const r=e.symbolLayers.getItemAt(t-1);return"outline"in r?zO(r,"outline","size"):void 0}function Eye(e){if(!e)return 0;if(aa(e)){const r=xye(e);return I(r)?r:0}const t=ev(e);return t&&_s(t.width)||0}function o$(e){if(R(e)||!("symbolLayers"in e)||R(e.symbolLayers))return!1;switch(e.type){case"point-3d":return e.symbolLayers.some(t=>t.type==="object");case"line-3d":return e.symbolLayers.some(t=>t.type==="path");case"polygon-3d":return e.symbolLayers.some(t=>t.type==="object"||t.type==="extrude");default:return!1}}function Tye(e,t){const r=t.resource.href;return!j("esri-canvas-svg-support")&&e.styleOrigin&&B5.test(r)?r.replace(B5,"/resource/png/$1.png"):r}function Fh(e,t){if(!e)return null;let r=null;return aa(e)?r=Mye(e):W2(e)&&(r=e.color?new ae(e.color):null),r?tv(r,t):null}function Mye(e){const t=e.symbolLayers;if(!t)return null;let r=null;return t.forEach(i=>{i.type==="object"&&i.resource.href!=null||(r=i.type==="water"?i.color:I(i.material)?i.material.color:null)}),r?new ae(r):null}function tv(e,t){if(t==null)return e;const r=e.toRgba();return r[3]=r[3]*t,new ae(r)}function Iye(e,t,r){const i=e.symbolLayers;if(!i)return;const n=s=>{const o=I(s)?s:null;return tv(t=t||o||r!=null&&$ye,r)};i.forEach(s=>{if(s.type!=="object"||s.resource.href==null||t)if(s.type==="water")s.color=n(s.color);else{const o=I(s.material)?s.material.color:null,a=n(o);R(s.material)?s.material=new Pn({color:a}):s.material.color=a,r!=null&&"outline"in s&&I(s.outline)&&I(s.outline.color)&&(s.outline.color=tv(s.outline.color,r))}})}function Cye(e,t,r){(t=t||e.color)&&(e.color=tv(t,r)),r!=null&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=tv(e.outline.color,r))}function eE(e,t,r){e&&(t||r!=null)&&(t&&(t=new ae(t)),aa(e)?Iye(e,t,r):W2(e)&&Cye(e,t,r))}async function kye(e,t){const r=e.symbolLayers;r&&await Cie(r,async i=>Lye(i,t))}async function Lye(e,t){switch(e.type){case"extrude":Aye(e,t);break;case"icon":case"line":case"text":Oye(e,t);break;case"path":Rye(e,t);break;case"object":await Pye(e,t)}}function Oye(e,t){const r=nq(t);I(r)&&(e.size=r)}function nq(e){for(const t of e)if(typeof t=="number")return t;return null}function Aye(e,t){e.size=typeof t[2]=="number"?t[2]:0}async function Pye(e,t){const{resourceSize:r,symbolSize:i}=await Fye(e),n=sq(t,r,i);e.width=Xg(t[0],i[0],r[0],n),e.depth=Xg(t[1],i[1],r[1],n),e.height=Xg(t[2],i[2],r[2],n)}function Rye(e,t){const r=sq(t,S7,[e.width,void 0,e.height]);e.width=Xg(t[0],e.width,1,r),e.height=Xg(t[2],e.height,1,r)}function sq(e,t,r){for(let i=0;i<3;i++){const n=e[i];switch(n){case"symbol-value":return r[i]!=null?r[i]/t[i]:1;case"proportional":break;default:if(n&&t[i])return n/t[i]}}return 1}async function Fye(e){const t=await V(()=>import("./symbolLayerUtils.ed5b4f67.js"),[],import.meta.url),r=await t.computeObjectLayerResourceSize(e,10),{width:i,height:n,depth:s}=e,o=[i,s,n];let a=1;for(let l=0;l<3;l++)if(o[l]!=null){a=o[l]/r[l];break}for(let l=0;l<3;l++)o[l]==null&&(o[l]=r[l]*a);return{resourceSize:r,symbolSize:o}}function Xg(e,t,r,i){switch(e){case"proportional":return r*i;case"symbol-value":return t!=null?t:r;default:return e}}function Nye(e,t){const r=nq(t);if(!R(r))switch(e.type){case"simple-marker":e.size=r;break;case"picture-marker":{const i=e.width/e.height;i>1?(e.width=r,e.height=r*i):(e.width=r*i,e.height=r);break}case"simple-line":e.width=r;break;case"text":e.font.size=r}}async function Dye(e,t){if(e&&t)return aa(e)?kye(e,t):void(W2(e)&&Nye(e,t))}function jye(e,t,r){if(e&&t!=null)if(aa(e)){const i=e.symbolLayers;i&&i.forEach(n=>{if(n&&n.type==="object")switch(r){case"tilt":n.tilt=t;break;case"roll":n.roll=t;break;default:n.heading=t}})}else W2(e)&&(e.type!=="simple-marker"&&e.type!=="picture-marker"&&e.type!=="text"||(e.angle=t))}function rv(e){if(!e)return null;const t=e.effects.filter(r=>r.type!=="bloom").map(r=>r.toJSON());return CS(t)}const oq="<",aq=">",Vye=j3("short-date");function lq(e,t,r,i){let n="";t===0?n=`${oq} `:t===r&&(n=`${aq} `);let s=null;return s=i?wl(e,Vye):Eme(e),n+s}const zye=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function AC(e){if(!("visualVariables"in e)||!e.visualVariables)return null;const t=e.visualVariables.find(o=>o.type==="color");if(!t)return null;let r=null,i=null;if(t.stops){if(t.stops.length===1)return t.stops[0].color;r=t.stops[0].value,i=t.stops[t.stops.length-1].value}const n=r+(i-r)/2,{getColor:s}=await V(()=>Promise.resolve().then(()=>Oh),void 0,import.meta.url);return s(t,n)}async function uq(e,t){const r=e.trailCap,i=e.trailWidth||1,n=t||await AC(e)||e.color;return new hn({cap:r,color:n,width:i})}const Uye=new ae([64,64,64]);function cq(e,t){const r=[],i=e.length-1;return e.length===5?r.push(0,2,4):r.push(0,i),e.map((n,s)=>r.includes(s)?lq(n,s,i,t):null)}async function PC(e,t,r){let i=!1,n=[],s=[];if(e.stops){const c=e.stops;n=c.map(h=>h.value),i=c.some(h=>!!h.label),i&&(s=c.map(h=>h.label))}const o=n[0],a=n[n.length-1];if(o==null&&a==null)return null;const l=i?null:cq(n,r);return(await Promise.all(n.map(async(c,h)=>({value:c,color:e.type==="opacity"?await Gye(c,e,t):(await V(()=>Promise.resolve().then(()=>Oh),void 0,import.meta.url)).getColor(e,c),label:i?s[h]:l[h]})))).reverse()}async function Gye(e,t,r=Uye){const i=new ae(r),n=(await V(()=>Promise.resolve().then(()=>Oh),void 0,import.meta.url)).getOpacity(t,e);return n!=null&&(i.a=n),i}function Bye(e){let t=!1,r=[],i=[];r=e.map(a=>a.value),t=e.some(a=>!!a.label),t&&(i=e.map(a=>a.label));const n=r[0],s=r[r.length-1];if(n==null&&s==null)return null;const o=t?null:cq(r,!1);return r.map((a,l)=>({value:a,color:dq(a,e),label:t?i[l]:o[l]})).reverse()}function dq(e,t){const{startIndex:r,endIndex:i,weight:n}=qye(e,t);if(r===i)return t[r].color;const s=ae.blendColors(t[r].color,t[i].color,n);return new ae(s)}function qye(e,t){let r=0,i=t.length-1;return t.some((n,s)=>e<n.value?(i=s,!0):(r=s,!1)),{startIndex:r,endIndex:i,weight:(e-t[r].value)/(t[i].value-t[r].value)}}function Wye(e,t){let r=[];if(e&&e.type==="multipart")e.colorRamps.reverse().forEach((i,n)=>{n===0?r.push({value:t.max,color:new ae(i.toColor),label:"high"}):r.push({value:null,color:new ae(i.toColor),label:""}),n===e.colorRamps.length-1?r.push({value:t.min,color:new ae(i.fromColor),label:"low"}):r.push({value:null,color:new ae(i.fromColor),label:""})});else{let i,n;e&&e.type==="algorithmic"?(i=e.fromColor,n=e.toColor):(i=[0,0,0,1],n=[255,255,255,1]),r=[{value:t.max,color:new ae(n),label:"high"},{value:t.min,color:new ae(i),label:"low"}]}return r}var RC;let ug=RC=class extends B{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new RC({color:this.color,ratio:this.ratio})}};u([d({type:ae,json:{type:[ct],default:null,write:!0}})],ug.prototype,"color",void 0),u([d({type:Number,json:{write:!0}})],ug.prototype,"ratio",void 0),ug=RC=u([E("esri.renderers.support.HeatmapColorStop")],ug);const e0=ug;function hq(e){if(!e.colorStops)return[];const t=[...e.colorStops].filter(i=>{var n;return((n=i.color)==null?void 0:n.a)>0});let r=t.length-1;if(t&&t[0]){const i=t[r];i&&i.ratio!==1&&(t.push(new e0({ratio:1,color:i.color})),r++)}return t.map((i,n)=>{var o,a;let s="";return n===0?s=((o=e.legendOptions)==null?void 0:o.minLabel)||"low":n===r&&(s=((a=e.legendOptions)==null?void 0:a.maxLabel)||"high"),{color:i.color,label:s,ratio:i.ratio}}).reverse()}Z.getLogger("esri.renderers.support.utils");function fn(e,t,r){g9(e,t,()=>[]).push(...r)}async function Hye(e){var r,i;const t=new Map;if("visualVariables"in e&&e.visualVariables){const n=e.visualVariables.filter(s=>s.type==="color");for(const s of n){const o=s.field||s.valueExpression,a=(await PC(s)).map(l=>l.color);fn(t,o,a)}}if(e.type==="heatmap"){const n=hq(e).map(s=>s.color);fn(t,e.field,n)}else if(e.type==="pie-chart"){for(const n of e.attributes)fn(t,n.field,[n.color]);fn(t,null,[(r=e==null?void 0:e.othersCategory)==null?void 0:r.color,Fh(e.backgroundFillSymbol,null)])}else if(e.type==="dot-density"){for(const n of e.attributes)fn(t,n.field,[n.color]);fn(t,null,[e.backgroundColor])}else if(e.type==="unique-value")if(((i=e.authoringInfo)==null?void 0:i.type)==="predominance")for(const n of e.uniqueValueInfos)fn(t,n.value.toString(),[Fh(n.symbol,null)]);else{const n=e.uniqueValueInfos.map(c=>Fh(c.symbol,null)),{field:s,field2:o,field3:a,valueExpression:l}=e;(s||l)&&fn(t,s||l,n),o&&fn(t,o,n),a&&fn(t,a,n)}else if(e.type==="class-breaks"){const n=e.classBreakInfos.map(s=>Fh(s.symbol,null));fn(t,e.field||e.valueExpression,n)}else e.type==="simple"&&fn(t,null,[Fh(e.symbol,null)]);return"defaultSymbol"in e&&e.defaultSymbol&&fn(t,null,[Fh(e.defaultSymbol,null)]),t.forEach((n,s)=>{const o=Ste(n.filter(Boolean),(a,l)=>JSON.stringify(a)===JSON.stringify(l));t.set(s,o)}),t}var FC;let cg=FC=class extends B{constructor(e){super(e),this.name=null,this.code=null}clone(){return new FC({name:this.name,code:this.code})}};u([d({type:String,json:{write:!0}})],cg.prototype,"name",void 0),u([d({type:[String,Number],json:{write:!0}})],cg.prototype,"code",void 0),cg=FC=u([E("esri.layers.support.CodedValue")],cg);const Jye=new Ee({inherited:"inherited",codedValue:"coded-value",range:"range"});let dg=class extends B{constructor(e){super(e),this.name=null,this.type=null}};u([d({type:String,json:{write:!0}})],dg.prototype,"name",void 0),u([me(Jye)],dg.prototype,"type",void 0),dg=u([E("esri.layers.support.Domain")],dg);const a$=dg;var NC;let hg=NC=class extends a${constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some(i=>(String(i.code)===r&&(t=i.name),!!t))}return t}clone(){return new NC({codedValues:P(this.codedValues),name:this.name})}};u([d({type:[cg],json:{write:!0}})],hg.prototype,"codedValues",void 0),u([me({codedValue:"coded-value"})],hg.prototype,"type",void 0),hg=NC=u([E("esri.layers.support.CodedValueDomain")],hg);const pq=hg;var DC;let x_=DC=class extends a${constructor(e){super(e),this.type="inherited"}clone(){return new DC}};u([me({inherited:"inherited"})],x_.prototype,"type",void 0),x_=DC=u([E("esri.layers.support.InheritedDomain")],x_);const fq=x_;var jC;let pp=jC=class extends a${constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new jC({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};u([d({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]}}}})],pp.prototype,"maxValue",void 0),u([d({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]}}}})],pp.prototype,"minValue",void 0),u([me({range:"range"})],pp.prototype,"type",void 0),pp=jC=u([E("esri.layers.support.RangeDomain")],pp);const mq=pp,yq={key:"type",base:a$,typeMap:{range:mq,"coded-value":pq,inherited:fq}};function PA(e){if(!e||!e.type)return null;switch(e.type){case"range":return mq.fromJSON(e);case"codedValue":return pq.fromJSON(e);case"inherited":return fq.fromJSON(e)}return null}const Zye=new Ee({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});var VC;const Yye=new Ee({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let yi=VC=class extends B{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:t}){let r;try{r=JSON.parse(t)}catch{}return r?r.value:null}readValueType(e,{description:t}){let r;try{r=JSON.parse(t)}catch{}return r?Yye.fromJSON(r.fieldValueType):null}clone(){return new VC({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};u([d({type:String,json:{write:!0}})],yi.prototype,"alias",void 0),u([d({type:[String,Number],json:{write:{allowNull:!0}}})],yi.prototype,"defaultValue",void 0),u([d()],yi.prototype,"description",void 0),u([te("description")],yi.prototype,"readDescription",null),u([d({types:yq,json:{read:{reader:PA},write:!0}})],yi.prototype,"domain",void 0),u([d({type:Boolean,json:{write:!0}})],yi.prototype,"editable",void 0),u([d({type:ct,json:{write:!0}})],yi.prototype,"length",void 0),u([d({type:String,json:{write:!0}})],yi.prototype,"name",void 0),u([d({type:Boolean,json:{write:!0}})],yi.prototype,"nullable",void 0),u([me(Zye)],yi.prototype,"type",void 0),u([d()],yi.prototype,"valueType",void 0),u([te("valueType",["description"])],yi.prototype,"readValueType",null),yi=VC=u([E("esri.layers.support.Field")],yi);const Nv=yi;var zC;let fp=zC=class extends B{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new zC({mapLayerId:e,gdbVersion:t})}};u([me({mapLayer:"map-layer"})],fp.prototype,"type",void 0),u([d({type:ct,json:{write:!0}})],fp.prototype,"mapLayerId",void 0),u([d({type:String,json:{write:!0}})],fp.prototype,"gdbVersion",void 0),fp=zC=u([E("esri.layers.support.source.MapLayerSource")],fp);var UC;let Na=UC=class extends B{constructor(e){super(e),this.type="query-table"}clone(){var o;const{workspaceId:e,query:t,oidFields:r,spatialReference:i,geometryType:n}=this,s={workspaceId:e,query:t,oidFields:r,spatialReference:(o=i==null?void 0:i.clone())!=null?o:void 0,geometryType:n};return new UC(s)}};u([me({queryTable:"query-table"})],Na.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],Na.prototype,"workspaceId",void 0),u([d({type:String,json:{write:!0}})],Na.prototype,"query",void 0),u([d({type:String,json:{write:!0}})],Na.prototype,"oidFields",void 0),u([d({type:Te,json:{write:!0}})],Na.prototype,"spatialReference",void 0),u([me(C3)],Na.prototype,"geometryType",void 0),Na=UC=u([E("esri.layers.support.source.QueryTableDataSource")],Na);var GC;let mp=GC=class extends B{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new GC({workspaceId:e,dataSourceName:t})}};u([me({raster:"raster"})],mp.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],mp.prototype,"dataSourceName",void 0),u([d({type:String,json:{write:!0}})],mp.prototype,"workspaceId",void 0),mp=GC=u([E("esri.layers.support.source.RasterDataSource")],mp);var BC;let Qc=BC=class extends B{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new BC({workspaceId:e,gdbVersion:t,dataSourceName:r})}};u([me({table:"table"})],Qc.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],Qc.prototype,"workspaceId",void 0),u([d({type:String,json:{write:!0}})],Qc.prototype,"gdbVersion",void 0),u([d({type:String,json:{write:!0}})],Qc.prototype,"dataSourceName",void 0),Qc=BC=u([E("esri.layers.support.source.TableDataSource")],Qc);var qC,WC;const Qye=Yr()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let wn=qC=class extends B{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return q5()(e,t,r)}castLeftTableSource(e){return ia(HC(),e)}readRightTableSource(e,t,r){return q5()(e,t,r)}castRightTableSource(e){return ia(HC(),e)}clone(){var o,a;const{leftTableKey:e,rightTableKey:t,leftTableSource:r,rightTableSource:i,joinType:n}=this,s={leftTableKey:e,rightTableKey:t,leftTableSource:(o=r==null?void 0:r.clone())!=null?o:void 0,rightTableSource:(a=i==null?void 0:i.clone())!=null?a:void 0,joinType:n};return new qC(s)}};u([me({joinTable:"join-table"})],wn.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],wn.prototype,"leftTableKey",void 0),u([d({type:String,json:{write:!0}})],wn.prototype,"rightTableKey",void 0),u([d({json:{write:!0}})],wn.prototype,"leftTableSource",void 0),u([te("leftTableSource")],wn.prototype,"readLeftTableSource",null),u([ze("leftTableSource")],wn.prototype,"castLeftTableSource",null),u([d({json:{write:!0}})],wn.prototype,"rightTableSource",void 0),u([te("rightTableSource")],wn.prototype,"readRightTableSource",null),u([ze("rightTableSource")],wn.prototype,"castRightTableSource",null),u([me(Qye)],wn.prototype,"joinType",void 0),wn=qC=u([E("esri.layers.support.source.JoinTableDataSource")],wn);let tE=null;function q5(){return tE||(tE=fm({types:HC()})),tE}let rE=null;function HC(){return rE||(rE={key:"type",base:null,typeMap:{"data-layer":eo,"map-layer":fp}}),rE}const Kye={key:"type",base:null,typeMap:{"join-table":wn,"query-table":Na,raster:mp,table:Qc}};let eo=WC=class extends B{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new WC({fields:e,dataSource:t})}};u([me({dataLayer:"data-layer"})],eo.prototype,"type",void 0),u([d({type:[Nv],json:{write:!0}})],eo.prototype,"fields",void 0),u([d({types:Kye,json:{write:!0}})],eo.prototype,"dataSource",void 0),eo=WC=u([E("esri.layers.support.source.DataLayerSource")],eo),eo.from=dt(eo);function Xye(e,t){return t?{...t,query:{...e,...t.query}}:{query:e}}function gq(e){return typeof e=="string"?Qt(e):P(e)}function ege(e,t,r){const i={};for(const n in e){if(n==="declaredClass")continue;const s=e[n];if(s!=null&&typeof s!="function")if(Array.isArray(s)){i[n]=[];for(let o=0;o<s.length;o++)i[n][o]=ege(s[o])}else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(r&&r[n]);i[n]=t?o:JSON.stringify(o)}else i[n]=t?s:JSON.stringify(s);else i[n]=s}return i}const B1={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Ei({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Te.WebMercator}),minus180Line:new Ei({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Te.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Ei({paths:[[[180,-180],[180,180]]],spatialReference:Te.WGS84}),minus180Line:new Ei({paths:[[[-180,-180],[-180,180]]],spatialReference:Te.WGS84})}};function Gd(e,t){return Math.ceil((e-t)/(2*t))}function vq(e,t){const r=t0(e);for(const i of r)for(const n of i)n[0]+=t;return e}function t0(e){return Qd(e)?e.rings:e.paths}async function tge(e,t,r,i){const n=typeof e=="string"?Qt(e):e,s=t[0].spatialReference,o={...i,query:{...n.query,f:"json",sr:JSON.stringify(s),target:JSON.stringify({geometryType:_m(t[0]),geometries:t}),cutter:JSON.stringify(r)}},a=await nt(n.path+"/cut",o),{cutIndexes:l,geometries:c=[]}=a.data;return{cutIndexes:l,geometries:c.map(h=>{const f=Li(h);return f.spatialReference=s,f})}}async function rge(e,t,r){const i=typeof e=="string"?Qt(e):e,n=t[0].spatialReference,s=_m(t[0]),o={...r,query:{...i.query,f:"json",sr:n.wkid?n.wkid:JSON.stringify(n),geometries:JSON.stringify(ige(t))}};return nge((await nt(i.path+"/simplify",o)).data,s,n)}function ige(e){return{geometryType:_m(e[0]),geometries:e.map(t=>t.toJSON())}}function nge(e,t,r){const i=nU(t);return e.map(n=>{const s=i.fromJSON(n);return s.spatialReference=r,s})}const wq=Z.getLogger("esri.geometry.support.normalizeUtils");function sge(e){return e.type==="polygon"}function oge(e){return e[0].type==="polygon"}function age(e){return e[0].type==="polyline"}function lge(e,t){if(!(e instanceof Ei||e instanceof ws)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw wq.error(n),new O(n)}const r=t0(e),i=[];for(const n of r){const s=[];i.push(s),s.push([n[0][0],n[0][1]]);for(let o=0;o<n.length-1;o++){const a=n[o][0],l=n[o][1],c=n[o+1][0],h=n[o+1][1],f=Math.sqrt((c-a)*(c-a)+(h-l)*(h-l)),m=(h-l)/f,y=(c-a)/f,g=f/t;if(g>1){for(let b=1;b<=g-1;b++){const S=b*t,M=y*S+a,T=m*S+l;s.push([M,T])}const v=(f+Math.floor(g-1)*t)/2,_=y*v+a,w=m*v+l;s.push([_,w])}s.push([c,h])}}return sge(e)?new ws({rings:i,spatialReference:e.spatialReference}):new Ei({paths:i,spatialReference:e.spatialReference})}function W5(e,t,r){if(t){const i=lge(e,1e6);e=jy(i,!0)}return r&&(e=vq(e,r)),e}function H5(e,t,r){if(Array.isArray(e)){const i=e[0];if(i>t){const n=Gd(i,t);e[0]=i+n*(-2*t)}else if(i<r){const n=Gd(i,r);e[0]=i+n*(-2*r)}}else{const i=e.x;if(i>t){const n=Gd(i,t);e=e.clone().offset(n*(-2*t),0)}else if(i<r){const n=Gd(i,r);e=e.clone().offset(n*(-2*r),0)}}return e}function uge(e,t){let r=-1;for(let i=0;i<t.cutIndexes.length;i++){const n=t.cutIndexes[i],s=t.geometries[i],o=t0(s);for(let a=0;a<o.length;a++){const l=o[a];l.some(c=>{if(c[0]<180)return!0;{let h=0;for(let m=0;m<l.length;m++){const y=l[m][0];h=y>h?y:h}h=Number(h.toFixed(9));const f=-360*Gd(h,180);for(let m=0;m<l.length;m++){const y=s.getPoint(a,m);s.setPoint(a,m,y.clone().offset(f,0))}return!0}})}if(n===r){if(oge(e))for(const a of t0(s))e[n]=e[n].addRing(a);else if(age(e))for(const a of t0(s))e[n]=e[n].addPath(a)}else r=n,e[n]=s}return e}async function _q(e,t,r){var M;if(!Array.isArray(e))return _q([e],t);t&&typeof t!="string"&&wq.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const i=typeof t=="string"?t:(M=t==null?void 0:t.url)!=null?M:Ve.geometryServiceUrl;let n,s,o,a,l,c,h,f,m=0;const y=[],g=[];for(const T of e)if(R(T))g.push(T);else if(n||(n=T.spatialReference,s=ho(n),o=n.isWebMercator,c=o?102100:4326,a=B1[c].maxX,l=B1[c].minX,h=B1[c].plus180Line,f=B1[c].minus180Line),s)if(T.type==="mesh")g.push(T);else if(T.type==="point")g.push(H5(T.clone(),a,l));else if(T.type==="multipoint"){const k=T.clone();k.points=k.points.map(N=>H5(N,a,l)),g.push(k)}else if(T.type==="extent"){const k=T.clone()._normalize(!1,!1,s);g.push(k.rings?new ws(k):k)}else if(T.extent){const k=T.extent,N=Gd(k.xmin,l)*(2*a);let F=N===0?T.clone():vq(T.clone(),N);k.offset(N,0),k.intersects(h)&&k.xmax!==a?(m=k.xmax>m?k.xmax:m,F=W5(F,o),y.push(F),g.push("cut")):k.intersects(f)&&k.xmin!==l?(m=k.xmax*(2*a)>m?k.xmax*(2*a):m,F=W5(F,o,360),y.push(F),g.push("cut")):g.push(F)}else g.push(T.clone());else g.push(T);let v=Gd(m,a),_=-90;const w=v,b=new Ei;for(;v>0;){const T=360*v-180;b.addPath([[T,_],[T,-1*_]]),_*=-1,v--}if(y.length>0&&w>0){const T=uge(y,await tge(i,y,b,r)),k=[],N=[];for(let z=0;z<g.length;z++){const Q=g[z];if(Q!=="cut")N.push(Q);else{const K=T.shift(),ce=e[z];I(ce)&&ce.type==="polygon"&&ce.rings&&ce.rings.length>1&&K.rings.length>=ce.rings.length?(k.push(K),N.push("simplify")):N.push(o?cl(K):K)}}if(!k.length)return N;const F=await rge(i,k,r),q=[];for(let z=0;z<N.length;z++){const Q=N[z];Q!=="simplify"?q.push(Q):q.push(o?cl(F.shift()):F.shift())}return q}const S=[];for(let T=0;T<g.length;T++){const k=g[T];if(k!=="cut")S.push(k);else{const N=y.shift();S.push(o===!0?cl(N):N)}}return S}function p4e(e,t){const r=ho(t);if(r){const[i,n]=r.valid,s=n-i;if(e<i)for(;e<i;)e+=s;if(e>n)for(;e>n;)e-=s}return e}function bq(e){const t={};for(const r in e){if(r==="declaredClass")continue;const i=e[r];if(i!=null&&typeof i!="function")if(Array.isArray(i)){t[r]=[];for(let n=0;n<i.length;n++)t[r][n]=bq(i[n])}else typeof i=="object"?i.toJSON&&(t[r]=JSON.stringify(i)):t[r]=i}return t}var Iu;(function(e){e[e.varint=0]="varint",e[e.fixed64=1]="fixed64",e[e.delimited=2]="delimited",e[e.fixed32=5]="fixed32",e[e.unknown=99]="unknown"})(Iu||(Iu={}));const J5=4294967296,cge=new TextDecoder("utf-8"),dge=j("safari")||j("ios")?6:j("ff")?12:32;class th{constructor(t,r,i=0,n=t?t.byteLength:0){this._tag=0,this._dataType=Iu.unknown,this._init(t,r,i,n)}_init(t,r,i,n){this._data=t,this._dataView=r,this._pos=i,this._end=n}clone(){return new th(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const r=this._decodeVarint();if(this._tag=r>>3,this._dataType=7&r,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();return t>>>1^-(1&t)|0}getSInt64(){return this._decodeSVarint()}getBool(){const t=this._data[this._pos]!==0;return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,r=this._pos,i=t.getUint32(r,!0)+t.getUint32(r+4,!0)*J5;return this._skip(8),i}getSFixed64(){const t=this._dataView,r=this._pos,i=t.getUint32(r,!0)+t.getInt32(r+4,!0)*J5;return this._skip(8),i}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),r=this._pos,i=this._toString(this._data,r,r+t);return this._skip(t),i}getBytes(){const t=this._getLength(),r=this._pos,i=this._toBytes(this._data,r,r+t);return this._skip(t),i}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,r,i,n){const s=this.getMessage(),o=t(s,r,i,n);return s.release(),o}processMessage(t){const r=this.getMessage(),i=t(r);return r.release(),i}getMessage(){const t=this._getLength(),r=th.pool.acquire();return r._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),r}release(){th.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case Iu.varint:this._decodeVarint();break;case Iu.fixed64:this._skip(8);break;case Iu.delimited:this._skip(this._getLength());break;case Iu.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let r,i=this._pos,n=0;if(this._end-i>=10)do{if(r=t[i++],n|=127&r,(128&r)==0||(r=t[i++],n|=(127&r)<<7,(128&r)==0)||(r=t[i++],n|=(127&r)<<14,(128&r)==0)||(r=t[i++],n|=(127&r)<<21,(128&r)==0)||(r=t[i++],n+=268435456*(127&r),(128&r)==0)||(r=t[i++],n+=34359738368*(127&r),(128&r)==0)||(r=t[i++],n+=4398046511104*(127&r),(128&r)==0)||(r=t[i++],n+=562949953421312*(127&r),(128&r)==0)||(r=t[i++],n+=72057594037927940*(127&r),(128&r)==0)||(r=t[i++],n+=9223372036854776e3*(127&r),(128&r)==0))break;throw new Error("Varint too long!")}while(0);else{let s=1;for(;i!==this._end&&(r=t[i],(128&r)!=0);)++i,n+=(127&r)*s,s*=128;if(i===this._end)throw new Error("Varint overrun!");++i,n+=r*s}return this._pos=i,n}_decodeSVarint(){const t=this._decodeVarint();return t%2?-(t+1)/2:t/2}_getLength(){if(this._dataType!==Iu.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,r,i){if((i=Math.min(this._end,i))-r>dge){const o=t.subarray(r,i);return cge.decode(o)}let n="",s="";for(let o=r;o<i;++o){const a=t[o];128&a?s+="%"+a.toString(16):(n+=decodeURIComponent(s)+String.fromCharCode(a),s="")}return s.length&&(n+=decodeURIComponent(s)),n}_toBytes(t,r,i){return i=Math.min(this._end,i),new Uint8Array(t.buffer,r,i-r)}}th.pool=new yo(th,null,e=>{e._data=null,e._dataView=null});class Ci{constructor(t=[],r=[],i=!1){this.lengths=t!=null?t:[],this.coords=r!=null?r:[],this.hasIndeterminateRingOrder=i}static fromRect(t){const[r,i,n,s]=t,o=n-r,a=s-i;return new Ci([5],[r,i,o,0,0,a,-o,0,0,-a])}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,r)=>t+r)}forEachVertex(t){let r=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let i=0;i<this.lengths.length;i++){const n=this.lengths[i];for(let s=0;s<n;s++)t(this.coords[2*(s+r)],this.coords[2*(s+r)+1]);r+=n}}clone(t){return t?(t.set(this.coords),new Ci(this.lengths.slice(),t,this.hasIndeterminateRingOrder)):new Ci(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}class la{constructor(t=null,r={},i,n){this.geometry=t,this.attributes=r,this.centroid=i,this.objectId=n,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const t=new la(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function hge(e){return!(R(e.geometry)||!e.geometry.coords||!e.geometry.coords.length)}class f4e extends la{}class l${constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new l$;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}const Sq=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class m4e{constructor(t){this.options=t,this.geometryTypes=Sq,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new l$}prepareFeatures(t){this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++}finishFeatureResult(t){if(!t||!t.features||!t.hasZ||!this.options.sourceSpatialReference||!t.spatialReference||Hr(t.spatialReference,this.options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;const r=Yf(this.options.sourceSpatialReference)/Yf(t.spatialReference);if(r!==1)for(const i of t.features){if(!hge(i))continue;const n=i.geometry.coords;for(let s=2;s<n.length;s+=3)n[s]*=r}}addFeature(t,r){t.features.push(r)}createFeature(){return new la}createSpatialReference(){return{wkid:0}}createGeometry(){return new Ci}addField(t,r){t.fields.push(r)}allocateCoordinates(t){t.coords.length=t.lengths.reduce((r,i)=>r+i,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(t,r){t.coords[this._coordinatePtr++]=r}addCoordinatePoint(t,r){t.coords.push(r)}addLength(t,r){t.lengths.push(r)}addQueryGeometry(t,r){t.queryGeometry=r.queryGeometry,t.queryGeometryType=r.queryGeometryType}createPointGeometry(){return new Ci}}const Z5=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],Y5=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],Q5=["upperLeft","lowerLeft"];function K5(e){return e>=Z5.length?null:Z5[e]}function pge(e){return e>=Y5.length?null:Y5[e]}function X5(e){return e>=Q5.length?null:Q5[e]}function eD(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function fge(e,t,r){const n=t.createPointGeometry(r);for(;e.next();)switch(e.tag()){case 3:{const s=e.getUInt32(),o=e.pos()+s;let a=0;for(;e.pos()<o;)t.addCoordinatePoint(n,e.getSInt64(),a++);break}default:e.skip()}return n}function mge(e,t,r){const s=t.createGeometry(r),o=2+(r.hasZ?1:0)+(r.hasM?1:0);for(;e.next();)switch(e.tag()){case 2:{const a=e.getUInt32(),l=e.pos()+a;let c=0;for(;e.pos()<l;)t.addLength(s,e.getUInt32(),c++);break}case 3:{const a=e.getUInt32(),l=e.pos()+a;let c=0;for(t.allocateCoordinates(s);e.pos()<l;)t.addCoordinate(s,e.getSInt64(),c),c++,c===o&&(c=0);break}default:e.skip()}return s}function yge(e){const n=new Ci;let s="esriGeometryPoint";for(;e.next();)switch(e.tag()){case 2:{const o=e.getUInt32(),a=e.pos()+o;for(;e.pos()<a;)n.lengths.push(e.getUInt32());break}case 3:{const o=e.getUInt32(),a=e.pos()+o;for(;e.pos()<a;)n.coords.push(e.getSInt64());break}case 1:s=Sq[e.getEnum()];break;default:e.skip()}return{queryGeometry:n,queryGeometryType:s}}function gge(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function vge(e){const a={type:K5(0)};for(;e.next();)switch(e.tag()){case 1:a.name=e.getString();break;case 2:a.type=K5(e.getEnum());break;case 3:a.alias=e.getString();break;case 4:a.sqlType=pge(e.getEnum());break;case 5:e.skip();break;case 6:a.defaultValue=e.getString();break;default:e.skip()}return a}function wge(e){const i={};for(;e.next();)switch(e.tag()){case 1:i.name=e.getString();break;case 2:i.isSystemMaintained=e.getBool();break;default:e.skip()}return i}function _ge(e,t,r,i){const a=t.createFeature(r);let l=0;for(;e.next();)switch(e.tag()){case 1:{const c=i[l++].name;a.attributes[c]=e.processMessage(gge);break}case 2:a.geometry=e.processMessageWithArgs(mge,t,r);break;case 4:a.centroid=e.processMessageWithArgs(fge,t,r);break;default:e.skip()}return a}function bge(e){const s=[1,1,1,1];for(;e.next();)switch(e.tag()){case 1:s[0]=e.getDouble();break;case 2:s[1]=e.getDouble();break;case 4:s[2]=e.getDouble();break;case 3:s[3]=e.getDouble();break;default:e.skip()}return s}function Sge(e){const s=[0,0,0,0];for(;e.next();)switch(e.tag()){case 1:s[0]=e.getDouble();break;case 2:s[1]=e.getDouble();break;case 4:s[2]=e.getDouble();break;case 3:s[3]=e.getDouble();break;default:e.skip()}return s}function $ge(e){const n={originPosition:X5(0)};for(;e.next();)switch(e.tag()){case 1:n.originPosition=X5(e.getEnum());break;case 2:n.scale=e.processMessage(bge);break;case 3:n.translate=e.processMessage(Sge);break;default:e.skip()}return n}function xge(e){const n={};for(;e.next();)switch(e.tag()){case 1:n.shapeAreaFieldName=e.getString();break;case 2:n.shapeLengthFieldName=e.getString();break;case 3:n.units=e.getString();break;default:e.skip()}return n}function Ege(e,t){const a=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:a.wkid=e.getUInt32();break;case 5:a.wkt=e.getString();break;case 2:a.latestWkid=e.getUInt32();break;case 3:a.vcsWkid=e.getUInt32();break;case 4:a.latestVcsWkid=e.getUInt32();break;default:e.skip()}return a}function Tge(e,t){const v=t.createFeatureResult();v.geometryType=eD(t,0);let _=!1;for(;e.next();)switch(e.tag()){case 1:v.objectIdFieldName=e.getString();break;case 3:v.globalIdFieldName=e.getString();break;case 4:v.geohashFieldName=e.getString();break;case 5:v.geometryProperties=e.processMessage(xge);break;case 7:v.geometryType=eD(t,e.getEnum());break;case 8:v.spatialReference=e.processMessageWithArgs(Ege,t);break;case 10:v.hasZ=e.getBool();break;case 11:v.hasM=e.getBool();break;case 12:v.transform=e.processMessage($ge);break;case 9:{const w=e.getBool();v.exceededTransferLimit=w;break}case 13:t.addField(v,e.processMessage(vge));break;case 15:_||(t.prepareFeatures(v),_=!0),t.addFeature(v,e.processMessageWithArgs(_ge,t,v,v.fields));break;case 2:v.uniqueIdField=e.processMessage(wge);break;default:e.skip()}return t.finishFeatureResult(v),v}function Mge(e,t){const n={};let s=null;for(;e.next();)switch(e.tag()){case 4:s=e.processMessageWithArgs(yge);break;case 1:n.featureResult=e.processMessageWithArgs(Tge,t);break;default:e.skip()}return I(s)&&n.featureResult&&t.addQueryGeometry(n,s),n}function Ige(e,t){try{const i=new th(new Uint8Array(e),new DataView(e)),n={};for(;i.next();)i.tag()===2?n.queryResult=i.processMessageWithArgs(Mge,t):i.skip();return n}catch(r){throw new O("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:r})}}function Cge(e,t){const r=Ige(e,t),i=r.queryResult.featureResult,n=r.queryResult.queryGeometry,s=r.queryResult.queryGeometryType;if(i&&i.features&&i.features.length&&i.objectIdFieldName){const o=i.objectIdFieldName;for(const a of i.features)a.attributes&&(a.objectId=a.attributes[o])}return i&&(i.queryGeometry=n,i.queryGeometryType=s),i}function JC(e,t,r){if(!r||!r.features||!r.hasZ)return;const i=CG(r.geometryType,t,e.outSpatialReference);if(!R(i))for(const n of r.features)i(n.geometry)}const tD="Layer does not support extent calculation.";function $q(e,t){if(t&&e.type==="extent")return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&e.type==="point")return`${e.x},${e.y}`;const r=e.toJSON();return delete r.spatialReference,JSON.stringify(r)}function xq(e,t){const r=e.geometry,i=e.toJSON();delete i.compactGeometryEnabled,delete i.defaultSpatialReferenceEnabled;const n=i;let s,o,a;if(I(r)&&(o=r.spatialReference,a=r.spatialReference.wkid||JSON.stringify(r.spatialReference),n.geometryType=_m(r),n.geometry=$q(r,e.compactGeometryEnabled),n.inSR=a),i.groupByFieldsForStatistics&&(n.groupByFieldsForStatistics=i.groupByFieldsForStatistics.join(",")),i.objectIds&&(n.objectIds=i.objectIds.join(",")),i.orderByFields&&(n.orderByFields=i.orderByFields.join(",")),!i.outFields||!i.returnDistinctValues&&((t==null?void 0:t.returnCountOnly)||(t==null?void 0:t.returnExtentOnly)||(t==null?void 0:t.returnIdsOnly))?delete n.outFields:i.outFields.includes("*")?n.outFields="*":n.outFields=i.outFields.join(","),i.outSR?(n.outSR=i.outSR.wkid||JSON.stringify(i.outSR),s=e.outSpatialReference):r&&(i.returnGeometry||i.returnCentroid)&&(n.outSR=n.inSR,s=o),i.returnGeometry&&delete i.returnGeometry,i.outStatistics&&(n.outStatistics=JSON.stringify(i.outStatistics)),i.pixelSize&&(n.pixelSize=JSON.stringify(i.pixelSize)),i.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&I(o)&&I(e.quantizationParameters)&&I(e.quantizationParameters.extent)&&o.equals(e.quantizationParameters.extent.spatialReference)&&delete i.quantizationParameters.extent.spatialReference,n.quantizationParameters=JSON.stringify(i.quantizationParameters)),i.parameterValues&&(n.parameterValues=JSON.stringify(i.parameterValues)),i.rangeValues&&(n.rangeValues=JSON.stringify(i.rangeValues)),i.dynamicDataSource&&(n.layer=JSON.stringify({source:i.dynamicDataSource}),delete i.dynamicDataSource),i.timeExtent){const l=i.timeExtent,{start:c,end:h}=l;c==null&&h==null||(n.time=c===h?c:`${c==null?"null":c},${h==null?"null":h}`),delete i.timeExtent}return e.defaultSpatialReferenceEnabled&&I(o)&&I(s)&&o.equals(s)&&(n.defaultSR=n.inSR,delete n.inSR,delete n.outSR),n}async function Eq(e,t,r,i){const n=I(t.timeExtent)&&t.timeExtent.isEmpty?{data:{features:[]}}:await km(e,t,"json",i);return JC(t,r,n.data),n}async function kge(e,t,r,i){if(I(t.timeExtent)&&t.timeExtent.isEmpty)return{data:r.createFeatureResult()};const n=await Tq(e,t,i),s=n;return s.data=Cge(n.data,r),s}function Tq(e,t,r){return km(e,t,"pbf",r)}function Lge(e,t,r){return I(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):km(e,t,"json",r,{returnIdsOnly:!0})}function Oge(e,t,r){return I(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):km(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})}function Age(e,t,r){return I(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):km(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}).then(i=>{const n=i.data;if(n.hasOwnProperty("extent"))return i;if(n.features)throw new Error(tD);if(n.hasOwnProperty("count"))throw new Error(tD);return i})}function km(e,t,r,i={},n={}){const s=typeof e=="string"?Qt(e):e,o=t.geometry?[t.geometry]:[];return i.responseType=r==="pbf"?"array-buffer":"json",_q(o,null,i).then(a=>{const l=a&&a[0];I(l)&&((t=t.clone()).geometry=l);const c=bq({...s.query,f:r,...n,...xq(t,n)});return nt(dh(s.path,"query"),{...i,query:{...c,...i.query}})})}const y4e=Object.freeze(Object.defineProperty({__proto__:null,encodeGeometry:$q,executeQuery:Eq,executeQueryForCount:Oge,executeQueryForExtent:Age,executeQueryForIds:Lge,executeQueryPBF:kge,executeQueryPBFBuffer:Tq,queryToQueryStringParameters:xq,runQuery:km},Symbol.toStringTag,{value:"Module"}));var ZC;const YC=new Ee({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Or=ZC=class extends B{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){var n;const r=Te.fromJSON(t.spatialReference),i=[];for(let s=0;s<e.length;s++){const o=e[s],a=ln.fromJSON(o),l=o.geometry&&o.geometry.spatialReference;I(a.geometry)&&!l&&(a.geometry.spatialReference=r);const c=o.aggregateGeometries,h=a.aggregateGeometries;if(c&&I(h))for(const f in h){const m=h[f],y=(n=c[f])==null?void 0:n.spatialReference;I(m)&&!y&&(m.spatialReference=r)}i.push(a)}return i}writeGeometryType(e,t,r,i){if(e)return void YC.write(e,t,r,i);const{features:n}=this;if(n){for(const s of n)if(s&&I(s.geometry))return void YC.write(s.geometry.type,t,r,i)}}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,i=Li(e);return!r&&t.spatialReference&&(i.spatialReference=Te.fromJSON(t.spatialReference)),i}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r){for(const i of r)if(i&&I(i.geometry)&&i.geometry.spatialReference)return void(t.spatialReference=i.geometry.spatialReference.toJSON())}}clone(){return new ZC(this.cloneProperties())}cloneProperties(){return P({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const i=t.features[r];if(i.geometry){const n=e&&e[r];i.geometry=n&&n.toJSON()||i.geometry}}return t}quantize(e){const{scale:[t,r],translate:[i,n]}=e,s=c=>Math.round((c-i)/t),o=c=>Math.round((n-c)/r),a=this.features,l=this._getQuantizationFunction(this.geometryType,s,o);for(let c=0,h=a.length;c<h;c++)l(a[c].geometry)||(a.splice(c,1),c--,h--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[i,n],scale:[s,o]}=r,a=h=>h*s+i,l=h=>n-h*o,c=this._getHydrationFunction(e,a,l);for(const{geometry:h}of t)I(h)&&c(h);return this.transform=null,this}_quantizePoints(e,t,r){let i,n;const s=[];for(let o=0,a=e.length;o<a;o++){const l=e[o];if(o>0){const c=t(l[0]),h=r(l[1]);c===i&&h===n||(s.push([c-i,h-n]),i=c,n=h)}else i=t(l[0]),n=r(l[1]),s.push([i,n])}return s.length>0?s:null}_getQuantizationFunction(e,t,r){return e==="point"?i=>(i.x=t(i.x),i.y=r(i.y),i):e==="polyline"||e==="polygon"?i=>{const n=Qd(i)?i.rings:i.paths,s=[];for(let o=0,a=n.length;o<a;o++){const l=n[o],c=this._quantizePoints(l,t,r);c&&s.push(c)}return s.length>0?(Qd(i)?i.rings=s:i.paths=s,i):null}:e==="multipoint"?i=>{const n=this._quantizePoints(i.points,t,r);return n.length>0?(i.points=n,i):null}:e==="extent"?i=>i:null}_getHydrationFunction(e,t,r){return e==="point"?i=>{i.x=t(i.x),i.y=r(i.y)}:e==="polyline"||e==="polygon"?i=>{const n=Qd(i)?i.rings:i.paths;let s,o;for(let a=0,l=n.length;a<l;a++){const c=n[a];for(let h=0,f=c.length;h<f;h++){const m=c[h];h>0?(s+=m[0],o+=m[1]):(s=m[0],o=m[1]),m[0]=t(s),m[1]=r(o)}}}:e==="extent"?i=>{i.xmin=t(i.xmin),i.ymin=r(i.ymin),i.xmax=t(i.xmax),i.ymax=r(i.ymax)}:e==="multipoint"?i=>{const n=i.points;let s,o;for(let a=0,l=n.length;a<l;a++){const c=n[a];a>0?(s+=c[0],o+=c[1]):(s=c[0],o=c[1]),c[0]=t(s),c[1]=r(o)}}:void 0}};u([d({type:String,json:{write:!0}})],Or.prototype,"displayFieldName",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Or.prototype,"exceededTransferLimit",void 0),u([d({type:[ln],json:{write:!0}})],Or.prototype,"features",void 0),u([te("features")],Or.prototype,"readFeatures",null),u([d({type:[Nv],json:{write:!0}})],Or.prototype,"fields",void 0),u([d({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:YC.read}}})],Or.prototype,"geometryType",void 0),u([se("geometryType")],Or.prototype,"writeGeometryType",null),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Or.prototype,"hasM",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Or.prototype,"hasZ",void 0),u([d({types:Eh,json:{write:!0}})],Or.prototype,"queryGeometry",void 0),u([te("queryGeometry")],Or.prototype,"readQueryGeometry",null),u([d({type:Te,json:{write:!0}})],Or.prototype,"spatialReference",void 0),u([se("spatialReference")],Or.prototype,"writeSpatialReference",null),u([d({json:{write:!0}})],Or.prototype,"transform",void 0),Or=ZC=u([E("esri.rest.support.FeatureSet")],Or),Or.prototype.toJSON.isDefaultToJSON=!0;const Dv=Or,g4e=Object.freeze(Object.defineProperty({__proto__:null,default:Dv},Symbol.toStringTag,{value:"Module"})),rD={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},Pge={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function Rge(e,t){const r=new Date(e,t+1,1);return r.setDate(0),r.getDate()}function rh(e,t,r){const i=new Date(e.getTime());if(t&&r){const n=Pge[r],{getter:s,setter:o,multiplier:a}=n;if(r==="months"){const l=Rge(i.getFullYear(),i.getMonth()+t);i.getDate()>l&&i.setDate(l)}i[o](i[s]()+t*a)}return i}function iD(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function Fge(e,t,r){return e===0?0:e*rD[t]/rD[r]}var js;let Tn=js=class extends B{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return nD}static get empty(){return Nge}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(js.allTime)}get isEmpty(){return this.equals(js.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new js({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=I(this.start)?this.start.getTime():this.start,r=I(this.end)?this.end.getTime():this.end,i=I(e.start)?e.start.getTime():e.start,n=I(e.end)?e.end.getTime():e.end;return t===i&&r===n}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=Zo(this.start,i=>iD(i,e)),r=Zo(this.end,i=>rh(iD(i,e),1,e));return new js({start:t,end:r})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return js.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=Ry(this.start,-1/0,a=>a.getTime()),r=Ry(this.end,1/0,a=>a.getTime()),i=Ry(e.start,-1/0,a=>a.getTime()),n=Ry(e.end,1/0,a=>a.getTime());let s,o;if(i>=t&&i<=r?s=i:t>=i&&t<=n&&(s=t),r>=i&&r<=n?o=r:n>=t&&n<=r&&(o=n),!isNaN(s)&&!isNaN(o)){const a=new js;return a.start=s===-1/0?null:new Date(s),a.end=o===1/0?null:new Date(o),a}return js.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const r=new js,{start:i,end:n}=this;return I(i)&&(r.start=rh(i,e,t)),I(n)&&(r.end=rh(n,e,t)),r}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return nD.clone();const t=I(this.start)&&I(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=I(this.end)&&I(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new js({start:t,end:r})}};u([d({type:Date,json:{write:{allowNull:!0}}})],Tn.prototype,"end",void 0),u([te("end")],Tn.prototype,"readEnd",null),u([se("end")],Tn.prototype,"writeEnd",null),u([d({readOnly:!0,json:{read:!1}})],Tn.prototype,"isAllTime",null),u([d({readOnly:!0,json:{read:!1}})],Tn.prototype,"isEmpty",null),u([d({type:Date,json:{write:{allowNull:!0}}})],Tn.prototype,"start",void 0),u([te("start")],Tn.prototype,"readStart",null),u([se("start")],Tn.prototype,"writeStart",null),Tn=js=u([E("esri.TimeExtent")],Tn);const nD=new Tn,Nge=new Tn({start:void 0,end:void 0}),pa=Tn;var QC;const sD=new Ee({upperLeft:"upper-left",lowerLeft:"lower-left"});let Kc=QC=class extends B{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new QC(P({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};u([d({type:Je,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Kc.prototype,"extent",void 0),u([d({type:["view","edit"],json:{write:!0}})],Kc.prototype,"mode",void 0),u([d({type:String,json:{read:sD.read,write:sD.write}})],Kc.prototype,"originPosition",void 0),u([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Kc.prototype,"tolerance",void 0),Kc=QC=u([E("esri.rest.support.QuantizationParameters")],Kc);const Mq=Kc;var KC;const oD=new Ee({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Vs=KC=class extends B{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=P(e))}clone(){return new KC({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:P(this.statisticParameters)})}};u([d({type:Number,json:{write:!0}})],Vs.prototype,"maxPointCount",void 0),u([d({type:Number,json:{write:!0}})],Vs.prototype,"maxRecordCount",void 0),u([d({type:Number,json:{write:!0}})],Vs.prototype,"maxVertexCount",void 0),u([d({type:String,json:{write:!0}})],Vs.prototype,"onStatisticField",void 0),u([d({type:String,json:{write:!0}})],Vs.prototype,"outStatisticFieldName",void 0),u([d({type:String,json:{read:{source:"statisticType",reader:oD.read},write:{target:"statisticType",writer:oD.write}}})],Vs.prototype,"statisticType",void 0),u([d({type:Object})],Vs.prototype,"statisticParameters",void 0),u([se("statisticParameters")],Vs.prototype,"writeStatisticParameters",null),Vs=KC=u([E("esri.rest.support.StatisticDefinition")],Vs);const Iq=Vs;var Mf;const Dge=new Ee({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),jge=new Ee({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let ge=Mf=class extends B{constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}static from(e){return QO(Mf,e)}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const r={};for(const i in e){const n=e[i];Array.isArray(n)?r[i]=n.map(s=>s instanceof Date?s.getTime():s):n instanceof Date?r[i]=n.getTime():r[i]=n}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new Mf(P({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:I(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};ge.MAX_MAX_RECORD_COUNT_FACTOR=5,u([d({json:{write:!0}})],ge.prototype,"aggregateIds",void 0),u([d({type:Boolean,json:{write:!0}})],ge.prototype,"cacheHint",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],ge.prototype,"compactGeometryEnabled",void 0),u([d({json:{write:!0}})],ge.prototype,"datumTransformation",void 0),u([ze("datumTransformation")],ge.prototype,"castDatumTransformation",null),u([d({type:Boolean,json:{default:!1,write:!0}})],ge.prototype,"defaultSpatialReferenceEnabled",void 0),u([d({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],ge.prototype,"distance",void 0),u([d({type:eo,json:{write:!0}})],ge.prototype,"dynamicDataSource",void 0),u([d({type:String,json:{write:!0}})],ge.prototype,"formatOf3DObjects",void 0),u([d({type:String,json:{write:!0}})],ge.prototype,"gdbVersion",void 0),u([d({types:Eh,json:{read:Li,write:!0}})],ge.prototype,"geometry",void 0),u([d({type:Number,json:{write:!0}})],ge.prototype,"geometryPrecision",void 0),u([d({type:[String],json:{write:!0}})],ge.prototype,"groupByFieldsForStatistics",void 0),u([d({type:String,json:{write:!0}})],ge.prototype,"having",void 0),u([d({type:Date})],ge.prototype,"historicMoment",void 0),u([se("historicMoment")],ge.prototype,"writeHistoricMoment",null),u([d({type:Number,json:{write:!0}})],ge.prototype,"maxAllowableOffset",void 0),u([d({type:Number,cast:e=>e<1?1:e>Mf.MAX_MAX_RECORD_COUNT_FACTOR?Mf.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],ge.prototype,"maxRecordCountFactor",void 0),u([d({type:["xyFootprint"],json:{write:!0}})],ge.prototype,"multipatchOption",void 0),u([d({type:Number,json:{read:{source:"resultRecordCount"}}})],ge.prototype,"num",void 0),u([d({json:{write:!0}})],ge.prototype,"objectIds",void 0),u([d({type:[String],json:{write:!0}})],ge.prototype,"orderByFields",void 0),u([d({type:[String],json:{write:!0}})],ge.prototype,"outFields",void 0),u([d({type:Te,json:{name:"outSR",write:!0}})],ge.prototype,"outSpatialReference",void 0),u([d({type:[Iq],json:{write:{enabled:!0,overridePolicy(){return{enabled:I(this.outStatistics)&&this.outStatistics.length>0}}}}})],ge.prototype,"outStatistics",void 0),u([d({json:{write:!0}})],ge.prototype,"parameterValues",void 0),u([se("parameterValues")],ge.prototype,"writeParameterValues",null),u([d({type:ye,json:{write:!0}})],ge.prototype,"pixelSize",void 0),u([d({type:Mq,json:{write:!0}})],ge.prototype,"quantizationParameters",void 0),u([d({type:[Object],json:{write:!0}})],ge.prototype,"rangeValues",void 0),u([d({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],ge.prototype,"relationParameter",void 0),u([d({type:String,json:{write:!0}})],ge.prototype,"resultType",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],ge.prototype,"returnCentroid",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],ge.prototype,"returnDistinctValues",void 0),u([d({type:Boolean,json:{default:!0,write:!0}})],ge.prototype,"returnExceededLimitFeatures",void 0),u([d({type:Boolean,json:{write:!0}})],ge.prototype,"returnGeometry",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],ge.prototype,"returnQueryGeometry",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],ge.prototype,"returnM",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ge.prototype,"returnZ",void 0),u([d({type:Te,json:{write:!0}})],ge.prototype,"sourceSpatialReference",void 0),u([me(Dge,{ignoreUnknown:!1,name:"spatialRel"})],ge.prototype,"spatialRelationship",void 0),u([d({type:Number,json:{read:{source:"resultOffset"}}})],ge.prototype,"start",void 0),u([se("start"),se("num")],ge.prototype,"writeStart",null),u([d({type:String,json:{write:!0}})],ge.prototype,"sqlFormat",void 0),u([d({type:String,json:{write:!0}})],ge.prototype,"text",void 0),u([d({type:pa,json:{write:!0}})],ge.prototype,"timeExtent",void 0),u([d({type:Boolean,json:{default:!1,write:!0}})],ge.prototype,"timeReferenceUnknownClient",void 0),u([me(jge,{ignoreUnknown:!1}),d({json:{write:{overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],ge.prototype,"units",void 0),u([d({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start>0}}}}})],ge.prototype,"where",void 0),u([se("where")],ge.prototype,"writeWhere",null),ge=Mf=u([E("esri.rest.support.Query")],ge);const xi=ge;async function iE(e,t,r){const i=await Vge(e,t,r);return Dv.fromJSON(i)}async function Vge(e,t,r){const i=gq(e),n={...r},s=xi.from(t),{data:o}=await Eq(i,s,s.sourceSpatialReference,n);return o}function Zr(e,t){return e?t?4:3:t?3:2}const Lm=Z.getLogger("esri.layers.graphics.featureConversionUtils"),Cq={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},kq=(e,t,r,i,n,s)=>{e[r]=n,e[r+1]=s},AS=(e,t,r,i,n,s)=>{e[r]=n,e[r+1]=s,e[r+2]=t[i+2]},zge=(e,t,r,i,n,s)=>{e[r]=n,e[r+1]=s,e[r+2]=t[i+3]},Lq=(e,t,r,i,n,s)=>{e[r]=n,e[r+1]=s,e[r+2]=t[i+2],e[r+3]=t[i+3]};function RA(e,t,r,i){if(e){if(r)return t&&i?Lq:AS;if(t&&i)return zge}else if(t&&i)return AS;return kq}function nE({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function sE({scale:e,translate:t},r){return Math.round((t[1]-r)/e[1])}function aD({scale:e,translate:t},r){return r*e[0]+t[0]}function lD({scale:e,translate:t},r){return t[1]-r*e[1]}function v4e(e,t,r){return e?t?r?DA(e):FA(e):r?NA(e):u$(e):null}function u$(e){const t=e.coords;return{x:t[0],y:t[1]}}function Oq(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function FA(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function Uge(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function NA(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function Gge(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function DA(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function Bge(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function qge(e,t,r,i){let n=u$;r&&i?n=DA:r?n=FA:i&&(n=NA);for(const s of t){const{geometry:o,attributes:a}=s,l=I(o)?n(o):null;e.push({attributes:a,geometry:l})}return e}function Aq(e,t){return e&&t?Bge:e?Uge:t?Gge:Oq}function Pq(e,t,r,i,n){const s=Aq(r,i);for(const o of t){const{geometry:a,attributes:l}=o;let c;a&&(c=s(new Ci,a)),e.push(new la(c,l,null,l[n]))}return e}function Wge(e,t,r,i){for(const n of t){const{geometry:s,attributes:o}=n;let a;s&&(a=Rq(s,r,i)),e.push({attributes:o,geometry:a})}return e}function Rq(e,t,r){if(R(e))return null;const i=Zr(t,r),n=[];for(let s=0;s<e.coords.length;s+=i){const o=[];for(let a=0;a<i;a++)o.push(e.coords[s+a]);n.push(o)}return t?r?{points:n,hasZ:t,hasM:r}:{points:n,hasZ:t}:r?{points:n,hasM:r}:{points:n}}function Fq(e,t,r,i,n){const s=Zr(r,i);for(const o of t){const a=o.geometry,l=o.attributes;let c;a&&(c=Nq(new Ci,a,s)),e.push(new la(c,l,null,l[n]))}return e}function Nq(e,t,r=Zr(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const i=e.coords;let n=0;for(const s of t.points)for(let o=0;o<r;o++)i[n++]=s[o];return e}function Hge(e,t,r,i){for(const n of t){const{geometry:s,attributes:o}=n;let a;I(s)&&(a=Dq(s,r,i)),e.push({attributes:o,geometry:a})}return e}function Dq(e,t,r){if(!e)return null;const i=Zr(t,r),{coords:n,lengths:s}=e,o=[];let a=0;for(const l of s){const c=[];for(let h=0;h<l;h++){const f=[];for(let m=0;m<i;m++)f.push(n[a++]);c.push(f)}o.push(c)}return t?r?{paths:o,hasZ:t,hasM:r}:{paths:o,hasZ:t}:r?{paths:o,hasM:r}:{paths:o}}function jq(e,t,r,i,n){const s=Zr(r,i);for(const o of t){const a=o.geometry,l=o.attributes;let c;a&&(c=Vq(new Ci,a,s)),e.push(new la(c,l,null,l[n]))}return e}function Vq(e,t,r=Zr(t.hasZ,t.hasM)){const{lengths:i,coords:n}=e;let s=0;for(const o of t.paths){for(const a of o)for(let l=0;l<r;l++)n[s++]=a[l];i.push(o.length)}return e}function Jge(e,t,r,i){for(const n of t){const{geometry:s,attributes:o,centroid:a}=n;let l;if(I(s)&&(l=zq(s,r,i)),I(a)){const c=u$(a);e.push({attributes:o,centroid:c,geometry:l})}else e.push({attributes:o,geometry:l})}return e}function zq(e,t,r){if(!e)return null;const i=Zr(t,r),{coords:n,lengths:s}=e,o=[];let a=0;for(const l of s){const c=[];for(let h=0;h<l;h++){const f=[];for(let m=0;m<i;m++)f.push(n[a++]);c.push(f)}o.push(c)}return t?r?{rings:o,hasZ:t,hasM:r}:{rings:o,hasZ:t}:r?{rings:o,hasM:r}:{rings:o}}function Uq(e,t,r,i,n){for(const s of t){const o=s.geometry,a=s.centroid,l=s.attributes;let c;o&&(c=Gq(new Ci,o,r,i)),I(a)?e.push(new la(c,l,Oq(new Ci,a),l[n])):e.push(new la(c,l,null,l[n]))}return e}function Gq(e,t,r=t.hasZ,i=t.hasM){return Zge(e,t.rings,r,i),e}function Zge(e,t,r,i){const n=Zr(r,i),{lengths:s,coords:o}=e;let a=0;s.length=o.length=0;for(const l of t){for(const c of l)for(let h=0;h<n;h++)o[a++]=c[h];s.push(l.length)}return e}const If=[],r0=[];function w4e(e,t,r,i,n){If[0]=e;const[s]=Bq(r0,If,t,r,i,n);return If.length=r0.length=0,s}function Bq(e,t,r,i,n,s){if(e.length=0,!r){for(const o of t){const a=o.attributes[s];e.push(new la(null,o.attributes,null,a))}return e}switch(r){case"esriGeometryPoint":return Pq(e,t,i,n,s);case"esriGeometryMultipoint":return Fq(e,t,i,n,s);case"esriGeometryPolyline":return jq(e,t,i,n,s);case"esriGeometryPolygon":return Uq(e,t,i,n,s);default:Lm.error("convertToFeatureSet:unknown-geometry",new O(`Unable to parse unknown geometry type '${r}'`)),e.length=0}return e}function _4e(e,t,r,i,n,s){const o=e.length;switch(r){case"esriGeometryPoint":Pq(e,t,i,n,s);break;case"esriGeometryMultipoint":Fq(e,t,i,n,s);break;case"esriGeometryPolyline":jq(e,t,i,n,s);break;case"esriGeometryPolygon":Uq(e,t,i,n,s);break;default:Lm.error("convertToFeatureSet:unknown-geometry",new O(`Unable to parse unknown geometry type '${r}'`))}for(let a=0;a<t.length;a++)e[a+o].geometryType=r,e[a+o].insertAfter=t[a].insertAfter,e[a+o].groupId=t[a].groupId;return e}function b4e(e,t,r,i){r0[0]=e,qq(If,r0,t,r,i);const n=If[0];return If.length=r0.length=0,n}function S4e(e,t,r){if(R(e))return null;const i=new Ci;return"hasZ"in e&&t==null&&(t=e.hasZ),"hasM"in e&&r==null&&(r=e.hasM),L3(e)?Aq(t!=null?t:e.z!=null,r!=null?r:e.m!=null)(i,e):Qd(e)?Gq(i,e,t,r):O3(e)?Vq(i,e,Zr(t,r)):k3(e)?Nq(i,e,Zr(t,r)):void Lm.error("convertFromGeometry:unknown-geometry",new O(`Unable to parse unknown geometry type '${e}'`))}function Yge(e,t,r,i){const n=e&&("coords"in e?e:e.geometry);if(R(n))return null;switch(t){case"esriGeometryPoint":{let s=u$;return r&&i?s=DA:r?s=FA:i&&(s=NA),s(n)}case"esriGeometryMultipoint":return Rq(n,r,i);case"esriGeometryPolyline":return Dq(n,r,i);case"esriGeometryPolygon":return zq(n,r,i);default:return void Lm.error("convertToGeometry:unknown-geometry",new O(`Unable to parse unknown geometry type '${t}'`))}}function Qge(e,t){for(const r of t)e.push({attributes:r.attributes});return e}function qq(e,t,r,i,n){if(e.length=0,R(r))return Qge(e,t);switch(r){case"esriGeometryPoint":return qge(e,t,i,n);case"esriGeometryMultipoint":return Wge(e,t,i,n);case"esriGeometryPolyline":return Hge(e,t,i,n);case"esriGeometryPolygon":return Jge(e,t,i,n);default:Lm.error("convertToFeatureSet:unknown-geometry",new O(`Unable to parse unknown geometry type '${r}'`))}return e}function $4e(e){const{objectIdFieldName:t,spatialReference:r,transform:i,fields:n,hasM:s,hasZ:o,features:a,geometryType:l,exceededTransferLimit:c,uniqueIdField:h,queryGeometry:f,queryGeometryType:m}=e,y={features:qq([],a,l,o,s),fields:n,geometryType:l,objectIdFieldName:t,spatialReference:r,uniqueIdField:h,queryGeometry:Yge(f,m,!1,!1)};return i&&(y.transform=i),c&&(y.exceededTransferLimit=c),s&&(y.hasM=s),o&&(y.hasZ=o),y}function x4e(e,t){const r=new l$,{hasM:i,hasZ:n,features:s,objectIdFieldName:o,spatialReference:a,geometryType:l,exceededTransferLimit:c,transform:h,fields:f}=e;return f&&(r.fields=f),r.geometryType=l,r.objectIdFieldName=o||t,r.spatialReference=a,r.objectIdFieldName?(s&&Bq(r.features,s,l,n,i,r.objectIdFieldName),c&&(r.exceededTransferLimit=c),i&&(r.hasM=i),n&&(r.hasZ=n),h&&(r.transform=h),r):(Lm.error(new O("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),r)}function E4e(e){const{transform:t,features:r,hasM:i,hasZ:n}=e;if(!t)return e;for(const s of r)I(s.geometry)&&cD(s.geometry,s.geometry,i,n,t),I(s.centroid)&&cD(s.centroid,s.centroid,i,n,t);return e.transform=null,e}function T4e(e,t){const{geometryType:r,features:i,hasM:n,hasZ:s}=t;if(!e)return t;for(let o=0;o<i.length;o++){const a=i[o],l=a.weakClone();l.geometry=new Ci,uD(l.geometry,a.geometry,n,s,r,e),a.centroid&&(l.centroid=new Ci,uD(l.centroid,a.centroid,n,s,"esriGeometryPoint",e)),i[o]=l}return t.transform=e,t}function uD(e,t,r,i,n,s,o=r,a=i){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),R(t)||!t.coords.length)return null;const l=Cq[n],{coords:c,lengths:h}=t,f=Zr(r,i),m=Zr(r&&o,i&&a),y=RA(r,i,o,a);if(!h.length)return y(e.coords,c,0,0,nE(s,c[0]),sE(s,c[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=f,e;let g,v,_,w,b=0,S=0,M=S;for(const T of h){if(T<l)continue;let k=0;S=M,_=g=nE(s,c[b]),w=v=sE(s,c[b+1]),y(e.coords,c,S,b,_,w),k++,b+=f,S+=m;for(let N=1;N<T;N++,b+=f)_=nE(s,c[b]),w=sE(s,c[b+1]),_===g&&w===v||(y(e.coords,c,S,b,_-g,w-v),S+=m,k++,g=_,v=w);k>=l&&(e.lengths.push(k),M=S)}return e.coords.length=M,e.coords.length?e:null}function M4e(e,t,r,i,n,s,o=r,a=i){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;const l=Cq[n],{coords:c,lengths:h}=t,f=Zr(r,i),m=Zr(r&&o,i&&a),y=RA(r,i,o,a);if(!h.length)return y(e.coords,c,0,0,c[0],c[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=f,e;let g=0;const v=s*s;for(const _ of h){if(_<l){g+=_*f;continue}const w=e.coords.length/m,b=g,S=g+(_-1)*f;y(e.coords,c,e.coords.length,b,c[b],c[b+1]),XC(e.coords,c,f,v,y,b,S),y(e.coords,c,e.coords.length,S,c[S],c[S+1]);const M=e.coords.length/m-w;M>=l?e.lengths.push(M):e.coords.length=w*m,g+=_*f}return e.coords.length?e:null}function Kge(e,t,r,i){const n=e[t],s=e[t+1],o=e[r],a=e[r+1],l=e[i],c=e[i+1];let h=o,f=a,m=l-h,y=c-f;if(m!==0||y!==0){const g=((n-h)*m+(s-f)*y)/(m*m+y*y);g>1?(h=l,f=c):g>0&&(h+=m*g,f+=y*g)}return m=n-h,y=s-f,m*m+y*y}function XC(e,t,r,i,n,s,o){let a,l=i,c=0;for(let h=s+r;h<o;h+=r)a=Kge(t,h,s,o),a>l&&(c=h,l=a);l>i&&(c-s>r&&XC(e,t,r,i,n,s,c),n(e,t,e.length,c,t[c],t[c+1]),o-c>r&&XC(e,t,r,i,n,c,o))}function I4e(e,t,r,i){if(R(t)||!t.coords||!t.coords.length)return null;const n=Zr(r,i);let s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;if(t&&t.coords){const c=t.coords;for(let h=0;h<c.length;h+=n){const f=c[h],m=c[h+1];s=Math.min(s,f),a=Math.max(a,f),o=Math.min(o,m),l=Math.max(l,m)}}return e[0]=s,e[1]=o,e[2]=a,e[3]=l,e}function cD(e,t,r,i,n){const{coords:s,lengths:o}=t,a=r?i?Lq:AS:i?AS:kq,l=Zr(r,i);if(!s.length)return e!==t&&(e.lengths.length=0,e.coords.length=0),e;if(!o.length)return a(e.coords,s,0,0,aD(n,s[0]),lD(n,s[1])),e!==t&&(e.lengths.length=0,e.coords.length=l),e;const[c,h]=n.scale;let f=0;for(let m=0;m<o.length;m++){const y=o[m];e.lengths[m]=y;let g=aD(n,s[f]),v=lD(n,s[f+1]);a(e.coords,s,f,f,g,v),f+=l;for(let _=1;_<y;_++,f+=l)g+=s[f]*c,v-=s[f+1]*h,a(e.coords,s,f,f,g,v)}return e!==t&&(e.lengths.length=o.length,e.coords.length=s.length),e}function C4e(e,t,r,i,n,s){const o=Zr(r,i),a=RA(r,i,n,s),l=t.coords;e.coords.length=0,e.lengths.length=0,e.lengths.push(...t.lengths);for(let c=0;c<l.length;c+=o)a(e.coords,l,e.coords.length,c,l[c],l[c+1]);return e}function Xge(e,t,r,i){let n=0,s=e[i*t],o=e[i*(t+1)];for(let a=1;a<r;a++){const l=s+e[i*(t+a)],c=o+e[i*(t+a)+1],h=(l-s)*(c+o);s=l,o=c,n+=h}return .5*n}function k4e(e,t){const{coords:r,lengths:i}=e;let n=0,s=0;for(let o=0;o<i.length;o++)s+=Xge(r,n,i[o],t),n+=o;return Math.abs(s)}function L4e(e,t){if(R(e))return null;const r=e.clone(),i=e.coords,n=e.lengths;let s=0;for(let o=0;o<n.length;o++){const a=n[o];let l=i[t*s],c=i[t*s+1];for(let h=1;h<a;h++){const f=l+i[t*(s+h)],m=c+i[t*(s+h)+1];r.coords[t*(s+h)]=f,r.coords[t*(s+h)+1]=m,l=f,c=m}s+=a}return r}var ek;let It=ek=class extends B{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new ek(P({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};u([d({type:Boolean,json:{write:!0}})],It.prototype,"cacheHint",void 0),u([d({type:eo,json:{write:!0}})],It.prototype,"dynamicDataSource",void 0),u([d({type:String,json:{write:!0}})],It.prototype,"gdbVersion",void 0),u([d({type:Number,json:{write:!0}})],It.prototype,"geometryPrecision",void 0),u([d({type:Date})],It.prototype,"historicMoment",void 0),u([se("historicMoment")],It.prototype,"_writeHistoricMoment",null),u([d({type:Number,json:{write:!0}})],It.prototype,"maxAllowableOffset",void 0),u([d({type:[Number],json:{write:!0}})],It.prototype,"objectIds",void 0),u([d({type:[String],json:{write:!0}})],It.prototype,"orderByFields",void 0),u([d({type:[String],json:{write:!0}})],It.prototype,"outFields",void 0),u([d({type:Te,json:{read:{source:"outSR"},write:{target:"outSR"}}})],It.prototype,"outSpatialReference",void 0),u([d({json:{write:!0}})],It.prototype,"relationshipId",void 0),u([d({type:Number,json:{read:{source:"resultOffset"}}})],It.prototype,"start",void 0),u([se("start"),se("num")],It.prototype,"writeStart",null),u([d({type:Number,json:{read:{source:"resultRecordCount"}}})],It.prototype,"num",void 0),u([d({json:{write:!0}})],It.prototype,"returnGeometry",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],It.prototype,"returnM",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],It.prototype,"returnZ",void 0),u([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],It.prototype,"where",void 0),It=ek=u([E("esri.rest.support.RelationshipQuery")],It),It.from=dt(It);const tk=It;var rk;let yp=rk=class extends B{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new rk({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};u([d({type:[String],json:{write:!0}})],yp.prototype,"groupByFields",void 0),u([d({type:Number,json:{write:!0}})],yp.prototype,"topCount",void 0),u([d({type:[String],json:{write:!0}})],yp.prototype,"orderByFields",void 0),yp=rk=u([E("esri.rest.support.TopFilter")],yp);const e0e=yp;var ik;const dD=new Ee({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),hD=new Ee({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let ft=ik=class extends B{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new ik(P({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};u([d({type:Boolean,json:{write:!0}})],ft.prototype,"cacheHint",void 0),u([d({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],ft.prototype,"distance",void 0),u([d({types:Eh,json:{read:Li,write:!0}})],ft.prototype,"geometry",void 0),u([d({type:Number,json:{write:!0}})],ft.prototype,"geometryPrecision",void 0),u([d({type:Number,json:{write:!0}})],ft.prototype,"maxAllowableOffset",void 0),u([d({type:Number,json:{read:{source:"resultRecordCount"}}})],ft.prototype,"num",void 0),u([d({json:{write:!0}})],ft.prototype,"objectIds",void 0),u([d({type:[String],json:{write:!0}})],ft.prototype,"orderByFields",void 0),u([d({type:[String],json:{write:!0}})],ft.prototype,"outFields",void 0),u([d({type:Te,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ft.prototype,"outSpatialReference",void 0),u([d({type:String,json:{write:!0}})],ft.prototype,"resultType",void 0),u([d({json:{write:!0}})],ft.prototype,"returnGeometry",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ft.prototype,"returnM",void 0),u([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ft.prototype,"returnZ",void 0),u([d({type:Number,json:{read:{source:"resultOffset"}}})],ft.prototype,"start",void 0),u([se("start"),se("num")],ft.prototype,"writeStart",null),u([d({type:String,json:{read:{source:"spatialRel",reader:dD.read},write:{target:"spatialRel",writer:dD.write}}})],ft.prototype,"spatialRelationship",void 0),u([d({type:pa,json:{write:!0}})],ft.prototype,"timeExtent",void 0),u([d({type:e0e,json:{write:!0}})],ft.prototype,"topFilter",void 0),u([d({type:String,json:{read:hD.read,write:{writer:hD.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],ft.prototype,"units",void 0),u([d({type:String,json:{write:!0}})],ft.prototype,"where",void 0),ft=ik=u([E("esri.rest.support.TopFeaturesQuery")],ft),ft.from=dt(ft);const q1=ft,t0e="esri.widgets.Feature.support.relatedFeatureUtils",pD=Z.getLogger(t0e),fD=new Map;function nk(e){if(!sl(e))return null;const[t,r]=e.split("/").slice(1);return{layerId:t,fieldName:r}}function r0e(e,t){if(!t.relationships)return null;let r=null;const{relationships:i}=t;return i.some(n=>n.id===parseInt(e,10)&&(r=n,!0)),r}function i0e({originRelationship:e,relationships:t,layerId:r}){let i;return t&&t.some(n=>(`${n.relatedTableId}`===r&&n.id===e.id&&(i=n),!!i)),i}function n0e(e,t){const r=t.toLowerCase();for(const i in e)if(i.toLowerCase()===r)return e[i];return null}function s0e(e,t){const r=r0e(e,t);if(!!r)return{url:`${t.url}/${r.relatedTableId}`,sourceSpatialReference:t.spatialReference,relation:r,relatedFields:[],outStatistics:[]}}function o0e(e,t){if(!t||!e)return;const{features:r,statsFeatures:i}=e,n=r&&r.value;t.relatedFeatures=n?n.features:[];const s=i&&i.value;t.relatedStatsFeatures=s?s.features:[]}function a0e(e,t,r,i){const n=new tk;return n.outFields=["*"],n.relationshipId=typeof t.id=="number"?t.id:parseInt(t.id,10),n.objectIds=[e.attributes[r.objectIdField]],r.queryRelatedFeatures(n,i)}function l0e(e,t,r){let i=0;const n=[];for(;i<t.length;)n.push(`${e} IN (${t.slice(i,r+i)})`),i+=r;return n.join(" OR ")}async function u0e(e,t,r,i){const n=r.layerId.toString(),{layerInfo:s,relation:o,relatedFields:a,outStatistics:l,url:c,sourceSpatialReference:h}=t,f=i0e({originRelationship:o,relationships:s.relationships,layerId:n});if(f.relationshipTableId&&f.keyFieldInRelationshipTable){const y=(await a0e(e,f,r,i))[e.attributes[r.objectIdField]];if(!y)return null;const g=y.features.map(v=>v.attributes[s.objectIdField]);if((l==null?void 0:l.length)>0&&s.supportsStatistics){const v=new xi;v.where=l0e(s.objectIdField,g,1e3),v.outFields=a,v.outStatistics=l,v.sourceSpatialReference=h;const _={features:Promise.resolve(y),statsFeatures:iE(c,v)};return Zt(_)}}const m=f==null?void 0:f.keyField;if(m){const y=F3(f0e(s.fields,m)),g=n0e(e.attributes,o.keyField),v=y?`${m}=${g}`:`${m}='${g}'`,_=iE(c,new xi({where:v,outFields:t.relatedFields,sourceSpatialReference:h}),i),w=t.outStatistics&&t.outStatistics.length>0&&s.supportsStatistics?iE(c,new xi({where:v,outFields:t.relatedFields,outStatistics:t.outStatistics,sourceSpatialReference:h}),i):null,b={features:_};return w&&(b.statsFeatures=w),Zt(b)}return null}function c0e(e,t){return nt(e,{query:{f:"json"},signal:t&&t.signal})}function d0e({relatedInfos:e,layer:t},r){const i={};return e.forEach((n,s)=>{const{relation:o}=n;if(!o){const f=new O("relation-required","A relation is required on a layer to retrieve related records.");throw pD.error(f),f}const{relatedTableId:a}=o;if(typeof a!="number"){const f=new O("A related table ID is required on a layer to retrieve related records.");throw pD.error(f),f}const l=`${t.url}/${a}`,c=fD.get(l),h=c||c0e(l,r);c||fD.set(l,h),i[s]=h}),Zt(i)}function h0e({graphic:e,relatedInfos:t,layer:r},i){const n={};return t.forEach((s,o)=>{s.layerInfo&&(n[o]=u0e(e,s,r,i))}),Zt(n)}function p0e({relatedInfo:e,fieldName:t,fieldInfo:r}){if(e.relatedFields.push(t),r.statisticType){const i=new Iq({statisticType:r.statisticType,onStatisticField:t,outStatisticFieldName:t});e.outStatistics.push(i)}}function f0e(e,t){if(e!=null){t=t.toLowerCase();for(const r of e)if(r&&r.name.toLowerCase()===t)return r}return null}const mD={chartAnimation:!0};let wr=class extends le{constructor(e){super(e),this.abilities={...mD},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return{...mD,...e}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:t}=this,r=(e+t)%t;this.activeMediaInfoIndex=r}_pageContentElementMedia(e){const{activeMediaInfoIndex:t}=this,r=t+e;this._setContentElementMedia(r)}_formatMediaInfos(){const{attributes:e,mediaInfos:t,formattedAttributes:r,expressionAttributes:i,fieldInfoMap:n,layer:s}=this;return t==null?void 0:t.map(o=>{const a=o==null?void 0:o.clone();if(!a)return null;if(a.title=Ud({attributes:e,fieldInfoMap:n,globalAttributes:r,expressionAttributes:i,layer:s,text:a.title}),a.caption=Ud({attributes:e,fieldInfoMap:n,globalAttributes:r,expressionAttributes:i,layer:s,text:a.caption}),a.altText=Ud({attributes:e,fieldInfoMap:n,globalAttributes:r,expressionAttributes:i,layer:s,text:a.altText}),a.type==="image"){const{value:l}=a;return this._setImageValue({value:l,formattedAttributes:r,layer:s}),a.value.sourceURL?a:void 0}if(a.type==="pie-chart"||a.type==="line-chart"||a.type==="column-chart"||a.type==="bar-chart"){const{value:l}=a;return this._setChartValue({value:l,chartType:a.type,attributes:e,formattedAttributes:r,layer:s}),a}return null}).filter(Boolean)}_setImageValue(e){const{fieldInfoMap:t}=this,{value:r,formattedAttributes:i,layer:n}=e,{linkURL:s,sourceURL:o}=r;if(o){const a=CC(o,n);r.sourceURL=IC({formattedAttributes:i,template:a,fieldInfoMap:t})}if(s){const a=CC(s,n);r.linkURL=IC({formattedAttributes:i,template:a,fieldInfoMap:t})}}_setChartValue(e){const{value:t,attributes:r,formattedAttributes:i,chartType:n,layer:s}=e,{popupTemplate:o,relatedInfos:a}=this,{fields:l,normalizeField:c}=t;if(t.fields=Pfe(l,s),c&&(t.normalizeField=xS(c,s)),!l.some(f=>!!(i[f]!=null||sl(f)&&a.size)))return;const h=o==null?void 0:o.fieldInfos;l.forEach(f=>{if(sl(f))return void(t.series=[...t.series,...this._getRelatedChartInfos({fieldInfos:h,fieldName:f,formattedAttributes:i,chartType:n,value:t})]);const m=this._getChartOption({value:t,attributes:r,chartType:n,formattedAttributes:i,fieldName:f,fieldInfos:h});t.series.push(m)})}_getRelatedChartInfos(e){var g;const{fieldInfos:t,fieldName:r,formattedAttributes:i,chartType:n,value:s}=e,o=[],a=nk(r),{layerId:l,fieldName:c}=a,h=(g=this.relatedInfos)==null?void 0:g.get(l.toString());if(!h)return o;const{relatedFeatures:f,relation:m}=h;if(!m||!f)return o;const{cardinality:y}=m;return f.forEach(v=>{const{attributes:_}=v;_&&Object.keys(_).forEach(w=>{w===c&&o.push(this._getChartOption({value:s,attributes:_,formattedAttributes:i,fieldName:r,chartType:n,relatedFieldName:w,fieldInfos:t}))})}),y==="one-to-many"||y==="many-to-many"?o:[o[0]]}_getTooltip({label:e,value:t,chartType:r}){return r==="pie-chart"?`${e}`:`${e}: ${t}`}_getChartOption(e){var S,M,T,k,N,F;const{value:t,attributes:r,formattedAttributes:i,fieldName:n,relatedFieldName:s,fieldInfos:o,chartType:a}=e,{layer:l,fieldInfoMap:c}=this,{normalizeField:h,tooltipField:f}=t,m=h?sl(h)?r[nk(h).fieldName]:r[h]:null,y=s&&r[s]!==void 0?r[s]:r[n]!==void 0?r[n]:i[n],g=new vU({fieldName:n,value:y===void 0?null:y&&m?y/m:y});if(sl(n)){const q=c.get(n.toLowerCase()),z=c.get(f.toLowerCase()),Q=(S=q==null?void 0:q.fieldName)!=null?S:n,K=(N=(k=(T=i[(M=z==null?void 0:z.fieldName)!=null?M:f])!=null?T:q==null?void 0:q.label)!=null?k:q==null?void 0:q.fieldName)!=null?N:s,ce=i[Q];return g.tooltip=this._getTooltip({label:K,value:ce,chartType:a}),g}const v=jB(o,n),_=xS(n,l),w=f&&i[f]!==void 0?i[f]:NB(v||new Mv({fieldName:_}),(F=this.popupTemplate)==null?void 0:F.expressionInfos),b=i[_];return g.tooltip=this._getTooltip({label:w,value:b,chartType:a}),g}};u([d()],wr.prototype,"abilities",void 0),u([ze("abilities")],wr.prototype,"castAbilities",null),u([d()],wr.prototype,"activeMediaInfoIndex",void 0),u([d({readOnly:!0})],wr.prototype,"activeMediaInfo",null),u([d()],wr.prototype,"attributes",void 0),u([d()],wr.prototype,"description",void 0),u([d()],wr.prototype,"fieldInfoMap",void 0),u([d()],wr.prototype,"formattedAttributes",void 0),u([d()],wr.prototype,"expressionAttributes",void 0),u([d({readOnly:!0})],wr.prototype,"formattedMediaInfos",null),u([d()],wr.prototype,"layer",void 0),u([d({readOnly:!0})],wr.prototype,"formattedMediaInfoCount",null),u([d()],wr.prototype,"mediaInfos",void 0),u([d()],wr.prototype,"popupTemplate",void 0),u([d()],wr.prototype,"relatedInfos",void 0),u([d()],wr.prototype,"title",void 0),wr=u([E("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],wr);const Bd=wr;var yD=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],m0e=[].concat(yD.slice(30,39),yD.slice(28,30).reverse()),y0e=[{name:"default",colors:m0e},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];const gD="en-us",jA=new Map([["ar",()=>V(()=>import("./ar.4dc6191a.js"),["ar.4dc6191a.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.a)],["bg-bg",()=>V(()=>import("./bg_BG.c52f2d3f.js"),["bg_BG.c52f2d3f.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.b)],["bs-ba",()=>V(()=>import("./bs_BA.dea32ce5.js"),["bs_BA.dea32ce5.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.b)],["ca-es",()=>V(()=>import("./ca_ES.20b19104.js"),["ca_ES.20b19104.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.c)],["cs-cz",()=>V(()=>import("./cs_CZ.30f0a0dc.js"),["cs_CZ.30f0a0dc.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.c)],["da-dk",()=>V(()=>import("./da_DK.b8d0e7ac.js"),["da_DK.b8d0e7ac.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.d)],["de-de",()=>V(()=>import("./de_DE.08196323.js"),["de_DE.08196323.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.d)],["de-ch",()=>V(()=>import("./de_CH.5d6685a9.js"),["de_CH.5d6685a9.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.d)],["el-gr",()=>V(()=>import("./el_GR.c34c39c2.js"),["el_GR.c34c39c2.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.e)],["en-us",()=>V(()=>import("./en_US.58fb12c0.js"),["en_US.58fb12c0.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.e)],["en-ca",()=>V(()=>import("./en_CA.bf2bc83b.js"),["en_CA.bf2bc83b.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.e)],["es-es",()=>V(()=>import("./es_ES.990a5784.js"),["es_ES.990a5784.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.e)],["et-ee",()=>V(()=>import("./et_EE.3eaec652.js"),["et_EE.3eaec652.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.e)],["fi-fi",()=>V(()=>import("./fi_FI.5397a92e.js"),["fi_FI.5397a92e.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.f)],["fr-fr",()=>V(()=>import("./fr_FR.1735cff8.js"),["fr_FR.1735cff8.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.f)],["he-il",()=>V(()=>import("./he_IL.fa6085be.js"),["he_IL.fa6085be.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.h)],["hr-hr",()=>V(()=>import("./hr_HR.e9361751.js"),["hr_HR.e9361751.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.h)],["hu-hu",()=>V(()=>import("./hu_HU.37349893.js"),["hu_HU.37349893.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.h)],["id-id",()=>V(()=>import("./id_ID.935d8150.js"),["id_ID.935d8150.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.i)],["it-it",()=>V(()=>import("./it_IT.c73e8e5e.js"),["it_IT.c73e8e5e.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.i)],["ja-jp",()=>V(()=>import("./ja_JP.17363a69.js"),["ja_JP.17363a69.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.j)],["ko-kr",()=>V(()=>import("./ko_KR.b3c8049f.js"),["ko_KR.b3c8049f.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.k)],["lt-lt",()=>V(()=>import("./lt_LT.520661ee.js"),["lt_LT.520661ee.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.l)],["lv-lv",()=>V(()=>import("./lv_LV.c2022ffc.js"),["lv_LV.c2022ffc.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.l)],["nb-no",()=>V(()=>import("./nb_NO.b81af806.js"),["nb_NO.b81af806.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.n)],["nl-nl",()=>V(()=>import("./nl_NL.b5e4e1f8.js"),["nl_NL.b5e4e1f8.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.n)],["pl-pl",()=>V(()=>import("./pl_PL.47a9df4a.js"),["pl_PL.47a9df4a.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.p)],["pt-br",()=>V(()=>import("./pt_BR.512ff419.js"),["pt_BR.512ff419.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.p)],["pt-pt",()=>V(()=>import("./pt_PT.89c766b3.js"),["pt_PT.89c766b3.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.p)],["ro-ro",()=>V(()=>import("./ro_RO.cdb10687.js"),["ro_RO.cdb10687.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.r)],["ru-ru",()=>V(()=>import("./ru_RU.fb5ffe9b.js"),["ru_RU.fb5ffe9b.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.r)],["sk-sk",()=>V(()=>import("./sk_SK.c690c7d2.js"),["sk_SK.c690c7d2.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.s)],["sl-sl",()=>V(()=>import("./sl_SL.b6513f33.js"),["sl_SL.b6513f33.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.s)],["sr-rs",()=>V(()=>import("./sr_RS.71408a7c.js"),["sr_RS.71408a7c.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.s)],["sv-se",()=>V(()=>import("./sv_SE.5f00a442.js"),["sv_SE.5f00a442.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.s)],["th-th",()=>V(()=>import("./th_TH.e8c3ff07.js"),["th_TH.e8c3ff07.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.t)],["tr-tr",()=>V(()=>import("./tr_TR.0d292c66.js"),["tr_TR.0d292c66.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.t)],["uk-ua",()=>V(()=>import("./uk_UA.f4a29cdf.js"),["uk_UA.f4a29cdf.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.u)],["vi-vn",()=>V(()=>import("./vi_VN.806d0c36.js"),["vi_VN.806d0c36.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.v)],["zh-cn",()=>V(()=>import("./zh_Hans.a407cf98.js"),["zh_Hans.a407cf98.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.z)],["zh-hk",()=>V(()=>import("./zh_Hant.7e13eee4.js"),["zh_Hant.7e13eee4.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.z)],["zh-tw",()=>V(()=>import("./zh_Hant.7e13eee4.js"),["zh_Hant.7e13eee4.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(e=>e.z)]]);function g0e(e){const t=e.split("-")[0].toLowerCase();let r=null;for(const i of jA.keys())if(i.startsWith(t)){r=i;break}return r}function v0e(e){return e?jA.has(e.toLowerCase())?e.toLowerCase():g0e(e)||gD:gD}let Nh,py;async function w0e(e=An()){if(e=v0e(e),Nh&&e===py)return Nh;Nh=V(()=>import("./index.80c6615c.js"),["index.80c6615c.js","commonjsHelpers.ce2b5698.js"],import.meta.url).then(t=>t.i),py=e;try{const[t,r]=await Promise.all([Nh,jA.get(py)()]);py===e&&(t.am4core.options.defaultLocale=r.default),t.am4core.options.suppressWarnings=!0,t.am4core.options.autoDispose=!0}catch{return Nh=null,py=null,null}return Nh}function _0e(e,t="default"){const r=y0e.find(i=>i.name===t);return r?r.colors.map(i=>e.color(i)):null}const Pt={base:"esri-feature-media",mediaContainer:"esri-feature-media__container",mediaItemContainer:"esri-feature-media__item-container",mediaItem:"esri-feature-media__item",mediaItemTitle:"esri-feature-media__item-title",mediaItemCaption:"esri-feature-media__item-caption",mediaPrevious:"esri-feature-media__previous",mediaPreviousIconLTR:"esri-feature-media__previous-icon",mediaPreviousIconRTL:"esri-feature-media__previous-icon--rtl",mediaNext:"esri-feature-media__next",mediaNextIconLTR:"esri-feature-media__next-icon",mediaNextIconRTL:"esri-feature-media__next-icon--rtl",mediaChart:"esri-feature-media__chart",mediaButton:"esri-feature-media__button",mediaIcon:"esri-feature-media__icon",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},oE=.05,aE=.95,lE=15,ba="color",Nl="tooltip",fy="value",vD="default-line-value";let ji=class extends Kt{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.attributes=null,this.activeMediaInfoIndex=null,this.description=null,this.fieldInfoMap=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null,this.viewModel=new Bd,this.messages=null,this._getChartDependencies=async r=>{const i=await w0e(),{destroyed:n,viewModel:s}=this;if(n||!s||!r)return;const{activeMediaInfo:o}=s,a=await this._getRendererColors(i);this._renderChart({chartDiv:r,mediaInfo:o,chartsModule:i,colorMap:a})}}initialize(){this._featureElementInfo=new $A,this.own([G(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.activeMediaInfo,(t=this.viewModel)==null?void 0:t.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),je),G(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),je)])}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}render(){var e;return x("div",{bind:this,class:Pt.base,onkeyup:this._handleMediaKeyup},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?x("div",{key:"media-element-container",class:Pt.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:t}=this,{activeMediaInfoIndex:r,formattedMediaInfoCount:i}=this.viewModel,{value:n,refreshInterval:s,altText:o,title:a,type:l}=e,{sourceURL:c,linkURL:h}=n,f=RB(h)?"_blank":"_self",m=f==="_blank"?"noreferrer":"",y=s?t:null,g=y?y.timestamp:0,v=y?y.sourceURL:c,_=x("img",{alt:o||a,key:`media-${l}-${r}-${i}-${g}`,src:v});return(h?x("a",{title:a,href:h,rel:m,target:f},_):null)||_}renderChartMediaInfo(e){const{activeMediaInfoIndex:t,formattedMediaInfoCount:r}=this.viewModel;return x("div",{key:`media-${e.type}-${t}-${r}`,bind:this,class:Pt.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?e.type==="image"?this.renderImageMediaInfo(e):e.type.includes("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const t=e.title?x("div",{key:"media-title",class:Pt.mediaItemTitle,innerHTML:e.title}):null,r=e.caption?x("div",{key:"media-caption",class:Pt.mediaItemCaption,innerHTML:e.caption}):null;return x("div",{key:"media-container",class:Pt.mediaItemContainer},x("div",{key:"media-item-container",class:Pt.mediaItem},this.renderMediaInfoType()),t,r)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t=e==="previous",r=t?this.messages.previous:this.messages.next,i=t?this.classes(Pt.mediaButton,Pt.mediaPrevious):this.classes(Pt.mediaButton,Pt.mediaNext),n=t?this.classes(Pt.mediaIcon,Pt.mediaPreviousIconLTR,Pt.iconLeftTriangleArrow):this.classes(Pt.mediaIcon,Pt.mediaNextIconLTR,Pt.iconRightTriangleArrow),s=t?this.classes(Pt.mediaIcon,Pt.mediaPreviousIconRTL,Pt.iconRightTriangleArrow):this.classes(Pt.mediaIcon,Pt.mediaNextIconRTL,Pt.iconLeftTriangleArrow),o=t?"media-previous":"media-next",a=t?this._previous:this._next;return x("button",{type:"button",key:o,title:r,"aria-label":r,tabIndex:0,class:i,bind:this,onclick:a},x("span",{"aria-hidden":"true",class:n}),x("span",{"aria-hidden":"true",class:s}))}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}async _getRendererColors(e){var s;const{am4core:t}=e,r=(s=this.viewModel)==null?void 0:s.layer,i=new Map;if(!r)return i;const n=await Hye(r.renderer);return n.delete(null),Array.from(n.values()).every(o=>(o==null?void 0:o.length)===1)&&(i.set(vD,t.color({r:50,g:50,b:50,a:1})),Array.from(n.keys()).forEach(o=>{o&&i.set(o,t.color(n.get(o)[0].toCss(!0)))})),i}_handleMediaKeyup(e){const t=vd(e);t==="ArrowLeft"&&(e.stopPropagation(),this.viewModel.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.viewModel.next())}_renderChart(e){const{abilities:t}=this.viewModel,{chartsModule:r,chartDiv:i,mediaInfo:n,colorMap:s}=e,{value:o,type:a}=n,{am4core:l}=r,c=_0e(l);function h(y){y instanceof l.ColorSet&&c&&(y.list=c)}EA()&&l.useTheme(r.am4themes_dark);const f=window.matchMedia("(prefers-reduced-motion: reduce)");t.chartAnimation&&!f.matches?l.useTheme(r.am4themes_animated):l.unuseTheme(r.am4themes_animated),l.useTheme(h);const m=a==="pie-chart"?this._createPieChart(e):this._createXYChart(e);i.setAttribute("aria-label",n.altText||n.title),m.data=o.series.map(y=>({[Nl]:y.tooltip,[fy]:y.value,[ba]:s.get(y.fieldName)})).filter(y=>a!=="pie-chart"||y.value>0)}_customizeChartTooltip(e,t){e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color("#ffffff"),e.background.fill=t.color({r:0,g:0,b:0,a:.7})}_createPieChart(e){const{chartDiv:t,chartsModule:r}=e,{am4core:i,am4charts:n}=r,s=i.create(t,n.PieChart);s.rtl=oo(this.container);const o=s.series.push(new n.PieSeries);return o.labels.template.disabled=!0,o.ticks.template.disabled=!0,o.dataFields.value=fy,o.dataFields.category=Nl,this._customizeChartTooltip(o.tooltip,i),o.slices.template.tooltipText=s.rtl?"{category}: %{value.percent.formatNumber('#.0')}":"{category}: {value.percent.formatNumber('#.0')}%",o.slices.template.propertyFields.fill=ba,o.slices.template.propertyFields.stroke=ba,s}_getMinSeriesValue(e){let t=0;return e.forEach(r=>t=Math.min(r.value,t)),t}_createColumnChart(e,t){const{chartsModule:r,mediaInfo:i}=t,{value:n}=i,{am4core:s,am4charts:o}=r,a=e.xAxes.push(new o.CategoryAxis);a.dataFields.category=Nl,a.renderer.labels.template.disabled=!0,this._customizeChartTooltip(a.tooltip,s),a.tooltip.events.on("sizechanged",()=>{a.tooltip.dy=-a.tooltip.contentHeight});const l=e.yAxes.push(new o.ValueAxis),c=l.renderer.labels.template;l.renderer.minLabelPosition=oE,l.renderer.maxLabelPosition=aE,l.min=this._getMinSeriesValue(n.series),this._customizeChartTooltip(l.tooltip,s),c.wrap=!0;const h=e.series.push(new o.ColumnSeries);h.dataFields.valueY=fy,h.dataFields.categoryX=Nl,h.columns.template.propertyFields.fill=ba,h.columns.template.propertyFields.stroke=ba,e.cursor=new o.XYCursor,n.series.length>lE&&(e.scrollbarX=new s.Scrollbar)}_createBarChart(e,t){const{chartsModule:r,mediaInfo:i}=t,{value:n}=i,{am4core:s,am4charts:o}=r,a=e.yAxes.push(new o.CategoryAxis);a.dataFields.category=Nl,a.renderer.inversed=!0,a.renderer.labels.template.disabled=!0,this._customizeChartTooltip(a.tooltip,s),a.tooltip.events.on("sizechanged",()=>{a.tooltip.dx=a.tooltip.contentWidth});const l=e.xAxes.push(new o.ValueAxis),c=l.renderer.labels.template;l.renderer.minLabelPosition=oE,l.renderer.maxLabelPosition=aE,l.min=this._getMinSeriesValue(n.series),this._customizeChartTooltip(l.tooltip,s),c.wrap=!0;const h=e.series.push(new o.ColumnSeries);h.dataFields.valueX=fy,h.dataFields.categoryY=Nl,h.columns.template.propertyFields.fill=ba,h.columns.template.propertyFields.stroke=ba,e.cursor=new o.XYCursor,n.series.length>lE&&(e.scrollbarY=new s.Scrollbar)}_createLineChart(e,t){const{chartsModule:r,mediaInfo:i,colorMap:n}=t,{value:s}=i,{am4core:o,am4charts:a}=r,l=e.xAxes.push(new a.CategoryAxis);l.dataFields.category=Nl,l.renderer.labels.template.disabled=!0,this._customizeChartTooltip(l.tooltip,o),l.tooltip.events.on("sizechanged",()=>{l.tooltip.dy=-l.tooltip.contentHeight});const c=e.yAxes.push(new a.ValueAxis),h=c.renderer.labels.template;c.renderer.minLabelPosition=oE,c.renderer.maxLabelPosition=aE,c.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(c.tooltip,o),h.wrap=!0;const f=e.series.push(new a.LineSeries);f.dataFields.categoryX=Nl,f.dataFields.valueY=fy,f.strokeWidth=1;const m=n.get(vD);m&&(f.stroke=m);const y=f.bullets.push(new a.CircleBullet);y.propertyFields.fill=ba,y.propertyFields.stroke=ba,e.cursor=new a.XYCursor,s.series.length>lE&&(e.scrollbarX=new o.Scrollbar)}_createXYChart(e){const{chartDiv:t,chartsModule:r,mediaInfo:i}=e,{type:n}=i,{am4core:s,am4charts:o}=r,a=s.create(t,o.XYChart);return a.rtl=oo(this.container),n==="column-chart"&&this._createColumnChart(a,e),n==="bar-chart"&&this._createBarChart(a,e),n==="line-chart"&&this._createLineChart(a,e),a}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:this._getImageSource(e,t)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&e.type==="image"&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:t,value:r}=e;if(!t)return;const i=6e4*t;this._updateMediaInfoTimestamp(r.sourceURL);const n=setInterval(()=>{this._updateMediaInfoTimestamp(r.sourceURL)},i);this._refreshTimer=n}_getImageSource(e,t){const r=e.includes("?")?"&":"?",[i,n=""]=e.split("#");return`${i}${r}timestamp=${t}${n?"#":""}${n}`}};u([X("viewModel.attributes")],ji.prototype,"attributes",void 0),u([X("viewModel.activeMediaInfoIndex")],ji.prototype,"activeMediaInfoIndex",void 0),u([X("viewModel.description")],ji.prototype,"description",void 0),u([X("viewModel.fieldInfoMap")],ji.prototype,"fieldInfoMap",void 0),u([X("viewModel.layer")],ji.prototype,"layer",void 0),u([X("viewModel.mediaInfos")],ji.prototype,"mediaInfos",void 0),u([X("viewModel.popupTemplate")],ji.prototype,"popupTemplate",void 0),u([X("viewModel.relatedInfos")],ji.prototype,"relatedInfos",void 0),u([X("viewModel.title")],ji.prototype,"title",void 0),u([d({type:Bd})],ji.prototype,"viewModel",void 0),u([d(),Et("esri/widgets/Feature/t9n/Feature")],ji.prototype,"messages",void 0),ji=u([E("esri.widgets.Feature.FeatureMedia")],ji);const Wq=ji;class b0e{constructor(t,r){this.definition=null,this.context=null,this.definition=t,this.context=r}}class fa{constructor(t=[]){this._elements=t}length(){return this._elements.length}get(t){return this._elements[t]}toArray(){const t=[];for(let r=0;r<this.length();r++)t.push(this.get(r));return t}}class kh extends fa{constructor(t,r,i,n,s,o){super(t),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=r,this._hasZ=i,this._hasM=n,this._cacheId=s,this._partId=o}get(t){if(this._lazyPt[t]===void 0){const r=this._elements[t];if(r===void 0)return;const i=this._hasZ,n=this._hasM;let s=null;s=i&&!n?new ye(r[0],r[1],r[2],void 0,this._spRef):n&&!i?new ye(r[0],r[1],void 0,r[2],this._spRef):i&&n?new ye(r[0],r[1],r[2],r[3],this._spRef):new ye(r[0],r[1],this._spRef),s.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+t.toString(),this._lazyPt[t]=s}return this._lazyPt[t]}equalityTest(t){return t===this||t!==null&&t instanceof kh&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}class VA extends fa{constructor(t,r,i,n,s){super(t),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=i,this._hasM=n,this._spRef=r,this._cacheId=s}get(t){if(this._lazyPath[t]===void 0){const r=this._elements[t];if(r===void 0)return;this._lazyPath[t]=new kh(r,this._spRef,this._hasZ,this._hasM,this._cacheId,t)}return this._lazyPath[t]}equalityTest(t){return t===this||t!==null&&t instanceof VA&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}class Lh extends Error{}class S0e extends Lh{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class $0e extends Lh{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class x0e extends Lh{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class pg extends Lh{}class Hq extends Lh{constructor(t){super(`Invalid unit ${t}`)}}class ls extends Lh{}class Dl extends Lh{constructor(){super("Zone is an abstract class")}}const ne="numeric",vo="short",Rn="long",sk={year:ne,month:ne,day:ne},Jq={year:ne,month:vo,day:ne},E0e={year:ne,month:vo,day:ne,weekday:vo},Zq={year:ne,month:Rn,day:ne},Yq={year:ne,month:Rn,day:ne,weekday:Rn},Qq={hour:ne,minute:ne},Kq={hour:ne,minute:ne,second:ne},Xq={hour:ne,minute:ne,second:ne,timeZoneName:vo},eW={hour:ne,minute:ne,second:ne,timeZoneName:Rn},tW={hour:ne,minute:ne,hourCycle:"h23"},rW={hour:ne,minute:ne,second:ne,hourCycle:"h23"},iW={hour:ne,minute:ne,second:ne,hourCycle:"h23",timeZoneName:vo},nW={hour:ne,minute:ne,second:ne,hourCycle:"h23",timeZoneName:Rn},sW={year:ne,month:ne,day:ne,hour:ne,minute:ne},oW={year:ne,month:ne,day:ne,hour:ne,minute:ne,second:ne},aW={year:ne,month:vo,day:ne,hour:ne,minute:ne},lW={year:ne,month:vo,day:ne,hour:ne,minute:ne,second:ne},T0e={year:ne,month:vo,day:ne,weekday:vo,hour:ne,minute:ne},uW={year:ne,month:Rn,day:ne,hour:ne,minute:ne,timeZoneName:vo},cW={year:ne,month:Rn,day:ne,hour:ne,minute:ne,second:ne,timeZoneName:vo},dW={year:ne,month:Rn,day:ne,weekday:Rn,hour:ne,minute:ne,timeZoneName:Rn},hW={year:ne,month:Rn,day:ne,weekday:Rn,hour:ne,minute:ne,second:ne,timeZoneName:Rn};function Ge(e){return typeof e>"u"}function ih(e){return typeof e=="number"}function c$(e){return typeof e=="number"&&e%1===0}function M0e(e){return typeof e=="string"}function I0e(e){return Object.prototype.toString.call(e)==="[object Date]"}function pW(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function C0e(e){return Array.isArray(e)?e:[e]}function wD(e,t,r){if(e.length!==0)return e.reduce((i,n)=>{const s=[t(n),n];return i&&r(i[0],s[0])===i[0]?i:s},null)[1]}function k0e(e,t){return t.reduce((r,i)=>(r[i]=e[i],r),{})}function Xf(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ol(e,t,r){return c$(e)&&e>=t&&e<=r}function L0e(e,t){return e-t*Math.floor(e/t)}function dr(e,t=2){const r=e<0;let i;return r?i="-"+(""+-e).padStart(t,"0"):i=(""+e).padStart(t,"0"),i}function Cu(e){if(!(Ge(e)||e===null||e===""))return parseInt(e,10)}function bc(e){if(!(Ge(e)||e===null||e===""))return parseFloat(e)}function zA(e){if(!(Ge(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function UA(e,t,r=!1){const i=10**t;return(r?Math.trunc:Math.round)(e*i)/i}function jv(e){return e%4===0&&(e%100!==0||e%400===0)}function i0(e){return jv(e)?366:365}function PS(e,t){const r=L0e(t-1,12)+1,i=e+(t-r)/12;return r===2?jv(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function GA(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(t.getUTCFullYear()-1900)),+t}function RS(e){const t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,r=e-1,i=(r+Math.floor(r/4)-Math.floor(r/100)+Math.floor(r/400))%7;return t===4||i===3?53:52}function ok(e){return e>99?e:e>60?1900+e:2e3+e}function fW(e,t,r,i=null){const n=new Date(e),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);const o={timeZoneName:t,...s},a=new Intl.DateTimeFormat(r,o).formatToParts(n).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function d$(e,t){let r=parseInt(e,10);Number.isNaN(r)&&(r=0);const i=parseInt(t,10)||0,n=r<0||Object.is(r,-0)?-i:i;return r*60+n}function mW(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new ls(`Invalid unit value ${e}`);return t}function FS(e,t){const r={};for(const i in e)if(Xf(e,i)){const n=e[i];if(n==null)continue;r[t(i)]=mW(n)}return r}function n0(e,t){const r=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),n=e>=0?"+":"-";switch(t){case"short":return`${n}${dr(r,2)}:${dr(i,2)}`;case"narrow":return`${n}${r}${i>0?`:${i}`:""}`;case"techie":return`${n}${dr(r,2)}${dr(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function h$(e){return k0e(e,["hour","minute","second","millisecond"])}const yW=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,O0e=["January","February","March","April","May","June","July","August","September","October","November","December"],gW=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],A0e=["J","F","M","A","M","J","J","A","S","O","N","D"];function vW(e){switch(e){case"narrow":return[...A0e];case"short":return[...gW];case"long":return[...O0e];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const wW=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],_W=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],P0e=["M","T","W","T","F","S","S"];function bW(e){switch(e){case"narrow":return[...P0e];case"short":return[..._W];case"long":return[...wW];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const SW=["AM","PM"],R0e=["Before Christ","Anno Domini"],F0e=["BC","AD"],N0e=["B","A"];function $W(e){switch(e){case"narrow":return[...N0e];case"short":return[...F0e];case"long":return[...R0e];default:return null}}function D0e(e){return SW[e.hour<12?0:1]}function j0e(e,t){return bW(t)[e.weekday-1]}function V0e(e,t){return vW(t)[e.month-1]}function z0e(e,t){return $W(t)[e.year<0?0:1]}function U0e(e,t,r="always",i=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(e)===-1;if(r==="auto"&&s){const f=e==="days";switch(t){case 1:return f?"tomorrow":`next ${n[e][0]}`;case-1:return f?"yesterday":`last ${n[e][0]}`;case 0:return f?"today":`this ${n[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,c=n[e],h=i?l?c[1]:c[2]||c[1]:l?n[e][0]:e;return o?`${a} ${h} ago`:`in ${a} ${h}`}function _D(e,t){let r="";for(const i of e)i.literal?r+=i.val:r+=t(i.val);return r}const G0e={D:sk,DD:Jq,DDD:Zq,DDDD:Yq,t:Qq,tt:Kq,ttt:Xq,tttt:eW,T:tW,TT:rW,TTT:iW,TTTT:nW,f:sW,ff:aW,fff:uW,ffff:dW,F:oW,FF:lW,FFF:cW,FFFF:hW};class Yi{static create(t,r={}){return new Yi(t,r)}static parseFormat(t){let r=null,i="",n=!1;const s=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(i.length>0&&s.push({literal:n,val:i}),r=null,i="",n=!n):n||a===r?i+=a:(i.length>0&&s.push({literal:!1,val:i}),i=a,r=a)}return i.length>0&&s.push({literal:n,val:i}),s}static macroTokenToFormatOpts(t){return G0e[t]}constructor(t,r){this.opts=r,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...r}).format()}formatDateTime(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r}).format()}formatDateTimeParts(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r}).formatToParts()}resolvedOptions(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r}).resolvedOptions()}num(t,r=0){if(this.opts.forceSimple)return dr(t,r);const i={...this.opts};return r>0&&(i.padTo=r),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,r){const i=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(y,g)=>this.loc.extract(t,y,g),o=y=>t.isOffsetFixed&&t.offset===0&&y.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,y.format):"",a=()=>i?D0e(t):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(y,g)=>i?V0e(t,y):s(g?{month:y}:{month:y,day:"numeric"},"month"),c=(y,g)=>i?j0e(t,y):s(g?{weekday:y}:{weekday:y,month:"long",day:"numeric"},"weekday"),h=y=>{const g=Yi.macroTokenToFormatOpts(y);return g?this.formatWithSystemDefault(t,g):y},f=y=>i?z0e(t,y):s({era:y},"era"),m=y=>{switch(y){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return n?s({day:"numeric"},"day"):this.num(t.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(t.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(t.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(t.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return h(y)}};return _D(Yi.parseFormat(r),m)}formatDurationFromString(t,r){const i=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=l=>c=>{const h=i(c);return h?this.num(l.get(h),c.length):c},s=Yi.parseFormat(r),o=s.reduce((l,{literal:c,val:h})=>c?l:l.concat(h),[]),a=t.shiftTo(...o.map(i).filter(l=>l));return _D(s,n(a))}}class ao{constructor(t,r){this.reason=t,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}class Vv{get type(){throw new Dl}get name(){throw new Dl}get ianaName(){return this.name}get isUniversal(){throw new Dl}offsetName(t,r){throw new Dl}formatOffset(t,r){throw new Dl}offset(t){throw new Dl}equals(t){throw new Dl}get isValid(){throw new Dl}}let uE=null;class BA extends Vv{static get instance(){return uE===null&&(uE=new BA),uE}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return fW(t,r,i)}formatOffset(t,r){return n0(this.offset(t),r)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let E_={};function B0e(e){return E_[e]||(E_[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),E_[e]}const q0e={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function W0e(e,t){const r=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,n,s,o,a,l,c,h]=i;return[o,n,s,a,l,c,h]}function H0e(e,t){const r=e.formatToParts(t),i=[];for(let n=0;n<r.length;n++){const{type:s,value:o}=r[n],a=q0e[s];s==="era"?i[a]=o:Ge(a)||(i[a]=parseInt(o,10))}return i}let W1={};class bl extends Vv{static create(t){return W1[t]||(W1[t]=new bl(t)),W1[t]}static resetCache(){W1={},E_={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=bl.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return fW(t,r,i,this.name)}formatOffset(t,r){return n0(this.offset(t),r)}offset(t){const r=new Date(t);if(isNaN(r))return NaN;const i=B0e(this.name);let[n,s,o,a,l,c,h]=i.formatToParts?H0e(i,r):W0e(i,r);a==="BC"&&(n=-Math.abs(n)+1);const m=GA({year:n,month:s,day:o,hour:l===24?0:l,minute:c,second:h,millisecond:0});let y=+r;const g=y%1e3;return y-=g>=0?g:1e3+g,(m-y)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let cE=null;class Ti extends Vv{static get utcInstance(){return cE===null&&(cE=new Ti(0)),cE}static instance(t){return t===0?Ti.utcInstance:new Ti(t)}static parseSpecifier(t){if(t){const r=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new Ti(d$(r[1],r[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${n0(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${n0(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,r){return n0(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class J0e extends Vv{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Fu(e,t){if(Ge(e)||e===null)return t;if(e instanceof Vv)return e;if(M0e(e)){const r=e.toLowerCase();return r==="local"||r==="system"?t:r==="utc"||r==="gmt"?Ti.utcInstance:Ti.parseSpecifier(r)||bl.create(e)}else return ih(e)?Ti.instance(e):typeof e=="object"&&e.offset&&typeof e.offset=="number"?e:new J0e(e)}let bD=()=>Date.now(),SD="system",$D=null,xD=null,ED=null,TD;class $r{static get now(){return bD}static set now(t){bD=t}static set defaultZone(t){SD=t}static get defaultZone(){return Fu(SD,BA.instance)}static get defaultLocale(){return $D}static set defaultLocale(t){$D=t}static get defaultNumberingSystem(){return xD}static set defaultNumberingSystem(t){xD=t}static get defaultOutputCalendar(){return ED}static set defaultOutputCalendar(t){ED=t}static get throwOnInvalid(){return TD}static set throwOnInvalid(t){TD=t}static resetCaches(){Dt.resetCache(),bl.resetCache()}}let MD={};function Z0e(e,t={}){const r=JSON.stringify([e,t]);let i=MD[r];return i||(i=new Intl.ListFormat(e,t),MD[r]=i),i}let ak={};function lk(e,t={}){const r=JSON.stringify([e,t]);let i=ak[r];return i||(i=new Intl.DateTimeFormat(e,t),ak[r]=i),i}let uk={};function Y0e(e,t={}){const r=JSON.stringify([e,t]);let i=uk[r];return i||(i=new Intl.NumberFormat(e,t),uk[r]=i),i}let ck={};function Q0e(e,t={}){const{base:r,...i}=t,n=JSON.stringify([e,i]);let s=ck[n];return s||(s=new Intl.RelativeTimeFormat(e,t),ck[n]=s),s}let fg=null;function K0e(){return fg||(fg=new Intl.DateTimeFormat().resolvedOptions().locale,fg)}function X0e(e){const t=e.indexOf("-u-");if(t===-1)return[e];{let r;const i=e.substring(0,t);try{r=lk(e).resolvedOptions()}catch{r=lk(i).resolvedOptions()}const{numberingSystem:n,calendar:s}=r;return[i,n,s]}}function eve(e,t,r){return(r||t)&&(e+="-u",r&&(e+=`-ca-${r}`),t&&(e+=`-nu-${t}`)),e}function tve(e){const t=[];for(let r=1;r<=12;r++){const i=Ce.utc(2016,r,1);t.push(e(i))}return t}function rve(e){const t=[];for(let r=1;r<=7;r++){const i=Ce.utc(2016,11,13+r);t.push(e(i))}return t}function H1(e,t,r,i,n){const s=e.listingMode(r);return s==="error"?null:s==="en"?i(t):n(t)}function ive(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class nve{constructor(t,r,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:n,floor:s,...o}=i;if(!r||Object.keys(o).length>0){const a={useGrouping:!1,...i};i.padTo>0&&(a.minimumIntegerDigits=i.padTo),this.inf=Y0e(t,a)}}format(t){if(this.inf){const r=this.floor?Math.floor(t):t;return this.inf.format(r)}else{const r=this.floor?Math.floor(t):UA(t,3);return dr(r,this.padTo)}}}class sve{constructor(t,r,i){this.opts=i;let n;if(t.zone.isUniversal){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&bl.create(a).valid?(n=a,this.dt=t):(n="UTC",i.timeZoneName?this.dt=t:this.dt=t.offset===0?t:Ce.fromMillis(t.ts+t.offset*60*1e3))}else t.zone.type==="system"?this.dt=t:(this.dt=t,n=t.zone.name);const s={...this.opts};n&&(s.timeZone=n),this.dtf=lk(r,s)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class ove{constructor(t,r,i){this.opts={style:"long",...i},!r&&pW()&&(this.rtf=Q0e(t,i))}format(t,r){return this.rtf?this.rtf.format(t,r):U0e(r,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,r){return this.rtf?this.rtf.formatToParts(t,r):[]}}class Dt{static fromOpts(t){return Dt.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)}static create(t,r,i,n=!1){const s=t||$r.defaultLocale,o=s||(n?"en-US":K0e()),a=r||$r.defaultNumberingSystem,l=i||$r.defaultOutputCalendar;return new Dt(o,a,l,s)}static resetCache(){fg=null,ak={},uk={},ck={}}static fromObject({locale:t,numberingSystem:r,outputCalendar:i}={}){return Dt.create(t,r,i)}constructor(t,r,i,n){const[s,o,a]=X0e(t);this.locale=s,this.numberingSystem=r||o||null,this.outputCalendar=i||a||null,this.intl=eve(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=ive(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&r?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:Dt.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,r=!1,i=!0){return H1(this,t,i,vW,()=>{const n=r?{month:t,day:"numeric"}:{month:t},s=r?"format":"standalone";return this.monthsCache[s][t]||(this.monthsCache[s][t]=tve(o=>this.extract(o,n,"month"))),this.monthsCache[s][t]})}weekdays(t,r=!1,i=!0){return H1(this,t,i,bW,()=>{const n=r?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},s=r?"format":"standalone";return this.weekdaysCache[s][t]||(this.weekdaysCache[s][t]=rve(o=>this.extract(o,n,"weekday"))),this.weekdaysCache[s][t]})}meridiems(t=!0){return H1(this,void 0,t,()=>SW,()=>{if(!this.meridiemCache){const r={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Ce.utc(2016,11,13,9),Ce.utc(2016,11,13,19)].map(i=>this.extract(i,r,"dayperiod"))}return this.meridiemCache})}eras(t,r=!0){return H1(this,t,r,$W,()=>{const i={era:t};return this.eraCache[t]||(this.eraCache[t]=[Ce.utc(-40,1,1),Ce.utc(2017,1,1)].map(n=>this.extract(n,i,"era"))),this.eraCache[t]})}extract(t,r,i){const n=this.dtFormatter(t,r),s=n.formatToParts(),o=s.find(a=>a.type.toLowerCase()===i);return o?o.value:null}numberFormatter(t={}){return new nve(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,r={}){return new sve(t,this.intl,r)}relFormatter(t={}){return new ove(this.intl,this.isEnglish(),t)}listFormatter(t={}){return Z0e(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}function Om(...e){const t=e.reduce((r,i)=>r+i.source,"");return RegExp(`^${t}$`)}function Am(...e){return t=>e.reduce(([r,i,n],s)=>{const[o,a,l]=s(t,n);return[{...r,...o},a||i,l]},[{},null,1]).slice(0,2)}function Pm(e,...t){if(e==null)return[null,null];for(const[r,i]of t){const n=r.exec(e);if(n)return i(n)}return[null,null]}function xW(...e){return(t,r)=>{const i={};let n;for(n=0;n<e.length;n++)i[e[n]]=Cu(t[r+n]);return[i,null,r+n]}}const EW=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,ave=`(?:${EW.source}?(?:\\[(${yW.source})\\])?)?`,qA=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,TW=RegExp(`${qA.source}${ave}`),WA=RegExp(`(?:T${TW.source})?`),lve=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,uve=/(\d{4})-?W(\d\d)(?:-?(\d))?/,cve=/(\d{4})-?(\d{3})/,dve=xW("weekYear","weekNumber","weekDay"),hve=xW("year","ordinal"),pve=/(\d{4})-(\d\d)-(\d\d)/,MW=RegExp(`${qA.source} ?(?:${EW.source}|(${yW.source}))?`),fve=RegExp(`(?: ${MW.source})?`);function Cf(e,t,r){const i=e[t];return Ge(i)?r:Cu(i)}function mve(e,t){return[{year:Cf(e,t),month:Cf(e,t+1,1),day:Cf(e,t+2,1)},null,t+3]}function Rm(e,t){return[{hours:Cf(e,t,0),minutes:Cf(e,t+1,0),seconds:Cf(e,t+2,0),milliseconds:zA(e[t+3])},null,t+4]}function zv(e,t){const r=!e[t]&&!e[t+1],i=d$(e[t+1],e[t+2]),n=r?null:Ti.instance(i);return[{},n,t+3]}function Uv(e,t){const r=e[t]?bl.create(e[t]):null;return[{},r,t+1]}const yve=RegExp(`^T?${qA.source}$`),gve=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/;function vve(e){const[t,r,i,n,s,o,a,l,c]=e,h=t[0]==="-",f=l&&l[0]==="-",m=(y,g=!1)=>y!==void 0&&(g||y&&h)?-y:y;return[{years:m(bc(r)),months:m(bc(i)),weeks:m(bc(n)),days:m(bc(s)),hours:m(bc(o)),minutes:m(bc(a)),seconds:m(bc(l),l==="-0"),milliseconds:m(zA(c),f)}]}const wve={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function HA(e,t,r,i,n,s,o){const a={year:t.length===2?ok(Cu(t)):Cu(t),month:gW.indexOf(r)+1,day:Cu(i),hour:Cu(n),minute:Cu(s)};return o&&(a.second=Cu(o)),e&&(a.weekday=e.length>3?wW.indexOf(e)+1:_W.indexOf(e)+1),a}const _ve=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function bve(e){const[,t,r,i,n,s,o,a,l,c,h,f]=e,m=HA(t,n,i,r,s,o,a);let y;return l?y=wve[l]:c?y=0:y=d$(h,f),[m,new Ti(y)]}function Sve(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const $ve=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,xve=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Eve=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function ID(e){const[,t,r,i,n,s,o,a]=e;return[HA(t,n,i,r,s,o,a),Ti.utcInstance]}function Tve(e){const[,t,r,i,n,s,o,a]=e;return[HA(t,a,r,i,n,s,o),Ti.utcInstance]}const Mve=Om(lve,WA),Ive=Om(uve,WA),Cve=Om(cve,WA),kve=Om(TW),IW=Am(mve,Rm,zv,Uv),Lve=Am(dve,Rm,zv,Uv),Ove=Am(hve,Rm,zv,Uv),Ave=Am(Rm,zv,Uv);function Pve(e){return Pm(e,[Mve,IW],[Ive,Lve],[Cve,Ove],[kve,Ave])}function Rve(e){return Pm(Sve(e),[_ve,bve])}function Fve(e){return Pm(e,[$ve,ID],[xve,ID],[Eve,Tve])}function Nve(e){return Pm(e,[gve,vve])}const Dve=Am(Rm);function jve(e){return Pm(e,[yve,Dve])}const Vve=Om(pve,fve),zve=Om(MW),Uve=Am(Rm,zv,Uv);function Gve(e){return Pm(e,[Vve,IW],[zve,Uve])}const Bve="Invalid Duration",CW={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},qve={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...CW},Gn=146097/400,Dh=146097/4800,Wve={years:{quarters:4,months:12,weeks:Gn/7,days:Gn,hours:Gn*24,minutes:Gn*24*60,seconds:Gn*24*60*60,milliseconds:Gn*24*60*60*1e3},quarters:{months:3,weeks:Gn/28,days:Gn/4,hours:Gn*24/4,minutes:Gn*24*60/4,seconds:Gn*24*60*60/4,milliseconds:Gn*24*60*60*1e3/4},months:{weeks:Dh/7,days:Dh,hours:Dh*24,minutes:Dh*24*60,seconds:Dh*24*60*60,milliseconds:Dh*24*60*60*1e3},...CW},Xc=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Hve=Xc.slice(0).reverse();function Sc(e,t,r=!1){const i={values:r?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy};return new We(i)}function Jve(e){return e<0?Math.floor(e):Math.ceil(e)}function kW(e,t,r,i,n){const s=e[n][r],o=t[r]/s,a=Math.sign(o)===Math.sign(i[n]),l=!a&&i[n]!==0&&Math.abs(o)<=1?Jve(o):Math.trunc(o);i[n]+=l,t[r]-=l*s}function Zve(e,t){Hve.reduce((r,i)=>Ge(t[i])?r:(r&&kW(e,t,r,t,i),i),null)}class We{constructor(t){const r=t.conversionAccuracy==="longterm"||!1;this.values=t.values,this.loc=t.loc||Dt.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=r?Wve:qve,this.isLuxonDuration=!0}static fromMillis(t,r){return We.fromObject({milliseconds:t},r)}static fromObject(t,r={}){if(t==null||typeof t!="object")throw new ls(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new We({values:FS(t,We.normalizeUnit),loc:Dt.fromObject(r),conversionAccuracy:r.conversionAccuracy})}static fromDurationLike(t){if(ih(t))return We.fromMillis(t);if(We.isDuration(t))return t;if(typeof t=="object")return We.fromObject(t);throw new ls(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,r){const[i]=Nve(t);return i?We.fromObject(i,r):We.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,r){const[i]=jve(t);return i?We.fromObject(i,r):We.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,r=null){if(!t)throw new ls("need to specify a reason the Duration is invalid");const i=t instanceof ao?t:new ao(t,r);if($r.throwOnInvalid)throw new x0e(i);return new We({invalid:i})}static normalizeUnit(t){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!r)throw new Hq(t);return r}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,r={}){const i={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?Yi.create(this.loc,i).formatDurationFromString(this,t):Bve}toHuman(t={}){const r=Xc.map(i=>{const n=this.values[i];return Ge(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(n)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=UA(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const r=this.toMillis();if(r<0||r>=864e5)return null;t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t};const i=this.shiftTo("hours","minutes","seconds","milliseconds");let n=t.format==="basic"?"hhmm":"hh:mm";(!t.suppressSeconds||i.seconds!==0||i.milliseconds!==0)&&(n+=t.format==="basic"?"ss":":ss",(!t.suppressMilliseconds||i.milliseconds!==0)&&(n+=".SSS"));let s=i.toFormat(n);return t.includePrefix&&(s="T"+s),s}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const r=We.fromDurationLike(t),i={};for(const n of Xc)(Xf(r.values,n)||Xf(this.values,n))&&(i[n]=r.get(n)+this.get(n));return Sc(this,{values:i},!0)}minus(t){if(!this.isValid)return this;const r=We.fromDurationLike(t);return this.plus(r.negate())}mapUnits(t){if(!this.isValid)return this;const r={};for(const i of Object.keys(this.values))r[i]=mW(t(this.values[i],i));return Sc(this,{values:r},!0)}get(t){return this[We.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const r={...this.values,...FS(t,We.normalizeUnit)};return Sc(this,{values:r})}reconfigure({locale:t,numberingSystem:r,conversionAccuracy:i}={}){const n=this.loc.clone({locale:t,numberingSystem:r}),s={loc:n};return i&&(s.conversionAccuracy=i),Sc(this,s)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return Zve(this.matrix,t),Sc(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>We.normalizeUnit(o));const r={},i={},n=this.toObject();let s;for(const o of Xc)if(t.indexOf(o)>=0){s=o;let a=0;for(const c in i)a+=this.matrix[c][o]*i[c],i[c]=0;ih(n[o])&&(a+=n[o]);const l=Math.trunc(a);r[o]=l,i[o]=(a*1e3-l*1e3)/1e3;for(const c in n)Xc.indexOf(c)>Xc.indexOf(o)&&kW(this.matrix,n,c,r,o)}else ih(n[o])&&(i[o]=n[o]);for(const o in i)i[o]!==0&&(r[s]+=o===s?i[o]:i[o]/this.matrix[s][o]);return Sc(this,{values:r},!0).normalize()}negate(){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=this.values[r]===0?0:-this.values[r];return Sc(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function r(i,n){return i===void 0||i===0?n===void 0||n===0:i===n}for(const i of Xc)if(!r(this.values[i],t.values[i]))return!1;return!0}}const my="Invalid Interval";function Yve(e,t){return!e||!e.isValid?Ht.invalid("missing or invalid start"):!t||!t.isValid?Ht.invalid("missing or invalid end"):t<e?Ht.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class Ht{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,r=null){if(!t)throw new ls("need to specify a reason the Interval is invalid");const i=t instanceof ao?t:new ao(t,r);if($r.throwOnInvalid)throw new $0e(i);return new Ht({invalid:i})}static fromDateTimes(t,r){const i=vy(t),n=vy(r),s=Yve(i,n);return s==null?new Ht({start:i,end:n}):s}static after(t,r){const i=We.fromDurationLike(r),n=vy(t);return Ht.fromDateTimes(n,n.plus(i))}static before(t,r){const i=We.fromDurationLike(r),n=vy(t);return Ht.fromDateTimes(n.minus(i),n)}static fromISO(t,r){const[i,n]=(t||"").split("/",2);if(i&&n){let s,o;try{s=Ce.fromISO(i,r),o=s.isValid}catch{o=!1}let a,l;try{a=Ce.fromISO(n,r),l=a.isValid}catch{l=!1}if(o&&l)return Ht.fromDateTimes(s,a);if(o){const c=We.fromISO(n,r);if(c.isValid)return Ht.after(s,c)}else if(l){const c=We.fromISO(i,r);if(c.isValid)return Ht.before(a,c)}}return Ht.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds"){if(!this.isValid)return NaN;const r=this.start.startOf(t),i=this.end.startOf(t);return Math.floor(i.diff(r,t).get(t))+1}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:r}={}){return this.isValid?Ht.fromDateTimes(t||this.s,r||this.e):this}splitAt(...t){if(!this.isValid)return[];const r=t.map(vy).filter(o=>this.contains(o)).sort(),i=[];let{s:n}=this,s=0;for(;n<this.e;){const o=r[s]||this.e,a=+o>+this.e?this.e:o;i.push(Ht.fromDateTimes(n,a)),n=a,s+=1}return i}splitBy(t){const r=We.fromDurationLike(t);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:i}=this,n=1,s;const o=[];for(;i<this.e;){const a=this.start.plus(r.mapUnits(l=>l*n));s=+a>+this.e?this.e:a,o.push(Ht.fromDateTimes(i,s)),i=s,n+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const r=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return r>=i?null:Ht.fromDateTimes(r,i)}union(t){if(!this.isValid)return this;const r=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return Ht.fromDateTimes(r,i)}static merge(t){const[r,i]=t.sort((n,s)=>n.s-s.s).reduce(([n,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[n,s.union(o)]:[n.concat([s]),o]:[n,o],[[],null]);return i&&r.push(i),r}static xor(t){let r=null,i=0;const n=[],s=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,c)=>l.time-c.time);for(const l of a)i+=l.type==="s"?1:-1,i===1?r=l.time:(r&&+r!=+l.time&&n.push(Ht.fromDateTimes(r,l.time)),r=null);return Ht.merge(n)}difference(...t){return Ht.xor([this].concat(t)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:my}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:my}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:my}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:my}toFormat(t,{separator:r=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(t)}${r}${this.e.toFormat(t)}`:my}toDuration(t,r){return this.isValid?this.e.diff(this.s,t,r):We.invalid(this.invalidReason)}mapEndpoints(t){return Ht.fromDateTimes(t(this.s),t(this.e))}}class J1{static hasDST(t=$r.defaultZone){const r=Ce.now().setZone(t).set({month:12});return!t.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(t){return bl.isValidZone(t)}static normalizeZone(t){return Fu(t,$r.defaultZone)}static months(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||Dt.create(r,i,s)).months(t)}static monthsFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||Dt.create(r,i,s)).months(t,!0)}static weekdays(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null}={}){return(n||Dt.create(r,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null}={}){return(n||Dt.create(r,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return Dt.create(t).meridiems()}static eras(t="short",{locale:r=null}={}){return Dt.create(r,null,"gregory").eras(t)}static features(){return{relative:pW()}}}function CD(e,t){const r=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=r(t)-r(e);return Math.floor(We.fromMillis(i).as("days"))}function Qve(e,t,r){const i=[["years",(a,l)=>l.year-a.year],["quarters",(a,l)=>l.quarter-a.quarter],["months",(a,l)=>l.month-a.month+(l.year-a.year)*12],["weeks",(a,l)=>{const c=CD(a,l);return(c-c%7)/7}],["days",CD]],n={};let s,o;for(const[a,l]of i)if(r.indexOf(a)>=0){s=a;let c=l(e,t);o=e.plus({[a]:c}),o>t?(e=e.plus({[a]:c-1}),c-=1):e=o,n[a]=c}return[e,n,o,s]}function Kve(e,t,r,i){let[n,s,o,a]=Qve(e,t,r);const l=t-n,c=r.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);c.length===0&&(o<t&&(o=n.plus({[a]:1})),o!==n&&(s[a]=(s[a]||0)+l/(o-n)));const h=We.fromObject(s,i);return c.length>0?We.fromMillis(l,i).shiftTo(...c).plus(h):h}const JA={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},kD={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Xve=JA.hanidec.replace(/[\[|\]]/g,"").split("");function e1e(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(e[r].search(JA.hanidec)!==-1)t+=Xve.indexOf(e[r]);else for(const n in kD){const[s,o]=kD[n];i>=s&&i<=o&&(t+=i-s)}}return parseInt(t,10)}else return t}function Ms({numberingSystem:e},t=""){return new RegExp(`${JA[e||"latn"]}${t}`)}const t1e="missing Intl.DateTimeFormat.formatToParts support";function Ke(e,t=r=>r){return{regex:e,deser:([r])=>t(e1e(r))}}const r1e=String.fromCharCode(160),LW=`[ ${r1e}]`,OW=new RegExp(LW,"g");function i1e(e){return e.replace(/\./g,"\\.?").replace(OW,LW)}function LD(e){return e.replace(/\./g,"").replace(OW," ").toLowerCase()}function Is(e,t){return e===null?null:{regex:RegExp(e.map(i1e).join("|")),deser:([r])=>e.findIndex(i=>LD(r)===LD(i))+t}}function OD(e,t){return{regex:e,deser:([,r,i])=>d$(r,i),groups:t}}function dE(e){return{regex:e,deser:([t])=>t}}function n1e(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function s1e(e,t){const r=Ms(t),i=Ms(t,"{2}"),n=Ms(t,"{3}"),s=Ms(t,"{4}"),o=Ms(t,"{6}"),a=Ms(t,"{1,2}"),l=Ms(t,"{1,3}"),c=Ms(t,"{1,6}"),h=Ms(t,"{1,9}"),f=Ms(t,"{2,4}"),m=Ms(t,"{4,6}"),y=_=>({regex:RegExp(n1e(_.val)),deser:([w])=>w,literal:!0}),v=(_=>{if(e.literal)return y(_);switch(_.val){case"G":return Is(t.eras("short",!1),0);case"GG":return Is(t.eras("long",!1),0);case"y":return Ke(c);case"yy":return Ke(f,ok);case"yyyy":return Ke(s);case"yyyyy":return Ke(m);case"yyyyyy":return Ke(o);case"M":return Ke(a);case"MM":return Ke(i);case"MMM":return Is(t.months("short",!0,!1),1);case"MMMM":return Is(t.months("long",!0,!1),1);case"L":return Ke(a);case"LL":return Ke(i);case"LLL":return Is(t.months("short",!1,!1),1);case"LLLL":return Is(t.months("long",!1,!1),1);case"d":return Ke(a);case"dd":return Ke(i);case"o":return Ke(l);case"ooo":return Ke(n);case"HH":return Ke(i);case"H":return Ke(a);case"hh":return Ke(i);case"h":return Ke(a);case"mm":return Ke(i);case"m":return Ke(a);case"q":return Ke(a);case"qq":return Ke(i);case"s":return Ke(a);case"ss":return Ke(i);case"S":return Ke(l);case"SSS":return Ke(n);case"u":return dE(h);case"uu":return dE(a);case"uuu":return Ke(r);case"a":return Is(t.meridiems(),0);case"kkkk":return Ke(s);case"kk":return Ke(f,ok);case"W":return Ke(a);case"WW":return Ke(i);case"E":case"c":return Ke(r);case"EEE":return Is(t.weekdays("short",!1,!1),1);case"EEEE":return Is(t.weekdays("long",!1,!1),1);case"ccc":return Is(t.weekdays("short",!0,!1),1);case"cccc":return Is(t.weekdays("long",!0,!1),1);case"Z":case"ZZ":return OD(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return OD(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return dE(/[a-z_+-/]{1,256}?/i);default:return y(_)}})(e)||{invalidReason:t1e};return v.token=e,v}const o1e={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};function a1e(e,t,r){const{type:i,value:n}=e;if(i==="literal")return{literal:!0,val:n};const s=r[i];let o=o1e[i];if(typeof o=="object"&&(o=o[s]),o)return{literal:!1,val:o}}function l1e(e){return[`^${e.map(r=>r.regex).reduce((r,i)=>`${r}(${i.source})`,"")}$`,e]}function u1e(e,t,r){const i=e.match(t);if(i){const n={};let s=1;for(const o in r)if(Xf(r,o)){const a=r[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(n[a.token.val[0]]=a.deser(i.slice(s,s+l))),s+=l}return[i,n]}else return[i,{}]}function c1e(e){const t=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,i;return Ge(e.z)||(r=bl.create(e.z)),Ge(e.Z)||(r||(r=new Ti(e.Z)),i=e.Z),Ge(e.q)||(e.M=(e.q-1)*3+1),Ge(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Ge(e.u)||(e.S=zA(e.u)),[Object.keys(e).reduce((s,o)=>{const a=t(o);return a&&(s[a]=e[o]),s},{}),r,i]}let hE=null;function d1e(){return hE||(hE=Ce.fromMillis(1555555555555)),hE}function h1e(e,t){if(e.literal)return e;const r=Yi.macroTokenToFormatOpts(e.val);if(!r)return e;const s=Yi.create(t,r).formatDateTimeParts(d1e()).map(o=>a1e(o,t,r));return s.includes(void 0)?e:s}function p1e(e,t){return Array.prototype.concat(...e.map(r=>h1e(r,t)))}function AW(e,t,r){const i=p1e(Yi.parseFormat(r),e),n=i.map(o=>s1e(o,e)),s=n.find(o=>o.invalidReason);if(s)return{input:t,tokens:i,invalidReason:s.invalidReason};{const[o,a]=l1e(n),l=RegExp(o,"i"),[c,h]=u1e(t,l,a),[f,m,y]=h?c1e(h):[null,null,void 0];if(Xf(h,"a")&&Xf(h,"H"))throw new pg("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:i,regex:l,rawMatches:c,matches:h,result:f,zone:m,specificOffset:y}}}function f1e(e,t,r){const{result:i,zone:n,specificOffset:s,invalidReason:o}=AW(e,t,r);return[i,n,s,o]}const PW=[0,31,59,90,120,151,181,212,243,273,304,334],RW=[0,31,60,91,121,152,182,213,244,274,305,335];function ds(e,t){return new ao("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function FW(e,t,r){const i=new Date(Date.UTC(e,t-1,r));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const n=i.getUTCDay();return n===0?7:n}function NW(e,t,r){return r+(jv(e)?RW:PW)[t-1]}function DW(e,t){const r=jv(e)?RW:PW,i=r.findIndex(s=>s<t),n=t-r[i];return{month:i+1,day:n}}function dk(e){const{year:t,month:r,day:i}=e,n=NW(t,r,i),s=FW(t,r,i);let o=Math.floor((n-s+10)/7),a;return o<1?(a=t-1,o=RS(a)):o>RS(t)?(a=t+1,o=1):a=t,{weekYear:a,weekNumber:o,weekday:s,...h$(e)}}function AD(e){const{weekYear:t,weekNumber:r,weekday:i}=e,n=FW(t,1,4),s=i0(t);let o=r*7+i-n-3,a;o<1?(a=t-1,o+=i0(a)):o>s?(a=t+1,o-=i0(t)):a=t;const{month:l,day:c}=DW(a,o);return{year:a,month:l,day:c,...h$(e)}}function pE(e){const{year:t,month:r,day:i}=e,n=NW(t,r,i);return{year:t,ordinal:n,...h$(e)}}function PD(e){const{year:t,ordinal:r}=e,{month:i,day:n}=DW(t,r);return{year:t,month:i,day:n,...h$(e)}}function m1e(e){const t=c$(e.weekYear),r=ol(e.weekNumber,1,RS(e.weekYear)),i=ol(e.weekday,1,7);return t?r?i?!1:ds("weekday",e.weekday):ds("week",e.week):ds("weekYear",e.weekYear)}function y1e(e){const t=c$(e.year),r=ol(e.ordinal,1,i0(e.year));return t?r?!1:ds("ordinal",e.ordinal):ds("year",e.year)}function jW(e){const t=c$(e.year),r=ol(e.month,1,12),i=ol(e.day,1,PS(e.year,e.month));return t?r?i?!1:ds("day",e.day):ds("month",e.month):ds("year",e.year)}function VW(e){const{hour:t,minute:r,second:i,millisecond:n}=e,s=ol(t,0,23)||t===24&&r===0&&i===0&&n===0,o=ol(r,0,59),a=ol(i,0,59),l=ol(n,0,999);return s?o?a?l?!1:ds("millisecond",n):ds("second",i):ds("minute",r):ds("hour",t)}const fE="Invalid DateTime",RD=864e13;function Z1(e){return new ao("unsupported zone",`the zone "${e.name}" is not supported`)}function mE(e){return e.weekData===null&&(e.weekData=dk(e.c)),e.weekData}function yy(e,t){const r={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Ce({...r,...t,old:r})}function zW(e,t,r){let i=e-t*60*1e3;const n=r.offset(i);if(t===n)return[i,t];i-=(n-t)*60*1e3;const s=r.offset(i);return n===s?[i,n]:[e-Math.min(n,s)*60*1e3,Math.max(n,s)]}function FD(e,t){e+=t*60*1e3;const r=new Date(e);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function T_(e,t,r){return zW(GA(e),t,r)}function ND(e,t){const r=e.o,i=e.c.year+Math.trunc(t.years),n=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,s={...e.c,year:i,month:n,day:Math.min(e.c.day,PS(i,n))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=We.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=GA(s);let[l,c]=zW(a,r,e.zone);return o!==0&&(l+=o,c=e.zone.offset(l)),{ts:l,o:c}}function gy(e,t,r,i,n,s){const{setZone:o,zone:a}=r;if(e&&Object.keys(e).length!==0){const l=t||a,c=Ce.fromObject(e,{...r,zone:l,specificOffset:s});return o?c:c.setZone(a)}else return Ce.invalid(new ao("unparsable",`the input "${n}" can't be parsed as ${i}`))}function Y1(e,t,r=!0){return e.isValid?Yi.create(Dt.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(e,t):null}function yE(e,t){const r=e.c.year>9999||e.c.year<0;let i="";return r&&e.c.year>=0&&(i+="+"),i+=dr(e.c.year,r?6:4),t?(i+="-",i+=dr(e.c.month),i+="-",i+=dr(e.c.day)):(i+=dr(e.c.month),i+=dr(e.c.day)),i}function DD(e,t,r,i,n,s){let o=dr(e.c.hour);return t?(o+=":",o+=dr(e.c.minute),(e.c.second!==0||!r)&&(o+=":")):o+=dr(e.c.minute),(e.c.second!==0||!r)&&(o+=dr(e.c.second),(e.c.millisecond!==0||!i)&&(o+=".",o+=dr(e.c.millisecond,3))),n&&(e.isOffsetFixed&&e.offset===0&&!s?o+="Z":e.o<0?(o+="-",o+=dr(Math.trunc(-e.o/60)),o+=":",o+=dr(Math.trunc(-e.o%60))):(o+="+",o+=dr(Math.trunc(e.o/60)),o+=":",o+=dr(Math.trunc(e.o%60)))),s&&(o+="["+e.zone.ianaName+"]"),o}const UW={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},g1e={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},v1e={ordinal:1,hour:0,minute:0,second:0,millisecond:0},GW=["year","month","day","hour","minute","second","millisecond"],w1e=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],_1e=["year","ordinal","hour","minute","second","millisecond"];function jD(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new Hq(e);return t}function VD(e,t){const r=Fu(t.zone,$r.defaultZone),i=Dt.fromObject(t),n=$r.now();let s,o;if(Ge(e.year))s=n;else{for(const c of GW)Ge(e[c])&&(e[c]=UW[c]);const a=jW(e)||VW(e);if(a)return Ce.invalid(a);const l=r.offset(n);[s,o]=T_(e,l,r)}return new Ce({ts:s,zone:r,loc:i,o})}function zD(e,t,r){const i=Ge(r.round)?!0:r.round,n=(o,a)=>(o=UA(o,i||r.calendary?0:2,!0),t.loc.clone(r).relFormatter(r).format(o,a)),s=o=>r.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(r.unit)return n(s(r.unit),r.unit);for(const o of r.units){const a=s(o);if(Math.abs(a)>=1)return n(a,o)}return n(e>t?-0:0,r.units[r.units.length-1])}function UD(e){let t={},r;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],r=Array.from(e).slice(0,e.length-1)):r=Array.from(e),[t,r]}class Ce{constructor(t){const r=t.zone||$r.defaultZone;let i=t.invalid||(Number.isNaN(t.ts)?new ao("invalid input"):null)||(r.isValid?null:Z1(r));this.ts=Ge(t.ts)?$r.now():t.ts;let n=null,s=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(r))[n,s]=[t.old.c,t.old.o];else{const a=r.offset(this.ts);n=FD(this.ts,a),i=Number.isNaN(n.year)?new ao("invalid input"):null,n=i?null:n,s=i?null:a}this._zone=r,this.loc=t.loc||Dt.create(),this.invalid=i,this.weekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new Ce({})}static local(){const[t,r]=UD(arguments),[i,n,s,o,a,l,c]=r;return VD({year:i,month:n,day:s,hour:o,minute:a,second:l,millisecond:c},t)}static utc(){const[t,r]=UD(arguments),[i,n,s,o,a,l,c]=r;return t.zone=Ti.utcInstance,VD({year:i,month:n,day:s,hour:o,minute:a,second:l,millisecond:c},t)}static fromJSDate(t,r={}){const i=I0e(t)?t.valueOf():NaN;if(Number.isNaN(i))return Ce.invalid("invalid input");const n=Fu(r.zone,$r.defaultZone);return n.isValid?new Ce({ts:i,zone:n,loc:Dt.fromObject(r)}):Ce.invalid(Z1(n))}static fromMillis(t,r={}){if(ih(t))return t<-RD||t>RD?Ce.invalid("Timestamp out of range"):new Ce({ts:t,zone:Fu(r.zone,$r.defaultZone),loc:Dt.fromObject(r)});throw new ls(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,r={}){if(ih(t))return new Ce({ts:t*1e3,zone:Fu(r.zone,$r.defaultZone),loc:Dt.fromObject(r)});throw new ls("fromSeconds requires a numerical input")}static fromObject(t,r={}){t=t||{};const i=Fu(r.zone,$r.defaultZone);if(!i.isValid)return Ce.invalid(Z1(i));const n=$r.now(),s=Ge(r.specificOffset)?i.offset(n):r.specificOffset,o=FS(t,jD),a=!Ge(o.ordinal),l=!Ge(o.year),c=!Ge(o.month)||!Ge(o.day),h=l||c,f=o.weekYear||o.weekNumber,m=Dt.fromObject(r);if((h||a)&&f)throw new pg("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&a)throw new pg("Can't mix ordinal dates with month/day");const y=f||o.weekday&&!h;let g,v,_=FD(n,s);y?(g=w1e,v=g1e,_=dk(_)):a?(g=_1e,v=v1e,_=pE(_)):(g=GW,v=UW);let w=!1;for(const F of g){const q=o[F];Ge(q)?w?o[F]=v[F]:o[F]=_[F]:w=!0}const b=y?m1e(o):a?y1e(o):jW(o),S=b||VW(o);if(S)return Ce.invalid(S);const M=y?AD(o):a?PD(o):o,[T,k]=T_(M,s,i),N=new Ce({ts:T,zone:i,o:k,loc:m});return o.weekday&&h&&t.weekday!==N.weekday?Ce.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${N.toISO()}`):N}static fromISO(t,r={}){const[i,n]=Pve(t);return gy(i,n,r,"ISO 8601",t)}static fromRFC2822(t,r={}){const[i,n]=Rve(t);return gy(i,n,r,"RFC 2822",t)}static fromHTTP(t,r={}){const[i,n]=Fve(t);return gy(i,n,r,"HTTP",r)}static fromFormat(t,r,i={}){if(Ge(t)||Ge(r))throw new ls("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=i,o=Dt.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[a,l,c,h]=f1e(o,t,r);return h?Ce.invalid(h):gy(a,l,i,`format ${r}`,t,c)}static fromString(t,r,i={}){return Ce.fromFormat(t,r,i)}static fromSQL(t,r={}){const[i,n]=Gve(t);return gy(i,n,r,"SQL",t)}static invalid(t,r=null){if(!t)throw new ls("need to specify a reason the DateTime is invalid");const i=t instanceof ao?t:new ao(t,r);if($r.throwOnInvalid)throw new S0e(i);return new Ce({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?mE(this).weekYear:NaN}get weekNumber(){return this.isValid?mE(this).weekNumber:NaN}get weekday(){return this.isValid?mE(this).weekday:NaN}get ordinal(){return this.isValid?pE(this.c).ordinal:NaN}get monthShort(){return this.isValid?J1.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?J1.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?J1.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?J1.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return jv(this.year)}get daysInMonth(){return PS(this.year,this.month)}get daysInYear(){return this.isValid?i0(this.year):NaN}get weeksInWeekYear(){return this.isValid?RS(this.weekYear):NaN}resolvedLocaleOptions(t={}){const{locale:r,numberingSystem:i,calendar:n}=Yi.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:r,numberingSystem:i,outputCalendar:n}}toUTC(t=0,r={}){return this.setZone(Ti.instance(t),r)}toLocal(){return this.setZone($r.defaultZone)}setZone(t,{keepLocalTime:r=!1,keepCalendarTime:i=!1}={}){if(t=Fu(t,$r.defaultZone),t.equals(this.zone))return this;if(t.isValid){let n=this.ts;if(r||i){const s=t.offset(this.ts),o=this.toObject();[n]=T_(o,s,t)}return yy(this,{ts:n,zone:t})}else return Ce.invalid(Z1(t))}reconfigure({locale:t,numberingSystem:r,outputCalendar:i}={}){const n=this.loc.clone({locale:t,numberingSystem:r,outputCalendar:i});return yy(this,{loc:n})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const r=FS(t,jD),i=!Ge(r.weekYear)||!Ge(r.weekNumber)||!Ge(r.weekday),n=!Ge(r.ordinal),s=!Ge(r.year),o=!Ge(r.month)||!Ge(r.day),a=s||o,l=r.weekYear||r.weekNumber;if((a||n)&&l)throw new pg("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&n)throw new pg("Can't mix ordinal dates with month/day");let c;i?c=AD({...dk(this.c),...r}):Ge(r.ordinal)?(c={...this.toObject(),...r},Ge(r.day)&&(c.day=Math.min(PS(c.year,c.month),c.day))):c=PD({...pE(this.c),...r});const[h,f]=T_(c,this.o,this.zone);return yy(this,{ts:h,o:f})}plus(t){if(!this.isValid)return this;const r=We.fromDurationLike(t);return yy(this,ND(this,r))}minus(t){if(!this.isValid)return this;const r=We.fromDurationLike(t).negate();return yy(this,ND(this,r))}startOf(t){if(!this.isValid)return this;const r={},i=We.normalizeUnit(t);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(i==="weeks"&&(r.weekday=1),i==="quarters"){const n=Math.ceil(this.month/3);r.month=(n-1)*3+1}return this.set(r)}endOf(t){return this.isValid?this.plus({[t]:1}).startOf(t).minus(1):this}toFormat(t,r={}){return this.isValid?Yi.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,t):fE}toLocaleString(t=sk,r={}){return this.isValid?Yi.create(this.loc.clone(r),t).formatDateTime(this):fE}toLocaleParts(t={}){return this.isValid?Yi.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:r=!1,suppressMilliseconds:i=!1,includeOffset:n=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=yE(this,o);return a+="T",a+=DD(this,o,r,i,n,s),a}toISODate({format:t="extended"}={}){return this.isValid?yE(this,t==="extended"):null}toISOWeekDate(){return Y1(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:r=!1,includeOffset:i=!0,includePrefix:n=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(n?"T":"")+DD(this,o==="extended",r,t,i,s):null}toRFC2822(){return Y1(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Y1(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?yE(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:r=!1,includeOffsetSpace:i=!0}={}){let n="HH:mm:ss.SSS";return(r||t)&&(i&&(n+=" "),r?n+="z":t&&(n+="ZZ")),Y1(this,n,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():fE}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const r={...this.c};return t.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,r="milliseconds",i={}){if(!this.isValid||!t.isValid)return We.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...i},s=C0e(r).map(We.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,c=Kve(a,l,s,n);return o?c.negate():c}diffNow(t="milliseconds",r={}){return this.diff(Ce.now(),t,r)}until(t){return this.isValid?Ht.fromDateTimes(this,t):this}hasSame(t,r){if(!this.isValid)return!1;const i=t.valueOf(),n=this.setZone(t.zone,{keepLocalTime:!0});return n.startOf(r)<=i&&i<=n.endOf(r)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const r=t.base||Ce.fromObject({},{zone:this.zone}),i=t.padding?this<r?-t.padding:t.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=t.unit;return Array.isArray(t.unit)&&(n=t.unit,s=void 0),zD(r,this.plus(i),{...t,numeric:"always",units:n,unit:s})}toRelativeCalendar(t={}){return this.isValid?zD(t.base||Ce.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(Ce.isDateTime))throw new ls("min requires all arguments be DateTimes");return wD(t,r=>r.valueOf(),Math.min)}static max(...t){if(!t.every(Ce.isDateTime))throw new ls("max requires all arguments be DateTimes");return wD(t,r=>r.valueOf(),Math.max)}static fromFormatExplain(t,r,i={}){const{locale:n=null,numberingSystem:s=null}=i,o=Dt.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return AW(o,t,r)}static fromStringExplain(t,r,i={}){return Ce.fromFormatExplain(t,r,i)}static get DATE_SHORT(){return sk}static get DATE_MED(){return Jq}static get DATE_MED_WITH_WEEKDAY(){return E0e}static get DATE_FULL(){return Zq}static get DATE_HUGE(){return Yq}static get TIME_SIMPLE(){return Qq}static get TIME_WITH_SECONDS(){return Kq}static get TIME_WITH_SHORT_OFFSET(){return Xq}static get TIME_WITH_LONG_OFFSET(){return eW}static get TIME_24_SIMPLE(){return tW}static get TIME_24_WITH_SECONDS(){return rW}static get TIME_24_WITH_SHORT_OFFSET(){return iW}static get TIME_24_WITH_LONG_OFFSET(){return nW}static get DATETIME_SHORT(){return sW}static get DATETIME_SHORT_WITH_SECONDS(){return oW}static get DATETIME_MED(){return aW}static get DATETIME_MED_WITH_SECONDS(){return lW}static get DATETIME_MED_WITH_WEEKDAY(){return T0e}static get DATETIME_FULL(){return uW}static get DATETIME_FULL_WITH_SECONDS(){return cW}static get DATETIME_HUGE(){return dW}static get DATETIME_HUGE_WITH_SECONDS(){return hW}}function vy(e){if(Ce.isDateTime(e))return e;if(e&&e.valueOf&&ih(e.valueOf()))return Ce.fromJSDate(e);if(e&&typeof e=="object")return Ce.fromObject(e);throw new ls(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const gE={ar:[".",","],bg:[",","\xA0"],bs:[",","."],ca:[",","."],cs:[",","\xA0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xA0"],fi:[",","\xA0"],fr:[",","\u202F"],"fr-ch":[",","\u202F"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xA0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xA0"],lv:[",","\xA0"],mk:[",","."],nb:[",","\xA0"],nl:[",","."],pl:[",","\xA0"],pt:[",","."],"pt-pt":[",","\xA0"],ro:[",","."],ru:[",","\xA0"],sk:[",","\xA0"],sl:[",","."],sr:[",","."],sv:[",","\xA0"],th:[".",","],tr:[",","."],uk:[",","\xA0"],vi:[",","."],zh:[".",","]};function BW(e){e||(e=An());let t=e in gE;if(!t){const s=e.split("-");s.length>1&&s[0]in gE&&(e=s[0],t=!0),t||(e="en")}const[r,i,n="#,##0.###"]=gE[e];return{decimal:r,group:i,pattern:n}}function b1e(e,t){const r=BW((t={...t}).locale);t.customs=r;const i=t.pattern||r.pattern;return isNaN(e)||Math.abs(e)===1/0?null:S1e(e,i,t)}const qW=/[#0,]*[#0](?:\.0*#*)?/;function S1e(e,t,r){const i=(r=r||{}).customs.group,n=r.customs.decimal,s=t.split(";"),o=s[0];if((t=s[e<0?1:0]||"-"+o).includes("%"))e*=100;else if(t.includes("\u2030"))e*=1e3;else{if(t.includes("\xA4"))throw new Error("currency notation not supported");if(t.includes("E"))throw new Error("exponential notation not supported")}const a=qW,l=o.match(a);if(!l)throw new Error("unable to find a number expression in pattern: "+t);return r.fractional===!1&&(r.places=0),t.replace(a,$1e(e,l[0],{decimal:n,group:i,places:r.places,round:r.round}))}function $1e(e,t,r){(r=r||{}).places===!0&&(r.places=0),r.places===1/0&&(r.places=6);const i=t.split("."),n=typeof r.places=="string"&&r.places.indexOf(",");let s=r.places;n?s=r.places.substring(n+1):s>=0||(s=(i[1]||[]).length),r.round<0||(e=Number(e.toFixed(Number(s))));const o=String(Math.abs(e)).split("."),a=o[1]||"";if(i[1]||r.places){n&&(r.places=r.places.substring(0,n));const g=r.places!==void 0?r.places:i[1]&&i[1].lastIndexOf("0")+1;g>a.length&&(o[1]=a.padEnd(Number(g),"0")),s<a.length&&(o[1]=a.substr(0,Number(s)))}else o[1]&&o.pop();const l=i[0].replace(",","");let c=l.indexOf("0");c!==-1&&(c=l.length-c,c>o[0].length&&(o[0]=o[0].padStart(c,"0")),l.includes("#")||(o[0]=o[0].substr(o[0].length-c)));let h,f,m=i[0].lastIndexOf(",");if(m!==-1){h=i[0].length-m-1;const g=i[0].substr(0,m);m=g.lastIndexOf(","),m!==-1&&(f=g.length-m-1)}const y=[];for(let g=o[0];g;){const v=g.length-h;y.push(v>0?g.substr(v):g),g=v>0?g.slice(0,v):"",f&&(h=f,f=void 0)}return o[0]=y.reverse().join(r.group||","),o.join(r.decimal||".")}function x1e(e){const t=BW((e=e||{}).locale),r=e.pattern||t.pattern,i=t.group,n=t.decimal;let s=1;if(r.includes("%"))s/=100;else if(r.includes("\u2030"))s/=1e3;else if(r.includes("\xA4"))throw new Error("currency notation not supported");const o=r.split(";");return o.length===1&&o.push("-"+o[0]),{regexp:iv(o,l=>(l="(?:"+Kz(l,".")+")").replace(qW,c=>{const h={signed:!1,separator:e.strict?i:[i,""],fractional:e.fractional,decimal:n,exponent:!1},f=c.split(".");let m=e.places;f.length===1&&s!==1&&(f[1]="###"),f.length===1||m===0?h.fractional=!1:(m===void 0&&(m=e.pattern?f[1].lastIndexOf("0")+1:1/0),m&&e.fractional==null&&(h.fractional=!0),!e.places&&m<f[1].length&&(m+=","+f[1].length),h.places=m);const y=f[0].split(",");return y.length>1&&(h.groupSize=y.pop().length,y.length>1&&(h.groupSize2=y.pop().length)),"("+T1e(h)+")"}),!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:i,decimal:n,factor:s}}function E1e(e,t){const r=x1e(t),i=new RegExp("^"+r.regexp+"$").exec(e);if(!i)return NaN;let n=i[1];if(!i[1]){if(!i[2])return NaN;n=i[2],r.factor*=-1}return n=n.replace(new RegExp("["+r.group+"\\s\\xa0]","g"),"").replace(r.decimal,"."),Number(n)*r.factor}function T1e(e){"places"in(e=e||{})||(e.places=1/0),typeof e.decimal!="string"&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=GD(e),r=iv(e.fractional,n=>{let s="";return n&&e.places!==0&&(s="\\"+e.decimal,e.places===1/0?s="(?:"+s+"\\d+)?":s+="\\d{"+e.places+"}"),s},!0);let i=t+r;return r&&(i="(?:(?:"+i+")|(?:"+r+"))"),i+iv(e.exponent,n=>n?"([eE]"+GD({signed:e.eSigned})+")":"")}function GD(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",iv(e.signed,t=>t?"[-+]":"",!0)+iv(e.separator,t=>{if(!t)return"(?:\\d+)";(t=Kz(t))===" "?t="\\s":t==="\xA0"&&(t="\\s\\xa0");const r=e.groupSize,i=e.groupSize2;if(i){const n="(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*["+t+"]\\d{"+r+"})";return r-i>0?"(?:"+n+"|(?:0|[1-9]\\d{0,"+(r-1)+"}))":n}return"(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+t+"]\\d{"+r+"})*)"},!0)}const iv=(e,t,r)=>{if(!(e instanceof Array))return t(e);const i=[];for(let n=0;n<e.length;n++)i.push(t(e[n]));return M1e(i.join("|"),r)},M1e=(e,t)=>"("+(t?"?:":"")+e+")";var BD,qD;function O4e(e){return Nv.fromJSON(e.toJSON())}function I1e(e){return e.toJSON?e.toJSON():e}function A4e(e){return typeof e=="string"||e instanceof String}function P4e(e){return typeof e=="number"}function WD(e){return e instanceof Date}function R4e(e,t){return e===t||!(!WD(e)||!WD(t))&&e.getTime()===t.getTime()}function F4e(e){if(e===void 0)return null;if(typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109413;case"kilometers":case"kilometer":case"km":return 109414}return null}function N4e(e){if(e===null)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new Je({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function D4e(e){if(e===void 0)return null;if(typeof e=="number"||typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9035;case"kilometers":case"kilometer":case"km":return 9036}return null}(function(e){e[e.Standardised=0]="Standardised",e[e.StandardisedNoInterval=1]="StandardisedNoInterval",e[e.SqlServer=2]="SqlServer",e[e.Oracle=3]="Oracle",e[e.Postgres=4]="Postgres",e[e.PGDB=5]="PGDB",e[e.FILEGDB=6]="FILEGDB",e[e.NotEvaluated=7]="NotEvaluated"})(BD||(BD={})),function(e){e[e.InFeatureSet=0]="InFeatureSet",e[e.NotInFeatureSet=1]="NotInFeatureSet",e[e.Unknown=2]="Unknown"}(qD||(qD={}));const j4e=1e3,V4e={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},HD={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},z4e={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};function U4e(e){return e===void 0?"":e=(e=(e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function G4e(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const r=typeof t.cycles=="boolean"&&t.cycles,i=t.cmp&&(n=t.cmp,function(o){return function(a,l){const c={key:a,value:o[a]},h={key:l,value:o[l]};return n(c,h)}});var n;const s=[];return function o(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a===void 0)return;if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);let l,c;if(Array.isArray(a)){for(c="[",l=0;l<a.length;l++)l&&(c+=","),c+=o(a[l])||"null";return c+"]"}if(a===null)return"null";if(s.includes(a)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const h=s.push(a)-1,f=Object.keys(a).sort(i&&i(a));for(c="",l=0;l<f.length;l++){const m=f[l],y=o(a[m]);y&&(c&&(c+=","),c+=JSON.stringify(m)+":"+y)}return s.splice(h,1),"{"+c+"}"}(e)}class WW{constructor(t){this.value=t}}class HW{constructor(t){this.value=t}}class ZA{constructor(t){this.fn=t}}class YA{constructor(t,r){this.paramCount=r,this.fn=t}}const C1e=ZA,k1e=HW,L1e=WW,O1e=YA,Cn={type:"VOID"},A1e={type:"BREAK"},P1e={type:"CONTINUE"};function nv(e,t,r){return t===""||t==null||t===r||t===r?e:e=e.split(t).join(r)}function QA(e){return e instanceof ZA||e instanceof b0e||e instanceof YA}function NS(e){return!!Br(e)||!!Si(e)||!!ni(e)||!!bi(e)||e===null||e===Cn||typeof e=="number"}function R1e(e,t){return e===void 0?t:e}function Br(e){return typeof e=="string"||e instanceof String}function bi(e){return typeof e=="boolean"}function Si(e){return typeof e=="number"}function F1e(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function Ss(e){return e instanceof Array}function N1e(e){return(e==null?void 0:e.arcadeDeclaredClass)==="esri.arcade.Feature"}function D1e(e){return(e&&e.declaredRootClass&&e.declaredRootClass==="esri.arcade.featureset.support.FeatureSet")===!0}function j1e(e){return(e&&e.declaredRootClass&&e.declaredRootClass==="esri.arcade.featureSetCollection")===!0}function _h(e){return e instanceof fa}function ni(e){return e instanceof Date}function V1e(e,t,r){if(e.length<t||e.length>r)throw new Error("Function called with wrong number of Parameters")}function z1e(e){return e<0?-Math.round(-e):Math.round(e)}function U1e(){let e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(t==="x"?r:3&r|8).toString(16)})}function KA(e,t){return isNaN(e)===!1?t==null||t===""?e.toString():(t=nv(t,"\u2030",""),t=nv(t,"\xA4",""),b1e(e,{pattern:t})):e.toString()}function p$(e,t){const r=Ce.fromJSDate(e);return t==null||t===""?r.toISO({suppressMilliseconds:!0}):r.toFormat(JW(t),{locale:An(),numberingSystem:"latn"})}function JW(e){e=e.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$&]");let t="";const r=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const i of e.match(r))switch(i){case"D":t+="d";break;case"DD":t+="dd";break;case"DDD":t+="o";break;case"d":t+="c";break;case"ddd":t+="ccc";break;case"dddd":t+="cccc";break;case"M":t+="L";break;case"MM":t+="LL";break;case"MMM":t+="LLL";break;case"MMMM":t+="LLLL";break;case"YY":t+="yy";break;case"Y":case"YYYY":t+="yyyy";break;case"Q":t+="q";break;case"Z":t+="ZZ";break;case"ZZ":t+="ZZZ";break;case"S":t+="'S'";break;case"SS":t+="'SS'";break;case"SSS":t+="u";break;case"A":case"a":t+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":t+=i;break;default:i.length>=2&&i.slice(0,1)==="["&&i.slice(-1)==="]"?t+=`'${i.slice(1,-1)}'`:t+=`'${i}'`}return t}function tt(e,t,r){switch(r){case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}return!1}function G1e(e,t,r){if(e===null){if(t===null||t===Cn)return tt(null,null,r);if(Si(t))return tt(0,t,r);if(Br(t)||bi(t))return tt(0,Ft(t),r);if(ni(t))return tt(0,t.getTime(),r)}if(e===Cn){if(t===null||t===Cn)return tt(null,null,r);if(Si(t))return tt(0,t,r);if(Br(t)||bi(t))return tt(0,Ft(t),r);if(ni(t))return tt(0,t.getTime(),r)}else if(Si(e)){if(Si(t))return tt(e,t,r);if(bi(t))return tt(e,Ft(t),r);if(t===null||t===Cn)return tt(e,0,r);if(Br(t))return tt(e,Ft(t),r);if(ni(t))return tt(e,t.getTime(),r)}else if(Br(e)){if(Br(t))return tt(rc(e),rc(t),r);if(ni(t))return tt(Ft(e),t.getTime(),r);if(Si(t))return tt(Ft(e),t,r);if(t===null||t===Cn)return tt(Ft(e),0,r);if(bi(t))return tt(Ft(e),Ft(t),r)}else if(ni(e)){if(ni(t))return tt(e,t,r);if(t===null||t===Cn)return tt(e.getTime(),0,r);if(Si(t))return tt(e.getTime(),t,r);if(bi(t)||Br(t))return tt(e.getTime(),Ft(t),r)}else if(bi(e)){if(bi(t))return tt(e,t,r);if(Si(t))return tt(Ft(e),Ft(t),r);if(ni(t))return tt(Ft(e),t.getTime(),r);if(t===null||t===Cn)return tt(Ft(e),0,r);if(Br(t))return tt(Ft(e),Ft(t),r)}return!!ZW(e,t)&&(r==="<="||r===">=")}function ZW(e,t){if(e===t||e===null&&t===Cn||t===null&&e===Cn)return!0;if(ni(e)&&ni(t))return e.getTime()===t.getTime();if(e instanceof VA||e instanceof kh)return e.equalityTest(t);if(e instanceof ye&&t instanceof ye){const r=e.cache._arcadeCacheId,i=t.cache._arcadeCacheId;if(r!=null)return r===i}return e!==void 0&&t!==void 0&&e!==null&&t!==null&&typeof e=="object"&&typeof t=="object"&&(e._arcadeCacheId===t._arcadeCacheId&&e._arcadeCacheId!==void 0&&e._arcadeCacheId!==null||e._underlyingGraphic===t._underlyingGraphic&&e._underlyingGraphic!==void 0&&e._underlyingGraphic!==null)}function rc(e,t){if(Br(e))return e;if(e===null)return"";if(Si(e))return KA(e,t);if(bi(e))return e.toString();if(ni(e))return p$(e,t);if(e instanceof on)return JSON.stringify(e.toJSON());if(Ss(e)){const r=[];for(let i=0;i<e.length;i++)r[i]=DS(e[i]);return"["+r.join(",")+"]"}if(e instanceof fa){const r=[];for(let i=0;i<e.length();i++)r[i]=DS(e.get(i));return"["+r.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText():QA(e)?"object, Function":""}function B1e(e){const t=[];if(Ss(e)===!1)return null;if(e instanceof fa){for(let r=0;r<e.length();r++)t[r]=Ft(e.get(r));return t}for(let r=0;r<e.length;r++)t[r]=Ft(e[r]);return t}function M_(e,t){if(Br(e))return e;if(e===null)return"";if(Si(e))return KA(e,t);if(bi(e))return e.toString();if(ni(e))return p$(e,t);if(e instanceof on)return e instanceof Je?'{"xmin":'+e.xmin.toString()+',"ymin":'+e.ymin.toString()+","+(e.hasZ?'"zmin":'+e.zmin.toString()+",":"")+(e.hasM?'"mmin":'+e.mmin.toString()+",":"")+'"xmax":'+e.xmax.toString()+',"ymax":'+e.ymax.toString()+","+(e.hasZ?'"zmax":'+e.zmax.toString()+",":"")+(e.hasM?'"mmax":'+e.mmax.toString()+",":"")+'"spatialReference":'+hk(e.spatialReference)+"}":hk(e.toJSON(),(r,i)=>r.key===i.key?0:r.key==="spatialReference"?1:i.key==="spatialReference"||r.key<i.key?-1:r.key>i.key?1:0);if(Ss(e)){const r=[];for(let i=0;i<e.length;i++)r[i]=DS(e[i]);return"["+r.join(",")+"]"}if(e instanceof fa){const r=[];for(let i=0;i<e.length();i++)r[i]=DS(e.get(i));return"["+r.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText():QA(e)?"object, Function":""}function DS(e){if(e===null)return"null";if(bi(e)||Si(e)||Br(e))return JSON.stringify(e);if(e instanceof on||e instanceof fa||e instanceof Array)return M_(e);if(e instanceof Date)return JSON.stringify(p$(e,""));if(e!==null&&typeof e=="object"){if(e.castToText!==void 0)return e.castToText()}else if(e===Cn)return"null";return"null"}function Ft(e,t){return Si(e)?e:e===null||e===""?0:ni(e)?NaN:bi(e)?e?1:0:Ss(e)||e===""||e===void 0?NaN:t!==void 0&&Br(e)?(t=nv(t,"\u2030",""),t=nv(t,"\xA4",""),E1e(e,{pattern:t})):e===Cn?0:Number(e)}function q1e(e){if(ni(e))return e;if(Br(e)){const t=YW(e);if(t)return t.toJSDate()}return null}function W1e(e){return ni(e)?Ce.fromJSDate(e):Br(e)?YW(e):null}function YW(e){const t=/ (\d\d)/;let r=Ce.fromISO(e);return r.isValid||t.test(e)&&(e=e.replace(t,"T$1"),r=Ce.fromISO(e),r.isValid)?r:null}function H1e(e){return bi(e)?e:Br(e)?(e=e.toLowerCase())==="true":!!Si(e)&&e!==0&&!isNaN(e)}function J1e(e,t){return R(e)?null:(e.spatialReference!==null&&e.spatialReference!==void 0||(e.spatialReference=t),e)}function Z1e(e){if(e===null)return null;if(e instanceof ye)return e.x==="NaN"||e.x===null||isNaN(e.x)?null:e;if(e instanceof ws){if(e.rings.length===0)return null;for(const t of e.rings)if(t.length>0)return e;return null}if(e instanceof Ei){if(e.paths.length===0)return null;for(const t of e.paths)if(t.length>0)return e;return null}return e instanceof wm?e.points.length===0?null:e:e instanceof Je?e.xmin==="NaN"||e.xmin===null||isNaN(e.xmin)?null:e:null}function QW(e,t){if(!e||!e.domain)return t;let r=null;if(e.field.type==="string"||e.field.type==="esriFieldTypeString")t=rc(t);else{if(t==null)return null;if(t==="")return t;t=Ft(t)}for(let i=0;i<e.domain.codedValues.length;i++){const n=e.domain.codedValues[i];n.code===t&&(r=n)}return r===null?t:r.name}function KW(e,t){if(!e||!e.domain)return t;let r=null;t=rc(t);for(let i=0;i<e.domain.codedValues.length;i++){const n=e.domain.codedValues[i];n.name===t&&(r=n)}return r===null?t:r.code}function f$(e,t,r=null,i=null){if(!t||!t.fields)return null;let n,s,o=null;for(let a=0;a<t.fields.length;a++){const l=t.fields[a];l.name.toLowerCase()===e.toString().toLowerCase()&&(o=l)}if(o===null)throw new Error("Field not found");return i===null&&r&&t.typeIdField&&(i=r.hasField(t.typeIdField)?r.field(t.typeIdField):null),i!=null&&t.types.some(function(a){return a.id===i&&(n=a.domains&&a.domains[o.name],n&&n.type==="inherited"&&(n=JD(o.name,t),s=!0),!0)}),s||n||(n=JD(e,t)),{field:o,domain:n}}function JD(e,t){let r;return t.fields.some(function(i){return i.name.toLowerCase()===e.toLowerCase()&&(r=i.domain),!!r}),r}function hk(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const r=typeof t.cycles=="boolean"&&t.cycles,i=t.cmp&&(n=t.cmp,function(o){return function(a,l){const c={key:a,value:o[a]},h={key:l,value:o[l]};return n(c,h)}});var n;const s=[];return function o(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a===void 0)return;if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);let l,c;if(Array.isArray(a)){for(c="[",l=0;l<a.length;l++)l&&(c+=","),c+=o(a[l])||"null";return c+"]"}if(a===null)return"null";if(s.includes(a)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const h=s.push(a)-1,f=Object.keys(a).sort(i&&i(a));for(c="",l=0;l<f.length;l++){const m=f[l],y=o(a[m]);y&&(c&&(c+=","),c+=JSON.stringify(m)+":"+y)}return s.splice(h,1),"{"+c+"}"}(e)}function Y1e(e){if(e===null)return null;const t=[];for(const r of e)r&&r.arcadeDeclaredClass&&r.arcadeDeclaredClass==="esri.arcade.Feature"?t.push(r.geometry()):t.push(r);return t}function em(e,t){if(!(t instanceof ye))throw new Error("Invalid Argument");e.push(t.hasZ?t.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])}function Q1e(e,t){if(Ss(e)||_h(e)){let r=!1,i=!1,n=[],s=t;if(Ss(e)){for(const o of e)em(n,o);n.length>0&&(s=e[0].spatialReference,r=e[0].hasZ,i=e[0].hasM)}else if(e instanceof kh)n=e._elements,n.length>0&&(r=e._hasZ,i=e._hasM,s=e.get(0).spatialReference);else{if(!_h(e))throw new Error("Invalid Argument");for(const o of e.toArray())em(n,o);n.length>0&&(s=e.get(0).spatialReference,r=e.get(0).hasZ===!0,i=e.get(0).hasM===!0)}return n.length===0?null:(E3(n,i,r)===!1&&(n=n.slice(0).reverse()),new ws({rings:[n],spatialReference:s,hasZ:r,hasM:i}))}return e}function K1e(e,t){if(Ss(e)||_h(e)){let r=!1,i=!1,n=[],s=t;if(Ss(e)){for(const o of e)em(n,o);n.length>0&&(s=e[0].spatialReference,r=e[0].hasZ===!0,i=e[0].hasM===!0)}else if(e instanceof kh)n=e._elements,n.length>0&&(r=e._hasZ,i=e._hasM,s=e.get(0).spatialReference);else if(_h(e)){for(const o of e.toArray())em(n,o);n.length>0&&(s=e.get(0).spatialReference,r=e.get(0).hasZ===!0,i=e.get(0).hasM===!0)}return n.length===0?null:new Ei({paths:[n],spatialReference:s,hasZ:r,hasM:i})}return e}function X1e(e,t){if(Ss(e)||_h(e)){let r=!1,i=!1,n=[],s=t;if(Ss(e)){for(const o of e)em(n,o);n.length>0&&(s=e[0].spatialReference,r=e[0].hasZ===!0,i=e[0].hasM===!0)}else if(e instanceof kh)n=e._elements,n.length>0&&(r=e._hasZ,i=e._hasM,s=e.get(0).spatialReference);else if(_h(e)){for(const o of e.toArray())em(n,o);n.length>0&&(s=e.get(0).spatialReference,r=e.get(0).hasZ===!0,i=e.get(0).hasM===!0)}return n.length===0?null:new wm({points:n,spatialReference:s,hasZ:r,hasM:i})}return e}function ewe(e,t=!1){const r=[];if(e===null)return r;if(Ss(e)===!0){for(let i=0;i<e.length;i++){const n=rc(e[i]);n===""&&t!==!0||r.push(n)}return r}if(e instanceof fa){for(let i=0;i<e.length();i++){const n=rc(e.get(i));n===""&&t!==!0||r.push(n)}return r}if(NS(e)){const i=rc(e);return i===""&&t!==!0||r.push(i),r}return[]}let vE=0;function twe(e){return vE++,vE%100==0?(vE=0,new Promise(t=>{setTimeout(()=>{t(e)},0)})):e}function rwe(e,t,r){switch(r){case"&":return e&t;case"|":return e|t;case"^":return e^t;case"<<":return e<<t;case">>":return e>>t;case">>>":return e>>>t}}function sv(e,t=null){return e==null?null:bi(e)||Si(e)||Br(e)?e:e instanceof on?(t==null?void 0:t.keepGeometryType)===!0?e:e.toJSON():e instanceof fa?e.toArray().map(r=>sv(r,t)):e instanceof Array?e.map(r=>sv(r,t)):e instanceof Date?e:e!==null&&typeof e=="object"&&e.castAsJson!==void 0?e.castAsJson(t):null}async function iwe(e,t,r,i,n){const s=await XA(e,t,r);n[i]=s}async function XA(e,t=null,r=null){if(e instanceof fa&&(e=e.toArray()),e==null)return null;if(NS(e)||e instanceof on||e instanceof Date)return sv(e,r);if(e instanceof Array){const i=[],n=[];for(const s of e)s===null||NS(s)||s instanceof on||s instanceof Date?n.push(sv(s,r)):(n.push(null),i.push(iwe(s,t,r,n.length-1,n)));return i.length>0&&await Promise.all(i),n}return e!==null&&typeof e=="object"&&e.castAsJsonAsync!==void 0?e.castAsJsonAsync(t,r):null}function nwe(e,t,r){const i=e.fullSchema();return i===null||!i.fields?null:f$(t,i,e,r)}function swe(e){const t=e.fullSchema();return t===null?null:t.fields&&t.typeIdField?{subtypeField:t.typeIdField,subtypes:t.types?t.types.map(r=>({name:r.name,code:r.id})):[]}:null}function owe(e,t,r,i){const n=e.fullSchema();if(n===null||!n.fields)return null;const s=f$(t,n,e,i);if(r===void 0)try{r=e.field(t)}catch{return null}return QW(s,r)}function awe(e,t,r,i){const n=e.fullSchema();if(n===null||!n.fields)return null;if(r===void 0){try{r=e.field(t)}catch{return null}return r}return KW(f$(t,n,e,i),r)}function lwe(e){const t=e.fullSchema();if(t===null||!t.fields)return null;const r=[];for(const i of t.fields)r.push(I1e(i));return{objectIdField:t.objectIdField,globalIdField:t.globalIdField,geometryType:HD[t.geometryType]===void 0?"":HD[t.geometryType],fields:r}}const B4e=Object.freeze(Object.defineProperty({__proto__:null,ReturnResultE:WW,ImplicitResultE:HW,NativeFunctionE:ZA,SizzleFunctionE:YA,NativeFunction:C1e,ImplicitResult:k1e,ReturnResult:L1e,SizzleFunction:O1e,voidOperation:Cn,breakResult:A1e,continueResult:P1e,multiReplace:nv,isFunctionParameter:QA,isSimpleType:NS,defaultUndefined:R1e,isString:Br,isBoolean:bi,isNumber:Si,isInteger:F1e,isArray:Ss,isFeature:N1e,isFeatureSet:D1e,isFeatureSetCollection:j1e,isImmutableArray:_h,isDate:ni,pcCheck:V1e,absRound:z1e,generateUUID:U1e,formatNumber:KA,formatDate:p$,standardiseDateFormat:JW,greaterThanLessThan:G1e,equalityTest:ZW,toString:rc,toNumberArray:B1e,toStringExplicit:M_,toNumber:Ft,toDate:q1e,toDateTime:W1e,toBoolean:H1e,fixSpatialReference:J1e,fixNullGeometry:Z1e,getDomainValue:QW,getDomainCode:KW,getDomain:f$,stableStringify:hk,autoCastFeatureToGeometry:Y1e,autoCastArrayOfPointsToPolygon:Q1e,autoCastArrayOfPointsToPolyline:K1e,autoCastArrayOfPointsToMultiPoint:X1e,toStringArray:ewe,tick:twe,binaryOperator:rwe,castAsJson:sv,castAsJsonAsync:XA,featureFullDomain:nwe,featureSubtypes:swe,featureDomainValueLookup:owe,featureDomainCodeLookup:awe,featureSchema:lwe},Symbol.toStringTag,{value:"Module"}));var pk;let mg=pk=class extends B{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new pk({minValue:this.minValue,maxValue:this.maxValue})}};u([d({type:Number,json:{write:!0}})],mg.prototype,"minValue",void 0),u([d({type:Number,json:{write:!0}})],mg.prototype,"maxValue",void 0),mg=pk=u([E("esri.renderer.support.AuthoringInfoClassBreakInfo")],mg);var fk;let ku=fk=class extends B{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new fk({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:P(this.classBreakInfos)})}};u([d({type:String,json:{write:!0}})],ku.prototype,"field",void 0),u([d({type:String,json:{write:!0}})],ku.prototype,"normalizationField",void 0),u([d({type:String,json:{write:!0}})],ku.prototype,"label",void 0),u([d({type:[mg],json:{write:!0}})],ku.prototype,"classBreakInfos",void 0),ku=fk=u([E("esri.renderers.support.AuthoringInfoFieldInfo")],ku);var mk;const Q1=new Ee({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),K1=new Ee({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),ZD={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},YD=["high-to-low","above-and-below","centered-on","extremes"],QD=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],KD=["seconds","minutes","hours","days","months","years"];let Vi=mk=class extends B{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new mk({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};u([d({types:ZD,json:{write:!0}})],Vi.prototype,"endTime",void 0),u([ze("endTime")],Vi.prototype,"castEndTime",null),u([d({type:String,json:{write:!0}})],Vi.prototype,"field",void 0),u([d({type:Number,json:{write:!0}})],Vi.prototype,"maxSliderValue",void 0),u([d({type:Number,json:{write:!0}})],Vi.prototype,"minSliderValue",void 0),u([d({types:ZD,json:{write:!0}})],Vi.prototype,"startTime",void 0),u([ze("startTime")],Vi.prototype,"castStartTime",null),u([d({type:Q1.apiValues,value:null,json:{type:Q1.jsonValues,read:Q1.read,write:Q1.write}})],Vi.prototype,"style",null),u([d({type:QD,value:null,json:{type:QD,origins:{"web-scene":{type:YD,write:{writer:(e,t)=>{YD.includes(e)&&(t.theme=e)}}}},write:!0}})],Vi.prototype,"theme",null),u([d({type:K1.apiValues,json:{type:K1.jsonValues,read:K1.read,write:K1.write}})],Vi.prototype,"type",void 0),u([d({type:KD,json:{type:KD,write:!0}})],Vi.prototype,"units",void 0),Vi=mk=u([E("esri.renderers.support.AuthoringInfoVisualVariable")],Vi);const uwe=Vi;let I_=class extends B{constructor(e){super(e),this.type=null}};u([d({readOnly:!0,json:{read:!1,write:!0}})],I_.prototype,"type",void 0),I_=u([E("esri.rest.support.ColorRamp")],I_);const eP=I_;var yk;let ed=yk=class extends eP{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new yk({fromColor:P(this.fromColor),toColor:P(this.toColor),algorithm:this.algorithm})}};u([me({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],ed.prototype,"algorithm",void 0),u([d({type:ae,json:{type:[ct],write:!0}})],ed.prototype,"fromColor",void 0),u([d({type:ae,json:{type:[ct],write:!0}})],ed.prototype,"toColor",void 0),u([d({type:["algorithmic"]})],ed.prototype,"type",void 0),ed=yk=u([E("esri.rest.support.AlgorithmicColorRamp")],ed);const tP=ed;var gk;let yg=gk=class extends eP{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new gk({colorRamps:P(this.colorRamps)})}};u([d({type:[tP],json:{write:!0}})],yg.prototype,"colorRamps",void 0),u([d({type:["multipart"]})],yg.prototype,"type",void 0),yg=gk=u([E("esri.rest.support.MultipartColorRamp")],yg);const XW=yg,cwe={key:"type",base:eP,typeMap:{algorithmic:tP,multipart:XW}};function dwe(e){return e&&e.type?e.type==="algorithmic"?tP.fromJSON(e):e.type==="multipart"?XW.fromJSON(e):null:null}var vk;const $c=new Ee({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),X1=new Ee({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),XD=new Ee({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),e4=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],hwe=["high-to-low","above-and-below","above","below","90-10"],pwe=["flow-line","wave-front"],fwe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Xt=vk=class extends B{constructor(e){super(e),this.colorRamp=null,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){if(e)return dwe(e)}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new vk({classificationMethod:this.classificationMethod,colorRamp:P(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:P(this.field1),field2:P(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};u([d({type:$c.apiValues,value:null,json:{type:$c.jsonValues,read:$c.read,write:$c.write,origins:{"web-document":{default:"manual",type:$c.jsonValues,read:$c.read,write:$c.write}}}})],Xt.prototype,"classificationMethod",null),u([d({types:cwe,json:{write:!0}})],Xt.prototype,"colorRamp",void 0),u([te("colorRamp")],Xt.prototype,"readColorRamp",null),u([d({type:[String],value:null,json:{write:!0}})],Xt.prototype,"fields",null),u([d({type:ku,value:null,json:{write:!0}})],Xt.prototype,"field1",null),u([d({type:ku,value:null,json:{write:!0}})],Xt.prototype,"field2",null),u([d({type:pwe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Xt.prototype,"flowTheme",null),u([d({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Xt.prototype,"focus",null),u([d({type:Number,value:null,json:{type:ct,write:!0}})],Xt.prototype,"numClasses",null),u([d({type:e4,json:{type:e4,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Xt.prototype,"lengthUnit",void 0),u([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Xt.prototype,"maxSliderValue",void 0),u([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Xt.prototype,"minSliderValue",void 0),u([d({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Xt.prototype,"statistics",null),u([d({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Xt.prototype,"standardDeviationInterval",null),u([d({type:X1.apiValues,value:null,json:{type:X1.jsonValues,read:X1.read,write:X1.write,origins:{"web-scene":{type:XD.jsonValues,write:{writer:XD.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],Xt.prototype,"type",null),u([d({type:[uwe],json:{write:!0}})],Xt.prototype,"visualVariables",void 0),u([d({type:fwe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Xt.prototype,"univariateSymbolStyle",null),u([d({type:hwe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Xt.prototype,"univariateTheme",null),Xt=vk=u([E("esri.renderers.support.AuthoringInfo")],Xt);const eH=Xt,wE=new Ee({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let gg=class extends B{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const t=new Set;return await this.collectRequiredFields(t,e),Array.from(t).sort()}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};u([d({type:eH,json:{write:!0}})],gg.prototype,"authoringInfo",void 0),u([d({type:wE.apiValues,readOnly:!0,json:{type:wE.jsonValues,read:!1,write:{writer:wE.write,ignoreOrigin:!0}}})],gg.prototype,"type",void 0),gg=u([E("esri.renderers.Renderer")],gg);const Tl=gg;var wk;let kf=wk=class extends B{constructor(){super(...arguments),this.title=null}clone(){return new wk({title:this.title})}};u([d({type:String,json:{write:!0}})],kf.prototype,"title",void 0),kf=wk=u([E("esri.renderers.support.LegendOptions")],kf);var _k;let C_=_k=class extends kf{constructor(){super(...arguments),this.showLegend=null}clone(){return new _k({title:this.title,showLegend:this.showLegend})}};u([d({type:Boolean,json:{write:!0}})],C_.prototype,"showLegend",void 0),C_=_k=u([E("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],C_);const tH=C_,mwe=Z.getLogger("esri.renderers.visualVariables.VisualVariable"),_E=new Ee({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let zs=class extends B{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(mwe.error(".field: field must be a string value"),null):Sv(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};u([d()],zs.prototype,"index",void 0),u([d({type:_E.apiValues,readOnly:!0,json:{read:_E.read,write:_E.write}})],zs.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],zs.prototype,"field",void 0),u([ze("field")],zs.prototype,"castField",null),u([d({type:String,json:{write:!0}})],zs.prototype,"valueExpression",void 0),u([d({type:String,json:{write:!0}})],zs.prototype,"valueExpressionTitle",void 0),u([d({readOnly:!0})],zs.prototype,"arcadeRequired",null),u([d({type:tH,json:{write:!0}})],zs.prototype,"legendOptions",void 0),zs=u([E("esri.renderers.visualVariables.VisualVariable")],zs);const Gv=zs;var bk;let td=bk=class extends Gv{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){return new bk({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};u([d({readOnly:!0})],td.prototype,"cache",null),u([d({type:["color"],json:{type:["colorInfo"]}})],td.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],td.prototype,"normalizationField",void 0),u([d({type:[Tme],json:{write:!0}})],td.prototype,"stops",null),td=bk=u([E("esri.renderers.visualVariables.ColorVariable")],td);const rH=td;var Sk;let lu=Sk=class extends B{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return N0(t.transparency)}writeOpacity(e,t,r){t[r]=D2(e)}clone(){return new Sk({label:this.label,opacity:this.opacity,value:this.value})}};u([d({type:String,json:{write:!0}})],lu.prototype,"label",void 0),u([d({type:Number,json:{type:ct,write:{target:"transparency"}}})],lu.prototype,"opacity",void 0),u([te("opacity",["transparency"])],lu.prototype,"readOpacity",null),u([se("opacity")],lu.prototype,"writeOpacity",null),u([d({type:Number,json:{write:!0}})],lu.prototype,"value",void 0),lu=Sk=u([E("esri.renderers.visualVariables.support.OpacityStop")],lu);const ywe=lu;var $k;let rd=$k=class extends Gv{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){return new $k({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};u([d({readOnly:!0})],rd.prototype,"cache",null),u([d({type:["opacity"],json:{type:["transparencyInfo"]}})],rd.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],rd.prototype,"normalizationField",void 0),u([d({type:[ywe],json:{write:!0}})],rd.prototype,"stops",null),rd=$k=u([E("esri.renderers.visualVariables.OpacityVariable")],rd);const iH=rd;var xk;let Da=xk=class extends Gv{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,r,i){if(i&&i.messages){const n=`visualVariables[${this.index}]`;i.messages.push(new O("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpressionTitle",context:i}))}}clone(){return new xk({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};u([d({readOnly:!0})],Da.prototype,"cache",null),u([d({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Da.prototype,"axis",void 0),u([d({type:["rotation"],json:{type:["rotationInfo"]}})],Da.prototype,"type",void 0),u([d({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Da.prototype,"rotationType",void 0),u([d({type:String,json:{write:!0}})],Da.prototype,"valueExpressionTitle",void 0),u([se("web-scene","valueExpressionTitle")],Da.prototype,"writeValueExpressionTitleWebScene",null),Da=xk=u([E("esri.renderers.visualVariables.RotationVariable")],Da);const nH=Da;var Ek;let gp=Ek=class extends B{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new Ek({label:this.label,size:this.size,value:this.value})}};u([d({type:String,json:{write:!0}})],gp.prototype,"label",void 0),u([d({type:Number,cast:Be,json:{write:!0}})],gp.prototype,"size",void 0),u([d({type:Number,json:{write:!0}})],gp.prototype,"value",void 0),gp=Ek=u([E("esri.renderers.visualVariables.support.SizeStop")],gp);const gwe=gp;var Tk;let k_=Tk=class extends tH{constructor(){super(...arguments),this.customValues=null}clone(){return new Tk({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};u([d({type:[Number],json:{write:!0}})],k_.prototype,"customValues",void 0),k_=Tk=u([E("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],k_);const sH=k_;var dl,Er;function nf(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function ov(e){return e!=null&&!isNaN(e)&&isFinite(e)}function oH(e){return e.valueExpression?dl.Expression:e.field&&typeof e.field=="string"?dl.Field:dl.Unknown}function vwe(e,t){const r=t||oH(e),i=e.valueUnit||"unknown";return r===dl.Unknown?Er.Constant:e.stops?Er.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?Er.ClampedLinear:i==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?Er.Proportional:Er.Additive:Er.Identity:Er.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(dl||(dl={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(Er||(Er={}));const aH={inches:Qn(1,"meters","inches"),feet:Qn(1,"meters","feet"),"us-feet":Qn(1,"meters","us-feet"),yards:Qn(1,"meters","yards"),miles:Qn(1,"meters","miles"),"nautical-miles":Qn(1,"meters","nautical-miles"),millimeters:Qn(1,"meters","millimeters"),centimeters:Qn(1,"meters","centimeters"),decimeters:Qn(1,"meters","decimeters"),meters:Qn(1,"meters","meters"),kilometers:Qn(1,"meters","kilometers"),"decimal-degrees":1/mce(1,"meters",ht.radius)},pc=Z.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),t4=new ln,L_=Math.PI,lH=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function uH(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="color"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void pc.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const n=typeof t=="number",s=n?null:t,o=s&&s.attributes;let a=n?t:null;const l=i.field,{ipData:c,hasExpression:h}=i.cache;let f=i.cache.compiledFunc;if(!l&&!h){const g=i.stops;return g&&g[0]&&g[0].color}if(typeof a!="number")if(h){if(R(r)||R(r.arcade))return void pc.error("Use of arcade expressions requires an arcade context");const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,_=v.getViewInfo(g),w=v.createExecContext(s,_);if(!f){const b=v.createSyntaxTree(i.valueExpression);f=v.createFunction(b),i.cache.compiledFunc=f}a=v.executeFunction(f,w)}else o&&(a=o[l]);const m=i.normalizationField,y=o?parseFloat(o[m]):void 0;if(a!=null&&(!m||n||!isNaN(y)&&y!==0)){isNaN(y)||n||(a/=y);const g=rP(a,c);if(g){const v=g[0],_=g[1],w=v===_?i.stops[v].color:ae.blendColors(i.stops[v].color,i.stops[_].color,g[2],I(r)?r.color:void 0);return new ae(w)}}}function cH(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="opacity"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void pc.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const n=typeof t=="number",s=n?null:t,o=s&&s.attributes;let a=n?t:null;const l=i.field,{ipData:c,hasExpression:h}=i.cache;let f=i.cache.compiledFunc;if(!l&&!h){const g=i.stops;return g&&g[0]&&g[0].opacity}if(typeof a!="number")if(h){if(R(r)||R(r.arcade))return void pc.error("Use of arcade expressions requires an arcade context");const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,_=v.getViewInfo(g),w=v.createExecContext(s,_);if(!f){const b=v.createSyntaxTree(i.valueExpression);f=v.createFunction(b),i.cache.compiledFunc=f}a=v.executeFunction(f,w)}else o&&(a=o[l]);const m=i.normalizationField,y=o?parseFloat(o[m]):void 0;if(a!=null&&(!m||n||!isNaN(y)&&y!==0)){isNaN(y)||n||(a/=y);const g=rP(a,c);if(g){const v=g[0],_=g[1];if(v===_)return i.stops[v].opacity;{const w=i.stops[v].opacity;return w+(i.stops[_].opacity-w)*g[2]}}}}function dH(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(y=>y.type==="rotation"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void pc.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const n=i.axis||"heading",s=n==="heading"&&i.rotationType==="arithmetic"?90:0,o=n==="heading"&&i.rotationType==="arithmetic"?-1:1,a=typeof t=="number"?null:t,l=a&&a.attributes,c=i.field,{hasExpression:h}=i.cache;let f=i.cache.compiledFunc,m=0;if(!c&&!h)return m;if(h){if(R(r)||R(r.arcade))return void pc.error("Use of arcade expressions requires an arcade context");const y={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},g=r.arcade.arcadeUtils,v=g.getViewInfo(y),_=g.createExecContext(a,v);if(!f){const w=g.createSyntaxTree(i.valueExpression);f=g.createFunction(w),i.cache.compiledFunc=f}m=g.executeFunction(f,_)}else l&&(m=l[c]||0);return m=typeof m!="number"||isNaN(m)?null:s+o*m,m}function wwe(e,t,r){const i=typeof t=="number",n=i?null:t,s=n&&n.attributes;let o=i?t:null;const{isScaleDriven:a}=e.cache;let l=e.cache.compiledFunc;if(a){const h=I(r)?r.scale:void 0,f=I(r)?r.view:void 0;o=h==null||f==="3d"?_we(e):h}else if(!i)switch(e.inputValueType){case dl.Expression:{if(R(r)||R(r.arcade))return void pc.error("Use of arcade expressions requires an arcade context");const h={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},f=r.arcade.arcadeUtils,m=f.getViewInfo(h),y=f.createExecContext(n,m);if(!l){const g=f.createSyntaxTree(e.valueExpression);l=f.createFunction(g),e.cache.compiledFunc=l}o=f.executeFunction(l,y);break}case dl.Field:s&&(o=s[e.field]);break;case dl.Unknown:o=null}if(!ov(o))return null;if(i||!e.normalizationField)return o;const c=s?parseFloat(s[e.normalizationField]):null;return ov(c)&&c!==0?o/c:null}function _we(e){let t=null,r=null;const i=e.stops;return i?(t=i[0].value,r=i[i.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}function m$(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(s=>s.type==="size"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void pc.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const n=pH(wwe(i,t,r),i,t,r,i.cache.ipData);return n==null||isNaN(n)?0:n}function nn(e,t,r){return e==null?null:nf(e)?m$(e,t,r):ov(e)?e:null}function hH(e,t,r){return ov(r)&&e>r?r:ov(t)&&e<t?t:e}function bwe(e,t,r,i){return e+(nn(t.minSize,r,i)||t.minDataValue)}function Swe(e,t,r){const i=e.stops;let n=i&&i.length&&i[0].size;return n==null&&(n=e.minSize),nn(n,t,r)}function $we(e,t,r,i){const n=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),s=nn(t.minSize,r,i),o=nn(t.maxSize,r,i),a=I(i)?i.shape:void 0;if(e<=t.minDataValue)return s;if(e>=t.maxDataValue)return o;if(t.scaleBy==="area"&&a){const l=a==="circle",c=l?L_*(s/2)**2:s*s,h=c+n*((l?L_*(o/2)**2:o*o)-c);return l?2*Math.sqrt(h/L_):Math.sqrt(h)}return s+n*(o-s)}function xwe(e,t,r,i){const n=I(i)?i.shape:void 0,s=e/t.minDataValue,o=nn(t.minSize,r,i),a=nn(t.maxSize,r,i);let l=null;return l=n==="circle"?2*Math.sqrt(s*(o/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(s*o**2):s*o,hH(l,o,a)}function Ewe(e,t,r,i,n){const[s,o,a]=rP(e,n);if(s===o)return nn(t.stops[s].size,r,i);{const l=nn(t.stops[s].size,r,i);return l+(nn(t.stops[o].size,r,i)-l)*a}}function Twe(e,t,r,i){const n=(I(i)&&i.resolution?i.resolution:1)*aH[t.valueUnit],s=nn(t.minSize,r,i),o=nn(t.maxSize,r,i),{valueRepresentation:a}=t;let l=null;return l=a==="area"?2*Math.sqrt(e/L_)/n:a==="radius"||a==="distance"?2*e/n:e/n,hH(l,s,o)}function pH(e,t,r,i,n){switch(t.transformationType){case Er.Additive:return bwe(e,t,r,i);case Er.Constant:return Swe(t,r,i);case Er.ClampedLinear:return $we(e,t,r,i);case Er.Proportional:return xwe(e,t,r,i);case Er.Stops:return Ewe(e,t,r,i,n);case Er.RealWorldSize:return Twe(e,t,r,i);case Er.Identity:return e;case Er.Unknown:return null}}function Mwe(e,t,r){const{isScaleDriven:i}=e.cache;if(!(i&&r==="3d"||t))return null;const n={scale:t,view:r};let s=nn(e.minSize,t4,n),o=nn(e.maxSize,t4,n);if(s!=null||o!=null){if(s>o){const a=o;o=s,s=a}return{minSize:s,maxSize:o}}}function Iwe(e,t,r){if(!e.visualVariables)return;const i=[],n=[],s=[],o=[],a=[];for(const l of e.visualVariables)switch(l.type){case"color":n.push(l);break;case"opacity":s.push(l);break;case"rotation":a.push(l);break;case"size":o.push(l)}return n.forEach(l=>{const c=uH(l,t,r);i.push({variable:l,value:c})}),s.forEach(l=>{const c=cH(l,t,r);i.push({variable:l,value:c})}),a.forEach(l=>{const c=dH(l,t,r);i.push({variable:l,value:c})}),o.forEach(l=>{const c=m$(l,t,r);i.push({variable:l,value:c})}),i.filter(l=>l.value!=null)}function rP(e,t){if(!t)return;let r=0,i=t.length-1;return t.some((n,s)=>e<n?(i=s,!0):(r=s,!1)),[r,i,(e-t[r])/(t[i]-t[r])]}function Cwe(e,t,r){const i=["proportional","proportional","proportional"];for(const n of e){const s=n.useSymbolValue?"symbol-value":m$(n,t,r);switch(n.axis){case"width":i[0]=s;break;case"depth":i[1]=s;break;case"height":i[2]=s;break;case"width-and-depth":i[0]=s,i[1]=s;break;case"all":case void 0:case null:i[0]=s,i[1]=s,i[2]=s;break;default:n.axis}}return i}const Oh=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:Cwe,getColor:uH,getOpacity:cH,getRotationAngle:dH,getSize:m$,getSizeForValue:pH,getSizeFromNumberOrVariable:nn,getSizeRangeAtScale:Mwe,getVisualVariableValues:Iwe,viewScaleRE:lH},Symbol.toStringTag,{value:"Module"}));var Mk;const jh=Z.getLogger("esri.renderers.visualVariables.SizeVariable"),ew=new Ee({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),Ik=new Ee({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function r4(e){if(e!=null)return typeof e=="string"||typeof e=="number"?Be(e):e.type==="size"?nf(e)?e:(delete(e={...e}).type,new qe(e)):void 0}function i4(e,t,r){if(typeof e!="object")return e;const i=new qe;return i.read(e,r),i}let qe=Mk=class extends Gv{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:lH.test(this.valueExpression)}}set expression(e){jh.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),e==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){nf(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),nf(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return oH(this)}set maxDataValue(e){e&&this.stops&&(jh.warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(jh.warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return r4(e)}readMaxSize(e,t,r){return i4(e,t,r)}set minDataValue(e){e&&this.stops&&(jh.warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(jh.warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return r4(e)}readMinSize(e,t,r){return i4(e,t,r)}get arcadeRequired(){return!!this.valueExpression||this.minSize&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value):e&&(jh.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return vwe(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,r,i){if(e==="$view.scale"){if(i&&i.messages){const n=this.index,s=typeof n=="string"?n:`visualVariables[${n}]`;i.messages.push(new O("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:i}))}}else t[r]=e}readValueUnit(e){return e?Ik.read(e):null}clone(){return new Mk({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:nf(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:nf(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===Er.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===Er.Stops){const e=this.stops,t=e.map(i=>i.size).reverse(),r=e.length;for(let i=0;i<r;i++)e[i].size=t[i];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};u([d({readOnly:!0})],qe.prototype,"cache",null),u([d({type:ew.apiValues,json:{type:ew.jsonValues,origins:{"web-map":{read:!1}},read:ew.read,write:ew.write}})],qe.prototype,"axis",void 0),u([d({type:String,value:null,json:{read:!1}})],qe.prototype,"expression",null),u([d()],qe.prototype,"index",null),u([d({type:String,readOnly:!0})],qe.prototype,"inputValueType",null),u([d({type:sH,json:{write:!0}})],qe.prototype,"legendOptions",void 0),u([d({type:Number,value:null,json:{write:!0}})],qe.prototype,"maxDataValue",null),u([d({type:Number,value:null,json:{write:!0}})],qe.prototype,"maxSize",null),u([ze("maxSize")],qe.prototype,"castMaxSize",null),u([te("maxSize")],qe.prototype,"readMaxSize",null),u([d({type:Number,value:null,json:{write:!0}})],qe.prototype,"minDataValue",null),u([d({type:Number,value:null,json:{write:!0}})],qe.prototype,"minSize",null),u([ze("minSize")],qe.prototype,"castMinSize",null),u([te("minSize")],qe.prototype,"readMinSize",null),u([d({type:String,json:{write:!0}})],qe.prototype,"normalizationField",void 0),u([d({readOnly:!0})],qe.prototype,"arcadeRequired",null),u([d({type:String})],qe.prototype,"scaleBy",void 0),u([d({type:[gwe],value:null,json:{write:!0}})],qe.prototype,"stops",null),u([d({type:["outline"],json:{write:!0}})],qe.prototype,"target",void 0),u([d({type:String,readOnly:!0})],qe.prototype,"transformationType",null),u([d({type:["size"],json:{type:["sizeInfo"]}})],qe.prototype,"type",void 0),u([d({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],qe.prototype,"useSymbolValue",void 0),u([d({type:String,json:{write:!0}})],qe.prototype,"valueExpression",void 0),u([te("valueExpression",["valueExpression","expression"])],qe.prototype,"readValueExpression",null),u([se("web-scene","valueExpression")],qe.prototype,"writeValueExpressionWebScene",null),u([d({type:["radius","diameter","area","width","distance"],json:{write:!0}})],qe.prototype,"valueRepresentation",void 0),u([d({type:Ik.apiValues,json:{write:Ik.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],qe.prototype,"valueUnit",void 0),u([te("valueUnit")],qe.prototype,"readValueUnit",null),qe=Mk=u([E("esri.renderers.visualVariables.SizeVariable")],qe);const iP=qe,kwe=Z.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),Lwe={color:rH,size:iP,opacity:iH,rotation:nH},Owe=new Ee({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),Awe=/^\[([^\]]+)\]$/i;let O_=class extends le{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter(t=>!!t))&&e.length){for(const t of e)switch(t.type){case"color":this.colorVariables.push(t);break;case"opacity":this.opacityVariables.push(t);break;case"rotation":this.rotationVariables.push(t);break;case"size":this.sizeVariables.push(t)}this.sizeVariables.length&&this.sizeVariables.some(t=>!!t.target)&&e.sort((t,r)=>{let i=null;return i=t.target===r.target?0:t.target?1:-1,i});for(let t=0;t<e.length;t++)e[t].index=t;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,t,r){const{rotationExpression:i,rotationType:n}=t,s=i&&i.match(Awe),o=s&&s[1];if(o&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:n,field:o})),e)return e.map(a=>{const l=Owe.read(a.type),c=Lwe[l];c||(kwe.warn(`Unknown variable type: ${l}`),r&&r.messages&&r.messages.push(new ki("visual-variable:unsupported",`visualVariable of type '${l}' is not supported`,{definition:a,context:r})));const h=new c;return h.read(a,r),h})}writeVariables(e,t){const r=[];for(const i of e){const n=i.toJSON(t);n&&r.push(n)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};u([d()],O_.prototype,"visualVariables",null),O_=u([E("esri.renderers.visualVariables.VisualVariableFactory")],O_);const Pwe=O_,Rwe={base:Gv,key:"type",typeMap:{opacity:iH,color:rH,rotation:nH,size:iP}},Fm=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new Pwe}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(r,i,n){return this._vvFactory.readVariables(r,i,n)}writeVisualVariables(r,i,n,s){i[n]=this._vvFactory.writeVariables(r,s)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const r of this.visualVariables)if(r.arcadeRequired)return!0;return!1}hasVisualVariables(r,i){return r?this.getVisualVariablesForType(r,i).length>0:this.getVisualVariablesForType("size",i).length>0||this.getVisualVariablesForType("color",i).length>0||this.getVisualVariablesForType("opacity",i).length>0||this.getVisualVariablesForType("rotation",i).length>0}getVisualVariablesForType(r,i){const n=this.visualVariables;return n?n.filter(s=>s.type===r&&(typeof i=="string"?s.target===i:i!==!1||!s.target)):[]}async collectVVRequiredFields(r,i){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const s of n)s&&(s.field&&ms(r,i,s.field),s.normalizationField&&ms(r,i,s.normalizationField),s.valueExpression&&await Oi(r,i,s.valueExpression))}};return u([d({types:[Rwe],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),u([te("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),u([se("visualVariables")],t.prototype,"writeVisualVariables",null),t=u([E("esri.renderers.mixins.VisualVariablesMixin")],t),t},wy={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function Fwe(e,t=wy){var a,l;if(!e)return{symbol:null};const{retainId:r=wy.retainId,ignoreDrivers:i=wy.ignoreDrivers,hasLabelingContext:n=wy.hasLabelingContext,retainCIM:s=wy.retainCIM}=t;let o;if(aa(e)||e instanceof Ih)o=e.clone();else if(e.type==="cim"){const c=(l=(a=e.data)==null?void 0:a.symbol)==null?void 0:l.type;if(c!=="CIMPointSymbol")return{error:new O("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${c||"unknown"}' is unsupported in 3D`,{symbol:e})};o=s?e.clone():Pd.fromCIMSymbol(e)}else if(e instanceof hn)o=q2.fromSimpleLineSymbol(e);else if(e instanceof rn)o=Pd.fromSimpleMarkerSymbol(e);else if(e instanceof Lv)o=Pd.fromPictureMarkerSymbol(e);else if(e instanceof ha)o=Ov.fromSimpleFillSymbol(e);else{if(!(e instanceof xm))return{error:new O("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};o=n?B2.fromTextSymbol(e):Pd.fromTextSymbol(e)}if(r&&o.type!=="cim"&&(o.id=e.id),i&&aa(o))for(let c=0;c<o.symbolLayers.length;++c)o.symbolLayers.getItemAt(c)._ignoreDrivers=!0;return{symbol:o}}const Nwe=["building-scene","integrated-mesh","point-cloud","scene"];function jS(e,t,r,i){const n=fH(e,{},{context:i,isLabelSymbol:!1});I(n)&&(t[r]=n)}function n4(e,t,r,i){const n=fH(e,{},{context:i,isLabelSymbol:!0});I(n)&&(t[r]=n)}function s4(e){return e instanceof $m||e instanceof Ih}function fH(e,t,r){var a;if(R(e))return null;const{context:i,isLabelSymbol:n}=r,s=i==null?void 0:i.origin,o=i==null?void 0:i.messages;if(s==="web-scene"&&!s4(e)){const l=Fwe(e,{retainCIM:!0,hasLabelingContext:n});return I(l.symbol)?l.symbol.write(t,i):(o==null||o.push(new O("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:i,error:l.error})),null)}return(s==="web-map"||s==="portal-item"&&!Nwe.includes((a=i==null?void 0:i.layer)==null?void 0:a.type))&&s4(e)?(o==null||o.push(new O("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:i})),null):e.write(t,i)}function mH(e,t){return Tue(e,null,t)}const Bv={types:sG,json:{write:{writer:jS},origins:{"web-scene":{types:RN,write:{writer:jS},read:{reader:fm({types:RN})}}}}},yH={types:{base:dn,key:"type",typeMap:{"simple-fill":Xd.typeMap["simple-fill"],"picture-fill":Xd.typeMap["picture-fill"],"polygon-3d":Xd.typeMap["polygon-3d"]}},json:{write:{writer:jS},origins:{"web-scene":{type:Ov,write:{writer:jS}}}}};var Ck;let uu=Ck=class extends B{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new Ck({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};u([d({type:String,json:{write:!0}})],uu.prototype,"description",void 0),u([d({type:String,json:{write:!0}})],uu.prototype,"label",void 0),u([d({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],uu.prototype,"minValue",void 0),u([d({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],uu.prototype,"maxValue",void 0),u([d(Bv)],uu.prototype,"symbol",void 0),uu=Ck=u([E("esri.renderers.support.ClassBreakInfo")],uu);const VS=uu;var kk;const tw=Z.getLogger("esri.renderers.ClassBreaksRenderer"),gH="log",A_="percent-of-total",P_="field",rw=new Ee({esriNormalizeByLog:gH,esriNormalizeByPercentOfTotal:A_,esriNormalizeByField:P_}),Dwe=dt(VS);let ar=kk=class extends Fm(Tl){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,r){if(!Array.isArray(e))return;let i=t.minValue;return e.map(n=>{const s=new VS;return s.read(n,r),s.minValue==null&&(s.minValue=i),s.maxValue==null&&(s.maxValue=s.minValue),i=s.maxValue,s})}writeClassBreakInfos(e,t,r,i){const n=e.map(s=>s.write({},i));this._areClassBreaksConsecutive()&&n.forEach(s=>delete s.classMinValue),t[r]=n}castField(e){return e==null?e:typeof e=="function"?(tw.error(".field: field must be a string value"),null):Sv(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=this.normalizationTotal!=null;return t||r?(e=t&&P_||r&&A_||null,t&&r&&tw.warn("warning: both normalizationField and normalizationTotal are set!")):e!==P_&&e!==A_||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,r){let i=null;i=typeof e=="number"?new VS({minValue:e,maxValue:t,symbol:oG(r)}):Dwe(P(e)),this.classBreakInfos.push(i),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const r=this.classBreakInfos.length;for(let i=0;i<r;i++){const n=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(n[0]===e&&n[1]===t){this.classBreakInfos.splice(i,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(R(t)||R(t.arcade))&&tw.warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let r=t;this.valueExpression&&(R(t)||R(t.arcade))&&(r={...r,arcade:await vl()});const i=this.getBreakIndex(e,r);return i!==-1?this.classBreakInfos[i]:null}getSymbol(e,t){if(this.valueExpression&&(R(t)||R(t.arcade)))return void tw.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this.getBreakIndex(e,t);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(R(t)||R(t.arcade))){const n=await vl(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),r={...r,arcade:n}}const i=this.getBreakIndex(e,r);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((i,n)=>i+n.getMeshHash(),"")}.${r}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new kk({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:P(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:P(this.visualVariables),legendOptions:P(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map(i=>i.collectRequiredFields(e,t)),Oi(e,t,this.valueExpression)];ms(e,t,this.field),ms(e,t,this.normalizationField),await Promise.all(r)}_getBreakIndexForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:n,arcade:s}=S2(t,{});let o=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null;const a=s.arcadeUtils;if(!o){const c=a.createSyntaxTree(this.valueExpression);o=a.createFunction(c),this._compiledValueExpression.compiledFunction=o}this._compiledValueExpression.valueExpression=this.valueExpression;const l=a.executeFunction(o,a.createExecContext(e,a.getViewInfo({viewingMode:r,scale:i,spatialReference:n})));return this._getBreakIndexfromInfos(l)}_getBreakIndexForField(e){const t=this.field,r=e.attributes,i=this.normalizationType;let n=parseFloat(r[t]);if(i){const s=this.normalizationTotal,o=parseFloat(r[this.normalizationField]);if(i===gH)n=Math.log(n)*Math.LOG10E;else if(i!==A_||isNaN(s)){if(i===P_&&!isNaN(o)){if(isNaN(n)||isNaN(o))return-1;n/=o}}else n=n/s*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let r=0;r<this.classBreakInfos.length;r++){const i=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(i[0]<=e&&(t?e<=i[1]:e<i[1]))return r}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let r=1;r<t;r++)if(e[r-1].maxValue!==e[r].minValue)return!1;return!0}};u([d(yH)],ar.prototype,"backgroundFillSymbol",void 0),u([d({type:[VS]})],ar.prototype,"classBreakInfos",void 0),u([te("classBreakInfos")],ar.prototype,"readClassBreakInfos",null),u([se("classBreakInfos")],ar.prototype,"writeClassBreakInfos",null),u([d({type:String,json:{write:!0}})],ar.prototype,"defaultLabel",void 0),u([d(Bv)],ar.prototype,"defaultSymbol",void 0),u([d({type:String,json:{write:!0}})],ar.prototype,"field",void 0),u([ze("field")],ar.prototype,"castField",null),u([d({type:Boolean})],ar.prototype,"isMaxInclusive",void 0),u([d({type:kf,json:{write:!0}})],ar.prototype,"legendOptions",void 0),u([d({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],ar.prototype,"minValue",null),u([d({type:String,json:{write:!0}})],ar.prototype,"normalizationField",void 0),u([d({type:Number,cast:e=>as(e),json:{write:!0}})],ar.prototype,"normalizationTotal",void 0),u([d({type:rw.apiValues,value:null,json:{type:rw.jsonValues,read:rw.read,write:rw.write}})],ar.prototype,"normalizationType",null),u([me({classBreaks:"class-breaks"})],ar.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],ar.prototype,"valueExpression",void 0),u([d({type:String,json:{write:!0}})],ar.prototype,"valueExpressionTitle",void 0),ar=kk=u([E("esri.renderers.ClassBreaksRenderer")],ar);const vH=ar;class jwe{constructor(t,r){this._storage=new KB,this._storage.maxSize=t,r&&this._storage.registerRemoveFunc("",r)}put(t,r,i){this._storage.put(t,r,i,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}}const o4=Z.getLogger("esri.renderers.support.DictionaryLoader"),Vwe={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class nP{constructor(t,r,i){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new jwe(100),this.url=t,this.config=r,this.fieldMap=i}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,r){let i;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(r));try{i=await this._dictionaryPromise}catch(y){if(ui(y))return this._dictionaryPromise=null,null}const n={};if(this.fieldMap)for(const y of this._symbolFields){const g=this.fieldMap[y];if(g&&t.attributes[g]!=null){const v=""+t.attributes[g];n[y]=v}else n[y]=""}const s=i(n,r);if(!s||typeof s!="string")return null;const o=qO(s).toString(),a=this._symbolCache.get(o);if(a)return a.catch(()=>{this._symbolCache.pop(o)}),a;const l=s.split(";"),c=[],h=[];for(const y of l)if(y)if(y.includes("po:")){const g=y.substr(3).split("|");if(g.length===3){const v=g[0],_=g[1];let w=g[2];if(_==="DashTemplate")w=w.split(" ").map(b=>Number(b));else if(_==="Color"){const b=new ae(w).toRgba();w=[b[0],b[1],b[2],255*b[3]]}else w=Number(w);h.push({primitiveName:v,propertyName:_,value:w})}}else if(y.includes("|")){for(const g of y.split("|"))if(this._itemNames.has(g)){c.push(g);break}}else this._itemNames.has(y)&&c.push(y);const f=!I(t.geometry)||!t.geometry.hasZ&&t.geometry.type==="point",m=this._cimPartsToCIMSymbol(c,h,f,r);return this._symbolCache.put(o,m,1),m}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void o4.error("no valid URL!");const r=nt(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:I(t)?t.signal:null}),[{data:i}]=await Promise.all([r,vl()]);if(!i)throw this._dictionaryPromise=null,new O("esri.renderers.DictionaryRenderer","Bad dictionary data!");const n=i.expression,s=i.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+i.cimRefTemplateUrl,this._itemNames=new Set(i.itemsNames),this._symbolFields=s.symbol;const o={};if(this.config){const l=this.config;for(const c in l)o[c]=l[c]}if(s.configuration)for(const l of s.configuration)o.hasOwnProperty(l.name)||(o[l.name]=l.value);const a=[];if(I(t)&&t.fields&&this.fieldMap)for(const l of this._symbolFields){const c=this.fieldMap[l],h=t.fields.filter(f=>f.name===c);h.length>0&&a.push({...h[0],name:l})}return this._dictionaryPromise=Nae(n,I(t)?t.spatialReference:null,a,o).then(l=>{const c={scale:0};return(h,f)=>{const m=l.repurposeFeature({geometry:null,attributes:h});return c.scale=I(f)?f.scale:void 0,l.evaluate({$feature:m,$view:c})}}).catch(l=>(o4.error("Creating dictinoary expression failed:",l),null)),this._dictionaryPromise}async _cimPartsToCIMSymbol(t,r,i,n){const s=new Array(t.length);for(let l=0;l<t.length;l++)s[l]=this._getSymbolPart(t[l],n);const o=await Promise.all(s),a=this.fieldMap;for(const l of o)wH(l,a);return new Iv({data:this._combineSymbolParts(o,r,i)})}async _getSymbolPart(t,r){if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(s=>s.data);const i=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),n=nt(i,{responseType:"json",query:{f:"json"},...r});this._ongoingRequests.set(t,n);try{return(await n).data}catch(s){throw this._ongoingRequests.delete(t),s}}_combineSymbolParts(t,r,i){if(!t||t.length===0)return null;const n={...t[0]};if(t.length>1){n.symbolLayers=[];for(const s of t){const o=s;n.symbolLayers.unshift(...o.symbolLayers)}}return i&&(n.callout=Vwe),{type:"CIMSymbolReference",symbol:n,primitiveOverrides:r}}}function wH(e,t){if(!e)return;const r=e.symbolLayers;if(!r)return;let i=r.length;for(;i--;){const n=r[i];n&&n.enable!==!1&&n.type==="CIMVectorMarker"&&zwe(n,t)}}function zwe(e,t){const r=e.markerGraphics;if(r)for(const i of r){if(!i)continue;const n=i.symbol;if(n)switch(n.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":wH(n,t);break;case"CIMTextSymbol":n.fieldMap=t}}}const q4e=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:nP},Symbol.toStringTag,{value:"Module"}));var Lk;let Us=Lk=class extends Fm(Tl){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new nP(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,r,i){i!=null&&i.origin||super.writeVisualVariables(e,t,r,i)}clone(){return new Lk({config:P(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:P(this.fieldMap),url:P(this.url),visualVariables:P(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await Oi(e,t,this.scaleExpression);for(const r in this.fieldMap){const i=this.fieldMap[r];t.has(i)&&e.add(i)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};u([d({type:nP})],Us.prototype,"_loader",null),u([d({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Us.prototype,"config",void 0),u([d({type:Object,json:{write:!0}})],Us.prototype,"fieldMap",void 0),u([d({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Us.prototype,"scaleExpression",void 0),u([se("scaleExpression")],Us.prototype,"writeData",null),u([d({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],Us.prototype,"scaleExpressionTitle",void 0),u([d({type:String,json:{write:!0}})],Us.prototype,"url",void 0),u([se("visualVariables")],Us.prototype,"writeVisualVariables",null),Us=Lk=u([E("esri.renderers.DictionaryRenderer")],Us);const Uwe=Us;var Ok;const Gwe=Z.getLogger("esri.renderers.support.AttributeColorInfo");let ja=Ok=class extends B{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(Gwe.error(".field: field must be a string value"),null):Sv(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new Ok({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};u([d({type:ae,json:{type:[Number],write:!0}})],ja.prototype,"color",void 0),u([d({type:String,json:{write:!0}})],ja.prototype,"field",void 0),u([ze("field")],ja.prototype,"castField",null),u([d({type:String,json:{write:!0}})],ja.prototype,"label",void 0),u([d({type:String,json:{write:!0}})],ja.prototype,"valueExpression",void 0),u([d({type:String,json:{write:!0}})],ja.prototype,"valueExpressionTitle",void 0),ja=Ok=u([E("esri.renderers.support.AttributeColorInfo")],ja);const _H=ja;var Ak;let R_=Ak=class extends B{constructor(){super(...arguments),this.unit=null}clone(){return new Ak({unit:this.unit})}};u([d({type:String,json:{write:!0}})],R_.prototype,"unit",void 0),R_=Ak=u([E("esri.renderers.support.DotDensityLegendOptions")],R_);const Bwe=R_;var Pk;let ri=Pk=class extends Fm(Tl){constructor(e){super(e),this.attributes=null,this.backgroundColor=new ae([0,0,0,0]),this.blendDots=!0,this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new hn,this.dotValue=null,this.referenceDotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new ha({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes&&this.attributes.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new Pk({attributes:P(this.attributes),backgroundColor:P(this.backgroundColor),dotBlendingEnabled:P(this.dotBlendingEnabled),dotShape:P(this.dotShape),dotSize:P(this.dotSize),dotValue:P(this.dotValue),legendOptions:P(this.legendOptions),outline:P(this.outline),referenceScale:P(this.referenceScale),visualVariables:P(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return`${this.attributes.map(e=>e.field||e.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes)r.valueExpression&&await Oi(e,t,r.valueExpression),r.field&&e.add(r.field)}};u([d({type:[_H],json:{write:!0}})],ri.prototype,"attributes",void 0),u([d({type:ae,json:{write:!0}})],ri.prototype,"backgroundColor",void 0),u([d({type:Boolean}),X("dotBlendingEnabled")],ri.prototype,"blendDots",void 0),u([d({type:Boolean,json:{write:!0}})],ri.prototype,"dotBlendingEnabled",void 0),u([d({type:String,json:{write:!1}})],ri.prototype,"dotShape",void 0),u([d({type:Number,json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1}}}})],ri.prototype,"dotSize",void 0),u([d({type:Bwe,json:{write:!0}})],ri.prototype,"legendOptions",void 0),u([d({type:hn,json:{default:null,write:!0}})],ri.prototype,"outline",void 0),u([d({type:Number,json:{write:!0}})],ri.prototype,"dotValue",void 0),u([d({type:Number}),X("dotValue")],ri.prototype,"referenceDotValue",void 0),u([d({type:Number,json:{write:!0}})],ri.prototype,"referenceScale",void 0),u([d({type:Number,json:{write:!0}})],ri.prototype,"seed",void 0),u([me({dotDensity:"dot-density"})],ri.prototype,"type",void 0),ri=Pk=u([E("esri.renderers.DotDensityRenderer")],ri);const qwe=ri;let vp=class extends pn(B){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};u([d({type:String,json:{write:!0}})],vp.prototype,"minLabel",void 0),u([d({type:String,json:{write:!0}})],vp.prototype,"maxLabel",void 0),u([d({type:String,json:{write:!0}})],vp.prototype,"title",void 0),vp=u([E("esri.renderers.support.HeatmapLegendOptions")],vp);function y$(){return[0,0,0,0]}function Wwe(e){return[e[0],e[1],e[2],e[3]]}function Nm(e,t,r,i){return[e,t,r,i]}function Hwe(e){const t=y$(),r=Math.min(4,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function Jwe(e,t){return new Float64Array(e,t,4)}function bH(){return y$()}function SH(){return Nm(1,1,1,1)}function $H(){return Nm(1,0,0,0)}function xH(){return Nm(0,1,0,0)}function EH(){return Nm(0,0,1,0)}function TH(){return Nm(0,0,0,1)}const Zwe=bH(),Ywe=SH(),Qwe=$H(),Kwe=xH(),Xwe=EH(),e_e=TH();Object.freeze(Object.defineProperty({__proto__:null,create:y$,clone:Wwe,fromValues:Nm,fromArray:Hwe,createView:Jwe,zeros:bH,ones:SH,unitX:$H,unitY:xH,unitZ:EH,unitW:TH,ZEROS:Zwe,ONES:Ywe,UNIT_X:Qwe,UNIT_Y:Kwe,UNIT_Z:Xwe,UNIT_W:e_e},Symbol.toStringTag,{value:"Module"}));const sP=2.4;function t_e(e){return _s(e*sP)}function r_e(e){return xt(e)/sP}function i_e(e,t,r,i){let{color:n,ratio:s}=t,{color:o,ratio:a}=r;a===s&&(a===1?s-=1e-6:a+=1e-6);const l=an((i-s)/(a-s),0,1);N7(e,n.toArray(),o.toArray(),l)}function W4e(e){const r=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:a})=>a>=0&&a<=1).sort((a,l)=>a.ratio-l.ratio).map(({color:a,ratio:l})=>({color:a,ratio:Math.max(l,.001)})),e.length<1)return r;let i=e[0],n=e[0],s=1;const o=y$();for(let a=0;a<512;a++){const l=(a+.5)/512;for(;l>n.ratio&&s<e.length;)i=n,n=e[s++];i_e(o,i,n,l),r.set(o,4*a)}return r}function H4e(e,t,r,i){const{radius:n,fieldOffset:s,field:o}=t,a=Math.round(xt(n)),l=new Float64Array(r*i);let c,h=Number.NEGATIVE_INFINITY;const f=o_e(o,s),m=new Set;for(const y of e){const g=y.getCursor();for(;g.next();){const v=g.getObjectId();if(m.has(v))continue;m.add(v);const _=g.readLegacyPointGeometry(),w=128;if(_.x<-w||_.x>=r+w||_.y<-w||_.y>i+w)continue;const b=+f(g),S=Math.max(0,Math.round(_.x)-a),M=Math.max(0,Math.round(_.y)-a),T=Math.min(i,Math.round(_.y)+a),k=Math.min(r,Math.round(_.x)+a);for(let N=M;N<T;N++)for(let F=S;F<k;F++){const q=N*r+F,z=s_e(_.x-F,_.y-N,a);c=l[q]+=z*b,c>h&&(h=c)}}}return{matrix:l.buffer,max:h}}function J4e(e,t,r,i,n,s){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);const o=e.getImageData(0,0,t,t);r&&i&&o.data.set(new Uint8ClampedArray(n_e(t,r,i,n,s))),e.putImageData(o,0,0)}function n_e(e,t,r,i,n){const s=new Uint32Array(e*e),o="buffer"in t?t:new Float64Array(t),a="buffer"in r?new Uint32Array(r.buffer):new Uint32Array(new Uint8Array(r).buffer),l=a.length/(n-i);for(let c=0;c<o.length;c++){const h=o[c],f=Math.floor((h-i)*l);s[c]=a[an(f,0,a.length-1)]}return s.buffer}function s_e(e,t,r){const i=Math.sqrt(e**2+t**2)/r;return i>1?0:3/(Math.PI*r**2)*(1-i**2)**2}function Z4e(e,t){return typeof e=="function"?e:e?typeof t=="string"?r=>-1*+r[e]:r=>+r[e]+t:()=>1}function o_e(e,t){return e!=null?typeof t=="string"?r=>-1*+r.readAttribute(e):r=>+r.readAttribute(e)+t:r=>1}var Rk;const a_e=Z.getLogger("esri.renderers.HeatmapRenderer");function a4(e){if(e!=null){const{maxDensity:t,minDensity:r,radius:i}=e;if(t!=null||r!=null||i!=null){const{blurRadius:n,maxPixelIntensity:s,minPixelIntensity:o,...a}=e;return a}}return e}let _r=Rk=class extends Tl{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new e0({ratio:0,color:new ae("rgba(255, 140, 0, 0)")}),new e0({ratio:.75,color:new ae("rgba(255, 140, 0, 1)")}),new e0({ratio:.9,color:new ae("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(e){return a4(e)}get blurRadius(){return r_e(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,r=this.minPixelIntensity;this._set("radius",t_e(e)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",r*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(sP**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(e,t){this._warnedProps[e]||li(this).getDefaultOrigin()==="user"&&(this._warnedProps[e]=!0,pm(()=>{ure(a_e,e,{replacement:`${String(t)} (suggested value: ${this._get(t)})`,version:"4.24"})}))}read(e,t){e=a4(e),super.read(e,t)}getSymbol(){const e=this.referenceScale!==0?5:1,t=Math.min(this.radius*e,_s(256));return new rn({size:t})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const r=this.field,i=this.valueExpression;r&&typeof r=="string"&&await ms(e,t,r),i&&typeof i=="string"&&await Oi(e,t,i)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new Rk({colorStops:P(this.colorStops),field:this.field,legendOptions:P(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};u([d({type:eH,json:{write:!1}})],_r.prototype,"authoringInfo",void 0),u([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],_r.prototype,"blurRadius",null),u([d({type:[e0],json:{write:!0}})],_r.prototype,"colorStops",void 0),u([d({type:String,json:{write:!0}})],_r.prototype,"field",void 0),u([d({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:r==null})},origins:{"web-scene":{write:!1}}}})],_r.prototype,"fieldOffset",void 0),u([d({type:vp,json:{write:!0}})],_r.prototype,"legendOptions",void 0),u([d({type:Number,json:{write:!0}})],_r.prototype,"maxDensity",void 0),u([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],_r.prototype,"maxPixelIntensity",null),u([d({type:Number,json:{write:!0}})],_r.prototype,"minDensity",void 0),u([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],_r.prototype,"minPixelIntensity",null),u([d({type:Number,cast:Be,json:{write:!0}})],_r.prototype,"radius",void 0),u([d({type:Number,range:{min:0},json:{default:0,write:!0}})],_r.prototype,"referenceScale",void 0),u([me({heatmap:"heatmap"})],_r.prototype,"type",void 0),u([d({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],_r.prototype,"valueExpression",void 0),u([d({type:String})],_r.prototype,"valueExpressionTitle",void 0),u([d({readOnly:!0})],_r.prototype,"_pixelIntensityToDensity",null),_r=Rk=u([E("esri.renderers.HeatmapRenderer")],_r);const MH=_r;let xd=class extends pn(B){constructor(){super(...arguments),this.color=new ae([0,0,0,0]),this.label=null,this.threshold=0}};u([d({type:ae,json:{write:!0}})],xd.prototype,"color",void 0),u([d({type:String,json:{write:!0}})],xd.prototype,"label",void 0),u([d({type:Number,range:{min:0,max:1},json:{write:!0}})],xd.prototype,"threshold",void 0),xd=u([E("esri.renderers.support.OthersCategory")],xd);let F_=class extends pn(B){constructor(){super(...arguments),this.title=null}};u([d({type:String,json:{write:!0}})],F_.prototype,"title",void 0),F_=u([E("esri.renderers.support.PieChartLegendOptions")],F_);let _n=class extends Fm(pn(Tl)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new ae([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new xd,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){var e;return new rn({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes)r.valueExpression&&await Oi(e,t,r.valueExpression),r.field&&e.add(r.field)}};u([d({type:[_H],json:{write:!0}})],_n.prototype,"attributes",void 0),u([d({type:ha,json:{default:null,write:!0}})],_n.prototype,"backgroundFillSymbol",void 0),u([d({type:ae,json:{write:!0}})],_n.prototype,"defaultColor",void 0),u([d({type:String,json:{write:!0}})],_n.prototype,"defaultLabel",void 0),u([d({type:Number,range:{min:0,max:1},json:{write:!0}})],_n.prototype,"holePercentage",void 0),u([d({type:xd,json:{write:!0}})],_n.prototype,"othersCategory",void 0),u([d({type:F_,json:{write:!0}})],_n.prototype,"legendOptions",void 0),u([d({type:hn,json:{default:null,write:!0}})],_n.prototype,"outline",void 0),u([d({type:Number,cast:Be,json:{write:!0}})],_n.prototype,"size",void 0),u([me({pieChart:"pie-chart"})],_n.prototype,"type",void 0),_n=u([E("esri.renderers.PieChartRenderer")],_n);const l_e=_n;var Fk;let id=Fk=class extends Fm(Tl){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(r=>r.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new Fk({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:P(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};u([d({type:String,json:{write:!0}})],id.prototype,"description",void 0),u([d({type:String,json:{write:!0}})],id.prototype,"label",void 0),u([d(Bv)],id.prototype,"symbol",void 0),u([me({simple:"simple"})],id.prototype,"type",void 0),id=Fk=u([E("esri.renderers.SimpleRenderer")],id);const oP=id,u_e=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function Nk(e){return e instanceof le}function l4(e){return e instanceof de?Object.keys(e.items):Nk(e)?li(e).keys():e?Object.keys(e):[]}function iw(e,t){return e instanceof de?e.items[t]:e[t]}function c_e(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function s0(e){return e?e.declaredClass:null}function IH(e,t){const r=e.diff;if(r&&typeof r=="function")return r(e,t);const i=l4(e),n=l4(t);if(i.length===0&&n.length===0)return;if(!i.length||!n.length||c_e(e,t))return{type:"complete",oldValue:e,newValue:t};const s=n.filter(f=>!i.includes(f)),o=i.filter(f=>!n.includes(f)),a=i.filter(f=>n.includes(f)&&iw(e,f)!==iw(t,f)).concat(s,o).sort(),l=s0(e);if(l&&u_e.includes(l)&&a.length)return{type:"complete",oldValue:e,newValue:t};let c;const h=Nk(e)&&Nk(t);for(const f of a){const m=iw(e,f),y=iw(t,f);let g;if((h||typeof m!="function"&&typeof y!="function")&&m!==y&&(m!=null||y!=null)){if(r&&r[f]&&typeof r[f]=="function")g=r[f](m,y);else if(m instanceof Date&&y instanceof Date){if(m.getTime()===y.getTime())continue;g={type:"complete",oldValue:m,newValue:y}}else g=typeof m=="object"&&typeof y=="object"&&s0(m)===s0(y)?IH(m,y):{type:"complete",oldValue:m,newValue:y};I(g)&&(I(c)?c.diff[f]=g:c={type:"partial",diff:{[f]:g}})}}return c}function d_e(e,t){if(R(e))return!1;const r=t.split(".");let i=e;for(const n of r){if(i.type==="complete")return!0;if(i.type!=="partial")return!1;{const s=i.diff[n];if(!s)return!1;i=s}}return!0}function Y4e(e,t){for(const r of t)if(d_e(e,r))return!0;return!1}function h_e(e,t){if(!(typeof e=="function"||typeof t=="function"||R(e)&&R(t)))return R(e)||R(t)||typeof e=="object"&&typeof t=="object"&&s0(e)!==s0(t)?{type:"complete",oldValue:e,newValue:t}:IH(e,t)}var Dk;let cu=Dk=class extends B{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}castValue(e){return e==null||typeof e=="string"||typeof e=="number"?e:`${e}`}clone(){return new Dk({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${e}`}};u([d({type:String,json:{write:!0}})],cu.prototype,"description",void 0),u([d({type:String,json:{write:!0}})],cu.prototype,"label",void 0),u([d(Bv)],cu.prototype,"symbol",void 0),u([d({json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}})],cu.prototype,"value",void 0),u([ze("value")],cu.prototype,"castValue",null),cu=Dk=u([E("esri.renderers.support.UniqueValueInfo")],cu);const zS=cu,p_e=()=>!!j("enable-feature:force-wosr"),bE={};async function f_e(e,t){try{return{data:(await aP(e,t)).data,baseUrl:c3(e),styleUrl:e}}catch(r){return bv(r),null}}function m_e(e,t,r){const i=I(t.portal)?t.portal:Mr.getDefault();let n;const s=`${i.url} - ${i.user&&i.user.username} - ${e}`;return bE[s]||(bE[s]=y_e(e,i,r).then(o=>(n=o,o.fetchData())).then(o=>({data:o,baseUrl:n.itemUrl,styleName:e}))),bE[s]}function y_e(e,t,r){return t.load(r).then(()=>{const i=new rl({disableExtraQuery:!0,query:`owner:${u4} AND type:${c4} AND typekeywords:"${e}"`});return t.queryItems(i,r)}).then(({results:i})=>{let n=null;const s=e.toLowerCase();if(i&&Array.isArray(i)){for(const o of i)if(o.typeKeywords.some(a=>a.toLowerCase()===s)&&o.type===c4&&o.owner===u4){n=o;break}}if(!n)throw new O("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return n.load(r)})}function CH(e,t,r){return e.styleUrl?f_e(e.styleUrl,r):e.styleName?m_e(e.styleName,t,r):Promise.reject(new O("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function kH(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function g_e(e,t){if(t==="cimRef")return e.cimRef;if(e.formatInfos&&!p_e()){for(const r of e.formatInfos)if(r.type==="gltf")return r.href}return e.webRef}function aP(e,t){const r={responseType:"json",query:{f:"json"},...t};return nt(fs(e),r)}const u4="esri_en",c4="Style",v_e="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var vg;const xc=Z.getLogger("esri.renderers.UniqueValueRenderer"),w_e=dt(zS);let Rt=vg=class extends Fm(Tl){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this.type="unique-value",this.backgroundFillSymbol=null,this.field=null,this.field2=null,this.field3=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.fieldDelimiter=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,r){if(!t&&!r)return;if(!t||!r)return{type:"complete",oldValue:t,newValue:r};let i=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<r.length;s++){const o=t.find(a=>a.value===r[s].value);o?h_e(o,r[s])?(n.changed.push({type:"complete",oldValue:o,newValue:r[s]}),i=!0):n.unchanged.push({oldValue:o,newValue:r[s]}):(n.added.push(r[s]),i=!0)}for(let s=0;s<t.length;s++)r.find(o=>o.value===t[s].value)||(n.removed.push(t[s]),i=!0);return i?n:void 0}},this._set("uniqueValueInfos",[])}get _cache(){return{compiledFunc:null}}castField(e){return e==null||typeof e=="function"?e:Sv(e)}writeField(e,t,r,i){typeof e=="string"?t[r]=e:i&&i.messages?i.messages.push(new O("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):xc.error(".field: cannot write field to JSON since it's not a string value")}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}readPortal(e,t,r){return r.portal||Mr.getDefault()}readStyleOrigin(e,t,r){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const i=cc(t.styleUrl,r);return Object.freeze({styleUrl:i})}}writeStyleOrigin(e,t,r,i){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=Cv(e.styleUrl,i))}set uniqueValueInfos(e){this.styleOrigin?xc.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void xc.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r=typeof e=="object"?w_e(e):new zS({value:e,symbol:oG(t)}),this.uniqueValueInfos.push(r),this._valueInfoMap[r.value]=r}removeUniqueValueInfo(e){if(this.styleOrigin)xc.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(let t=0;t<this.uniqueValueInfos.length;t++)if(this.uniqueValueInfos[t].value===e+""){delete this._valueInfoMap[e],this.uniqueValueInfos.splice(t,1);break}}async getUniqueValueInfo(e,t){let r=t;return this.valueExpression&&(R(t)||R(t.arcade))&&(r={...r,arcade:await vl()}),this._getUniqueValueInfo(e,r)}getSymbol(e,t){if(this.valueExpression&&(R(t)||R(t.arcade)))return void xc.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this._getUniqueValueInfo(e,t);return r&&r.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(R(r)||R(r.arcade))){const n=await vl(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),r={...r,arcade:n}}const i=this._getUniqueValueInfo(e,r);return i&&i.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos)t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${JSON.stringify(this.backgroundFillSymbol)}.${JSON.stringify(this.defaultSymbol)}.${this.uniqueValueInfos.reduce((e,t)=>e+t.getMeshHash(),"")}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new vg({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:P(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:P(this.visualVariables),legendOptions:P(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:P(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=P(this.uniqueValueInfos);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(P(this.styleOrigin))),Object.freeze(t)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map(i=>i.collectRequiredFields(e,t)),Oi(e,t,this.valueExpression)];ms(e,t,this.field),ms(e,t,this.field2),ms(e,t,this.field3),await Promise.all(r)}populateFromStyle(){return CH(this.styleOrigin,{portal:this.portal}).then(e=>{const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(r=>{const i=new Ih({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==e.data.defaultItem||(this.defaultSymbol=i,this._isDefaultSymbolDerived=!0);const n=new zS({value:r.name,symbol:i});t.push(n),this._valueInfoMap[r.name]=n}),this._set("uniqueValueInfos",Object.freeze(t)),!this.defaultSymbol&&this.uniqueValueInfos.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateValueInfoMap(){this._valueInfoMap={},this.uniqueValueInfos.forEach(e=>this._valueInfoMap[e.value+""]=e)}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:n,arcade:s}=S2(t,{});let o=this._cache.compiledFunc;const a=s.arcadeUtils;if(!o){const c=a.createSyntaxTree(this.valueExpression);o=a.createFunction(c),this._cache.compiledFunc=o}const l=a.executeFunction(o,a.createExecContext(e,a.getViewInfo({viewingMode:r,scale:i,spatialReference:n})));return this._valueInfoMap[l+""]}_getUnqiueValueInfoForFields(e){const t=this.field,r=e.attributes;let i;if(typeof t!="function"&&this.field2){const n=this.field2,s=this.field3,o=[];t&&o.push(r[t]),n&&o.push(r[n]),s&&o.push(r[s]),i=o.join(this.fieldDelimiter||"")}else typeof t=="function"?i=t(e):t&&(i=r[t]);return this._valueInfoMap[i+""]}static fromPortalStyle(e,t){const r=new vg(t&&t.properties);r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",t&&t.portal||Mr.getDefault());const i=r.populateFromStyle();return i.catch(n=>{xc.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",n)}),i}static fromStyleUrl(e,t){const r=new vg(t&&t.properties);r._set("styleOrigin",Object.freeze({styleUrl:e}));const i=r.populateFromStyle();return i.catch(n=>{xc.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),i}};u([d({readOnly:!0})],Rt.prototype,"_cache",null),u([me({uniqueValue:"unique-value"})],Rt.prototype,"type",void 0),u([d(yH)],Rt.prototype,"backgroundFillSymbol",void 0),u([d({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Rt.prototype,"field",void 0),u([ze("field")],Rt.prototype,"castField",null),u([se("field")],Rt.prototype,"writeField",null),u([d({type:String,json:{write:!0}})],Rt.prototype,"field2",void 0),u([d({type:String,json:{write:!0}})],Rt.prototype,"field3",void 0),u([d({type:String,json:{write:!0}})],Rt.prototype,"valueExpression",void 0),u([d({type:String,json:{write:!0}})],Rt.prototype,"valueExpressionTitle",void 0),u([d({type:kf,json:{write:!0}})],Rt.prototype,"legendOptions",void 0),u([d({type:String,json:{write:!0}})],Rt.prototype,"defaultLabel",void 0),u([d(Zz({...Bv},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Rt.prototype,"defaultSymbol",null),u([d({type:String,json:{write:!0}})],Rt.prototype,"fieldDelimiter",void 0),u([d({type:Mr,readOnly:!0})],Rt.prototype,"portal",void 0),u([te("portal",["styleName"])],Rt.prototype,"readPortal",null),u([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Rt.prototype,"styleOrigin",void 0),u([te("styleOrigin",["styleName","styleUrl"])],Rt.prototype,"readStyleOrigin",null),u([se("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Rt.prototype,"writeStyleOrigin",null),u([d({type:[zS],json:{write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Rt.prototype,"uniqueValueInfos",null),Rt=vg=u([E("esri.renderers.UniqueValueRenderer")],Rt);const lP=Rt,qv={key:"type",base:Tl,typeMap:{heatmap:MH,simple:oP,"unique-value":lP,"class-breaks":vH,"dot-density":qwe,dictionary:Uwe,"pie-chart":l_e},errorContext:"renderer"},LH={key:"type",base:Tl,typeMap:{simple:oP,"unique-value":lP,"class-breaks":vH,heatmap:MH},errorContext:"renderer"};function __e(e,t){return OH(e,null,t)}const b_e=fm({types:qv});function OH(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(r&&r.messages&&r.messages.push(new ki("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):b_e(e,t,r):null}class uP{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(vM),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const r=new uP,i=this._originStores[xe.DEFAULTS];i&&i.forEach((n,s)=>{r.set(s,P(n),xe.DEFAULTS)});for(let n=xe.SERVICE;n<vM;n++){const s=this._originStores[n];s&&s.forEach((o,a)=>{t&&t.has(a)||r.set(a,P(o),n)})}return r}get(t,r){const i=r===void 0?this._values:this._originStores[r];return i?i.get(t):void 0}keys(t){const r=t==null?this._values:this._originStores[t];return r?[...r.keys()]:[]}set(t,r,i=xe.USER){let n=this._originStores[i];if(n||(n=new Map,this._originStores[i]=n),n.set(t,r),!this._values.has(t)||this._propertyOriginMap.get(t)<=i){const s=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,i),s!==r}return!1}delete(t,r=xe.USER){const i=this._originStores[r];if(!i)return;const n=i.get(t);if(i.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===r){this._values.delete(t);for(let s=r-1;s>=0;s--){const o=this._originStores[s];if(o&&o.has(t)){this._values.set(t,o.get(t)),this._propertyOriginMap.set(t,s);break}}}return n}has(t,r){const i=r===void 0?this._values:this._originStores[r];return!!i&&i.has(t)}revert(t,r){for(;r>0&&!this.has(t,r);)--r;const i=this._originStores[r],n=i&&i.get(t),s=this._values.get(t);return this._values.set(t,n),this._propertyOriginMap.set(t,r),s!==n}originOf(t){return this._propertyOriginMap.get(t)||xe.DEFAULTS}forEach(t){this._values.forEach(t)}}const AH=e=>{let t=class extends e{constructor(...r){super(...r);const i=li(this),n=i.store,s=new uP;i.store=s,F9(i,n,s)}read(r,i){D9(this,r,i)}getAtOrigin(r,i){const n=SE(this),s=Vu(i);if(typeof r=="string")return n.get(r,s);const o={};return r.forEach(a=>{o[a]=n.get(a,s)}),o}originOf(r){return Ab(this.originIdOf(r))}originIdOf(r){return SE(this).originOf(r)}revert(r,i){const n=SE(this),s=Vu(i),o=li(this);let a;a=typeof r=="string"?r==="*"?n.keys(s):[r]:r,a.forEach(l=>{o.invalidate(l),n.revert(l,s),o.commit(l)})}};return t=u([E("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function SE(e){return li(e).store}let d4=class extends AH(le){};d4=u([E("esri.core.ReadOnlyMultiOriginJSONSupport")],d4);const S_e=e=>{let t=class extends e{constructor(...r){super(...r)}clear(r,i="user"){return $E(this).delete(r,Vu(i))}write(r={},i){return V9(this,r=r||{},i),r}setAtOrigin(r,i,n){li(this).setAtOrigin(r,i,Vu(n))}removeOrigin(r){const i=$E(this),n=Vu(r),s=i.keys(n);for(const o of s)i.originOf(o)===n&&i.set(o,i.get(o,n),xe.USER)}updateOrigin(r,i){const n=$E(this),s=Vu(i),o=this.get(r);for(let a=s+1;a<vM;++a)n.delete(r,a);n.set(r,o,s)}toJSON(r){return this.write({},r)}};return t=u([E("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function $E(e){return li(e).store}const cP=e=>{let t=class extends S_e(AH(e)){constructor(...r){super(...r)}};return t=u([E("esri.core.MultiOriginJSONSupport")],t),t};let h4=class extends cP(le){};h4=u([E("esri.core.MultiOriginJSONSupport")],h4);async function $_e(e,t){const{WhereClause:r}=await V(()=>import("./WhereClause.7fe2a07f.js"),[],import.meta.url);return r.create(e,t)}function PH(e,t){return I(e)?I(t)?`(${e}) AND (${t})`:e:t}var jk;let nd=jk=class extends B{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new jk({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};u([d({type:String,json:{write:!0}})],nd.prototype,"expression",void 0),u([d({type:String,json:{write:!0}})],nd.prototype,"name",void 0),u([d({type:["boolean","date","number","string"],json:{write:!0}})],nd.prototype,"returnType",void 0),u([d({type:String,json:{write:!0}})],nd.prototype,"title",void 0),nd=jk=u([E("esri.form.ExpressionInfo")],nd);const x_e=nd;let sd=class extends B{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};u([d({type:String,json:{write:!0}})],sd.prototype,"description",void 0),u([d({type:String,json:{write:!0}})],sd.prototype,"label",void 0),u([d()],sd.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],sd.prototype,"visibilityExpression",void 0),sd=u([E("esri.form.elements.Element")],sd);const tm=sd;var Vk;let N_=Vk=class extends B{constructor(e){super(e),this.type=null}clone(){return new Vk({type:this.type})}};u([d({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],N_.prototype,"type",void 0),N_=Vk=u([E("esri.form.elements.inputs.AttachmentInput")],N_);const E_e=N_;var zk;let od=zk=class extends tm{constructor(e){super(e),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new zk({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};u([d({type:String,json:{write:!0}})],od.prototype,"attachmentKeyword",void 0),u([d({type:Boolean,json:{write:!0}})],od.prototype,"editable",void 0),u([d({type:E_e,json:{read:{source:"inputType"},write:{target:"inputType"}}})],od.prototype,"input",void 0),u([d({type:["attachment"],json:{read:!1,write:!0}})],od.prototype,"type",void 0),od=zk=u([E("esri.form.elements.AttachmentElement")],od);const p4=od;let D_=class extends B{constructor(e){super(e),this.type=null}};u([d()],D_.prototype,"type",void 0),D_=u([E("esri.form.elements.inputs.Input")],D_);const Dm=D_;let wg=class extends Dm{constructor(e){super(e),this.maxLength=null,this.minLength=0}};u([d({type:Number,json:{write:!0}})],wg.prototype,"maxLength",void 0),u([d({type:Number,json:{write:!0}})],wg.prototype,"minLength",void 0),wg=u([E("esri.form.elements.inputs.TextInput")],wg);const dP=wg;var Uk;let j_=Uk=class extends dP{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new Uk({maxLength:this.maxLength,minLength:this.minLength})}};u([d({type:["barcode-scanner"],json:{read:!1,write:!0}})],j_.prototype,"type",void 0),j_=Uk=u([E("esri.form.elements.inputs.BarcodeScannerInput")],j_);const T_e=j_;var Gk;let wp=Gk=class extends Dm{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="combo-box"}clone(){return new Gk({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};u([d({type:String,json:{write:!0}})],wp.prototype,"noValueOptionLabel",void 0),u([d({type:Boolean,json:{write:!0}})],wp.prototype,"showNoValueOption",void 0),u([d({type:["combo-box"],json:{read:!1,write:!0}})],wp.prototype,"type",void 0),wp=Gk=u([E("esri.form.elements.inputs.ComboBoxInput")],wp);const M_e=wp;var Bk;function f4(e){return e!=null?new Date(e):null}function m4(e){return e?e.getTime():null}let Gs=Bk=class extends Dm{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return f4(t.max)}writeMax(e,t){t.max=m4(e)}readMin(e,t){return f4(t.min)}writeMin(e,t){t.min=m4(e)}clone(){return new Bk({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};u([d({type:Boolean,json:{write:!0}})],Gs.prototype,"includeTime",void 0),u([d({type:Date,json:{type:Number,write:!0}})],Gs.prototype,"max",void 0),u([te("max")],Gs.prototype,"readMax",null),u([se("max")],Gs.prototype,"writeMax",null),u([d({type:Date,json:{type:Number,write:!0}})],Gs.prototype,"min",void 0),u([te("min")],Gs.prototype,"readMin",null),u([se("min")],Gs.prototype,"writeMin",null),u([d({type:["datetime-picker"],json:{read:!1,write:!0}})],Gs.prototype,"type",void 0),Gs=Bk=u([E("esri.form.elements.inputs.DateTimePickerInput")],Gs);const I_e=Gs;var qk;let _p=qk=class extends Dm{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="radio-buttons"}clone(){return new qk({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};u([d({type:String,json:{write:!0}})],_p.prototype,"noValueOptionLabel",void 0),u([d({type:Boolean,json:{write:!0}})],_p.prototype,"showNoValueOption",void 0),u([d({type:["radio-buttons"],json:{read:!1,write:!0}})],_p.prototype,"type",void 0),_p=qk=u([E("esri.form.elements.inputs.RadioButtonsInput")],_p);const C_e=_p;var Wk;let bp=Wk=class extends Dm{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new Wk({offValue:this.offValue,onValue:this.onValue})}};u([d({type:[String,Number],json:{write:!0}})],bp.prototype,"offValue",void 0),u([d({type:[String,Number],json:{write:!0}})],bp.prototype,"onValue",void 0),u([d({type:["switch"],json:{read:!1,write:!0}})],bp.prototype,"type",void 0),bp=Wk=u([E("esri.form.elements.inputs.SwitchInput")],bp);const k_e=bp;var Hk;let V_=Hk=class extends dP{constructor(e){super(e),this.type="text-area"}clone(){return new Hk({maxLength:this.maxLength,minLength:this.minLength})}};u([d({type:["text-area"],json:{read:!1,write:!0}})],V_.prototype,"type",void 0),V_=Hk=u([E("esri.form.elements.inputs.TextAreaInput")],V_);const L_e=V_;var Jk;let z_=Jk=class extends dP{constructor(e){super(e),this.type="text-box"}clone(){return new Jk({maxLength:this.maxLength,minLength:this.minLength})}};u([d({type:["text-box"],json:{read:!1,write:!0}})],z_.prototype,"type",void 0),z_=Jk=u([E("esri.form.elements.inputs.TextBoxInput")],z_);const O_e=z_,A_e={base:Dm,key:"type",typeMap:{"barcode-scanner":T_e,"combo-box":M_e,"datetime-picker":I_e,"radio-buttons":C_e,switch:k_e,"text-area":L_e,"text-box":O_e}};var Zk;let Kn=Zk=class extends tm{constructor(e){super(e),this.domain=null,this.editable=!0,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new Zk({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};u([d({types:yq,json:{read:{reader:PA},write:!0}})],Kn.prototype,"domain",void 0),u([d({type:Boolean,json:{write:!0}})],Kn.prototype,"editable",void 0),u([d({type:String,json:{write:!0}})],Kn.prototype,"editableExpression",void 0),u([d({type:String,json:{write:!0}})],Kn.prototype,"fieldName",void 0),u([d({type:String,json:{write:!0}})],Kn.prototype,"hint",void 0),u([d({types:A_e,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Kn.prototype,"input",void 0),u([d({type:String,json:{write:!0}})],Kn.prototype,"requiredExpression",void 0),u([d({type:String,json:{read:!1,write:!0}})],Kn.prototype,"type",void 0),u([d({type:String,json:{write:!0}})],Kn.prototype,"valueExpression",void 0),Kn=Zk=u([E("esri.form.elements.FieldElement")],Kn);const y4=Kn;var Yk;let Va=Yk=class extends tm{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new Yk({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:P(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};u([d({type:Number,json:{write:!0}})],Va.prototype,"displayCount",void 0),u([d({type:["list"],json:{write:!0}})],Va.prototype,"displayType",void 0),u([d({type:Boolean,json:{write:!0}})],Va.prototype,"editable",void 0),u([d({type:[TU],json:{write:!0}})],Va.prototype,"orderByFields",void 0),u([d({type:Number,json:{write:!0}})],Va.prototype,"relationshipId",void 0),u([d({type:["relationship"],json:{read:!1,write:!0}})],Va.prototype,"type",void 0),Va=Yk=u([E("esri.form.elements.RelationshipElement")],Va);const g4=Va;function RH(e){return{typesWithGroup:{base:tm,key:"type",typeMap:{attachment:p4,field:y4,group:e,relationship:g4}},typesWithoutGroup:{base:tm,key:"type",typeMap:{attachment:p4,field:y4,relationship:g4}}}}function FH(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>i[n.type].fromJSON(n))}function NH(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>n.toJSON())}function DH(e,t,r=!0){return e?e.map(i=>ia(r?t.typesWithGroup:t.typesWithoutGroup,i)):null}var Qk;let qo=Qk=class extends tm{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return DH(e,xE,!1)}readElements(e,t){return FH(t.formElements,xE,!1)}writeElements(e,t){t.formElements=NH(e,xE,!1)}clone(){return new Qk({description:this.description,elements:P(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};u([d({json:{write:!0}})],qo.prototype,"elements",void 0),u([ze("elements")],qo.prototype,"castElements",null),u([te("elements",["formElements"])],qo.prototype,"readElements",null),u([se("elements")],qo.prototype,"writeElements",null),u([d({type:["collapsed","expanded"],json:{write:!0}})],qo.prototype,"initialState",void 0),u([d({type:String,json:{read:!1,write:!0}})],qo.prototype,"type",void 0),qo=Qk=u([E("esri.form.elements.GroupElement")],qo);const xE=RH(qo),P_e=qo;var Kk;const EE=RH(P_e);let Fo=Kk=class extends B{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.title=null}castElements(e){return DH(e,EE)}readElements(e,t){return FH(t.formElements,EE)}writeElements(e,t){t.formElements=NH(e,EE)}clone(){return new Kk({description:this.description,expressionInfos:P(this.expressionInfos),elements:P(this.elements),title:this.title})}};u([d({type:String,json:{write:!0}})],Fo.prototype,"description",void 0),u([d({json:{write:!0}})],Fo.prototype,"elements",void 0),u([ze("elements")],Fo.prototype,"castElements",null),u([te("elements",["formElements"])],Fo.prototype,"readElements",null),u([se("elements")],Fo.prototype,"writeElements",null),u([d({type:[x_e],json:{write:!0}})],Fo.prototype,"expressionInfos",void 0),u([d({type:String,json:{write:!0}})],Fo.prototype,"title",void 0),Fo=Kk=u([E("esri.form.FormTemplate")],Fo);const R_e=Fo;var _g;const US=Yr()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),jH=US.jsonValues.slice();GO(jH,"orthometric");const o0=Yr()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Bs=_g=class extends B{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return US.write(e,t,r)}readHeightModel(e,t,r){return US.read(e)||(r&&r.messages&&r.messages.push(F_e(e,{context:r})),null)}readHeightUnit(e,t,r){return o0.read(e)||(r&&r.messages&&r.messages.push(v4(e,{context:r})),null)}readHeightUnitService(e,t,r){return mG(e)||o0.read(e)||(r&&r.messages&&r.messages.push(v4(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new _g({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=yce(t);return new _g({heightModel:e.heightModel,heightUnit:r,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new _g;return t.read(e,{origin:"web-scene"}),t}};function v4(e,t){return new ki("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function F_e(e,t){return new ki("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}u([d({type:US.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:jH,default:"ellipsoidal"}}}})],Bs.prototype,"heightModel",void 0),u([se("web-scene","heightModel")],Bs.prototype,"writeHeightModel",null),u([te(["web-scene","service"],"heightModel")],Bs.prototype,"readHeightModel",null),u([d({type:o0.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:o0.jsonValues,write:o0.write}}}})],Bs.prototype,"heightUnit",void 0),u([te("web-scene","heightUnit")],Bs.prototype,"readHeightUnit",null),u([te("service","heightUnit")],Bs.prototype,"readHeightUnitService",null),u([d({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Bs.prototype,"vertCRS",void 0),u([te("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Bs.prototype,"readVertCRS",null),Bs=_g=u([E("esri.geometry.HeightModelInfo")],Bs);const g$=Bs;function w4(e,t,r){if(e.hasM==null||e.hasZ)for(const i of t)for(const n of i)n.length>2&&(n[2]*=r)}function N_e(e,t,r){if(!e&&!t||!r)return;const i=Yf(r);_4(e,r,i),_4(t,r,i)}function _4(e,t,r){if(e)for(const i of e)D_e(i.geometry,t,r)}function D_e(e,t,r){if(R(e)||!e.spatialReference||Hr(e.spatialReference,t))return;const i=Yf(e.spatialReference)/r;if(i!==1){if("x"in e)e.z!=null&&(e.z*=i);else if("rings"in e)w4(e,e.rings,i);else if("paths"in e)w4(e,e.paths,i);else if("points"in e&&(e.hasM==null||e.hasZ))for(const n of e.points)n.length>2&&(n[2]*=i)}}let j_e=0;const TE=Z.getLogger("esri.layers.graphics.sources.MemorySource");let Qa=class extends Nn.LoadableMixin(xv(ca(de))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const t=I(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get workerGeometryType(){var t;const e=(t=this.layer)==null?void 0:t.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,t={}){await this.load(t);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);JC(e,this.layer.spatialReference,r);const i=Dv.fromJSON(r);if(!this._requiresClientGraphicMapping())return i;const n=this.layer.objectIdField;for(const s of i.features){const o=s.attributes[n],a=this._idToClientGraphic.get(o);a&&(s.geometry=a.geometry)}return i.geometryType=this.layer.geometryType,i}async queryFeaturesJSON(e,t={}){if(this._requiresClientGraphicMapping())throw new O("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(t);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);return JC(e,this.layer.spatialReference,r),r}queryFeatureCount(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t))}queryObjectIds(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t))}queryExtent(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t)).then(r=>({count:r.count,extent:Je.fromJSON(r.extent)}))}querySnapping(e,t={}){return this.load(t).then(()=>this._connection.invoke("querySnapping",e,t))}async _applyEdits(e){if(!this._connection)throw new O("feature-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField;let r=null;const i=[],n=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const s=c=>"objectId"in c&&c.objectId!=null?c.objectId:"attributes"in c&&c.attributes[t]!=null?c.attributes[t]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const c of e.deleteFeatures){const h=s(c);h!=null&&i.push(h)}const o=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const c of e.updateFeatures)if(n.push(this._serializeFeature(c)),o){const h=s(c);h!=null&&o.set(h,c)}}N_e(r?r.features:null,n,this.layer.spatialReference);const{fullExtent:a,featureEditResults:l}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:n,deletes:i});return this.fullExtent=a,r&&r.finish(l.uidToObjectId),this._updateClientGraphicIds(o,l),this._createEditsResult(l)}async _prepareClientMapping(e,t){if(this.layerOrSourceGeometryType!=="mesh"||R(e))return;const r=[];for(const{geometry:i}of e)!I(i)||i.type!=="mesh"||i.hasExtent||i.loaded||r.push(i.load({signal:t}));r.length&&await Promise.all(r)}_updateClientGraphicIds(e,t){if(this._idToClientGraphic){if(e)for(const r of t.updateResults){if(!r.success)continue;const i=e.get(r.objectId);i!=null&&this._addIdToClientGraphic(i)}for(const r of t.deleteResults)r.success&&this._idToClientGraphic.delete(r.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new O("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_prepareAddFeatures(e){const t=new Map,r=new Array(e.length);let i=null;for(let s=0;s<e.length;s++){const o=e[s],a=this._serializeFeature(o);!i&&I(o.geometry)&&(i=o.geometry.type),r[s]=a,t.set(`${a.uid}`,o)}const n=this;return{features:r,inferredGeometryType:i,finish(s){const o=n.sourceJSON.objectIdField;for(const a in s){const l=s[a],c=t.get(a);c&&(c.attributes||(c.attributes={}),l===-1?delete c.attributes[o]:c.attributes[o]=l,n._addIdToClientGraphic(c))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const t=this.sourceJSON.objectIdField,r=e.attributes&&e.attributes[t];r!=null&&this._idToClientGraphic.set(r,e)}get layerOrSourceGeometryType(){var e,t,r;return(r=(e=this.layer)==null?void 0:e.geometryType)!=null?r:(t=this.sourceJSON)==null?void 0:t.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this.layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:t}=e,r=this._geometryForSerialization(e),i=(j_e++).toString();return r?{uid:i,geometry:r.toJSON(),attributes:t}:{uid:i,attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return R(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?ws.fromExtent(t.extent):null:t}async _startWorker(e){this._connection=await cG("MemorySourceWorker",{strategy:j("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:r,objectIdField:i,hasM:n,hasZ:s,timeInfo:o}=this.layer,a=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const l=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",m=>{TE.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),m.preventDefault()}));const c={features:l.features,fields:t&&t.map(m=>m.toJSON()),geometryType:xN.toJSON(this.workerGeometryType),hasM:this.layerOrSourceGeometryType!=="mesh"&&n,hasZ:this.layerOrSourceGeometryType==="mesh"||s,objectIdField:i,spatialReference:a?null:r&&r.toJSON(),timeInfo:o?o.toJSON():null},h=await this._connection.invoke("load",c,{signal:e});for(const m of h.warnings)TE.warn(m.message,{layer:this.layer,warning:m});h.featureErrors.length&&TE.warn(`Encountered ${h.featureErrors.length} validation errors while loading features`,h.featureErrors);const f=h.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(l.inferredGeometryType)&&(f.geometryType=xN.toJSON(l.inferredGeometryType)),this.sourceJSON=f,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),l.finish(h.assignedObjectIds)}};u([t3({Type:ln,ensureType:dt(ln)})],Qa.prototype,"itemType",void 0),u([d()],Qa.prototype,"type",void 0),u([d({constructOnly:!0})],Qa.prototype,"layer",void 0),u([d({readOnly:!0})],Qa.prototype,"workerGeometryType",null),u([d()],Qa.prototype,"sourceJSON",void 0),Qa=u([E("esri.layers.graphics.sources.MemorySource")],Qa);function V_e(e){return"portalItem"in e}const z_e=e=>{let t=class extends e{get apiKey(){var r;return this._isOverridden("apiKey")?this._get("apiKey"):V_e(this)?(r=this.portalItem)==null?void 0:r.apiKey:null}set apiKey(r){r!=null?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return u([d({type:String})],t.prototype,"apiKey",null),t=u([E("esri.layers.mixins.APIKeyMixin")],t),t},VH={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},zH=Object.values(VH),UH=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${zH.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),U_e=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${zH.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),G_e=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function Q4e(e){return!!UH.test(e)}function rm(e){if(R(e))return null;const t=Qt(e),r=t.path.match(UH)||t.path.match(U_e);if(!r)return null;const[,i,n,s,o]=r,a=n.indexOf("/");return{title:hP(a!==-1?n.slice(a+1):n),serverType:VH[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:i}}}function B_e(e){const t=Qt(e).path.match(G_e);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function hP(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function q_e(e,t){const r=[];if(e){const i=rm(e);I(i)&&i.title&&r.push(i.title)}if(t){const i=hP(t);r.push(i)}if(r.length===2){if(r[0].toLowerCase().includes(r[1].toLowerCase()))return r[0];if(r[1].toLowerCase().includes(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function GH(e){if(!e)return!1;const t=".arcgis.com/",r="//services",i="//tiles",n="//features",s=(e=e.toLowerCase()).includes(t),o=e.includes(r)||e.includes(i)||e.includes(n);return s&&o}function W_e(e,t){return e&&Q9(K9(e,t))}function H_e(e){let{url:t}=e;if(!t)return{url:t};t=K9(t,e.logger);const r=Qt(t),i=rm(r.path);let n;if(I(i))i.sublayer!=null&&e.layer.layerId==null&&(n=i.sublayer),t=i.url.path;else if(e.nonStandardUrlAllowed){const s=B_e(r.path);I(s)&&(t=s.serviceUrl,n=s.sublayerId)}return{url:Q9(t),layerId:n}}function J_e(e,t,r,i,n){gh(t,i,"url",n),i.url&&e.layerId!=null&&(i.url=dh(i.url,r,e.layerId.toString()))}function K4e(e){if(!e)return!1;const t=e.toLowerCase(),r=t.includes("/services/"),i=t.includes("/mapserver/wmsserver"),n=t.includes("/imageserver/wmsserver"),s=t.includes("/wmsserver");return r&&(i||n||s)}const Z_e=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const r=rm(this.url);if(I(r)&&r.title)return r.title}return this._get("title")||""}set title(r){this._set("title",r)}set url(r){this._set("url",W_e(r,Z.getLogger(this.declaredClass)))}};return u([d()],t.prototype,"title",null),u([d({type:String})],t.prototype,"url",null),t=u([E("esri.layers.mixins.ArcGISService")],t),t},b4={read:{reader:kA},write:{allowNull:!0,writer:LA}},BH=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return u([d({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),u([d({json:{read:!1,write:!1,origins:{"web-map":b4,"portal-item":b4}}})],t.prototype,"effect",void 0),t=u([E("esri.layers.mixins.BlendLayer")],t),t},qH=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return u([d({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],t.prototype,"customParameters",void 0),t=u([E("esri.layers.mixins.CustomParametersMixin")],t),t};var Xk;const ME=new Ee({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),IE=new Ee({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let No=Xk=class extends B{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:r,spatialRelationship:i,timeExtent:n,objectIds:s,units:o,distance:a}=this;return new xi({geometry:P(r),objectIds:P(s),spatialRelationship:i,timeExtent:P(n),where:t,units:o,distance:a,...e})}clone(){const{where:e,geometry:t,spatialRelationship:r,timeExtent:i,objectIds:n,units:s,distance:o}=this;return new Xk({geometry:P(t),objectIds:P(n),spatialRelationship:r,timeExtent:P(i),where:e,units:s,distance:o})}};u([d({type:String,json:{write:!0}})],No.prototype,"where",void 0),u([d({types:Eh,json:{write:!0}})],No.prototype,"geometry",void 0),u([d({type:ME.apiValues,json:{name:"spatialRel",read:{reader:ME.read},write:{allowNull:!1,writer:ME.write,overridePolicy(){return{enabled:I(this.geometry)}}}}})],No.prototype,"spatialRelationship",void 0),u([d({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],No.prototype,"distance",void 0),u([d({type:[Number],json:{write:!0}})],No.prototype,"objectIds",void 0),u([d({type:IE.apiValues,json:{read:IE.read,write:{writer:IE.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],No.prototype,"units",void 0),u([d({type:pa,json:{write:!0}})],No.prototype,"timeExtent",void 0),No=Xk=u([E("esri.layers.support.FeatureFilter")],No);const Y_e=No;var eL;const S4={read:{reader:kA},write:{writer:LA,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},$4={read:{reader:kA},write:{writer:LA,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},x4={name:"showExcludedLabels",default:!0};let ad=eL=class extends B{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var i,n;const r=super.write(e,t);if(t!=null&&t.origin){if(r.filter){const s=Object.keys(r.filter);if(s.length>1||s[0]!=="where")return(i=t.messages)==null||i.push(new O("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in r)return(n=t.messages)==null||n.push(new O("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return r}clone(){return new eL({filter:I(this.filter)&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};u([d({type:Y_e,json:{write:{allowNull:!0,writer(e,t,r,i){const n=e==null?void 0:e.write({},i);n&&Object.keys(n).length!==0?sn(r,n,t):sn(r,null,t)}}}})],ad.prototype,"filter",void 0),u([d({json:{write:!0,origins:{"web-map":S4,"portal-item":S4}}})],ad.prototype,"includedEffect",void 0),u([d({json:{write:!0,origins:{"web-map":$4,"portal-item":$4}}})],ad.prototype,"excludedEffect",void 0),u([d({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":x4,"portal-item":x4}}})],ad.prototype,"excludedLabelsVisible",void 0),ad=eL=u([E("esri.layers.support.FeatureEffect")],ad);const Q_e=ad,E4={write:{allowNull:!0}},WH=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return u([d({type:Q_e,json:{origins:{"web-map":E4,"portal-item":E4}}})],t.prototype,"featureEffect",void 0),t=u([E("esri.layers.mixins.FeatureEffectLayer")],t),t},K_e={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};function X_e(e){if(!e)return e;const{start:t,end:r}=e;return new pa({start:I(t)?rh(t,-t.getTimezoneOffset(),"minutes"):t,end:I(r)?rh(r,-r.getTimezoneOffset(),"minutes"):r})}function ebe(e){if(!e)return e;const{start:t,end:r}=e;return new pa({start:I(t)?rh(t,t.getTimezoneOffset(),"minutes"):t,end:I(r)?rh(r,r.getTimezoneOffset(),"minutes"):r})}var tL;let bg=tL=class extends B{async collectRequiredFields(e,t){return Oi(e,t,this.expression)}clone(){return new tL({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};u([d({type:String,json:{write:!0}})],bg.prototype,"expression",void 0),u([d({type:String,json:{write:!0}})],bg.prototype,"title",void 0),bg=tL=u([E("esri.layers.support.FeatureExpressionInfo")],bg);const T4=bg;function tbe(){const e=Object.keys(aH);return e.sort(),e}const rbe=tbe();var rL;const nw=Yr()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),M4=new Ee({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let za=rL=class extends B{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(e,t){return e!=null?e:t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,t,r,i){t[r]=e.write({},i),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):I(e)||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new rL({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&_te(this.featureExpressionInfo,e.featureExpressionInfo)}};u([d({type:T4,json:{write:!0}})],za.prototype,"featureExpressionInfo",void 0),u([te("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],za.prototype,"readFeatureExpressionInfo",null),u([se("featureExpressionInfo",{featureExpressionInfo:{type:T4},"featureExpression.value":{type:[0]}})],za.prototype,"writeFeatureExpressionInfo",null),u([d({type:nw.apiValues,nonNullable:!0,json:{type:nw.jsonValues,read:nw.read,write:{writer:nw.write,isRequired:!0}}})],za.prototype,"mode",null),u([d({type:Number,json:{write:!0}})],za.prototype,"offset",void 0),u([d({type:rbe,json:{type:String,read:M4.read,write:M4.write}})],za.prototype,"unit",null),za=rL=u([E("esri.layers.support.ElevationInfo")],za);const ibe=za,HH={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},v$={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},w$={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},JH={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:gh}}},ZH={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},YH={value:null,type:ibe,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function X4e(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const a0={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},nbe={...a0,json:{...a0.json,origins:{"web-document":{...a0.json.origins["web-document"],write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>r&&r.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?N0(t.layerDefinition.drawingInfo.transparency):void 0:N0(t.drawingInfo.transparency)}}},sbe={type:pa,readOnly:!0,get(){var a,l;if(!((a=this.layer)!=null&&a.timeInfo))return null;const{datesInUnknownTimezone:e,timeOffset:t,useViewTime:r}=this.layer,i=(l=this.view)==null?void 0:l.timeExtent;let n=this.layer.timeExtent;e&&(n=ebe(n));let s=r?i&&n?i.intersection(n):i||n:n;if(!s||s.isEmpty||s.isAllTime)return s;t&&(s=s.offset(-t.value,t.unit)),e&&(s=X_e(s));const o=this._get("timeExtent");return s.equals(o)?o:s}},eje={type:Je,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const r=Je.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(r.spatialReference=Te.fromJSON(t.spatialReference)),r}}}},read:!1}},QH={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},obe={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},abe={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},KH={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}},XH=e=>{let t=class extends e{constructor(){super(...arguments),this.title=null}writeListMode(r,i,n,s){(s&&s.layerContainerType==="ground"||r&&$ie(this,n,{},s))&&(i[n]=r)}writeOperationalLayerType(r,i,n,s){!r||s&&s.layerContainerType==="tables"||(i.layerType=r)}writeTitle(r,i){i.title=r||"Layer"}read(r,i){i&&(i.layer=this),wie(this,r,n=>super.read(r,n),i)}write(r,i){var o,a;if(i!=null&&i.origin){const l=`${i.origin}/${i.layerContainerType||"operational-layers"}`,c=K_e[l];let h=c&&c[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&l==="web-scene/operational-layers"&&(h=!1),!h)return(o=i.messages)==null||o.push(new O("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${l}'`,{layer:this})),null}const n=super.write(r,{...i,layer:this}),s=!!i&&!!i.messages&&!!i.messages.filter(l=>l instanceof O&&l.name==="web-document-write:property-required").length;return R2(n==null?void 0:n.url)?((a=i==null?void 0:i.messages)==null||a.push(new O("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&s?null:n}beforeSave(){}};return u([d({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),u([d(KH)],t.prototype,"listMode",void 0),u([se("listMode")],t.prototype,"writeListMode",null),u([d({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),u([se("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),u([d(a0)],t.prototype,"opacity",void 0),u([d({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),u([se([void 0,"web-scene"],"title")],t.prototype,"writeTitle",null),u([d({type:Boolean,json:{name:"visibility"}})],t.prototype,"visible",void 0),t=u([E("esri.layers.mixins.OperationalLayer")],t),t};var iL;const CE=new Ee({asc:"ascending",desc:"descending"});let Sp=iL=class extends B{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new iL({field:this.field,valueExpression:this.valueExpression,order:this.order})}};u([d({type:String,json:{write:!0}})],Sp.prototype,"field",void 0),u([d({type:String,json:{write:!0}})],Sp.prototype,"valueExpression",void 0),u([d({type:CE.apiValues,json:{read:CE.read,write:CE.write}})],Sp.prototype,"order",void 0),Sp=iL=u([E("esri.layers.support.OrderByInfo")],Sp);const eJ=Sp;function lbe(e,t,r){if(!e)return null;const i=e.find(s=>!!s.field);if(!i)return null;const n=new eJ;return n.read(i,r),[n]}function ube(e,t,r,i){const n=e.find(s=>!!s.field);n&&sn(r,[n.toJSON()],t)}const tJ=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return u([d({type:[eJ],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:lbe},write:{target:"layerDefinition.orderBy",writer:ube}}})],t.prototype,"orderBy",void 0),t=u([E("esri.layers.mixins.OrderedLayer")],t),t},cbe=Z.getLogger("esri.layers.mixins.PortalLayer"),dbe=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){var r;(r=this.portalItem)==null||r.destroy(),this.portalItem=null}set portalItem(r){r!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",r))}readPortalItem(r,i,n){if(i.itemId)return new Yb({id:i.itemId,portal:n&&n.portal})}writePortalItem(r,i){r&&r.id&&(i.itemId=r.id)}async loadFromPortal(r,i){if(this.portalItem&&this.portalItem.id)try{const n=await V(()=>import("./layersLoader.11bbb3cf.js").then(s=>s.l),["layersLoader.11bbb3cf.js","lazyLayerLoader.1843a866.js","jsonContext.36e23314.js"],import.meta.url);return yt(i),await n.load({instance:this,supportedTypes:r.supportedTypes,validateItem:r.validateItem,supportsData:r.supportsData},i)}catch(n){throw ui(n)||cbe.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${n}`),n}}async finishLoadEditablePortalLayer(r){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(r).catch(i=>(bv(i),!0)))}async _fetchUserHasEditingPrivileges(r){const i=this.url?$t==null?void 0:$t.findCredential(this.url):null;if(!i)return!0;const n=sw.credential===i?sw.user:await this._fetchEditingUser(r);return sw.credential=i,sw.user=n,R(n)||n.privileges==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(r){var h,f;const i=(f=(h=this.portalItem)==null?void 0:h.portal)==null?void 0:f.user;if(i)return i;const n=$t.findServerInfo(this.url);if(!(n!=null&&n.owningSystemUrl))return null;const s=`${n.owningSystemUrl}/sharing/rest`,o=Mr.getDefault();if(o&&o.loaded&&fs(o.restUrl)===fs(s))return o.user;const a=`${s}/community/self`,l=I(r)?r.signal:null,c=await A2(nt(a,{authMode:"no-prompt",query:{f:"json"},signal:l}));return c.ok?g3.fromJSON(c.value.data):null}read(r,i){i&&(i.layer=this),super.read(r,i)}write(r,i){const n=i&&i.portal,s=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||Mr.getDefault());return n&&s&&!H9(s.restUrl,n.restUrl)?(i.messages&&i.messages.push(new O("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(r,{...i,layer:this})}};return u([d({type:Yb})],t.prototype,"portalItem",null),u([te("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),u([se("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),u([d({clonable:!1})],t.prototype,"resourceReferences",void 0),u([d({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=u([E("esri.layers.mixins.PortalLayer")],t),t},sw={credential:null,user:null},av=new de,l0=new WeakMap;function hbe(e){rJ(e)&&av.push(e)}function pbe(e){rJ(e)&&av.includes(e)&&av.remove(e)}function rJ(e){return e&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function iJ(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:iJ(t,e%t):0}let kE=0,ow=0;function fbe(){var t;const e=Date.now();for(const r of av)r.refreshInterval&&e-((t=l0.get(r))!=null?t:0)+5>=6e4*r.refreshInterval&&(l0.set(r,e),r.refresh(e))}f9(()=>{const e=Date.now();let t=0;for(const r of av)t=iJ(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?l0.get(r)||l0.set(r,e):l0.delete(r);if(t!==ow){if(ow=t,clearInterval(kE),ow===0)return void(kE=0);kE=setInterval(fbe,ow)}});const nJ=e=>{let t=class extends e{constructor(...r){super(...r),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=C2(()=>this.hasDataChanged()),this.when().then(()=>{hbe(this)},()=>{})}destroy(){pbe(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(r=Date.now()){bM(this._debounceHasDataChanged()).then(i=>{i&&this._set("refreshTimestamp",r),this.emit("refresh",{dataChanged:i})},i=>{Z.getLogger(this.declaredClass).error(i),this.emit("refresh",{dataChanged:!1,error:i})})}async hasDataChanged(){return!0}};return u([d({type:Number,cast:r=>r>=.1?r:r<=0?0:.1,json:{write:!0}})],t.prototype,"refreshInterval",void 0),u([d({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),u([d()],t.prototype,"refreshParameters",null),t=u([E("esri.layers.mixins.RefreshableLayer")],t),t},sJ=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const r={minScale:this.minScale,maxScale:this.maxScale},i=this.parent;i&&"effectiveScaleRange"in i&&mbe(r,i.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===r.minScale&&n.maxScale===r.maxScale?n:r}};return u([d({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),u([d({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),u([d({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=u([E("esri.layers.mixins.ScaleRangeLayer")],t),t};function mbe(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const qd=Yr()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});var nL;let Sg=nL=class extends B{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return Fge(this.value,this.unit,"milliseconds")}clone(){return new nL({value:this.value,unit:this.unit})}};u([d({type:Number,json:{write:!0},nonNullable:!0})],Sg.prototype,"value",void 0),u([d({type:qd.apiValues,json:{type:qd.jsonValues,read:qd.read,write:qd.write},nonNullable:!0})],Sg.prototype,"unit",void 0),Sg=nL=u([E("esri.TimeInterval")],Sg);const lv=Sg;var sL;let $p=sL=class extends B{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return t.respectsDaylightSaving!==void 0?t.respectsDaylightSaving:t.respectDaylightSaving!==void 0&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new sL({respectsDaylightSaving:e,timezone:t})}};u([d({type:Boolean,json:{write:!0}})],$p.prototype,"respectsDaylightSaving",void 0),u([te("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],$p.prototype,"readRespectsDaylightSaving",null),u([d({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],$p.prototype,"timezone",void 0),$p=sL=u([E("esri.layers.support.TimeReference")],$p);const ybe=$p;var oL;let ii=oL=class extends B{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||t.timeExtent.length!==2)return null;const r=new Date(t.timeExtent[0]),i=new Date(t.timeExtent[1]);return new pa({start:r,end:i})}writeFullTimeExtent(e,t){e&&I(e.start)&&I(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new lv({value:t.timeInterval,unit:qd.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new lv({value:t.defaultTimeInterval,unit:qd.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:r,interval:i,startField:n,timeReference:s,fullTimeExtent:o,trackIdField:a,useTime:l}=this;return new oL({cumulative:e,endField:t,hasLiveData:r,interval:i,startField:n,timeReference:P(s),fullTimeExtent:P(o),trackIdField:a,useTime:l})}};u([d({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],ii.prototype,"cumulative",void 0),u([d({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],ii.prototype,"endField",void 0),u([d({type:pa,json:{write:{enabled:!0,allowNull:!0}}})],ii.prototype,"fullTimeExtent",void 0),u([te("fullTimeExtent",["timeExtent"])],ii.prototype,"readFullTimeExtent",null),u([se("fullTimeExtent")],ii.prototype,"writeFullTimeExtent",null),u([d({type:Boolean,json:{write:!0}})],ii.prototype,"hasLiveData",void 0),u([d({type:lv,json:{write:{enabled:!0,allowNull:!0}}})],ii.prototype,"interval",void 0),u([te("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],ii.prototype,"readInterval",null),u([se("interval")],ii.prototype,"writeInterval",null),u([d({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],ii.prototype,"startField",void 0),u([d({type:ybe,json:{write:{enabled:!0,allowNull:!0}}})],ii.prototype,"timeReference",void 0),u([d({type:String,json:{write:{enabled:!0,allowNull:!0}}})],ii.prototype,"trackIdField",void 0),u([d({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],ii.prototype,"useTime",void 0),ii=oL=u([E("esri.layers.support.TimeInfo")],ii);const oJ=ii,aJ=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(r,i){const n=i.timeInfo.exportOptions;if(!n)return null;const s=n.timeOffset,o=qd.fromJSON(n.timeOffsetUnits);return s&&o?new lv({value:s,unit:o}):null}set timeInfo(r){P3(r,this.fieldsIndex),this._set("timeInfo",r)}};return u([d({type:pa,json:{write:!1}})],t.prototype,"timeExtent",void 0),u([d({type:lv})],t.prototype,"timeOffset",void 0),u([te("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),u([d({value:null,type:oJ,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),u([d({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=u([E("esri.layers.mixins.TemporalLayer")],t),t};var aL;let Ka=aL=class extends B{constructor(e){super(e)}clone(){const{name:e,fields:t,isAscending:r,isUnique:i,description:n}=this;return new aL({name:e,fields:t,isAscending:r,isUnique:i,description:n})}};u([d({constructOnly:!0})],Ka.prototype,"name",void 0),u([d({constructOnly:!0})],Ka.prototype,"fields",void 0),u([d({constructOnly:!0})],Ka.prototype,"isAscending",void 0),u([d({constructOnly:!0})],Ka.prototype,"isUnique",void 0),u([d({constructOnly:!0})],Ka.prototype,"description",void 0),Ka=aL=u([E("esri.layers.support.FeatureIndex")],Ka);let ic=class extends B{constructor(){super(...arguments),this.type=null}};u([d({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],ic.prototype,"type",void 0),ic=u([E("esri.layers.support.FeatureReduction")],ic);var lL;let xp=lL=class extends B{constructor(){super(...arguments),this.statisticType=null,this.onStatisticField=null,this.onStatisticValueExpression=null}clone(){return new lL({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}};u([d({type:String,json:{write:!0}})],xp.prototype,"statisticType",void 0),u([d({type:String,json:{write:!0}})],xp.prototype,"onStatisticField",void 0),u([d({type:String,json:{write:!0}})],xp.prototype,"onStatisticValueExpression",void 0),xp=lL=u([E("esri.layers.support.OutStatistic")],xp);const gbe=xp;var uL;let $g=uL=class extends B{constructor(){super(...arguments),this.name=null,this.outStatistic=null}clone(){return new uL({name:this.name,outStatistic:this.outStatistic.clone()})}};u([d({type:String,json:{write:!0}})],$g.prototype,"name",void 0),u([d({type:gbe,json:{write:!0}})],$g.prototype,"outStatistic",void 0),$g=uL=u([E("esri.layers.support.AggregateField")],$g);const lJ=$g,pP="__begin__",fP="__end__",vbe=new RegExp(pP,"ig"),wbe=new RegExp(fP,"ig"),I4=new RegExp("^"+pP,"i"),C4=new RegExp(fP+"$","i"),GS='"',_be=GS+" + ",bbe=" + "+GS;function Sbe(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}function $be(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function mP(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=Sbe(e.labelExpression),t.type="conventional"),t}function xbe(e){const t=mP(e);if(!t)return null;switch(t.type){case"conventional":return cL(t.expression);case"arcade":return t.expression}return null}function Ebe(e){const t=mP(e);if(!t)return null;switch(t.type){case"conventional":return Mbe(t.expression);case"arcade":return uJ(t.expression)}return null}function cL(e){let t;return e?(t=ra(e,r=>pP+'$feature["'+r+'"]'+fP),t=I4.test(t)?t.replace(I4,""):GS+t,t=C4.test(t)?t.replace(C4,""):t+GS,t=t.replace(vbe,_be).replace(wbe,bbe)):t='""',t}const Tbe=/^\s*\{([^}]+)\}\s*$/i;function Mbe(e){const t=e.match(Tbe);return t&&t[1].trim()||null}const Ibe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,Cbe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,kbe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function uJ(e){if(!e)return null;let t=Ibe.exec(e)||Cbe.exec(e);return t?t[1]||t[3]:(t=kbe.exec(e),t?t[2]:null)}var dL;let du=dL=class extends B{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?cL(t.value):e}writeExpression(e,t,r){this.value!=null&&(e=cL(this.value)),e!=null&&(t[r]=e)}clone(){return new dL({expression:this.expression,title:this.title,value:this.value})}};u([d({type:String,json:{write:{writerEnsuresNonNull:!0}}})],du.prototype,"expression",void 0),u([te("expression",["expression","value"])],du.prototype,"readExpression",null),u([se("expression")],du.prototype,"writeExpression",null),u([d({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],du.prototype,"title",void 0),u([d({json:{read:!1,write:!1}})],du.prototype,"value",void 0),du=dL=u([E("esri.layers.support.LabelExpressionInfo")],du);const cJ=du,dJ=[252,146,31,255],hJ={type:"esriSMS",style:"esriSMSCircle",size:6,color:dJ,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},pJ={type:"esriSLS",style:"esriSLSSolid",width:.75,color:dJ},fJ={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},Lbe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},Obe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},Abe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},Pbe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};rn.fromJSON(hJ);hn.fromJSON(pJ);ha.fromJSON(fJ);const Rbe=xm.fromJSON(Lbe),tje=rn.fromJSON(Obe),rje=hn.fromJSON(Abe),ije=ha.fromJSON(Pbe);var hL;const aw=new Ee({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function mJ(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function Fbe(e){return(e==null?void 0:e.type)==="map-image"}function yJ(e){var t,r;return!!Fbe(e)&&!!((r=(t=e.capabilities)==null?void 0:t.exportMap)!=null&&r.supportsArcadeExpressionForLabeling)}function Nbe(e){return mJ(e)||yJ(e.layer)}let Bt=hL=class extends B{constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=Rbe,this.useCodedValues=void 0,this.where=null}static evaluateWhere(e,t){const r=(i,n,s)=>{switch(n){case"=":return i==s;case"<>":return i!=s;case">":return i>s;case">=":return i>=s;case"<":return i<s;case"<=":return i<=s}return!1};try{if(e==null)return!0;const i=e.split(" ");if(i.length===3)return r(t[i[0]],i[1],i[2]);if(i.length===7){const n=r(t[i[0]],i[1],i[2]),s=i[3],o=r(t[i[4]],i[5],i[6]);switch(s){case"AND":return n&&o;case"OR":return n||o}}return!1}catch{console.log("Error.: can't parse = "+e)}}readLabelExpression(e,t){const r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,t,r){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=$be(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const i=uJ(this.labelExpressionInfo.expression);i&&(e="["+i+"]")}}e!=null&&(t[r]=e)}writeLabelExpressionInfo(e,t,r,i){if(e==null&&this.labelExpression!=null&&mJ(i))e=new cJ({expression:this.getLabelExpressionArcade()});else if(!e)return;const n=e.toJSON(i);n.expression&&(t[r]=n)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return mP(this)}getLabelExpressionArcade(){return xbe(this)}getLabelExpressionSingleField(){return Ebe(this)}hash(){return JSON.stringify(this)}clone(){return new hL({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:P(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:P(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};u([d({type:String,json:{write:!0}})],Bt.prototype,"name",void 0),u([d({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Bt.prototype,"allowOverrun",void 0),u([d({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],Bt.prototype,"deconflictionStrategy",void 0),u([d({type:String,json:{write:{overridePolicy(e,t,r){return this.labelExpressionInfo&&(r==null?void 0:r.origin)==="service"&&yJ(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],Bt.prototype,"labelExpression",void 0),u([te("labelExpression")],Bt.prototype,"readLabelExpression",null),u([se("labelExpression")],Bt.prototype,"writeLabelExpression",null),u([d({type:cJ,json:{write:{overridePolicy:(e,t,r)=>Nbe(r)?{allowNull:!0}:{enabled:!1}}}})],Bt.prototype,"labelExpressionInfo",void 0),u([se("labelExpressionInfo")],Bt.prototype,"writeLabelExpressionInfo",null),u([d({type:aw.apiValues,json:{type:aw.jsonValues,read:aw.read,write:aw.write}})],Bt.prototype,"labelPlacement",void 0),u([d({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Bt.prototype,"labelPosition",void 0),u([d({type:Number})],Bt.prototype,"maxScale",void 0),u([se("maxScale")],Bt.prototype,"writeMaxScale",null),u([d({type:Number})],Bt.prototype,"minScale",void 0),u([se("minScale")],Bt.prototype,"writeMinScale",null),u([d({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:!1}}}})],Bt.prototype,"repeatLabel",void 0),u([d({type:Number,cast:Be,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Bt.prototype,"repeatLabelDistance",void 0),u([d({types:Mue,json:{origins:{"web-scene":{types:Iue,write:n4,default:null}},write:n4,default:null}})],Bt.prototype,"symbol",void 0),u([d({type:Boolean,json:{write:!0}})],Bt.prototype,"useCodedValues",void 0),u([d({type:String,json:{write:!0}})],Bt.prototype,"where",void 0),Bt=hL=u([E("esri.layers.support.LabelClass")],Bt);const Wv=Bt;var pL;let qs=pL=class extends ic{constructor(e){super(e),this.type="binning",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}clone(){return new pL({fields:P(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:P(this.labelingInfo),labelsVisible:this.labelsVisible,popupEnabled:this.popupEnabled,popupTemplate:P(this.popupTemplate),renderer:P(this.renderer)})}};u([me({binning:"binning"})],qs.prototype,"type",void 0),u([d({type:Number,json:{write:!0}})],qs.prototype,"fixedBinLevel",void 0),u([d({type:[Wv],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],qs.prototype,"labelingInfo",void 0),u([d(w$)],qs.prototype,"labelsVisible",void 0),u([d(v$)],qs.prototype,"popupEnabled",void 0),u([d({type:Mh,json:{name:"popupInfo",write:!0}})],qs.prototype,"popupTemplate",void 0),u([d({type:[lJ],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],qs.prototype,"fields",void 0),u([d({types:qv,json:{write:!0}})],qs.prototype,"renderer",void 0),qs=pL=u([E("esri.layers.support.FeatureReductionBinning")],qs);const Dbe=qs;var fL;let zi=fL=class extends B{constructor(e){super(e),this.type="cluster",this.clusterRadius=Be("80px"),this.clusterMinSize=Be("12px"),this.clusterMaxSize=Be("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}clone(){return new fL({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:P(this.labelingInfo),labelsVisible:this.labelsVisible,fields:P(this.fields),renderer:P(this.renderer),popupEnabled:this.popupEnabled,popupTemplate:P(this.popupTemplate)})}};u([d({type:["cluster"],readOnly:!0,json:{write:!0}})],zi.prototype,"type",void 0),u([d({type:Number,cast:e=>e==="auto"?e:Be(e),json:{write:!0}})],zi.prototype,"clusterRadius",void 0),u([d({type:Number,cast:Be,json:{write:!0}})],zi.prototype,"clusterMinSize",void 0),u([d({type:Number,cast:Be,json:{write:!0}})],zi.prototype,"clusterMaxSize",void 0),u([d(v$)],zi.prototype,"popupEnabled",void 0),u([d({type:Mh,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],zi.prototype,"popupTemplate",void 0),u([d({types:qv,json:{write:!0}})],zi.prototype,"renderer",void 0),u([d({types:Eue})],zi.prototype,"symbol",void 0),u([d({type:[Wv],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],zi.prototype,"labelingInfo",void 0),u([d(w$)],zi.prototype,"labelsVisible",void 0),u([d({type:[lJ],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],zi.prototype,"fields",void 0),zi=fL=u([E("esri.layers.support.FeatureReductionCluster")],zi);const gJ=zi;var mL;let U_=mL=class extends ic{constructor(e){super(e),this.type="selection"}clone(){return new mL}};u([d({type:["selection"]})],U_.prototype,"type",void 0),U_=mL=u([E("esri.layers.support.FeatureReductionSelection")],U_);const k4=U_,L4={key:"type",base:ic,typeMap:{selection:gJ}},vJ={types:{key:"type",base:ic,typeMap:{selection:k4,cluster:gJ,binning:Dbe}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:L4},"portal-item":{types:L4},"web-scene":{types:{key:"type",base:ic,typeMap:{selection:k4}}}}}},O4=new Ee({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let hu=class extends pn(B){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};u([d({json:{write:!0}})],hu.prototype,"name",void 0),u([d({json:{write:!0}})],hu.prototype,"description",void 0),u([d({json:{read:O4.read,write:O4.write}})],hu.prototype,"drawingTool",void 0),u([d({json:{write:!0}})],hu.prototype,"prototype",void 0),u([d({json:{write:!0}})],hu.prototype,"thumbnail",void 0),hu=u([E("esri.layers.support.FeatureTemplate")],hu);const _$=hu;let Ua=class extends pn(B){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const r of Object.keys(e))t[r]=PA(e[r]);return t}writeDomains(e,t){var i;const r={};for(const n of Object.keys(e))e[n]&&(r[n]=(i=e[n])==null?void 0:i.toJSON());t.domains=r}};u([d({json:{write:!0}})],Ua.prototype,"id",void 0),u([d({json:{write:!0}})],Ua.prototype,"name",void 0),u([d({json:{write:!0}})],Ua.prototype,"domains",void 0),u([te("domains")],Ua.prototype,"readDomains",null),u([se("domains")],Ua.prototype,"writeDomains",null),u([d({type:[_$],json:{write:!0}})],Ua.prototype,"templates",void 0),Ua=u([E("esri.layers.support.FeatureType")],Ua);const yP=Ua;function jbe(e){return e.type==="date"||e.type==="esriFieldTypeDate"}function A4(e){return e.type==="oid"||e.type==="esriFieldTypeOID"}function P4(e){return e.type==="global-id"||e.type==="esriFieldTypeGlobalID"}class Vbe{constructor(t){if(this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!t)return;const r=[];for(const i of t){const n=i&&i.name;if(n){const s=R4(n);this._fieldsMap.set(n,i),this._fieldsMap.set(s,i),r.push(s),jbe(i)?(this.dateFields.push(i),this._dateFieldsSet.add(i)):F3(i)&&(this._numericFieldsSet.add(i),this.numericFields.push(i)),A4(i)||P4(i)||(i.editable=i.editable==null||!!i.editable,i.nullable=i.nullable==null||!!i.nullable)}}r.sort(),this.uid=r.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)A4(t)||P4(t)||t.nullable||qae(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}has(t){return this.get(t)!=null}get(t){return t!=null?this._fieldsMap.get(t)||this._fieldsMap.get(R4(t)):void 0}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){const r=this.get(t);if(r)return r.name}}function R4(e){return e.toLowerCase().trim()}const zbe=Z.getLogger("esri.layers.support.fieldProperties");function wJ(){return{fields:{type:[Nv],value:null},fieldsIndex:{readOnly:!0,get(){return new Vbe(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e)this.fieldsIndex.has(t)||zbe.error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e});return aU(this.fieldsIndex,e)}}}}let Ep=class extends pn(B){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};u([d({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Ep.prototype,"shapeAreaField",void 0),u([d({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Ep.prototype,"shapeLengthField",void 0),u([d({type:String,json:{read:e=>bce.read(e)||Sce.read(e)}})],Ep.prototype,"units",void 0),Ep=u([E("esri.layers.support.GeometryFieldsInfo")],Ep);const Ube=Ep,Gbe=/\[([^\[\]]+)\]/gi;function yL(e,t,r){return e?e.map(i=>{const n=new Wv;if(n.read(i,r),n.labelExpression){const s=t.fields||t.layerDefinition&&t.layerDefinition.fields||this.fields;n.labelExpression=n.labelExpression.replace(Gbe,(o,a)=>`[${Bbe(a,s)}]`)}return n}):null}function Bbe(e,t){if(!t)return e;const r=e.toLowerCase();for(let i=0;i<t.length;i++){const n=t[i].name;if(n.toLowerCase()===r)return n}return e}var gL;let Tp=gL=class extends B{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new de}clone(){return new gL({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};u([d({type:String,json:{write:!0}})],Tp.prototype,"floorField",void 0),u([d({json:{read:!1,write:!1}})],Tp.prototype,"viewAllMode",void 0),u([d({json:{read:!1,write:!1}})],Tp.prototype,"viewAllLevelIds",void 0),Tp=gL=u([E("esri.layers.support.LayerFloorInfo")],Tp);const qbe=Tp,F4=new Ee({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),N4=new Ee({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Xn=class extends pn(B){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};u([d({json:{read:F4.read,write:F4.write}})],Xn.prototype,"cardinality",void 0),u([d({json:{read:!0,write:!0}})],Xn.prototype,"composite",void 0),u([d({json:{read:!0,write:!0}})],Xn.prototype,"id",void 0),u([d({json:{read:!0,write:!0}})],Xn.prototype,"keyField",void 0),u([d({json:{read:!0,write:!0}})],Xn.prototype,"keyFieldInRelationshipTable",void 0),u([d({json:{read:!0,write:!0}})],Xn.prototype,"name",void 0),u([d({json:{read:!0,write:!0}})],Xn.prototype,"relatedTableId",void 0),u([d({json:{read:!0,write:!0}})],Xn.prototype,"relationshipTableId",void 0),u([d({json:{read:N4.read,write:N4.write}})],Xn.prototype,"role",void 0),Xn=u([E("esri.layers.support.Relationship")],Xn);const Wbe=Xn,Ws=[];function Hbe(e,t){if(GH(e.url))return!0;const{wkid:r}=t;for(const i of Ws){if(e.version>=i[0])return!0;if(typeof i[1]=="function"&&(i[1]=i[1]()),i[1].has(r))return!1}return!0}Ws.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102901;t<=102955;t++)e.add(t);return e}]),Ws.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),Ws.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),Ws.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),Ws.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);for(let t=103696;t<=103698;t++)e.add(t);return e}]),Ws.push([10.7,()=>{const e=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let t=8065;t<=8068;t++)e.add(t);for(let t=8082;t<=8083;t++)e.add(t);for(let t=8379;t<=8385;t++)e.add(t);for(let t=8836;t<=8840;t++)e.add(t);for(let t=8857;t<=8860;t++)e.add(t);for(let t=53035;t<=53037;t++)e.add(t);for(let t=54090;t<=54091;t++)e.add(t);for(let t=102498;t<=102499;t++)e.add(t);return e}]),Ws.push([10.61,()=>new Set([102497])]),Ws.push([10.6,()=>{const e=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let t=7755;t<=7787;t++)e.add(t);for(let t=7791;t<=7795;t++)e.add(t);for(let t=7799;t<=7801;t++)e.add(t);for(let t=7825;t<=7831;t++)e.add(t);for(let t=7877;t<=7878;t++)e.add(t);for(let t=7882;t<=7883;t++)e.add(t);for(let t=7991;t<=7992;t++)e.add(t);for(let t=8042;t<=8043;t++)e.add(t);for(let t=8058;t<=8059;t++)e.add(t);for(let t=8311;t<=8348;t++)e.add(t);for(let t=9060;t<=9067;t++)e.add(t);for(let t=102562;t<=102568;t++)e.add(t);for(let t=102799;t<=102900;t++)e.add(t);return e}]),Ws.push([10.51,()=>{const e=new Set([7683,7881,7886,7899,8888,9e3]);for(let t=8013;t<=8032;t++)e.add(t);for(let t=9053;t<=9057;t++)e.add(t);for(let t=104017;t<=104018;t++)e.add(t);for(let t=104971;t<=104974;t++)e.add(t);return e}]),Ws.push([10.5,()=>{const e=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let t=4087;t<=4088;t++)e.add(t);for(let t=5896;t<=5899;t++)e.add(t);for(let t=7005;t<=7007;t++)e.add(t);for(let t=7057;t<=7070;t++)e.add(t);for(let t=7073;t<=7082;t++)e.add(t);for(let t=7109;t<=7128;t++)e.add(t);for(let t=7844;t<=7859;t++)e.add(t);return e}]);async function Jbe(e,t,r){const i=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(i&&i.type==="unique-value"&&i.styleOrigin){const n=await A2(i.populateFromStyle());if(yt(r),n.ok===!1){const s=n.error;t&&t.messages&&t.messages.push(new ki("renderer:style-reference",`Failed to create unique value renderer from style reference: ${s.message}`,{error:s,context:t})),e.clear("renderer",t.origin)}}}const Zbe=["oid","global-id"],Ybe=["oid","global-id","guid"];function _J({displayField:e,editFieldsInfo:t,fields:r,objectIdField:i,title:n},s){if(!r)return null;const o=rSe({editFieldsInfo:t,fields:r,objectIdField:i},s);if(!o.length)return null;const a=sSe({titleBase:n,fields:r,displayField:e}),l=nSe();return new Mh({title:a,content:l,fieldInfos:o})}const Qbe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],Kbe=(e,{editFieldsInfo:t,objectIdField:r,visibleFieldNames:i})=>i?i.has(e.name):!bJ(e.name,t)&&(!r||e.name!==r)&&!Zbe.includes(e.type)&&!Qbe.some(n=>n.test(e.name));function Xbe(e,t){const r=e;return t&&(e=e.filter(i=>!t.includes(i.type))),e===r&&(e=e.slice()),e.sort(eSe),e}function eSe(e,t){return e.type==="oid"?-1:t.type==="oid"?1:D4(e)?-1:D4(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function bJ(e,t){if(!e||!t)return!1;const{creationDateField:r,creatorField:i,editDateField:n,editorField:s}=t;return[r&&r.toLowerCase(),i&&i.toLowerCase(),n&&n.toLowerCase(),s&&s.toLowerCase()].includes(e.toLowerCase())}function tSe(e,t){return e.editable&&!Ybe.includes(e.type)&&!bJ(e.name,t)}function rSe({editFieldsInfo:e,fields:t,objectIdField:r},i){return Xbe(t,(i==null?void 0:i.ignoreFieldTypes)||oSe).map(n=>new Mv({fieldName:n.name,isEditable:tSe(n,e),label:n.alias,format:iSe(n),visible:Kbe(n,{editFieldsInfo:e,objectIdField:r,visibleFieldNames:i==null?void 0:i.visibleFieldNames})}))}function iSe(e){switch(e.type){case"small-integer":case"integer":case"single":return new Qp({digitSeparator:!0,places:0});case"double":return new Qp({digitSeparator:!0,places:2});case"date":return new Qp({dateFormat:"long-month-day-year"});default:return e.type==="string"&&pU(e.name)?new Qp({digitSeparator:!0,places:0}):null}}function nSe(){return[new Jf,new z0]}function sSe(e){const t=Vae(e),{titleBase:r}=e;return t?`${r}: {${t.trim()}}`:r}function D4(e){return(e.name&&e.name.toLowerCase())==="name"?!0:(e.alias&&e.alias.toLowerCase())==="name"||void 0}const oSe=["geometry","blob","raster","guid","xml"],LE=new Ee({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),aSe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},Gt="FeatureLayer",j4=Z.getLogger("esri.layers.FeatureLayer");function lw(e,t){return new O("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function V4(e){return e&&e instanceof de}function be(e,t,r){return!!(e&&e.hasOwnProperty(t)?e[t]:r)}function uw(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}function lSe(e){var r;const t=(r=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:r.map(i=>i.toLowerCase());return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function _y(e,t){var i;const r=(i=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:i.map(n=>n.toLowerCase());return!!(r!=null&&r.includes(t.toLowerCase()))}const OE=wJ();function AE(e,t,r){const i=!!(r!=null&&r.writeLayerSchema);return{enabled:i,ignoreOrigin:i}}let J=class extends WH(BH(tJ(aJ(sJ(nJ(Z_e(XH(dbe(cP(qH(z_e(pn(j0))))))))))))){constructor(...e){super(...e),this._handles=new zt,this.capabilities=null,this.charts=null,this.copyright=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.dynamicDataSource=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.floorInfo=null,this.formTemplate=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.layerId=void 0,this.legendEnabled=!0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.screenSizePerspectiveEnabled=!0,this.serviceDefinitionExpression=null,this.spatialReference=Te.WGS84,this.subtypeCode=null,this.subtypeField=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.trackIdField=null,this.type="feature",this.typeIdField=null,this.types=null,this.indexes=new(de.ofType(Ka)),this.userIsAdmin=!1,this.version=void 0,this.visible=!0}destroy(){var e;(e=this.source)==null||e.destroy(),this._handles=qi(this._handles)}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=I(e)?e.signal:null;if(this.portalItem&&this.portalItem.loaded&&this.source)return void this.addResolvingPromise(this.createGraphicsSource(t).then(i=>this._initLayerProperties(i)));const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(bv).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const i=await this._fetchFirstLayerId(t);i!=null&&(this.layerId=i)}if(!this.url&&!this._hasMemorySource())throw new O("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this._initLayerProperties(await this.createGraphicsSource(t))}).then(()=>this.finishLoadEditablePortalLayer(e));return this.addResolvingPromise(r),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,{analytics:this._readAnalyticsCapabilities(t),attachment:this._readAttachmentCapabilities(t),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),queryTopFeatures:this._readQueryTopFeaturesCapabilities(t),editing:this._readEditingCapabilities(t)}}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){e!=null?this._override("editingEnabled",e):this._clearOverride("editingEnabled")}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,r){return this._readEditingEnabled(t,!0,r)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,r,i){this._writeEditingEnabled(e,t,!0,i)}readEditingInfo(e,t){const{editingInfo:r}=t;return r?{lastEditDate:r.lastEditDate!=null?new Date(r.lastEditDate):null}:null}readIsTable(e,t){return(t=t&&t.layerDefinition||t).type==="Table"||!t.geometryType}writeIsTable(e,t,r,i){i!=null&&i.writeLayerSchema&&sn(r,e?"Table":"Feature Layer",t)}readMinScale(e,t){return t.effectiveMinScale||e||0}readMaxScale(e,t){return t.effectiveMaxScale||e||0}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){for(const r of t.fields)if(r.type==="esriFieldTypeGlobalID")return r.name}}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){for(const r of t.fields)if(r.type==="esriFieldTypeOID")return r.name}}get parsedUrl(){const e=this.url?Qt(this.url):null;return e!=null&&(this.dynamicDataSource!=null?e.path=dh(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=dh(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){tS(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,r){const i=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(i){const n=OH(i,t,r)||void 0;return n||j4.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),n}if(t.defaultSymbol)return t.types&&t.types.length?new lP({defaultSymbol:PE(t.defaultSymbol,t,r),field:t.typeIdField,uniqueValueInfos:t.types.map(n=>({id:n.id,symbol:PE(n.symbol,n,r)}))}):new oP({symbol:PE(t.defaultSymbol,t,r)})}set source(e){const t=this._get("source");t!==e&&(V4(t)&&this._resetMemorySource(t),V4(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof de?new Qa({layer:this,items:e}):e:null}readSource(e,t){const r=Dv.fromJSON(t.featureSet);return new Qa({layer:this,items:r&&r.features||[]})}readServiceDefinitionExpression(e,t){return t.definitionQuery||t.definitionExpression}readTemplates(e,t){const r=t.editFieldsInfo,i=r&&r.creatorField,n=r&&r.editorField;return e=e&&e.map(s=>_$.fromJSON(s)),this._fixTemplates(e,i),this._fixTemplates(e,n),e}readTitle(e,t){const r=t.layerDefinition&&t.layerDefinition.name||t.name,i=t.title||t.layerDefinition&&t.layerDefinition.title;if(r){const n=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?q_e(this.url,r):r;let s=r;if(!s&&this.url){const o=rm(this.url);I(o)&&(s=o.title)}return s?(this.sublayerTitleMode==="item-title-and-service-name"&&n&&n!==s&&(s=n+" - "+s),hP(s)):void 0}if(this.sublayerTitleMode==="item-title"&&i)return i}readTitleFromWebMap(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}readTypeIdField(e,t){let r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();const i=t.fields.find(n=>n.name.toLowerCase()===r);i&&(r=i.name)}return r}readTypes(e,t){e=(t=t.layerDefinition||t).types;const r=t.editFieldsInfo,i=r&&r.creatorField,n=r&&r.editorField;return e&&e.map(s=>(s=yP.fromJSON(s),this._fixTemplates(s.templates,i),this._fixTemplates(s.templates,n),s))}set url(e){const t=H_e({layer:this,url:e,nonStandardUrlAllowed:!0,logger:j4});this._set("url",t.url),t.layerId!=null&&this._set("layerId",t.layerId)}writeUrl(e,t,r,i){J_e(this,e,null,t,i)}readVersion(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}readVisible(e,t){return t.layerDefinition&&t.layerDefinition.defaultVisibility!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}addAttachment(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("addAttachment"in this.source))throw new O(Gt,"Layer source does not support addAttachment capability");return this.source.addAttachment(e,t)})}updateAttachment(e,t,r){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("updateAttachment"in this.source))throw new O(Gt,"Layer source does not support updateAttachment capability");return this.source.updateAttachment(e,t,r)})}async applyEdits(e,t){const r=await V(()=>import("./editingSupport.14c66c43.js"),[],import.meta.url);return await this.load(),r.applyEdits(this,this.source,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return _J(this,e)}async createGraphicsSource(e){if(this._hasMemorySource())return this.source.load({signal:e});const{default:t}=await dre(V(()=>import("./FeatureLayerSource.020af83b.js"),["FeatureLayerSource.020af83b.js","executeForIds.7c50a8ee.js"],import.meta.url),e);return new t({layer:this}).load({signal:e})}createQuery(){const e=new xi,t=this.get("capabilities.data"),r=this.get("capabilities.query");e.dynamicDataSource=this.dynamicDataSource,e.historicMoment=this.historicMoment,e.gdbVersion=this.gdbVersion,e.returnGeometry=!0,r&&(e.compactGeometryEnabled=r.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),t&&(t.supportsZ&&this.returnZ!=null&&(e.returnZ=this.returnZ),t.supportsM&&this.returnM!=null&&(e.returnM=this.returnM)),e.outFields=["*"];const i=I(this.subtypeCode)?`${this.subtypeField} = ${this.subtypeCode}`:null,n=PH(this.definitionExpression,i);e.where=n||"1=1";const{timeOffset:s,timeExtent:o}=this;return e.timeExtent=s!=null&&o!=null?o.offset(-s.value,s.unit):o||null,e.multipatchOption=this.geometryType==="multipatch"?"xyFootprint":null,e}deleteAttachments(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("deleteAttachments"in this.source))throw new O(Gt,"Layer source does not support deleteAttachments capability");return this.source.deleteAttachments(e,t)})}fetchRecomputedExtents(e){return this.load({signal:e==null?void 0:e.signal}).then(()=>{if(this.source.fetchRecomputedExtents)return this.source.fetchRecomputedExtents(e);throw new O(Gt,"Layer source does not support fetchUpdates capability")})}getFeatureType(e){const{typeIdField:t,types:r}=this;if(!t||!e)return null;const i=e.attributes?e.attributes[t]:void 0;if(i==null)return null;let n=null;return r.some(s=>{const{id:o}=s;return o!=null&&(o.toString()===i.toString()&&(n=s),!!n)}),n}getFieldDomain(e,t){const r=t&&t.feature,i=this.getFeatureType(r);if(i){const n=i.domains&&i.domains[e];if(n&&n.type!=="inherited")return n}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}queryAttachments(e,t){return e=TC.from(e),this.load().then(()=>{if(!this.get("capabilities.data.supportsAttachment"))throw new O(Gt,"this layer doesn't support attachments");const{attachmentTypes:r,objectIds:i,globalIds:n,num:s,size:o,start:a,where:l}=e;if(!this.get("capabilities.operations.supportsQueryAttachments")){const c=i&&i.length>1,h=r&&r.length,f=n&&n.length,m=o&&o.length;if(c||h||f||m||s||a||l)throw new O(Gt,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(i&&i.length||l))throw new O(Gt,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in this.source))throw new O(Gt,"Layer source does not support queryAttachments capability",e);return this.source.queryAttachments(e)})}queryFeatures(e,t){return this.load().then(()=>this.source.queryFeatures(xi.from(e)||this.createQuery(),t)).then(r=>{if(r!=null&&r.features)for(const i of r.features)i.layer=i.sourceLayer=this;return r})}queryObjectIds(e,t){return this.load().then(()=>{if(this.source.queryObjectIds)return this.source.queryObjectIds(xi.from(e)||this.createQuery(),t);throw new O(Gt,"Layer source does not support queryObjectIds capability")})}queryFeatureCount(e,t){return this.load().then(()=>{if(this.source.queryFeatureCount)return this.source.queryFeatureCount(xi.from(e)||this.createQuery(),t);throw new O(Gt,"Layer source does not support queryFeatureCount capability")})}queryExtent(e,t){return this.load().then(()=>{if(this.source.queryExtent)return this.source.queryExtent(xi.from(e)||this.createQuery(),t);throw new O(Gt,"Layer source does not support queryExtent capability")})}queryRelatedFeatures(e,t){return this.load().then(()=>{if("queryRelatedFeatures"in this.source)return this.source.queryRelatedFeatures(tk.from(e),t);throw new O(Gt,"Layer source does not support queryRelatedFeatures capability")})}queryRelatedFeaturesCount(e,t){return this.load().then(()=>{if("queryRelatedFeaturesCount"in this.source)return this.source.queryRelatedFeaturesCount(tk.from(e),t);throw new O(Gt,"Layer source does not support queryRelatedFeaturesCount capability")})}queryTopFeatures(e,t){return this.load().then(()=>{if("queryTopFeatures"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopFeatures(q1.from(e),t).then(r=>{if(r!=null&&r.features)for(const i of r.features)i.layer=i.sourceLayer=this;return r});throw new O(Gt,"Layer source does not support queryTopFeatures capability")})}queryTopObjectIds(e,t){return this.load().then(()=>{if("queryTopObjectIds"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopObjectIds(q1.from(e),t);throw new O(Gt,"Layer source does not support queryTopObjectIds capability")})}queryTopFeaturesExtent(e,t){return this.load().then(()=>{if("queryTopExtents"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopExtents(q1.from(e),t);throw new O(Gt,"Layer source does not support queryTopExtents capability")})}queryTopFeatureCount(e,t){return this.load().then(()=>{if("queryTopCount"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopCount(q1.from(e),t);throw new O(Gt,"Layer source does not support queryFeatureCount capability")})}read(e,t){const r=e.featureCollection;if(r){const i=r.layers;i&&i.length===1&&(super.read(i[0],t),r.showLegend!=null&&super.read({showLegend:r.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}write(e,t){var s;t={...t,writeLayerSchema:(s=t==null?void 0:t.writeLayerSchema)!=null?s:this._hasMemorySource()};const{origin:r,layerContainerType:i,messages:n}=t;if(this.dynamicDataSource)return n==null||n.push(lw(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(r==="web-scene"||r==="web-map"&&i!=="tables")return n==null||n.push(lw(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return n==null||n.push(lw(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&r==="web-map"&&i==="tables")return n==null||n.push(lw(this,"using a non-table source cannot be written to tables in web maps")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new O(Gt,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&(this.source.type==="memory"||Hbe(this,e))}async save(e){return(await V(()=>import("./featureLayerUtils.9105d472.js"),["featureLayerUtils.9105d472.js","originUtils.10ab3775.js","multiOriginJSONSupportUtils.2c03086c.js","arcgisLayers.964b6847.js","lazyLayerLoader.1843a866.js","jsonContext.36e23314.js","portalItemUtils.8f42d832.js"],import.meta.url)).save(this,e)}async saveAs(e,t){return(await V(()=>import("./featureLayerUtils.9105d472.js"),["featureLayerUtils.9105d472.js","originUtils.10ab3775.js","multiOriginJSONSupportUtils.2c03086c.js","arcgisLayers.964b6847.js","lazyLayerLoader.1843a866.js","jsonContext.36e23314.js","portalItemUtils.8f42d832.js"],import.meta.url)).saveAs(this,e,t)}_readEditingEnabled(e,t,r){var n;let i=(n=e.layerDefinition)==null?void 0:n.capabilities;return i?this._hasEditingCapability(i):(i=e.capabilities,t&&(r==null?void 0:r.origin)==="web-map"&&!this._hasMemorySource()&&i?this._hasEditingCapability(i):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,r,i){var n,s;if(!e){const o=(s=(n=this.capabilities)==null?void 0:n.operations)!=null&&s.supportsSync?"Query,Sync":"Query";sn("layerDefinition.capabilities",o,t),r&&!(i!=null&&i.writeLayerSchema)&&(t.capabilities=o)}}_checkAttachmentSupport(e){const{attributes:t}=e,{objectIdField:r}=this;return this.get("capabilities.data.supportsAttachment")?e?t?t[r]?void 0:Promise.reject(new O(Gt,`feature is missing the identifying attribute ${r}`)):Promise.reject(new O(Gt,"'attributes' are required on a feature to query attachments")):Promise.reject(new O(Gt,"A feature is required to add/delete/update attachments")):Promise.reject(new O(Gt,"this layer doesn't support attachments"))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstLayerId(e){return nt(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t=>{const r=t.data;if(r)return Array.isArray(r.layers)&&r.layers.length>0?r.layers[0].id:Array.isArray(r.tables)&&r.tables.length>0?r.tables[0].id:void 0})}async _initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),tS(this.renderer,this.fieldsIndex),P3(this.timeInfo,this.fieldsIndex),Jbe(this,{origin:"service"})}async hasDataChanged(){var e,t;if((e=this.source)!=null&&e.refresh)try{const{dataChanged:r,updates:i}=await((t=this.source)==null?void 0:t.refresh());if(I(i)&&(this.sourceJSON={...this.sourceJSON,...i},this.read(i,{origin:"service",url:this.parsedUrl})),r)return!0}catch{}if(this.definitionExpression)try{return(await $_e(this.definitionExpression,this.fieldsIndex)).hasDateFunctions}catch{}return!1}_verifyFields(){var t;const e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||((t=this.fields)==null?void 0:t.some(r=>r.type==="geometry"))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(r=>{const i=r.prototype&&r.prototype.attributes;i&&t&&delete i[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new O("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new O("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this._handles.add([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}_readAnalyticsCapabilities(e){return{supportsCacheHint:_y(e.advancedQueryCapabilities,"queryAnalytics")}}_readAttachmentCapabilities(e){const t=e.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:_y(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:be(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(i=>{const n=aSe[i.name];n&&(r[n]=!!i.isEnabled)}),r}_readDataCapabilities(e){return{isVersioned:be(e,"isDataVersioned",!1),supportsAttachment:be(e,"hasAttachments",!1),supportsM:be(e,"hasM",!1),supportsZ:be(e,"hasZ",!1)}}_readMetadataCapabilities(e){return{supportsAdvancedFieldProperties:be(e,"supportsFieldDescriptionProperty",!1)}}_readOperationsCapabilities(e,t){const r=e?e.toLowerCase().split(",").map(f=>f.trim()):[],i=this.url?rm(this.url):null,n=r.includes(I(i)&&i.serverType==="MapServer"?"data":"query"),s=r.includes("editing")&&!t.datesInUnknownTimezone;let o=s&&r.includes("create"),a=s&&r.includes("delete"),l=s&&r.includes("update");const c=r.includes("changetracking"),h=t.advancedQueryCapabilities;return s&&!(o||a||l)&&(o=a=l=!0),{supportsCalculate:be(t,"supportsCalculate",!1),supportsTruncate:be(t,"supportsTruncate",!1),supportsValidateSql:be(t,"supportsValidateSql",!1),supportsAdd:o,supportsDelete:a,supportsEditing:s,supportsChangeTracking:c,supportsQuery:n,supportsQueryAnalytics:be(h,"supportsQueryAnalytic",!1),supportsQueryAttachments:be(h,"supportsQueryAttachments",!1),supportsQueryTopFeatures:be(h,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:be(t,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:l,supportsExceedsLimitStatistics:be(t,"supportsExceedsLimitStatistics",!1)}}_readQueryCapabilities(e){var l;const t=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,i=e.archivingInfo,n=(l=this.url)==null?void 0:l.includes("MapServer"),s=!j("mapserver-pbf-enabled")&&n&&this.version<10.81,o=GH(this.url),a=(e.supportedQueryFormats||"").split(",").reduce((c,h)=>{const f=h.toLowerCase().trim();return f&&c.add(f),c},new Set);return{supportsStatistics:be(t,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:be(t,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:be(t,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:lSe(t),supportsCentroid:be(t,"supportsReturningGeometryCentroid",!1),supportsDistance:be(t,"supportsQueryWithDistance",!1),supportsDistinct:be(t,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:be(t,"supportsReturningQueryExtent",!1),supportsGeometryProperties:be(t,"supportsReturningGeometryProperties",!1),supportsHavingClause:be(t,"supportsHavingClause",!1),supportsOrderBy:be(t,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:be(t,"supportsPagination",!1),supportsQuantization:be(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:be(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:be(e,"supportsReturningQueryGeometry",!1),supportsResultType:be(t,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:be(t,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:be(t,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:be(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:be(t,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:be(r,"allowOthersToQuery",!0),supportsHistoricMoment:be(i,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!s&&a.has("pbf"),supportsDisjointSpatialRelationship:be(t,"supportsDisjointSpatialRel",!1),supportsCacheHint:be(t,"supportsQueryWithCacheHint",!1)||_y(t,"query"),supportsDefaultSpatialReference:be(t,"supportsDefaultSR",!1),supportsCompactGeometry:o,maxRecordCountFactor:uw(e,"maxRecordCountFactor",void 0),maxRecordCount:uw(e,"maxRecordCount",void 0),standardMaxRecordCount:uw(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:uw(e,"tileMaxRecordCount",void 0)}}_readQueryRelatedCapabilities(e){const t=e.advancedQueryCapabilities,r=be(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:be(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:_y(t,"queryRelated")}}_readQueryTopFeaturesCapabilities(e){return{supportsCacheHint:_y(e.advancedQueryCapabilities,"queryTopFilter")}}_readEditingCapabilities(e){const t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:be(e,"allowGeometryUpdates",!0),supportsGlobalId:be(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:be(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:be(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:be(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:be(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:be(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:be(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:be(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:be(t,"allowOthersToUpdate",!0)}}};u([d({readOnly:!0,json:{read:!1}})],J.prototype,"capabilities",void 0),u([te("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],J.prototype,"readCapabilities",null),u([d({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],J.prototype,"charts",void 0),u([d({readOnly:!0})],J.prototype,"createQueryVersion",null),u([d({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],J.prototype,"copyright",void 0),u([d({type:Boolean})],J.prototype,"datesInUnknownTimezone",void 0),u([d({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],J.prototype,"displayField",void 0),u([d({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],J.prototype,"definitionExpression",void 0),u([d({types:Xd,readOnly:!0})],J.prototype,"defaultSymbol",void 0),u([d({type:eo})],J.prototype,"dynamicDataSource",void 0),u([d({readOnly:!0})],J.prototype,"editFieldsInfo",void 0),u([d({type:Boolean})],J.prototype,"editingEnabled",null),u([te(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],J.prototype,"readEditingEnabled",null),u([te("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],J.prototype,"readEditingEnabledFromWebMap",null),u([se(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],J.prototype,"writeEditingEnabled",null),u([se("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],J.prototype,"writeEditingEnabledToWebMap",null),u([d({readOnly:!0})],J.prototype,"editingInfo",void 0),u([te("editingInfo")],J.prototype,"readEditingInfo",null),u([d((()=>{const e=P(YH),t=e.json.origins;return t["web-map"]={read:!1,write:!1},t["portal-item"]={read:!1,write:!1},e})())],J.prototype,"elevationInfo",void 0),u([d(vJ)],J.prototype,"featureReduction",void 0),u([d({...OE.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:AE}}}}})],J.prototype,"fields",void 0),u([d(OE.fieldsIndex)],J.prototype,"fieldsIndex",void 0),u([d({type:qbe,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],J.prototype,"floorInfo",void 0),u([d({type:R_e,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],J.prototype,"formTemplate",void 0),u([d({type:Je,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],J.prototype,"fullExtent",void 0),u([d()],J.prototype,"gdbVersion",void 0),u([d({readOnly:!0,type:Ube,json:{read:{source:"geometryProperties"}}})],J.prototype,"geometryFieldsInfo",void 0),u([d({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:LE.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:AE,writer(e,t,r){const i=e?LE.toJSON(e):null;i&&sn(r,i,t)}}}},read:{source:"layerDefinition.geometryType",reader:LE.read}}})],J.prototype,"geometryType",void 0),u([d({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],J.prototype,"hasM",void 0),u([d({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],J.prototype,"hasZ",void 0),u([d({readOnly:!0,type:g$})],J.prototype,"heightModelInfo",void 0),u([d({type:Date})],J.prototype,"historicMoment",void 0),u([d(QH)],J.prototype,"id",void 0),u([d({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],J.prototype,"infoFor3D",void 0),u([d({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],J.prototype,"isTable",void 0),u([te("service","isTable",["type","geometryType"]),te("isTable",["layerDefinition.type","layerDefinition.geometryType"])],J.prototype,"readIsTable",null),u([se("web-map","isTable")],J.prototype,"writeIsTable",null),u([d(w$)],J.prototype,"labelsVisible",void 0),u([d({type:[Wv],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:yL},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:yL},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],J.prototype,"labelingInfo",void 0),u([d((()=>{const e=P(nbe);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,r,i){sn(i,D2(t),r)}}},e})())],J.prototype,"opacity",void 0),u([d({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],J.prototype,"layerId",void 0),u([d(ZH)],J.prototype,"legendEnabled",void 0),u([d({type:["show","hide"],json:(()=>{const e=P(KH.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],J.prototype,"listMode",void 0),u([d(obe)],J.prototype,"minScale",void 0),u([te("service","minScale",["minScale","effectiveMinScale"])],J.prototype,"readMinScale",null),u([d(abe)],J.prototype,"maxScale",void 0),u([te("service","maxScale",["maxScale","effectiveMaxScale"])],J.prototype,"readMaxScale",null),u([d({type:String})],J.prototype,"globalIdField",void 0),u([te("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),te("service","globalIdField",["globalIdField","fields"])],J.prototype,"readGlobalIdFieldFromService",null),u([d({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:AE}}}}})],J.prototype,"objectIdField",void 0),u([te("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),te("service","objectIdField",["objectIdField","fields"])],J.prototype,"readObjectIdFieldFromService",null),u([d({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],J.prototype,"operationalLayerType",void 0),u([d(OE.outFields)],J.prototype,"outFields",void 0),u([d({readOnly:!0})],J.prototype,"parsedUrl",null),u([d({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],J.prototype,"path",void 0),u([d(v$)],J.prototype,"popupEnabled",void 0),u([d({type:Mh,json:{name:"popupInfo",write:!0}})],J.prototype,"popupTemplate",void 0),u([d({readOnly:!0})],J.prototype,"defaultPopupTemplate",null),u([d({type:[Wbe],readOnly:!0})],J.prototype,"relationships",void 0),u([d({types:qv,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:LH,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(e,t,r)=>({ignoreOrigin:r==null?void 0:r.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,r)=>({ignoreOrigin:r==null?void 0:r.writeLayerSchema})}}})],J.prototype,"renderer",null),u([te("service","renderer",["drawingInfo.renderer","defaultSymbol"]),te("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],J.prototype,"readRenderer",null),u([d()],J.prototype,"sourceJSON",void 0),u([d({type:Boolean})],J.prototype,"returnM",void 0),u([d({type:Boolean})],J.prototype,"returnZ",void 0),u([d((()=>{const e=P(HH);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],J.prototype,"screenSizePerspectiveEnabled",void 0),u([d({clonable:!1})],J.prototype,"source",null),u([ze("source")],J.prototype,"castSource",null),u([te("portal-item","source",["featureSet"]),te("web-map","source",["featureSet"])],J.prototype,"readSource",null),u([d({readOnly:!0})],J.prototype,"serviceDefinitionExpression",void 0),u([te("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],J.prototype,"readServiceDefinitionExpression",null),u([d({type:Te,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],J.prototype,"spatialReference",void 0),u([d({type:Number})],J.prototype,"subtypeCode",void 0),u([d({type:String,json:{origins:{service:{read:!0}}}})],J.prototype,"subtypeField",void 0),u([d({type:[_$]})],J.prototype,"templates",void 0),u([te("templates",["editFieldsInfo","creatorField","editorField","templates"])],J.prototype,"readTemplates",null),u([d({type:oJ})],J.prototype,"timeInfo",void 0),u([d()],J.prototype,"title",void 0),u([te("service","title",["name"]),te("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],J.prototype,"readTitle",null),u([te("web-map","title",["layerDefinition.name","title"])],J.prototype,"readTitleFromWebMap",null),u([d({type:String})],J.prototype,"sublayerTitleMode",void 0),u([d({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],J.prototype,"trackIdField",void 0),u([d({json:{read:!1}})],J.prototype,"type",void 0),u([d({type:String})],J.prototype,"typeIdField",void 0),u([te("service","typeIdField"),te("typeIdField",["layerDefinition.typeIdField"])],J.prototype,"readTypeIdField",null),u([d({type:[yP]})],J.prototype,"types",void 0),u([te("service","types",["types"]),te("types",["layerDefinition.types"])],J.prototype,"readTypes",null),u([d({readOnly:!0,json:{write:!1}})],J.prototype,"serverGens",void 0),u([d({type:de.ofType(Ka),readOnly:!0})],J.prototype,"indexes",void 0),u([d(JH)],J.prototype,"url",null),u([se("url")],J.prototype,"writeUrl",null),u([d({readOnly:!0})],J.prototype,"userIsAdmin",void 0),u([d({json:{origins:{service:{read:!0}},read:!1}})],J.prototype,"version",void 0),u([te("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],J.prototype,"readVersion",null),u([d({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],J.prototype,"visible",void 0),u([te("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],J.prototype,"readVisible",null),J=u([E("esri.layers.FeatureLayer")],J);const PE=fm({types:sG}),SJ=J,nje=Object.freeze(Object.defineProperty({__proto__:null,default:SJ},Symbol.toStringTag,{value:"Module"})),uSe=["$datastore","$map","$layer","$aggregatedfeatures"],cSe="esri.widgets.Feature.support.arcadeFeatureUtils",dSe=Z.getLogger(cSe);function hSe(e){return typeof e=="string"?Rv(_A(e)):Array.isArray(e)?pSe(e):(e==null?void 0:e.declaredClass)==="esri.arcade.Dictionary"?fSe(e):e}function pSe(e){return`<ul class="esri-widget__list">${e.map(t=>`<li>${typeof t=="string"?Rv(_A(t)):t}</li>`).join("")}</ul>`}function fSe(e){return`<table class="esri-widget__table">${e.keys().map(t=>{const r=e.field(t);return`<tr><th>${t}</th><td>${typeof r=="string"?Rv(_A(r)):r}</td></tr>`}).join("")}</table>`}function mSe({aggregatedFeatures:e,arcadeUtils:t,featureSetVars:r,context:i,viewInfo:n,map:s,graphic:o,interceptor:a}){r.forEach(l=>{const c=l.toLowerCase(),h={map:s,spatialReference:n.sr,interceptor:a};if(c==="$map"&&(i.vars[c]=t.convertMapToFeatureSetCollection(h)),c==="$layer"&&(i.vars[c]=t.convertFeatureLayerToFeatureSet({layer:o.sourceLayer,spatialReference:n.sr,interceptor:a})),c==="$datastore"&&(i.vars[c]=t.convertServiceUrlToWorkspace({url:o.sourceLayer.url,spatialReference:n.sr,interceptor:a})),c==="$aggregatedfeatures"){const f=o.layer,{fields:m,objectIdField:y,geometryType:g,spatialReference:v,displayField:_}=f,w=new SJ({fields:m,objectIdField:y,geometryType:g,spatialReference:v,displayField:_,...f.type==="feature"?{templates:f.templates,typeIdField:f.typeIdField,types:f.types}:null,source:e});i.vars[c]=t.convertFeatureLayerToFeatureSet({layer:w,spatialReference:n.sr,interceptor:a})}})}function $J(){return V(()=>import("./arcadeUtils.dd2b837b.js").then(e=>e.t),[],import.meta.url)}async function ySe({graphic:e,view:t}){const{isAggregate:r,layer:i}=e;if(!r||!i||(t==null?void 0:t.type)!=="2d")return[];const n=await t.whenLayerView(i);if(!n.createQuery||!n.queryFeatures)return[];const s=n.createQuery();s.aggregateIds=[e.getObjectId()];const{features:o}=await n.queryFeatures(s);return o}async function xJ({expressionInfo:e,arcadeUtils:t,interceptor:r,spatialReference:i,map:n,graphic:s,view:o}){if(!e||!e.expression)return null;const a=t.createSyntaxTree(e.expression),l=uSe.filter(y=>t.hasVariable(a,y)),[c]=await Promise.all([ySe({graphic:s,view:o}),t.loadScriptDependencies(a,!0,l)]),h=t.getViewInfo({spatialReference:i}),f=t.createExecContext(s,h);f.interceptor=r,f.useAsync=!0,mSe({aggregatedFeatures:c,arcadeUtils:t,featureSetVars:l,context:f,viewInfo:h,map:n,graphic:s,interceptor:r});const m=t.createFunction(a,f);return t.executeAsyncFunction(m,f).catch(y=>dSe.error("arcade-execution-error",{error:y,graphic:s,expressionInfo:e}))}async function gSe({expressionInfos:e,spatialReference:t,graphic:r,interceptor:i,map:n,view:s}){if(!e||!e.length)return{};const o=await $J(),a={};for(const h of e)a[`expression/${h.name}`]=xJ({expressionInfo:h,arcadeUtils:o,interceptor:i,spatialReference:t,map:n,graphic:r,view:s});const l=await Zt(a),c={};for(const h in l)c[h]=hSe(l[h].value);return c}const vSe=1;let bn=class extends ca(le){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:t}=this;t&&t.abort(),this._abortController=null},this._createVM=()=>{var i,n;const t=(i=this.contentElement)==null?void 0:i.type;(n=this.contentElementViewModel)==null||n.destroy();const r=t==="fields"?new Q2:t==="media"?new Bd:t==="text"?new ES:null;this._set("contentElementViewModel",r)},this._compile=async()=>{this._cancelQuery();const t=new AbortController;this._abortController=t,await this._compileExpression(),this._abortController===t&&(this._abortController=null)},this._compileThrottled=pA(this._compile,vSe,this),this._compileExpression=async()=>{const{expressionInfo:t,graphic:r,interceptor:i,spatialReference:n,map:s,view:o,_abortController:a}=this;if(!(t&&r&&n&&s))return void this._set("contentElement",null);const l=await $J();if(a!==this._abortController)return;const c=await xJ({arcadeUtils:l,expressionInfo:t,graphic:r,interceptor:i,map:s,spatialReference:n,view:o});if(!c||c.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const h=await XA(c,a.signal),f=h==null?void 0:h.type,m=f==="media"?B0.fromJSON(h):f==="text"?Zf.fromJSON(h):f==="fields"?Jf.fromJSON(h):null;this._set("contentElement",m)},this.handles.add([G(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),je),G(()=>[this.contentElement],()=>this._createVM(),je)])}destroy(){var e;this._cancelQuery(),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)||null}set spatialReference(e){e!==void 0?this._override("spatialReference",e):this._clearOverride("spatialReference")}get state(){const{_abortController:e,contentElement:t,contentElementViewModel:r}=this;return e?"loading":t||r?"ready":"disabled"}get map(){var e;return((e=this.view)==null?void 0:e.map)||null}set map(e){e!==void 0?this._override("map",e):this._clearOverride("map")}};u([d()],bn.prototype,"_abortController",void 0),u([d({type:fU})],bn.prototype,"expressionInfo",void 0),u([d({type:ln})],bn.prototype,"graphic",void 0),u([d({readOnly:!0})],bn.prototype,"contentElement",void 0),u([d({readOnly:!0})],bn.prototype,"contentElementViewModel",void 0),u([d()],bn.prototype,"interceptor",void 0),u([d()],bn.prototype,"spatialReference",null),u([d({readOnly:!0})],bn.prototype,"state",null),u([d()],bn.prototype,"map",null),u([d()],bn.prototype,"view",void 0),bn=u([E("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],bn);const gP=bn,cw={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let G_=class extends Kt{constructor(e,t){super(e,t),this.viewModel=new gP}initialize(){this.own(G(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentElementViewModel},()=>this._setupExpressionWidget(),je))}destroy(){this._destroyContentWidget()}renderLoading(){return x("div",{key:"loading-container",class:cw.loadingSpinnerContainer},x("span",{class:this.classes(cw.iconLoading,cw.spinner)}))}render(){var t;const{state:e}=this.viewModel;return x("div",{class:cw.base},e==="loading"?this.renderLoading():e==="disabled"?null:(t=this._contentWidget)==null?void 0:t.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:t}=this.viewModel,r=t==null?void 0:t.type;this._destroyContentWidget();const i=e?r==="fields"?new HB({viewModel:e}):r==="media"?new Wq({viewModel:e}):r==="text"?new S_({viewModel:e}):null:null;this._contentWidget=i,this.scheduleRender()}};u([d({type:gP})],G_.prototype,"viewModel",void 0),G_=u([E("esri.widgets.Feature.FeatureExpression")],G_);const wSe=G_;class _Se{constructor(t,r){this.preLayerQueryCallback=t,this.preRequestCallback=r,this.preLayerQueryCallback||(this.preLayerQueryCallback=i=>{}),this.preRequestCallback||(this.preLayerQueryCallback=i=>{})}}var B_;const bSe=1,z4="content-view-models",EJ="esri.widgets.FeatureViewModel",SSe=Z.getLogger(EJ),U4={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};let Ct=B_=class extends le{constructor(e){super(e),this._handles=new zt,this._error=null,this._featureAbortController=null,this.graphicChangedThrottled=pA(this._graphicChanged,bSe,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...U4},this.content=null,this.contentViewModels=[],this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=t=>{const{abilities:r}=this;return t.type==="attachments"&&r.attachmentsContent||t.type==="custom"&&r.customContent||t.type==="fields"&&r.fieldsContent||t.type==="media"&&r.mediaContent||t.type==="text"&&r.textContent||t.type==="expression"&&r.expressionContent},this._handles.add(G(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this.graphicChangedThrottled(),je))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return I(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return Wfe(R5(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return PB(this.graphic)}castAbilities(e){return{...U4,...e}}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(e){this._set("graphic",e?e.clone():null)}get spatialReference(){return this.get("view.spatialReference")||null}set spatialReference(e){e!==void 0?this._override("spatialReference",e):this._clearOverride("spatialReference")}get map(){return this.get("view.map")||null}set map(e){e!==void 0?this._override("map",e):this._clearOverride("map")}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(e,t){const r=this.contentViewModels[e];r instanceof Bd&&r.setActiveMedia(t)}nextMedia(e){const t=this.contentViewModels[e];t instanceof Bd&&t.next()}previousMedia(e){const t=this.contentViewModels[e];t instanceof Bd&&t.previous()}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:e}=this;if(!e)return;const t=new AbortController;this._featureAbortController=t;try{await this._queryFeature({signal:t.signal})}catch(r){ui(r)||(this._error=r,SSe.error("error","The popupTemplate could not be displayed for this feature.",{error:r,graphic:e,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===t&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:e}=this;e&&e.abort(),this._featureAbortController=null}_compileContentElement(e,t){return e.type==="attachments"?this._compileAttachments(e,t):e.type==="custom"?this._compileCustom(e,t):e.type==="fields"?this._compileFields(e,t):e.type==="media"?this._compileMedia(e,t):e.type==="text"?this._compileText(e,t):e.type==="expression"?this._compileExpression(e,t):void 0}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map((t,r)=>this._compileContentElement(t,r)):typeof e=="string"?this._compileText(new Zf({text:e}),0).text:e}_destroyContentViewModels(){var e;(e=this._handles)==null||e.remove(z4),this.contentViewModels.forEach(t=>t&&!t.destroyed&&t.destroy()),this._set("contentViewModels",[])}_setExpressionContentVM(e,t){const{formattedAttributes:r}=this,{contentElement:i,contentElementViewModel:n}=e,s=i==null?void 0:i.type;n&&s&&(s==="fields"&&(this._createFieldsFormattedAttributes({contentElement:i,contentElementIndex:t,formattedAttributes:r}),n.set(this._createFieldsVMParams(i,t))),s==="media"&&(this._createMediaFormattedAttributes({contentElement:i,contentElementIndex:t,formattedAttributes:r}),n.set(this._createMediaVMParams(i,t))),s==="text"&&n.set(this._createTextVMParams(i)))}_compileExpression(e,t){const{expressionInfo:r}=e,{graphic:i,map:n,spatialReference:s,view:o}=this,a=new gP({expressionInfo:r,graphic:i,interceptor:B_.interceptor,map:n,spatialReference:s,view:o});return this.contentViewModels[t]=a,this._handles.add(G(()=>a.contentElementViewModel,()=>this._setExpressionContentVM(a,t),je),z4),e}_compileAttachments(e,t){const{graphic:r}=this,{description:i,title:n}=e;return this.contentViewModels[t]=new SA({graphic:r,...this._compileTitleAndDesc({title:n,description:i})}),e}_compileCustom(e,t){const{graphic:r}=this,{creator:i,destroyer:n}=e;return this.contentViewModels[t]=new ES({graphic:r,creator:i,destroyer:n}),e}_compileTitleAndDesc({title:e,description:t}){const{_fieldInfoMap:r,_sourceLayer:i,graphic:n,formattedAttributes:s,_expressionAttributes:o}=this,{attributes:a}=n,l=s.global;return{title:Ud({attributes:a,fieldInfoMap:r,globalAttributes:l,expressionAttributes:o,layer:i,text:e}),description:Ud({attributes:a,fieldInfoMap:r,globalAttributes:l,expressionAttributes:o,layer:i,text:t})}}_createFieldsVMParams(e,t){var c;const{_effectivePopupTemplate:r,formattedAttributes:i}=this,n={...i.global,...i.content[t]},s=(c=(e==null?void 0:e.fieldInfos)||(r==null?void 0:r.fieldInfos))==null?void 0:c.filter(({fieldName:h})=>FB(h)||sl(h)||n.hasOwnProperty(h)),o=r==null?void 0:r.expressionInfos,{description:a,title:l}=e;return{attributes:n,expressionInfos:o,fieldInfos:s,...this._compileTitleAndDesc({title:l,description:a})}}_compileFields(e,t){const r=e.clone(),i=new Q2(this._createFieldsVMParams(e,t));return this.contentViewModels[t]=i,r.fieldInfos=i.formattedFieldInfos.slice(0),r}_createMediaVMParams(e,t){const{abilities:r,graphic:i,_fieldInfoMap:n,formattedAttributes:s,_effectivePopupTemplate:o,relatedInfos:a,_sourceLayer:l,_expressionAttributes:c}=this,{attributes:h}=i,{description:f,mediaInfos:m,title:y}=e;return{abilities:{chartAnimation:r.chartAnimation},activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:h,layer:l,fieldInfoMap:n,formattedAttributes:{...s.global,...s.content[t]},expressionAttributes:c,mediaInfos:m,popupTemplate:o,relatedInfos:a,...this._compileTitleAndDesc({title:y,description:f})}}_compileMedia(e,t){const r=e.clone(),i=new Bd(this._createMediaVMParams(e,t));return r.mediaInfos=i.formattedMediaInfos.slice(0),this.contentViewModels[t]=i,r}_createTextVMParams(e){const{graphic:t,_fieldInfoMap:r,_sourceLayer:i,_expressionAttributes:n}=this;if(e&&e.text){const{attributes:s}=t,o=this.formattedAttributes.global;e.text=Ud({attributes:s,fieldInfoMap:r,globalAttributes:o,expressionAttributes:n,layer:i,text:e.text})}return{graphic:t,creator:e.text}}_compileText(e,t){const r=e.clone();return this.contentViewModels[t]=new ES(this._createTextVMParams(r)),r}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:t,graphic:r}=this;if(!e)return;const{lastEditInfoEnabled:i}=e,n=t==null?void 0:t.editFieldsInfo;return i&&n?qfe(n,r.attributes):void 0}_compileTitle(e){const{_fieldInfoMap:t,_sourceLayer:r,graphic:i,_expressionAttributes:n}=this,{attributes:s}=i,o=this.formattedAttributes.global;return Ud({attributes:s,fieldInfoMap:t,globalAttributes:o,expressionAttributes:n,layer:r,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:t}=this,r=e==null?void 0:e.title;return $S(r,{graphic:t})}async _getContent(){const{_effectivePopupTemplate:e,graphic:t}=this,r=e==null?void 0:e.content;return $S(r,{graphic:t})}async _queryFeature(e){const{_featureAbortController:t,_sourceLayer:r,graphic:i,_effectivePopupTemplate:n,spatialReference:s,map:o,view:a}=this,{content:{value:l},title:{value:c}}=await Zt({content:this._getContent(),title:this._getTitle()});if(t!==this._featureAbortController||!i)return;await Zfe({graphic:i,popupTemplate:n,layer:r,spatialReference:s},e);const{expressionAttributes:{value:h}}=await Zt({checkForRelatedFeatures:this._checkForRelatedFeatures(e),expressionAttributes:gSe({expressionInfos:n==null?void 0:n.expressionInfos,spatialReference:s,graphic:i,map:o,interceptor:B_.interceptor,view:a})});t===this._featureAbortController&&i&&(this._expressionAttributes=h,this._graphicExpressionAttributes={...i.attributes,...h},this._set("formattedAttributes",this._createFormattedAttributes(l)),this._set("title",this._compileTitle(c)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(l)||null))}_createMediaFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:r}){const{_effectivePopupTemplate:i,graphic:n,relatedInfos:s,_sourceLayer:o,_fieldInfoMap:a,_graphicExpressionAttributes:l}=this;r.content[t]=Jx({fieldInfos:i==null?void 0:i.fieldInfos,graphic:n,attributes:{...l,...e.attributes},layer:o,fieldInfoMap:a,relatedInfos:s})}_createFieldsFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:r}){if(e.fieldInfos){const{graphic:i,relatedInfos:n,_sourceLayer:s,_fieldInfoMap:o,_graphicExpressionAttributes:a}=this;r.content[t]=Jx({fieldInfos:e.fieldInfos,graphic:i,attributes:{...a,...e.attributes},layer:s,fieldInfoMap:o,relatedInfos:n})}}_createFormattedAttributes(e){const{_effectivePopupTemplate:t,graphic:r,relatedInfos:i,_sourceLayer:n,_fieldInfoMap:s,_graphicExpressionAttributes:o}=this,a=t==null?void 0:t.fieldInfos,l={global:Jx({fieldInfos:a,graphic:r,attributes:o,layer:n,fieldInfoMap:s,relatedInfos:i}),content:[]};return Array.isArray(e)&&e.forEach((c,h)=>{c.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:c,contentElementIndex:h,formattedAttributes:l}),c.type==="media"&&this._createMediaFormattedAttributes({contentElement:c,contentElementIndex:h,formattedAttributes:l})}),l}_checkForRelatedFeatures(e){const{graphic:t,_effectivePopupTemplate:r}=this;return this._queryRelatedInfos(t,R5(r),e)}async _queryRelatedInfos(e,t,r){const{relatedInfos:i,_sourceLayer:n}=this;i.clear();const s=I(n.associatedLayer)?await n.associatedLayer.load(r):n;if(!s)return;const o=t.filter(c=>c&&sl(c.fieldName));if(!o||!o.length)return;t.forEach(c=>this._configureRelatedInfo(c,s));const a=await d0e({relatedInfos:i,layer:s},r);Object.keys(a).forEach(c=>{var m;const h=i.get(c.toString()),f=(m=a[c])==null?void 0:m.value;h&&f&&(h.layerInfo=f.data)});const l=await h0e({graphic:e,relatedInfos:i,layer:s},r);Object.keys(l).forEach(c=>{var h;o0e((h=l[c])==null?void 0:h.value,i.get(c.toString()))})}_configureRelatedInfo(e,t){const{relatedInfos:r}=this,i=nk(e.fieldName);if(!i)return;const{layerId:n,fieldName:s}=i;if(!n)return;const o=r.get(n.toString())||s0e(n,t);o&&(p0e({relatedInfo:o,fieldName:s,fieldInfo:e}),this.relatedInfos.set(n,o))}};Ct.interceptor=new _Se(Kfe,Xfe),u([d()],Ct.prototype,"_error",void 0),u([d()],Ct.prototype,"_featureAbortController",void 0),u([d({readOnly:!0})],Ct.prototype,"_effectivePopupTemplate",null),u([d({readOnly:!0})],Ct.prototype,"_fieldInfoMap",null),u([d({readOnly:!0})],Ct.prototype,"_sourceLayer",null),u([d()],Ct.prototype,"abilities",void 0),u([ze("abilities")],Ct.prototype,"castAbilities",null),u([d({readOnly:!0})],Ct.prototype,"content",void 0),u([d({readOnly:!0})],Ct.prototype,"contentViewModels",void 0),u([d({type:Boolean})],Ct.prototype,"defaultPopupTemplateEnabled",void 0),u([d({readOnly:!0})],Ct.prototype,"state",null),u([d({readOnly:!0})],Ct.prototype,"formattedAttributes",void 0),u([d({type:ln,value:null})],Ct.prototype,"graphic",null),u([d({readOnly:!0})],Ct.prototype,"lastEditInfo",void 0),u([d({readOnly:!0})],Ct.prototype,"relatedInfos",void 0),u([d()],Ct.prototype,"spatialReference",null),u([d({readOnly:!0})],Ct.prototype,"title",void 0),u([d()],Ct.prototype,"map",null),u([d({readOnly:!0})],Ct.prototype,"waitingForContent",null),u([d()],Ct.prototype,"view",void 0),Ct=B_=u([E(EJ)],Ct);const vP=Ct,TJ=e=>{let t=class extends e{constructor(){super(...arguments),this.renderNodeContent=r=>TS(r)&&!r.destroyed?x("div",{key:r},r.render()):r instanceof HTMLElement?x("div",{key:r,bind:r,afterCreate:this._attachToNode}):WB(r)?x("div",{key:r,bind:r.domNode,afterCreate:this._attachToNode}):null}_attachToNode(r){const i=this;r.appendChild(i)}};return t=u([E("esri.widgets.Feature.ContentMixin")],t),t},Vr={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"},G4={title:!0,content:!0,lastEditedInfo:!0};let zr=class extends TJ(Kt){constructor(e,t){super(e,t),this._contentWidgets=[],this.graphic=null,this.defaultPopupTemplateEnabled=!1,this.headingLevel=2,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.spatialReference=null,this.title=null,this.visibleElements={...G4},this.map=null,this.view=null,this.viewModel=new vP}initialize(){this.own(G(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentViewModels},()=>this._setupContentWidgets(),je))}loadDependencies(){return V(()=>import("./calcite-notice.b3aaa51a.js"),[],import.meta.url)}destroy(){this._destroyContentWidgets()}castVisibleElements(e){return{...G4,...e}}render(){const{state:e}=this.viewModel,t=x("div",{class:Vr.container,key:"container"},this.renderTitle(),e==="error"?this.renderError():e==="loading"?this.renderLoading():this.renderContentContainer());return x("div",{class:this.classes(Vr.base,Vr.esriWidget)},t)}setActiveMedia(e,t){this.viewModel.setActiveMedia(e,t)}nextMedia(e){this.viewModel.nextMedia(e)}previousMedia(e){this.viewModel.previousMedia(e)}renderError(){const{messagesCommon:e,messages:t,visibleElements:r}=this;return x("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},r.title?x("div",{key:"error-title",slot:"title"},e.errorMessage):null,x("div",{key:"error-message",slot:"message"},t.loadingError))}renderLoading(){return x("div",{key:"loading-container",class:Vr.loadingSpinnerContainer},x("span",{class:this.classes(Vr.iconLoading,Vr.spinner)}))}renderContentContainer(){const{visibleElements:e}=this;return e.content?x("div",{class:Vr.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:e,title:t}=this;return e.title?x(tc,{level:this.headingLevel,class:Vr.title,innerHTML:t}):null}renderContent(){const e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?x("div",{key:`${t}-content-elements`},e.map(this.renderContentElement,this)):null;if(typeof e=="string"){const r=this._contentWidgets[0];return!r||r.destroyed?null:x("div",{key:`${t}-content`},r.render())}return this.renderNodeContent(e)}renderContentElement(e,t){const{visibleElements:r}=this;if(typeof r.content!="boolean"&&!r.content[e.type])return null;switch(e.type){case"attachments":return this.renderAttachments(t);case"custom":return this.renderCustom(e,t);case"fields":return this.renderFields(t);case"media":return this.renderMedia(t);case"text":return this.renderText(e,t);case"expression":return this.renderExpression(t);default:return null}}renderAttachments(e){const t=this._contentWidgets[e];if(!t||t.destroyed)return null;const{state:r,attachmentInfos:i}=t.viewModel;return r==="loading"||i.length>0?x("div",{key:this._buildKey("attachments-element",e),class:this.classes(Vr.contentElement)},t.render()):null}renderExpression(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:x("div",{key:this._buildKey("expression-element",e),class:Vr.contentElement},t.render())}renderCustom(e,t){const{creator:r}=e,i=this._contentWidgets[t];return!i||i.destroyed?null:r?x("div",{key:this._buildKey("custom-element",t),class:Vr.contentElement},i.render()):null}renderFields(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:x("div",{key:this._buildKey("fields-element",e),class:Vr.contentElement},t.render())}renderMedia(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:x("div",{key:this._buildKey("media-element",e),class:Vr.contentElement},t.render())}renderLastEditInfo(){const{visibleElements:e,messages:t}=this,{lastEditInfo:r}=this.viewModel;if(!r||!e.lastEditedInfo)return null;const{date:i,user:n}=r,s=r.type==="edit"?n?t.lastEditedByUser:t.lastEdited:n?t.lastCreatedByUser:t.lastCreated,o=is(s,{date:i,user:n});return x("div",{key:"edit-info-element",class:this.classes(Vr.lastEditedInfo,Vr.contentElement)},o)}renderText(e,t){const r=e.text,i=this._contentWidgets[t];return!i||i.destroyed?null:r?x("div",{key:this._buildKey("text-element",t),class:this.classes(Vr.contentElement,Vr.text)},i.render()):null}_buildKey(e,...t){return`${e}__${this.get("viewModel.graphic.uid")||"0"}-${t.join("-")}`}_destroyContentWidget(e){e&&(e.viewModel=null,!e.destroyed&&e.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach(e=>this._destroyContentWidget(e)),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:e,visibleElements:t}=this,r=this.get("viewModel.content"),{contentViewModels:i}=this.viewModel;if(Array.isArray(r))r.forEach((n,s)=>{n.type==="attachments"&&(this._contentWidgets[s]=new ume({displayType:n.displayType,headingLevel:t.title?e+1:e,viewModel:i[s]})),n.type==="fields"&&(this._contentWidgets[s]=new HB({viewModel:i[s]})),n.type==="media"&&(this._contentWidgets[s]=new Wq({viewModel:i[s]})),n.type==="text"&&(this._contentWidgets[s]=new S_({viewModel:i[s]})),n.type==="custom"&&(this._contentWidgets[s]=new S_({viewModel:i[s]})),n.type==="expression"&&(this._contentWidgets[s]=new wSe({viewModel:i[s]}))},this);else{const n=i[0];n&&!n.destroyed&&(this._contentWidgets[0]=new S_({viewModel:n}))}this.scheduleRender()}};u([X("viewModel.graphic")],zr.prototype,"graphic",void 0),u([X("viewModel.defaultPopupTemplateEnabled")],zr.prototype,"defaultPopupTemplateEnabled",void 0),u([d()],zr.prototype,"headingLevel",void 0),u([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],zr.prototype,"label",void 0),u([d(),Et("esri/widgets/Feature/t9n/Feature")],zr.prototype,"messages",void 0),u([d(),Et("esri/t9n/common")],zr.prototype,"messagesCommon",void 0),u([d(),Et("esri/widgets/support/t9n/uriUtils")],zr.prototype,"messagesURIUtils",void 0),u([X("viewModel.spatialReference")],zr.prototype,"spatialReference",void 0),u([X("viewModel.title")],zr.prototype,"title",void 0),u([d()],zr.prototype,"visibleElements",void 0),u([ze("visibleElements")],zr.prototype,"castVisibleElements",null),u([X("viewModel.map")],zr.prototype,"map",void 0),u([X("viewModel.view")],zr.prototype,"view",void 0),u([d({type:vP})],zr.prototype,"viewModel",void 0),zr=u([E("esri.widgets.Feature")],zr);const $Se=zr;var MJ;const q_=Symbol("anchorHandles");let ld=class extends ua.EventedAccessor{constructor(e){super(e),this[MJ]=new zt,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[q_].add([di(()=>Zo(this.screenLocationEnabled?this.view:null,t=>[t.size,t.type==="3d"?t.camera:t.viewpoint]),()=>this.notifyChange("screenLocation")),G(()=>this.screenLocation,(t,r)=>{I(t)&&I(r)&&this.emit("view-change")})])}destroy(){this.view=null,this[q_]=qi(this[q_])}get screenLocation(){const{location:e,view:t,screenLocationEnabled:r}=this;return r&&I(e)&&I(t)&&t.ready?t.toScreen(e):null}};MJ=q_,u([d()],ld.prototype,"location",void 0),u([d()],ld.prototype,"screenLocation",null),u([d()],ld.prototype,"screenLocationEnabled",void 0),u([d()],ld.prototype,"view",void 0),ld=u([E("esri.widgets.support.AnchorElementViewModel")],ld);const IJ=ld,xSe="esri.widgets.CompassViewModel";let W_=class extends IJ{constructor(e){super(e),this.visible=!1}};u([d()],W_.prototype,"visible",void 0),W_=u([E(xSe)],W_);const CJ=W_,RE={base:"esri-spinner",spinnerStart:"esri-spinner--start",spinnerFinish:"esri-spinner--finish"};let ud=class extends Kt{constructor(e,t){super(e,t),this._animationDelay=500,this._animationPromise=null,this.location=null,this.view=null,this.viewModel=new CJ,this.visible=!1}initialize(){this.own([G(()=>this.visible,e=>this._visibleChange(e))])}destroy(){this._animationPromise=null}show(e){const{location:t,promise:r}=e;t&&(this.viewModel.location=t),this.visible=!0;const i=()=>this.hide();r&&r.catch(()=>{}).then(i)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:t}=this.viewModel,r=!!t,i=e&&r,n=!e&&r,s={[RE.spinnerStart]:i,[RE.spinnerFinish]:n},o=this._getPositionStyles();return x("div",{class:this.classes(RE.base,s),styles:o})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const t=ZO(this._animationDelay);this._animationPromise=t,t.catch(()=>{}).then(()=>{this._animationPromise===t&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:t}=this.viewModel;if(R(t)||R(e))return{};const{padding:r}=t;return{left:e.x-r.left+"px",top:e.y-r.top+"px"}}};u([X("viewModel.location")],ud.prototype,"location",void 0),u([X("viewModel.view")],ud.prototype,"view",void 0),u([d({type:CJ})],ud.prototype,"viewModel",void 0),u([X("viewModel.visible")],ud.prototype,"visible",void 0),ud=u([E("esri.widgets.Spinner")],ud);const ESe=ud;var fr;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})(fr||(fr={}));const vL={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function TSe(e,t,r){const i=fr.size;let n=i,s=i;e<1?n*=.75:e>1&&(s*=1.25);const o=0,a=0;let l=i,c=i;return t&&r&&(n=s=l=c=0),[{type:"path",path:[{command:"M",values:[l,o]},{command:"L",values:[r?l:.875*l,o]},{command:"L",values:[r?n-.5*l:a,s-.5*c]},{command:"L",values:[n-.5*l,s-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l,o]},{command:"L",values:[l,t?o:.125*c]},{command:"L",values:[n-.5*l,t?s-.5*c:c]},{command:"L",values:[n-.5*l,s-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n-.5*l,s-.5*c]},{command:"L",values:[r?n-.5*l:a,s-.5*c]},{command:"L",values:[r?n-.5*l:a,t?s-.5*c:c]},{command:"L",values:[n-.5*l,t?s-.5*c:c]},{command:"Z",values:[]}]}]}function MSe(e){const t=fr.size,r=.5*e,i=0,n=0;return[{type:"path",path:[{command:"M",values:[n,.7*t*.5]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+r]},{command:"L",values:[n,.7*t+r-.7*t*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+r]},{command:"L",values:[t,r]},{command:"L",values:[t,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,i]},{command:"L",values:[t,i]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[n,.7*t*.5]},{command:"Z",values:[]}]}]}function ISe(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function CSe(e,t){let r=t?fr.tallSymbolWidth:e;const i=e,n=t?4:6;r<=fr.size?r-=.5*n:r-=n;const s=0,o=0,a=t?.35*r:.5*r;return[{type:"path",path:[{command:"M",values:[.5*r,s]},{command:"L",values:[r,.5*a]},{command:"L",values:[.5*r,a]},{command:"L",values:[o,.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,.5*a]},{command:"L",values:[.5*r,a]},{command:"L",values:[.5*r,i]},{command:"L",values:[o,i-.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*r,a]},{command:"L",values:[.5*r,i]},{command:"L",values:[r,i-.5*a]},{command:"L",values:[r,.5*a]},{command:"Z",values:[]}]}]}function kSe(e,t){let r=t?fr.tallSymbolWidth:e;const i=e,n=t?4:6;r<=fr.size?r-=.5*n:r-=n;const s=.5*r,o=.15*r,a=0,l=i-o;return[{type:"ellipse",cx:.5*r,cy:l,rx:s,ry:o},{type:"path",path:[{command:"M",values:[a,o]},{command:"L",values:[a,l]},{command:"L",values:[r,l]},{command:"L",values:[r,o]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*r,cy:o,rx:s,ry:o}]}function LSe(e,t){let r=t?fr.tallSymbolWidth:e;const i=e,n=t?4:6;r<=fr.size?r-=.5*n:r-=n;const s=.15*r,o=i-s;return[{type:"ellipse",cx:.5*r,cy:o,rx:.5*r,ry:s},{type:"path",path:[{command:"M",values:[.5*r,0]},{command:"L",values:[r,o]},{command:"L",values:[0,o]},{command:"Z",values:[]}]}]}function OSe(e){let t=e;const r=e,i=6;t<fr.size?t-=.5*i:t-=i;const n=.15*t,s=0;return[{type:"path",path:[{command:"M",values:[0,s]},{command:"L",values:[t,s]},{command:"L",values:[.5*t,r-n]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:s,rx:.5*t,ry:n}]}function ASe(e){let t=e;const r=e,i=4;t<fr.size?t-=.5*i:t-=i;const n=0,s=0,o=t,a=r,l=Math.floor(e/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*o,n]},{command:"L",values:[o,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,n]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"L",values:[s,.5*a-l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"L",values:[.45*o,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,r]},{command:"L",values:[o,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"Z",values:[]}]}]}function PSe(e){const t=e,r=2;let i=e;i<fr.size?i-=.5*r:i-=r;const n=0,s=0;return[{type:"path",path:[{command:"M",values:[.45*t,n]},{command:"L",values:[t,i]},{command:"L",values:[.45*t,.6*i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*t,n]},{command:"L",values:[.45*t,.6*i]},{command:"L",values:[s,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,i]},{command:"L",values:[.45*t,.6*i]},{command:"L",values:[t,i]},{command:"Z",values:[]}]}]}function nc(e,t){return Math.round(Math.min(Math.max(e+255*t*.75,0),255))}function sje(e,t){if("type"in e&&(e.type==="linear"||e.type==="pattern"))return e;const r=new ae(e);return new ae([nc(r.r,t),nc(r.g,t),nc(r.b,t),r.a])}function RSe(e){return"r"in e&&"g"in e&&"b"in e}function kJ(e){return"h"in e&&"s"in e&&"v"in e}function LJ(e){return"l"in e&&"a"in e&&"b"in e}function OJ(e){return"l"in e&&"c"in e&&"h"in e}function FSe(e){return"x"in e&&"y"in e&&"z"in e}const NSe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],DSe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function AJ(e,t){const r=[];let i,n;if(e[0].length!==t.length)throw"dimensions do not match";const s=e.length,o=e[0].length;let a=0;for(i=0;i<s;i++){for(a=0,n=0;n<o;n++)a+=e[i][n]*t[n];r.push(a)}return r}function PJ(e){const t=[e.r/255,e.g/255,e.b/255].map(i=>i<=.04045?i/12.92:((i+.055)/1.055)**2.4),r=AJ(NSe,t);return{x:100*r[0],y:100*r[1],z:100*r[2]}}function wP(e){const t=AJ(DSe,[e.x/100,e.y/100,e.z/100]).map(r=>{const i=r<=.0031308?12.92*r:1.055*r**.4166666666666667-.055;return Math.min(1,Math.max(i,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function RJ(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(r=>r>.008856451679035631?r**.3333333333333333:7.787037037037035*r+.13793103448275862);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function FJ(e){const t=e.l,r=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(i=>i>6/29?i**3:3*(6/29)**2*(i-4/29));return{x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function jSe(e){const t=e.l,r=e.a,i=e.b,n=Math.sqrt(r*r+i*i);let s=Math.atan2(i,r);return s=s>0?s:s+2*Math.PI,{l:t,c:n,h:s}}function VSe(e){const t=e.l,r=e.c,i=e.h;return{l:t,a:r*Math.cos(i),b:r*Math.sin(i)}}function zSe(e){return RJ(PJ(e))}function USe(e){return wP(FJ(e))}function GSe(e){return jSe(RJ(PJ(e)))}function BSe(e){return wP(FJ(VSe(e)))}function qSe(e){const t=e.r,r=e.g,i=e.b,n=Math.max(t,r,i),s=n-Math.min(t,r,i);let o=n,a=s===0?0:n===t?(r-i)/s%6:n===r?(i-t)/s+2:(t-r)/s+4,l=s===0?0:s/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}function WSe(e){const t=(e.h+360)%360/60,r=e.s/100,i=e.v/100*255,n=i*r,s=n*(1-Math.abs(t%2-1));let o;switch(Math.floor(t)){case 0:o={r:n,g:s,b:0};break;case 1:o={r:s,g:n,b:0};break;case 2:o={r:0,g:n,b:s};break;case 3:o={r:0,g:s,b:n};break;case 4:o={r:s,g:0,b:n};break;case 5:case 6:o={r:n,g:0,b:s};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+i-n),o.g=Math.round(o.g+i-n),o.b=Math.round(o.b+i-n),o}function Hv(e){return RSe(e)?e:OJ(e)?BSe(e):LJ(e)?USe(e):FSe(e)?wP(e):kJ(e)?WSe(e):e}function _P(e){return kJ(e)?e:qSe(Hv(e))}function oje(e){return LJ(e)?e:zSe(Hv(e))}function aje(e){return OJ(e)?e:GSe(Hv(e))}function BS(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function HSe(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function JSe(e,t,r,i,n,s){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=n,o[5]=s,o}function ZSe(e,t){return new Float32Array(e,t,6)}function NJ(e,t,r,i){const n=t[i],s=t[i+1];e[i]=r[0]*n+r[2]*s+r[4],e[i+1]=r[1]*n+r[3]*s+r[5]}function YSe(e,t,r,i=0,n=0,s=2){const o=n||t.length/s;for(let a=i;a<o;a++)NJ(e,t,r,a*s)}Object.freeze(Object.defineProperty({__proto__:null,create:BS,clone:HSe,fromValues:JSe,createView:ZSe,transform:NJ,transformMany:YSe},Symbol.toStringTag,{value:"Module"}));function QSe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function b$(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function KSe(e,t,r,i,n,s,o){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=o,e}function bP(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5];let l=r*s-i*n;return l?(l=1/l,e[0]=s*l,e[1]=-i*l,e[2]=-n*l,e[3]=r*l,e[4]=(n*a-s*o)*l,e[5]=(i*o-r*a)*l,e):null}function XSe(e){return e[0]*e[3]-e[1]*e[2]}function Ed(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=r[0],h=r[1],f=r[2],m=r[3],y=r[4],g=r[5];return e[0]=i*c+s*h,e[1]=n*c+o*h,e[2]=i*f+s*m,e[3]=n*f+o*m,e[4]=i*y+s*g+a,e[5]=n*y+o*g+l,e}function Jv(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=Math.sin(r),h=Math.cos(r);return e[0]=i*h+s*c,e[1]=n*h+o*c,e[2]=i*-c+s*h,e[3]=n*-c+o*h,e[4]=a,e[5]=l,e}function S$(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=r[0],h=r[1];return e[0]=i*c,e[1]=n*c,e[2]=s*h,e[3]=o*h,e[4]=a,e[5]=l,e}function im(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=r[0],h=r[1];return e[0]=i,e[1]=n,e[2]=s,e[3]=o,e[4]=i*c+s*h+a,e[5]=n*c+o*h+l,e}function DJ(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=-r,e[3]=i,e[4]=0,e[5]=0,e}function jJ(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function SP(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function e2e(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function t2e(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function r2e(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e}function VJ(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}function i2e(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e}function n2e(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e}function s2e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function o2e(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=t[0],c=t[1],h=t[2],f=t[3],m=t[4],y=t[5];return Math.abs(r-l)<=$e*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-c)<=$e*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(n-h)<=$e*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(s-f)<=$e*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(o-m)<=$e*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-y)<=$e*Math.max(1,Math.abs(a),Math.abs(y))}const a2e=Ed,l2e=VJ;Object.freeze(Object.defineProperty({__proto__:null,copy:QSe,identity:b$,set:KSe,invert:bP,determinant:XSe,multiply:Ed,rotate:Jv,scale:S$,translate:im,fromRotation:DJ,fromScaling:jJ,fromTranslation:SP,str:e2e,frob:t2e,add:r2e,subtract:VJ,multiplyScalar:i2e,multiplyScalarAndAdd:n2e,exactEquals:s2e,equals:o2e,mul:a2e,sub:l2e},Symbol.toStringTag,{value:"Module"}));const u2e="http://www.w3.org/2000/svg";let c2e=0,d2e=0;const B4=j("android"),h2e=j("chrome")||B4&&B4>=4?"auto":"optimizeLegibility",p2e={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},f2e=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let cr={},Ze={};const q4={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},m2e=Math.PI;let y2e=1;function sf(e,t){const r=e*(m2e/180);return Math.abs(t*Math.sin(r))+Math.abs(t*Math.cos(r))}function zJ(e){return e.map(t=>`${t.command} ${t.values.join(" ")}`).join(" ").trim()}function $P(e,t,r,i){if(e){if(e.type==="circle")return x("circle",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-dashoffset":r.dashOffset,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,r:e.r});if(e.type==="ellipse")return x("ellipse",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry});if(e.type==="rect")return x("rect",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",x:e.x,y:e.y,width:e.width,height:e.height});if(e.type==="image")return x("image",{href:e.src,x:e.x,y:e.y,width:e.width,height:e.height,preserveAspectRatio:"none"});if(e.type==="path"){const n=typeof e.path!="string"?zJ(e.path):e.path;return x("path",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",d:n})}if(e.type==="text")return x("text",{"alignment-baseline":i.alignBaseline,fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4","text-anchor":i.align,"text-decoration":i.decoration,kerning:i.kerning,rotate:i.rotate,"text-rendering":h2e,"font-style":i.font.style,"font-variant":i.font.variant,"font-weight":i.font.weight,"font-size":i.font.size,"font-family":i.font.family,x:e.x,y:e.y},e.text)}return null}function xP(e){const t={fill:"none",pattern:null,linearGradient:null};if(e){if("type"in e&&e.type==="pattern"){const r="patternId-"+ ++c2e;t.fill=`url(#${r})`,t.pattern={id:r,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}}}else if("type"in e&&e.type==="linear"){const r="linearGradientId-"+ ++d2e;t.fill=`url(#${r})`,t.linearGradient={id:r,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map(i=>({offset:i.offset,color:i.color&&new ae(i.color).toString()}))}}else if(e){const r=new ae(e);t.fill=r.toString()}}return t}function EP(e){const t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};if(e&&(e.width!=null&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=new ae(e.color).toString()),e.dashArray&&(t.dashArray=e.dashArray),e.dashArray&&(t.dashOffset=e.dashoffset),e.style)){let r=null;if(e.style in q4&&(r=q4[e.style]),Array.isArray(r)){r=r.slice(0);for(let i=0;i<r.length;++i)r[i]*=e.width;if(e.cap!=="butt"){for(let i=0;i<r.length;i+=2)r[i]-=e.width,r[i]<1&&(r[i]=1);for(let i=1;i<r.length;i+=2)r[i]+=e.width}r=r.join(",")}t.dashArray=r}return t}function UJ(e,t){const r={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};return e&&(r.align=e.align,r.alignBaseline=e.alignBaseline,r.decoration=e.decoration,r.kerning=e.kerning?"auto":"0",r.rotate=e.rotated?"90":"0",r.font.style=t.style||"normal",r.font.variant=t.variant||"normal",r.font.weight=t.weight||"normal",r.font.size=t.size&&t.size.toString()||"10pt",r.font.family=t.family||"serif"),r}function GJ(e){const{pattern:t,linearGradient:r}=e;if(t)return x("pattern",{id:t.id,patternUnits:"userSpaceOnUse",x:t.x,y:t.y,width:t.width,height:t.height},x("image",{x:t.image.x,y:t.image.y,width:t.image.width,height:t.image.height,href:t.image.href}));if(r){const i=r.stops.map((n,s)=>x("stop",{key:`${s}-stop`,offset:n.offset,"stop-color":n.color}));return x("linearGradient",{id:r.id,gradientUnits:"userSpaceOnUse",x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2},i)}return null}function g2e(e,t){if(!e)return null;const r=[];for(const i of e){const{shape:n,fill:s,stroke:o,font:a}=i,l=xP(s),c=EP(o),h=n.type==="text"?UJ(n,a):null;r.push($P(n,l.fill,c,h))}return x("mask",{id:t,maskUnits:"userSpaceOnUse"},x("g",null,r))}function W4(e,t,r){return im(e,b$(e),[t,r])}function H4(e,t,r,i,n){return S$(e,b$(e),[t,r]),e[4]=e[4]*t-i*t+i,e[5]=e[5]*r-n*r+n,e}function v2e(e,t,r,i){const n=t%360*Math.PI/180;Jv(e,b$(e),n);const s=Math.cos(n),o=Math.sin(n),a=e[4],l=e[5];return e[4]=a*s-l*o+i*o-r*s+r,e[5]=l*s+a*o-r*o-i*s+i,e}function hi(e,t){cr&&"left"in cr?(cr.left>e&&(cr.left=e),cr.right<e&&(cr.right=e),cr.top>t&&(cr.top=t),cr.bottom<t&&(cr.bottom=t)):cr={left:e,bottom:t,right:e,top:t}}function J4(e){const t=e.args,r=t.length;let i;switch(e.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(i=0;i<r;i+=2)hi(t[i],t[i+1]);Ze.x=t[r-2],Ze.y=t[r-1];break;case"H":for(i=0;i<r;++i)hi(t[i],Ze.y);Ze.x=t[r-1];break;case"V":for(i=0;i<r;++i)hi(Ze.x,t[i]);Ze.y=t[r-1];break;case"m":{let n=0;for(("x"in Ze)||(hi(Ze.x=t[0],Ze.y=t[1]),n=2),i=n;i<r;i+=2)hi(Ze.x+=t[i],Ze.y+=t[i+1]);break}case"l":case"t":for(i=0;i<r;i+=2)hi(Ze.x+=t[i],Ze.y+=t[i+1]);break;case"h":for(i=0;i<r;++i)hi(Ze.x+=t[i],Ze.y);break;case"v":for(i=0;i<r;++i)hi(Ze.x,Ze.y+=t[i]);break;case"c":for(i=0;i<r;i+=6)hi(Ze.x+t[i],Ze.y+t[i+1]),hi(Ze.x+t[i+2],Ze.y+t[i+3]),hi(Ze.x+=t[i+4],Ze.y+=t[i+5]);break;case"s":case"q":for(i=0;i<r;i+=4)hi(Ze.x+t[i],Ze.y+t[i+1]),hi(Ze.x+=t[i+2],Ze.y+=t[i+3]);break;case"A":for(i=0;i<r;i+=7)hi(t[i+5],t[i+6]);Ze.x=t[r-2],Ze.y=t[r-1];break;case"a":for(i=0;i<r;i+=7)hi(Ze.x+=t[i+5],Ze.y+=t[i+6])}}function Z4(e,t,r){const i=p2e[e.toLowerCase()];let n;typeof i=="number"&&(i?t.length>=i&&(n={action:e,args:t.slice(0,t.length-t.length%i)},r.push(n),J4(n)):(n={action:e,args:[]},r.push(n),J4(n)))}function w2e(e){const t=(typeof e.path!="string"?zJ(e.path):e.path).match(f2e),r=[];if(cr={},Ze={},!t)return null;let i="",n=[];const s=t.length;for(let a=0;a<s;++a){const l=t[a],c=parseFloat(l);isNaN(c)?(i&&Z4(i,n,r),n=[],i=l):n.push(c)}Z4(i,n,r);const o={x:0,y:0,width:0,height:0};return cr&&"left"in cr&&(o.x=cr.left,o.y=cr.top,o.width=cr.right-cr.left,o.height=cr.bottom-cr.top),o}function BJ(e){const t={x:0,y:0,width:0,height:0};if(e.type==="circle")t.x=e.cx-e.r,t.y=e.cy-e.r,t.width=2*e.r,t.height=2*e.r;else if(e.type==="ellipse")t.x=e.cx-e.rx,t.y=e.cy-e.ry,t.width=2*e.rx,t.height=2*e.ry;else if(e.type==="image"||e.type==="rect")t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height;else if(e.type==="path"){const r=w2e(e);t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height}return t}function qJ(e){const t={x:0,y:0,width:0,height:0};let r=null,i=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(const s of e)r?(r.x=Math.min(r.x,s.x),r.y=Math.min(r.y,s.y),i=Math.max(i,s.x+s.width),n=Math.max(n,s.y+s.height)):(r=t,r.x=s.x,r.y=s.y,i=s.x+s.width,n=s.y+s.height);return r&&(r.width=i-r.x,r.height=n-r.y),r}function wL(e,t,r,i,n,s,o,a,l){let c=(o&&s?sf(s,t):t)/2,h=(o&&s?sf(s,r):r)/2;if(l){const b=l[0],S=l[1];c=(o&&s?sf(s,b):b)/2,h=(o&&s?sf(s,S):S)/2}const f=e.width+i,m=e.height+i,y=BS(),g=BS();let v=!1;if(n&&f!==0&&m!==0){const b=t!==r?t/r:f/m,S=t>r?t:r;let M=1,T=1;isNaN(S)||(b>1?(M=S/f,T=S/b/m):(T=S/m,M=S*b/f)),Ed(g,g,H4(y,M,T,c,h)),v=!0}const _=e.x+(f-i)/2,w=e.y+(m-i)/2;if(Ed(g,g,W4(y,c-_,h-w)),!v&&(f>t||m>r)){const b=f/t>m/r,S=(b?t:r)/(b?f:m);Ed(g,g,H4(y,S,S,_,w))}return s&&Ed(g,g,v2e(y,s,_,w)),a&&Ed(g,g,W4(y,a[0],a[1])),`matrix(${g[0]},${g[1]},${g[2]},${g[3]},${g[4]},${g[5]})`}function _2e(e,t,r){const i=e==null?void 0:e.effects.find(c=>c.type==="bloom");if(!i)return null;const{strength:n,radius:s}=i,o=n>0?s:0,a=(n+o)*t,l=4*n+1;return x("filter",{id:`bloom${r}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},x("feMorphology",{operator:"dilate",radius:(n+.5*o)*(5**(t/100)*(.4+t/100)),in:"SourceGraphic",result:"dilate"}),x("feGaussianBlur",{in:"dilate",stdDeviation:a/25,result:"blur"}),x("feGaussianBlur",{in:"blur",stdDeviation:a/50,result:"intensityBlur"}),x("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},x("feFuncR",{type:"linear",slope:l}),x("feFuncG",{type:"linear",slope:l}),x("feFuncB",{type:"linear",slope:l})),x("feMerge",null,x("feMergeNode",{in:"intensityBlur"}),x("feMergeNode",{in:"intensityBrightness"}),x("feGaussianBlur",{stdDeviation:n/10})))}function WJ(e,t,r,i={}){var c;const n=[],s=[],o=++y2e,a=_2e(i.effectView,t,o);let l=null;if(a){const h=(c=i.effectView)==null?void 0:c.effects.find(g=>g.type==="bloom"),f=(h.strength?h.strength+h.radius/2:0)/3,m=t+t*f,y=r+r*f;l=[Math.max(m,10),Math.max(y,10)]}for(let h=0;h<e.length;h++){const f=e[h],m=[],y=[];let g=0,v=0,_=0;for(const S of f){const{shape:M,fill:T,stroke:k,font:N,offset:F}=S;i.ignoreStrokeWidth||(g+=k&&k.width||0);const q=xP(T),z=EP(k),Q=M.type==="text"?UJ(M,N):null;n.push(GJ(q)),m.push($P(M,q.fill,z,Q)),y.push(BJ(M)),F&&(v+=F[0],_+=F[1])}const w=wL(qJ(y),t,r,g,i.scale,i.rotation,i.useRotationSize,[v,_],l);let b=null;if(i.masking){const S=`mask-${h}`,M=i.masking[h];n.push(g2e(M,S)),b=`url(#${S})`}s.push(b?x("g",{mask:b},x("g",{transform:w},m)):x("g",{transform:w},m))}return i.useRotationSize&&i.rotation&&(t=sf(i.rotation,t),r=sf(i.rotation,r)),a&&(t=l[0],r=l[1]),x("svg",{xmlns:u2e,width:t,height:r,style:"display: block;"},a,x("defs",null,n),a?x("g",{filter:`url(#bloom${o})`},s):s)}const b2e=mS();function Zv(e,t,r){const i=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!e.some(o=>!!o.length))return null;const s=r&&r.node||document.createElement("div");return r.opacity!=null&&(s.style.opacity=r.opacity.toString()),r.effectView!=null&&(s.style.filter=rv(r.effectView)),b2e.append(s,WJ.bind(null,e,i,n,r)),s}function S2e(e,t){e=Math.ceil(e),t=Math.ceil(t);const r=document.createElement("canvas");r.width=e,r.height=t,r.style.width=e+"px",r.style.height=t+"px";const i=r.getContext("2d");return i.clearRect(0,0,e,t),i}function $2e(e,t,r){return e?nt(e,{responseType:"image"}).then(i=>{const n=i.data,s=n.width,o=n.height,a=s/o;let l=t;if(r){const c=Math.max(s,o);l=Math.min(l,c)}return{image:n,width:a<=1?Math.ceil(l*a):l,height:a<=1?l:Math.ceil(l/a)}}):Promise.reject(new O("renderUtils: imageDataSize","href not provided."))}function x2e(e,t){return!(!e||t==="ignore")&&(t!=="multiply"||e.r!==255||e.g!==255||e.b!==255||e.a!==1)}function E2e(e,t,r,i,n){switch(n){case"multiply":e[t+0]*=r[0],e[t+1]*=r[1],e[t+2]*=r[2],e[t+3]*=r[3];break;default:{const s=_P({r:e[t+0],g:e[t+1],b:e[t+2]});s.h=i.h,s.s=i.s,s.v=s.v/100*i.v;const o=Hv(s);e[t+0]=o.r,e[t+1]=o.g,e[t+2]=o.b,e[t+3]*=r[3];break}}}function T2e(e,t,r,i,n){return $2e(e,t,n).then(s=>{const o=s.width?s.width:t,a=s.height?s.height:t;if(s.image&&x2e(r,i)){let l=s.image.width,c=s.image.height;j("edge")&&/\.svg$/i.test(e)&&(l-=1,c-=1);const h=S2e(o,a);h.drawImage(s.image,0,0,l,c,0,0,o,a);const f=h.getImageData(0,0,o,a),m=[r.r/255,r.g/255,r.b/255,r.a],y=_P(r);for(let g=0;g<f.data.length;g+=4)E2e(f.data,g,m,y,i);h.putImageData(f,0,0),e=h.canvas.toDataURL("image/png")}else{const l=$t&&$t.findCredential(e);if(l&&l.token){const c=e.includes("?")?"&":"?";e=`${e}${c}token=${l.token}`}}return{url:e,width:o,height:a}}).catch(()=>({url:e,width:t,height:t}))}let Vh=null;const Y4=[255,255,255];function Q4(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function M2e(e,t,r){const{backgroundColor:i,outline:n,dotSize:s}=e,o=r&&r.swatchSize||fr.size,a=.8,l=Math.round(o*o/s**2*a),c=window.devicePixelRatio,h=document.createElement("canvas"),f=o*c;h.width=f,h.height=f,h.style.width=h.width/c+"px",h.style.height=h.height/c+"px";const m=h.getContext("2d");if(i&&(m.fillStyle=i.toCss(!0),m.fillRect(0,0,f,f),m.fill()),m.fillStyle=t.toCss(!0),Vh&&Vh.length/2===l)for(let g=0;g<2*l;g+=2){const v=Vh[g],_=Vh[g+1];m.fillRect(v,_,s*c,s*c),m.fill()}else{Vh=[];for(let g=0;g<2*l;g+=2){const v=Q4(0,f),_=Q4(0,f);Vh.push(v,_),m.fillRect(v,_,s*c,s*c),m.fill()}}n&&(n.color&&(m.strokeStyle=n.color.toCss(!0)),m.lineWidth=n.width,m.strokeRect(0,0,f,f));const y=new Image(o,o);return y.src=h.toDataURL(),y}function I2e(e,t={}){const r=t.radius||40,i=2*Math.PI*r,n=e.length,s=i/n,o=[],a=ev(t.outline);a&&(a.width*=2),(a||t.backgroundColor)&&o.push({shape:{type:"circle",cx:r,cy:r,r},fill:t.backgroundColor,stroke:a,offset:[0,0]});const l=t.values,c=l&&l.length===n&&l.reduce((g,v)=>g+v,0)===100,h=[0];for(let g=0;g<n;g++){const v=c?l[g]*i/100:null;c&&h.push(v+h[g]),o.push({shape:{type:"circle",cx:r,cy:r,r:r/2},fill:[0,0,0,0],stroke:{width:r,dashArray:`${v||s} ${i}`,dashoffset:"-"+(c?h[g]/2:g*(s/2)),color:e[g]},offset:[0,0]})}let f=null;const m=2*r+((a==null?void 0:a.width)||0),y=t.holePercentage;if(y){a&&o.push({shape:{type:"circle",cx:r,cy:r,r:r*y},fill:null,stroke:a,offset:[0,0]});const g=m/2;f=[[{shape:{type:"circle",cx:g,cy:g,r:g},fill:Y4,stroke:a?{...a,color:Y4}:null,offset:[0,0]},{shape:{type:"circle",cx:g,cy:g,r:r*y},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return Zv([o],[m,m],{effectView:t.effectList,ignoreStrokeWidth:!0,masking:f,rotation:-90})}function cd(e,t={}){const n=t.align==="horizontal",s=n?75:24,o=n?24:75,{width:a=s,height:l=o,gradient:c=!0}=t,h=window.devicePixelRatio,f=a*h,m=l*h,y=document.createElement("canvas");y.width=f,y.height=m,y.style.width=`${a}px`,y.style.height=`${l}px`;const g=y.getContext("2d"),v=n?f:0,_=n?0:m;if(c){const b=g.createLinearGradient(0,0,v,_),S=e.length,M=S===1?0:1/(S-1);e.forEach((T,k)=>b.addColorStop(k*M,T.toString())),g.fillStyle=b,g.fillRect(0,0,f,m)}else{const b=n?f/e.length:f,S=n?m:m/e.length;let M=0,T=0;for(const k of e)g.fillStyle=k.toString(),g.fillRect(M,T,b,S),M=n?M+b:0,T=n?0:T+S}const w=document.createElement("div");return w.style.width=`${a}px`,w.style.height=`${l}px`,C2e(w,t==null?void 0:t.effectList),w.appendChild(y),w}function C2e(e,t){if(!t)return;e.style.filter=rv(t);const r=t.effects;if(r){for(const i of r)if((i==null?void 0:i.type)==="drop-shadow"){i.offsetX<0?e.style.marginLeft=`${Math.abs(i.offsetX)}px`:e.style.marginRight=`${i.offsetX}px`;break}}}async function HJ(e,t){switch(e.type){case"web-style":{const{previewWebStyleSymbol:r}=await V(()=>import("./previewWebStyleSymbol.6bbeeef1.js"),[],import.meta.url);return r(e,HJ,t)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:r}=await V(()=>Promise.resolve().then(()=>IMe),void 0,import.meta.url);return r(e,t)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:r}=await V(()=>import("./previewSymbol2D.e1a2dd39.js"),[],import.meta.url);return r(e,t)}case"cim":{const{previewCIMSymbol:r}=await V(()=>import("./previewCIMSymbol.4d5306c1.js"),["previewCIMSymbol.4d5306c1.js","cimAnalyzer.647bc67f.js","CIMSymbolHelper.37e0b825.js","BidiEngine.95523203.js","enums.9bd521fc.js","alignmentUtils.84250e5d.js","number.6e30c64a.js","GeometryUtils.f3664fe1.js","quantizationUtils.d80604ad.js","Rasterizer.ee0897d5.js"],import.meta.url);return r(e,t)}default:return}}function JJ(e){return e&&"opacity"in e?e.opacity*JJ(e.parent):1}async function k2e(e,t){var _;if(!e)return;const r=e.sourceLayer,i=(_=I(t)&&t.useSourceLayer?r:e.layer)!=null?_:r,n=JJ(i);if(I(e.symbol)&&(!I(t)||t.ignoreGraphicSymbol!==!0)){const w=e.symbol.type==="web-style"?await e.symbol.fetchSymbol({...t,cache:I(t)?t.webStyleCache:null}):e.symbol.clone();return eE(w,null,n),w}const s=I(t)&&t.renderer||i&&"renderer"in i&&i.renderer;let o=s&&"getSymbolAsync"in s?await s.getSymbolAsync(e,t):null;if(!o)return;if(o=o.type==="web-style"?await o.fetchSymbol({...t,cache:I(t)?t.webStyleCache:null}):o.clone(),!("visualVariables"in s)||!s.visualVariables||!s.visualVariables.length)return eE(o,null,n),o;if("arcadeRequiredForVisualVariables"in s&&s.arcadeRequiredForVisualVariables&&(R(t)||R(t.arcade))){const w={...t};w.arcade=await vl(),t=w}const a=await V(()=>Promise.resolve().then(()=>Oh),void 0,import.meta.url),l=[],c=[],h=[],f=[];for(const w of s.visualVariables)switch(w.type){case"color":l.push(w);break;case"opacity":c.push(w);break;case"rotation":f.push(w);break;case"size":w.target||h.push(w)}const m=!!l.length&&l[l.length-1],y=m?a.getColor(m,e,t):null,g=!!c.length&&c[c.length-1];let v=g?a.getOpacity(g,e,t):null;if(n!=null&&(v=v!=null?v*n:n),eE(o,y,v),h.length){const w=a.getAllSizes(h,e,t);await Dye(o,w)}for(const w of f)jye(o,a.getRotationAngle(w,e,t),w.axis);return o}class L2e{constructor(t,r){this.owner=r,this.properties={},this.afterDispatchHandle=null;for(const i in t){const n=t[i],s=new n9(n,null,null,2,2);this.properties[i]={pool:s,acquired:[]}}this.afterDispatchHandle=Tre(()=>this._release())}destroy(){this.afterDispatchHandle&&(this.afterDispatchHandle.remove(),this.afterDispatchHandle=null);for(const t in this.properties){const r=this.properties[t];for(const i of r.acquired)NF(i)||r.pool.release(i);r.pool.destroy(),r.pool=null,r.acquired=null}this.properties=null,this.owner=null}get(t){const r=this.owner._get(t),i=this.properties[t];let n=i.pool.acquire();for(i.acquired.push(n);n===r;)i.acquired.push(n),n=i.pool.acquire();return n}_release(){for(const t in this.properties){const r=this.properties[t];let i=0;for(const n of r.acquired)NF(n)?r.acquired[i++]=n:r.pool.release(n);r.acquired.length=i}}}const O2e=j("mac")?"Meta":"Ctrl",$$={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let e=48;e<58;e++)$$[e]=String.fromCharCode(e);for(let e=1;e<25;e++)$$[111+e]=`F${e}`;for(let e=65;e<91;e++)$$[e]=[String.fromCharCode(e+32),String.fromCharCode(e)];function A2e(e){if(e.key!==void 0)return vd(e);const t=$$[e.keyCode];return Array.isArray(t)?e.shiftKey?t[1]:t[0]:t}function P2e(e){switch(e){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}class R2e{constructor(t,r=[]){this.eventType=t,this.keyModifiers=r}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const r=t.modifiers;for(const i of this.keyModifiers)if(!r.has(i))return!1;return!0}}const K4=Z.getLogger("esri.views.input.InputHandler");class Dr{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const r=this._incoming[t];for(const i of r)this._incomingEventMatches.push(i.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager?K4.error("This InputHandler has already been registered with an InputManager"):(t.setEventCallback(r=>this._handleEvent(r)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,r,i){let n;typeof r=="function"?(i=r,n=[]):n=r||[];const s=typeof t=="string"?new R2e(t,n):t,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=h=>{const f=this._incoming[h.match.eventType];if(f){const m=f.indexOf(h);f.splice(m,1),o(),this._manager&&this._manager.updateDependencies()}},l=new F2e(s,i,{onPause:a,onRemove:a,onResume:h=>{const f=this._incoming[h.match.eventType];f&&!f.includes(h)&&(f.push(h),o(),this._manager&&this._manager.updateDependencies())}});let c=this._incoming[s.eventType];return c||(c=[],this._incoming[s.eventType]=c),c.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(t){if(this._outgoing[t])throw Error("There is already a callback registered for this outgoing InputEvent: "+t);const r=new N2e(t,{onEmit:(i,n,s,o)=>{this._manager.emit(i.eventType,n,s,o)},onRemove:i=>{delete this._outgoing[i.eventType],this._manager.updateDependencies()}});return this._outgoing[t]=r,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),r}startCapturingPointer(t){this._manager.setPointerCapture(t,!0)}stopCapturingPointer(t){this._manager.setPointerCapture(t,!1)}refreshHasPendingInputs(){this._manager.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):K4.error("This InputHandler is not registered with an InputManager")}_handleEvent(t){const r=this._incoming[t.type];if(r){for(const i of r)if(i.match.matches(t)&&(i.callback(t),t.shouldStopPropagation()))break}}}class F2e{constructor(t,r,i){this.match=t,this._callback=r,this._handler=i}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class N2e{constructor(t,r){this.eventType=t,this._removed=!1,this._handler=r}emit(t,r,i){this._removed||this._handler.onEmit(this,t,r,i)}remove(){this._removed=!0,this._handler.onRemove(this)}}class D2e extends Dr{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",r=>{const i=r.data.native.pointerType==="touch";this._setValue(i?"touch":"mouse",r.data.x,r.data.y)})}_setValue(t,r,i){t===this._value&&this._x===r&&this._y===i||(this._value=t,this._x=r,this._y=i,this._onChange(t,r,i))}}const FE=Z.getLogger("esri.views.input.InputManager");let pu=class extends le{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=O2e,this.latestPointerType="mouse",this._propertiesPool=new L2e({latestPointerLocation:V2e},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource=null,this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}installHandlers(e,t,r=sc.INTERNAL){if(this._nameToGroup[e])return void FE.error("There is already an InputHandler group registered under the name `"+e+"`");if(t.length===0)return void FE.error("Can't register a group of zero handlers");const i={name:e,handlers:t.map(n=>({handler:n,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=i;for(let n=i.handlers.length-1;n>=0;n--){const s=i.handlers[n];this._handlers.push(s),s.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(o,a,l,c,h)=>{this._emitInputEvent(s.priorityIndex+1,o,a,l,h,c)},setPointerCapture:(o,a)=>{this._setPointerCapture(i,s,o,a)},setEventCallback:o=>{s.eventCallback=o},setUninstallCallback:o=>{s.uninstallCallback=o},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach(r=>{r.removed=!0,r.uninstallCallback()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):FE.error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const i=this._handlers[r];i.priorityIndex=r,this._handlersPriority.push(i)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const i=this._handlersPriority[r];i.priorityIndex=r;let n=i.handler.hasSideEffects;if(!n){for(const s of i.handler.outgoingEventTypes)if(e.has(s)){n=!0;break}}if(n)for(const s of i.handler.incomingEventMatches){e.add(s.eventType);for(const o of s.keyModifiers)P2e(o)||t.add(o)}i.active=n}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,t,r){this._get("latestPointerType")!==e&&this._set("latestPointerType",e);const i=this._get("latestPointerLocation");if(R(i)||i.x!==t||i.y!==r){const n=this._propertiesPool.get("latestPointerLocation");n.x=t,n.y=r,this._set("latestPointerLocation",n)}}_onEventReceived(e,t){if(e==="pointer-capture-lost"){const n=t;this._pointerCaptures.delete(n.native.pointerId)}this._updateKeyModifiers(e,t);const r=this.test.timestamp!=null?this.test.timestamp:t.native?t.native.timestamp:void 0,i=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,r,i)}_updateKeyModifiers(e,t){if(!t)return;let r=!1;const i=()=>{if(!r){const o=new Set;this._activeKeyModifiers.forEach(a=>{o.add(a)}),this._activeKeyModifiers=o,r=!0}},n=(o,a)=>{a&&!this._activeKeyModifiers.has(o)?(i(),this._activeKeyModifiers.add(o)):!a&&this._activeKeyModifiers.has(o)&&(i(),this._activeKeyModifiers.delete(o))};if(e==="key-down"||e==="key-up"){const o=t.key;this._keyModifiers.has(o)&&n(o,e==="key-down")}const s=t.native;n("Alt",!(!s||!s.altKey)),n("Ctrl",!(!s||!s.ctrlKey)),n("Shift",!(!s||!s.shiftKey)),n("Meta",!(!s||!s.metaKey)),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new D2e((e,t,r)=>this._setLatestPointer(e,t,r)),this.installHandlers("input-manager-logic",[this._latestPointerHandler],sc.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,sc.INTERNAL)}_setPointerCapture(e,t,r,i){const n=e.name+"-"+t.priorityIndex,s=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,s),i?(s.add(n),s.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):s.has(n)&&(s.delete(n),s.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,t,r,i){this._emitInputEvent(0,e,t,r,i)}_emitInputEvent(e,t,r,i,n,s){const o=i!==void 0?i:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),a=n!==void 0&&n,l={event:new j2e(t,r,o,s||this._activeKeyModifiers,a),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(l):this._doNewPropagation(l)}_doNewPropagation(e){this._currentPropagation={events:new nS,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){const e=this._currentPropagation;if(e){for(;this._currentPropagation.events.length>0;){const{event:t,priorityIndex:r}=this._currentPropagation.events.pop(),i=t.data&&t.data.eventId;if(!(i!=null&&this._stoppedPropagationEventIds.has(i)))for(e.currentHandler=this._handlersPriority[r];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!t.shouldStopPropagation()&&e.currentHandler.eventCallback(t),t.shouldStopPropagation()){i!=null&&this._stoppedPropagationEventIds.add(i);break}if(t.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:t,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const t=new nS;for(t.push(e);this._currentPropagation.events.length;)t.push(this._currentPropagation.events.pop());this._currentPropagation.events=t,this._currentPropagation.currentHandler=null}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const i of t.handler.incomingEventMatches){if(r.eventType!==i.eventType)continue;const n=r.keyModifiers.filter(s=>i.keyModifiers.includes(s));if(n.length===r.keyModifiers.length!=(n.length===i.keyModifiers.length))return r.keyModifiers.length>i.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const r of e){let i=0;for(;i<t.length&&this._compareHandlerPriority(r,t[i])>=0;)i++;t.splice(i,0,r)}return t}get debug(){const e=t=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},t(),this._setPointerCapture=r};return{injectEvent:(t,r)=>{e(()=>{this._onEventReceived(t,r)})},disablePointerCapture:e}}};u([d({readOnly:!0})],pu.prototype,"hasPendingInputs",null),u([d()],pu.prototype,"eventSource",void 0),u([d()],pu.prototype,"recognizers",void 0),u([d({readOnly:!0})],pu.prototype,"latestPointerType",void 0),u([d({readOnly:!0})],pu.prototype,"latestPointerLocation",void 0),pu=u([E("esri.views.input.InputManager")],pu);class j2e{constructor(t,r,i,n,s){this.type=t,this.data=r,this.timestamp=i,this.modifiers=n,this.cancelable=s,this._propagationState=Lu.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Lu.STOPPED}shouldStopPropagation(){return(this._propagationState&Lu.STOPPED)!=0}async(t){this._propagationState|=Lu.PAUSED;const r=(i,n)=>{this._propagationState&=~Lu.PAUSED;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),n)throw i;return i};return(typeof t=="function"?t():t).then(i=>r(i,!1),i=>r(i,!0))}shouldPausePropagation(t){return!!(this._propagationState&Lu.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}}var Lu;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(Lu||(Lu={}));const sc={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};class V2e{}function X4(e){return e&&typeof e.highlight=="function"}const x$={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},Wd=new bm({id:"zoom-to-feature",title:"{messages.zoom}",className:x$.iconZoom}),_L=new bm({id:"remove-selected-feature",title:"{messages.remove}",className:x$.iconTrash}),of=new bm({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:x$.iconZoom}),af=new bm({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:x$.iconBrowseClusteredFeatures}),z2e="esri.widgets.Popup.PopupViewModel",qS=Z.getLogger(z2e),U2e=e=>{const{event:t,view:r}=e,{action:i}=t,n=r&&r.popup;if(!i)return Promise.reject(new O("trigger-action:missing-arguments","Event has no action"));if(!n)return Promise.reject(new O("trigger-action:missing-arguments","view.popup is missing"));const{disabled:s,id:o}=i;if(!o)return Promise.reject(new O("trigger-action:invalid-action","action.id is missing"));if(s)return Promise.reject(new O("trigger-action:invalid-action","Action is disabled"));if(o===Wd.id)return B2e(n.viewModel).catch(_M);if(o===of.id)return q2e(n.viewModel);if(o===af.id)return n.featureMenuOpen=!n.featureMenuOpen,n.viewModel.browseClusterEnabled=!n.viewModel.browseClusterEnabled,Promise.resolve();if(n.viewModel.browseClusterEnabled=!1,o===_L.id){n.close();const{selectedFeature:a}=n;if(!a)return Promise.reject(new O(`trigger-action:${_L.id}`,"selectedFeature is required",{selectedFeature:a}));const{sourceLayer:l}=a;return l?l.remove(a):r.graphics.remove(a),Promise.resolve()}return Promise.resolve()};function ZJ(e){const{selectedFeature:t,location:r,view:i}=e;return i?i.type==="3d"?t||r:e.get("selectedFeature.geometry")||r:null}function Td(e){var t,r;return(e==null?void 0:e.isAggregate)&&((r=(t=e==null?void 0:e.sourceLayer)==null?void 0:t.featureReduction)==null?void 0:r.type)==="cluster"}function G2e(e,t){if((t==null?void 0:t.type)!=="3d"||!e||e.declaredClass!=="esri.Graphic")return!0;const r=t.getViewForGraphic(e);if(r&&"whenGraphicBounds"in r){let i=!1;return r.whenGraphicBounds(e,{useViewElevation:!0}).then(n=>{i=!n||!n.boundingBox||n.boundingBox[0]===n.boundingBox[3]&&n.boundingBox[1]===n.boundingBox[4]&&n.boundingBox[2]===n.boundingBox[5]}).catch(()=>{const n=new O("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:e});qS.error(n)}),i}return!0}async function B2e(e){const{location:t,selectedFeature:r,view:i,zoomFactor:n}=e,s=ZJ(e);if(!s){const c=new O("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:s,view:i});throw qS.error(c),c}const o=i.scale/n,a=e.get("selectedFeature.geometry")||t,l=a&&a.type==="point"&&G2e(r,i);Wd.active=!0,Wd.disabled=!0;try{await e.view.goTo({target:s,scale:l?o:void 0})}finally{Wd.active=!1,Wd.disabled=!1,e.zoomToLocation=null,l&&(e.location=a)}}async function q2e(e){const{selectedFeature:t,view:r}=e;if((r==null?void 0:r.type)!=="2d"){const a=new O("zoomToCluster:invalid-view","View must be 2d MapView.",{view:r});throw qS.error(a),a}if(!Td(t)){const a=new O("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw qS.error(a),a}const i=t.sourceLayer,n=await r.whenLayerView(i),s=n.createQuery();s.aggregateIds=[t.getObjectId()],of.active=!0,of.disabled=!0;const{extent:o}=await n.queryExtent(s);await r.goTo({target:o}),of.active=!1,of.disabled=!1}async function W2e(e){const{selectedFeature:t,view:r}=e,i=t.sourceLayer,n=await r.whenLayerView(i),s=n.createQuery();s.aggregateIds=[t.getObjectId()];const{extent:o}=await n.queryExtent(s);e.selectedClusterBoundaryFeature.geometry=o,r.graphics.add(e.selectedClusterBoundaryFeature)}async function H2e(e){const{selectedFeature:t,view:r}=e,i=t.sourceLayer,n=await r.whenLayerView(i),s=n.createQuery();s.aggregateIds=[t.getObjectId()],af.active=!0,af.disabled=!0;const{features:o}=await n.queryFeatures(s);af.active=!1,af.disabled=!1,r.popup.open({features:[t].concat(o),featureMenuOpen:!0})}function J2e(e){const t=e.features.filter(r=>Td(r));t.length&&(e.features=t)}const E$=e=>{let t=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:i}=this;return this.goToOverride?this.goToOverride(i,r):i.goTo(r.target,r.options)}};return u([d()],t.prototype,"goToOverride",void 0),u([d()],t.prototype,"view",void 0),t=u([E("esri.widgets.support.GoTo")],t),t},u0=de.ofType({key:"type",defaultKeyValue:"button",base:z2,typeMap:{button:bm,toggle:MU}}),Z2e=()=>[Wd.clone()],Y2e=()=>[of.clone(),af.clone()],YJ="esri.widgets.Popup.PopupViewModel",dw=Z.getLogger(YJ);let Pe=class extends E$(IJ){constructor(e){super(e),this._handles=new zt,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new u0,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new ln({symbol:new ha({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}get isLoadingFeature(){return this.featureViewModels.some(e=>e.waitingForContent)}initialize(){this._handles.add([G(()=>[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),G(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),G(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),G(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.animation)==null?void 0:t.state},e=>this._animationStateChange(e)),G(()=>this.location,e=>this._locationChange(e)),G(()=>this.selectedFeature,e=>this._selectedFeatureChange(e)),G(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),G(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),G(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",e=>U2e({event:e,view:this.view})),di(()=>!this.waitingForResult,()=>this._waitingForResultChange(),Gf),G(()=>{var e,t;return[this.features,(e=this.view)==null?void 0:e.map,(t=this.view)==null?void 0:t.spatialReference]},()=>this._updateFeatureVMs()),G(()=>{var e;return(e=this.view)==null?void 0:e.scale},()=>this._viewScaleChange()),di(()=>!this.visible,()=>this.browseClusterEnabled=!1),G(()=>this.browseClusterEnabled,e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new u0;e.removeAll();const{actions:t,defaultActions:r,defaultPopupTemplateEnabled:i,includeDefaultActions:n,selectedFeature:s}=this,o=n?r.concat(t):t,a=s&&(typeof s.getEffectivePopupTemplate=="function"&&s.getEffectivePopupTemplate(i)||s.popupTemplate),l=a&&a.actions,c=a&&a.overwriteActions?l:l?l.concat(o):o;return c&&c.filter(Boolean).forEach(h=>e.add(h)),e}get defaultActions(){const e=this._get("defaultActions")||new u0;return e.removeAll(),e.addMany(Td(this.selectedFeature)?Y2e():Z2e()),e}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const t=e||[];this._set("features",t);const{pendingPromisesCount:r,promiseCount:i,selectedFeatureIndex:n}=this,s=i&&t.length;s&&r&&n===-1?this.selectedFeatureIndex=0:s&&n!==-1||(this.selectedFeatureIndex=t.length?0:-1)}get location(){return this._get("location")||null}set location(e){const t=this.get("view.spatialReference.isWebMercator");e&&e.get("spatialReference.isWGS84")&&t&&(e=cl(e)),this._set("location",e)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(!!this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(t=>{this._pendingPromises.add(t);const r=n=>{this._pendingPromises.has(t)&&this._updateFeatures(n),this._updatePendingPromises(t)},i=()=>this._updatePendingPromises(t);t.then(r,i)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:t}=this;return t===-1?null:e[t]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:t}=this;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this.activeFeature=null,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,t=ZJ(this);if(!t){const r=new O("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e});return dw.error(r),Promise.reject(r)}return this.callGoTo({target:{target:t,scale:e.scale}})}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(e,t){const{view:r}=this;if(!r||!e){const i=new O("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:r});return dw.error(i),Promise.reject(i)}return r.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}open(e){const t={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:r}=t;delete t.fetchFeatures,r&&this._setFetchFeaturesPromises(t.location);const i=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const n of i)delete t[n];this.set(t)}triggerAction(e){const t=this.allActions.getItemAt(e);t&&!t.disabled&&this.emit("trigger-action",{action:t})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){J2e(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:e,selectedFeature:t}=this;(e==null?void 0:e.type)==="2d"?Td(t)?(await W2e(this),await H2e(this)):dw.warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",t):dw.warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",t)}_animationStateChange(e){this.zoomToLocation||(Wd.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var t;const e=(t=this.view)==null?void 0:t.graphics;e&&(e.remove(this.selectedClusterBoundaryFeature),e.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(Td(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=[this.selectedFeature])}_locationChange(e){const{selectedFeature:t,updateLocationEnabled:r}=this;r&&e&&(!t||t.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:t,featurePage:r,featuresPerPage:i,featureViewModels:n}=this;if(r===null)return;const s=((r-1)*i+t)%t,o=s+i;n.slice(s,o).forEach((a,l)=>{a&&!a.graphic&&(a.graphic=e[s+l])})}async _selectedFeatureChange(e){if(!e)return;const{location:t,updateLocationEnabled:r,view:i}=this;if(this.browseClusterEnabled)return this._selectedClusterFeature&&(i.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),Td(e)?void 0:(e.symbol=await k2e(e),this._selectedClusterFeature=e,void i.graphics.add(this._selectedClusterFeature));!r&&t||!e.geometry?r&&!e.geometry&&this.centerAtLocation().then(()=>{this.location=i.center.clone()}):this.location=this._getPointFromGeometry(e.geometry)}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(t=>{const{clientOnlyGraphics:r,promisesPerLayerView:i}=t,n=Promise.resolve(r),s=i.map(o=>o.promise);this.promises=[n,...s]})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:t,featureViewModels:r}=this;if(Td(e)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!t||!t.length)return;const i=r.slice(0),n=[];t.forEach((s,o)=>{var l,c;if(!s)return;let a=null;if(i.some((h,f)=>(h&&h.graphic===s&&(a=h,i.splice(f,1)),!!a)),a)n[o]=a;else{const h=new vP({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:(l=this.view)==null?void 0:l.spatialReference,graphic:s===e?s:null,map:(c=this.view)==null?void 0:c.map,view:this.view});n[o]=h}}),i.forEach(s=>s&&!s.destroyed&&s.destroy()),this._set("featureViewModels",n)}_getScreenPoint(e){const{view:t}=this;return t&&e&&typeof t.toScreen=="function"?t.toScreen(e):null}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:t,autoOpenEnabled:r}=this;if(t.remove(e),r&&this.view){const i=this.view.on("click",n=>{n.pointerType==="mouse"&&n.button!==0||this._fetchFeaturesAndOpen(n)},sc.WIDGET);t.add(i,e)}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,t){this._cancelFetchingFeatures();const r=new AbortController,{signal:i}=r;this._fetchFeaturesController=r,this.notifyChange("waitingForResult");const n=this.fetchFeatures(e,{signal:i,event:t});return n.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),n}_fetchFeaturesAndOpen(e){const{screenPoint:t,mapPoint:r}=e,{view:i}=this;this._fetchFeaturesWithController(t,e).then(n=>{const{clientOnlyGraphics:s,promisesPerLayerView:o,location:a}=n,l=[Promise.resolve(s),...o.map(c=>c.promise)];return i.popup.open({location:a||r,promises:l}),n})}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}_getPointFromGeometry(e){return R(e)?null:e.type==="point"?e:e.type==="extent"?e.center:e.type==="polygon"?e.centroid:e.type==="multipoint"||e.type==="polyline"?e.extent.center:null}async _getLayerView(e,t){return await e.when(),e.whenLayerView(t)}_getHighlightLayer(e){const{layer:t,sourceLayer:r}=e;return(r==null?void 0:r.type)==="map-notes"||(r==null?void 0:r.type)==="subtype-group"?r:t}_getHighlightTarget(e,t){const r=t.type==="imagery"?void 0:"objectIdField"in t&&t.objectIdField,i=e.attributes;return i&&r&&i[r]||e}async _highlightActiveFeature(){const e="highlight-active-feature";this._handles.remove(e);const{highlightEnabled:t,view:r,activeFeature:i,visible:n}=this;if(!(i&&r&&t&&n))return;const s=this._getHighlightLayer(i);if(!(s&&s instanceof j0))return;const o=this._getLayerView(r,s);this._highlightActiveFeaturePromise=o;const a=await o;if(!(a&&X4(a)&&this._highlightActiveFeaturePromise===o&&this.activeFeature&&this.highlightEnabled))return;const l=a.highlight(this._getHighlightTarget(i,s));this._handles.add(l,e)}async _highlightSelectedFeature(){const e="highlight-selected-feature";this._handles.remove(e);const{selectedFeature:t,highlightEnabled:r,view:i,visible:n}=this;if(!(t&&i&&r&&n))return;const s=this._getHighlightLayer(t);if(!(s&&s instanceof j0))return;const o=this._getLayerView(i,s);this._highlightSelectedFeaturePromise=o;const a=await o;if(!(a&&X4(a)&&this._highlightSelectedFeaturePromise===o&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const l=a.highlight(this._getHighlightTarget(t,s));this._handles.add(l,e)}_updateFeatures(e){const{features:t}=this;if(!e||!e.length)return;if(!t.length)return void(this.features=e);const r=e.filter(i=>!t.includes(i));this.features=t.concat(r)}};u([d()],Pe.prototype,"featurePage",void 0),u([d()],Pe.prototype,"isLoadingFeature",null),u([d({type:u0})],Pe.prototype,"actions",void 0),u([d({readOnly:!0})],Pe.prototype,"active",null),u([d()],Pe.prototype,"activeFeature",void 0),u([d({readOnly:!0})],Pe.prototype,"allActions",null),u([d({type:Boolean})],Pe.prototype,"defaultPopupTemplateEnabled",void 0),u([d()],Pe.prototype,"autoCloseEnabled",void 0),u([d()],Pe.prototype,"autoOpenEnabled",void 0),u([d()],Pe.prototype,"browseClusterEnabled",void 0),u([d()],Pe.prototype,"content",void 0),u([d({type:u0,readOnly:!0})],Pe.prototype,"defaultActions",null),u([d({readOnly:!0})],Pe.prototype,"featureCount",null),u([d()],Pe.prototype,"features",null),u([d()],Pe.prototype,"featuresPerPage",void 0),u([d()],Pe.prototype,"featureViewModelAbilities",void 0),u([d({readOnly:!0})],Pe.prototype,"featureViewModels",void 0),u([d()],Pe.prototype,"highlightEnabled",void 0),u([d()],Pe.prototype,"includeDefaultActions",void 0),u([d({type:ye})],Pe.prototype,"location",null),u([d({readOnly:!0})],Pe.prototype,"pendingPromisesCount",null),u([d({readOnly:!0})],Pe.prototype,"selectedClusterBoundaryFeature",void 0),u([d({readOnly:!0})],Pe.prototype,"waitingForResult",null),u([d({readOnly:!0})],Pe.prototype,"promiseCount",null),u([d()],Pe.prototype,"promises",null),u([d({value:null,readOnly:!0})],Pe.prototype,"selectedFeature",null),u([d({value:-1})],Pe.prototype,"selectedFeatureIndex",null),u([d({readOnly:!0})],Pe.prototype,"selectedFeatureViewModel",null),u([d({readOnly:!0})],Pe.prototype,"state",null),u([d()],Pe.prototype,"title",void 0),u([d()],Pe.prototype,"updateLocationEnabled",void 0),u([d()],Pe.prototype,"view",void 0),u([d()],Pe.prototype,"visible",void 0),u([d()],Pe.prototype,"zoomFactor",void 0),u([d()],Pe.prototype,"zoomToLocation",void 0),u([d()],Pe.prototype,"centerAtLocation",null),Pe=u([E(YJ)],Pe);const QJ=Pe,ej="selected-index",Q2e=0,tj="popup-spinner",H={iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:"esri-popup",widget:"esri-widget",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",isCollapsible:"esri-popup--is-collapsible",isCollapsed:"esri-popup--is-collapsed",shadow:"esri-popup--shadow",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",alignTopCenter:"esri-popup--aligned-top-center",alignBottomCenter:"esri-popup--aligned-bottom-center",alignTopLeft:"esri-popup--aligned-top-left",alignBottomLeft:"esri-popup--aligned-bottom-left",alignTopRight:"esri-popup--aligned-top-right",alignBottomRight:"esri-popup--aligned-bottom-right",isFeatureMenuOpen:"esri-popup--feature-menu-open",isActionsMenuOpen:"esri-popup--actions-menu-open",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerContainer:"esri-popup__header-container",headerContainerButton:"esri-popup__header-container--button",headerTitle:"esri-popup__header-title",content:"esri-popup__content",footer:"esri-popup__footer",footerHasPagination:"esri-popup__footer--has-pagination",footerHasActions:"esri-popup__footer--has-actions",footerHasActionsMenu:"esri-popup__footer--has-actions-menu",button:"esri-popup__button",buttonDisabled:"esri-popup__button--disabled",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",inlineActionsContainer:"esri-popup__inline-actions-container",actionsMenuButton:"esri-popup__actions-menu-button",actions:"esri-popup__actions",action:"esri-popup__action",actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",actionToggle:"esri-popup__action-toggle",actionToggleOn:"esri-popup__action-toggle--on",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",navigation:"esri-popup__navigation",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title",featureMenuObserver:"esri-popup__feature-menu-observer",featureMenuLoader:"esri-popup__feature-menu-loader",collapseButton:"esri-popup__collapse-button"},rj={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},ij="esri-popup";function Sa(e,t){return t===void 0?`${ij}__${e}`:`${ij}__${e}-${t}`}const KJ="esri.widgets.Popup",nj=Z.getLogger(KJ),sj={closeButton:!0,featureNavigation:!0};let fe=class extends TJ(Kt){constructor(e,t){super(e,t),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new zt,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverCallback=([r])=>{r!=null&&r.isIntersecting&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=pA(()=>this._displaySpinner(),Q2e),this.actions=null,this.alignment="auto",this.autoCloseEnabled=null,this.autoOpenEnabled=null,this.defaultPopupTemplateEnabled=null,this.content=null,this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureCount=null,this.featureMenuOpen=!1,this.features=null,this.goToOverride=null,this.headingLevel=2,this.highlightEnabled=null,this.location=null,this.label=void 0,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.promises=null,this.selectedFeature=null,this.selectedFeatureIndex=null,this.spinnerEnabled=!0,this.title=null,this.updateLocationEnabled=null,this.view=null,this.viewModel=new QJ,this.visible=null,this.visibleElements={...sj},this._addSelectedFeatureIndexHandle(),this.own([G(()=>{var r;return(r=this.viewModel)==null?void 0:r.screenLocation},()=>this._positionContainer()),G(()=>{var r;return[(r=this.viewModel)==null?void 0:r.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),G(()=>{var r;return(r=this.viewModel)==null?void 0:r.screenLocation},(r,i)=>{!!r!=!!i&&this.reposition()}),G(()=>{var r,i,n,s,o,a;return[(i=(r=this.viewModel)==null?void 0:r.view)==null?void 0:i.padding,(s=(n=this.viewModel)==null?void 0:n.view)==null?void 0:s.size,(o=this.viewModel)==null?void 0:o.active,(a=this.viewModel)==null?void 0:a.location,this.alignment]},()=>this.reposition()),G(()=>this.spinnerEnabled,r=>this._spinnerEnabledChange(r)),G(()=>{var r,i;return(i=(r=this.viewModel)==null?void 0:r.view)==null?void 0:i.size},(r,i)=>this._updateDockEnabledForViewSize(r,i)),G(()=>{var r;return(r=this.viewModel)==null?void 0:r.view},(r,i)=>this._viewChange(r,i)),G(()=>{var r,i;return(i=(r=this.viewModel)==null?void 0:r.view)==null?void 0:i.ready},(r,i)=>this._viewReadyChange(r,i)),G(()=>{var r,i;return[(r=this.viewModel)==null?void 0:r.waitingForResult,(i=this.viewModel)==null?void 0:i.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),G(()=>{var r,i,n,s;return[(i=(r=this.selectedFeatureWidget)==null?void 0:r.viewModel)==null?void 0:i.title,(s=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel)==null?void 0:s.state]},()=>this._setTitleFromFeatureWidget()),G(()=>{var r,i,n,s;return[(i=(r=this.selectedFeatureWidget)==null?void 0:r.viewModel)==null?void 0:i.content,(s=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel)==null?void 0:s.state]},()=>this._setContentFromFeatureWidget()),di(()=>!this.collapsed,()=>{var r,i;((i=(r=this.viewModel)==null?void 0:r.view)==null?void 0:i.widthBreakpoint)==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),tn(()=>{var r;return(r=this.viewModel)==null?void 0:r.allActions},"change",()=>this._watchActions()),G(()=>{var r;return(r=this.viewModel)==null?void 0:r.allActions},()=>this._watchActions(),je),G(()=>{var r;return(r=this.viewModel)==null?void 0:r.featureViewModels},()=>this._featureMenuViewportScrollTop())])}destroy(){var e,t;this._destroySelectedFeatureWidget(),this._destroySpinner(),(e=this._handles)==null||e.destroy(),this._unobserveFeatureMenuObserver(),(t=this._featureMenuIntersectionObserver)==null||t.disconnect(),this._handles=null}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){var e,t,r,i,n,s,o;return!!(this.selectedFeatureWidget?((t=(e=this.selectedFeatureWidget)==null?void 0:e.viewModel)==null?void 0:t.waitingForContent)||((i=(r=this.selectedFeatureWidget)==null?void 0:r.viewModel)==null?void 0:i.state)==="error"||((s=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel)==null?void 0:s.content):(o=this.viewModel)==null?void 0:o.content)}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||rj}set dockOptions(e){const t={...rj},r=this.get("viewModel.view.breakpoints"),i={};r&&(i.width=r.xsmall,i.height=r.xsmall);const n={...t,...e},s={...t.breakpoint,...i},{breakpoint:o}=n;o===!0?n.breakpoint=s:typeof o=="object"&&(n.breakpoint={...s,...o}),this._set("dockOptions",n),this._setCurrentDockPosition(),this.reposition()}get selectedFeatureWidget(){const{_feature:e,visibleElements:t,headingLevel:r}=this,{selectedFeatureViewModel:i}=this.viewModel,n={...t,title:!1};return i?(e?(e.viewModel=i,e.visibleElements=n):this._feature=new $Se({headingLevel:r+1,viewModel:i,visibleElements:n}),this._feature):null}castVisibleElements(e){return{...sj,...e}}blur(){const{active:e}=this.viewModel;e||nj.warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,t){return this.viewModel.fetchFeatures(e,t)}focus(){const{active:e}=this.viewModel;e||nj.warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(e){var n,s;this._handles.remove(ej);const t=!!e&&!!e.featureMenuOpen,r=!!e&&!!e.actionsMenuOpen,i={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:r,featureMenuOpen:t};((s=(n=this.viewModel)==null?void 0:n.view)==null?void 0:s.widthBreakpoint)==="xsmall"&&(i.collapsed=!0),this.set(i),this.viewModel.open(e),this._shouldFocus(e),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){this.viewModel.triggerAction(e)}render(){var g,v,_,w;const{actionsMenuOpen:e,dockEnabled:t,featureMenuVisible:r,dividedActions:i,currentAlignment:n,currentDockPosition:s}=this,{active:o}=this.viewModel,{menuActions:a}=i,l=o&&a.length>1&&e,c=o&&t,h=o&&!t,f=(v=(g=this.selectedFeature)==null?void 0:g.layer)==null?void 0:v.title,m=(w=(_=this.selectedFeature)==null?void 0:_.layer)==null?void 0:w.id,y={[H.alignTopCenter]:n==="top-center",[H.alignBottomCenter]:n==="bottom-center",[H.alignTopLeft]:n==="top-left",[H.alignBottomLeft]:n==="bottom-left",[H.alignTopRight]:n==="top-right",[H.alignBottomRight]:n==="bottom-right",[H.isDocked]:c,[H.shadow]:h,[H.isDockedTopLeft]:s==="top-left",[H.isDockedTopCenter]:s==="top-center",[H.isDockedTopRight]:s==="top-right",[H.isDockedBottomLeft]:s==="bottom-left",[H.isDockedBottomCenter]:s==="bottom-center",[H.isDockedBottomRight]:s==="bottom-right",[H.isFeatureMenuOpen]:r,[H.isActionsMenuOpen]:l};return x("div",{class:this.classes(H.base,y),role:"presentation","data-layer-title":f,"data-layer-id":m,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},o?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return x("span",{"aria-hidden":"true",class:this.classes(H.icon,H.iconLoading,H.rotating)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?x("div",{key:Sa("loading-container"),role:"presentation",class:H.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=oo(this.container),t={[H.iconRightTriangleArrow]:e,[H.paginationPreviousIconRTL]:e,[H.iconLeftTriangleArrow]:!e,[H.paginationPreviousIconLTR]:!e};return x("span",{"aria-hidden":"true",class:this.classes(H.icon,t)})}renderPreviousButton(){const{messages:e}=this;return x("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(H.button,H.paginationPrevious),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=oo(this.container),t={[H.iconLeftTriangleArrow]:e,[H.paginationNextIconRTL]:e,[H.iconRightTriangleArrow]:!e,[H.paginationNextIconLTR]:!e};return x("span",{"aria-hidden":"true",class:this.classes(H.icon,t)})}renderNextButton(){const{messages:e}=this;return x("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(H.button,H.paginationNext),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:t,messagesCommon:r}=this,{featureCount:i,selectedFeatureIndex:n}=this.viewModel;return x("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(H.button,H.featureMenuButton),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":r.menu,title:r.menu},this._getPageText(i,n))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}renderDockIcon(){const{dockEnabled:e}=this,t=this._wouldDockTo(),r={[H.iconUndock]:e,[H.iconDock]:!e,[H.iconDockToRight]:!e&&(t==="top-right"||t==="bottom-right"),[H.iconDockToLeft]:!e&&(t==="top-left"||t==="bottom-left"),[H.iconDockToTop]:!e&&t==="top-center",[H.iconDockToBottom]:!e&&t==="bottom-center"};return x("span",{"aria-hidden":"true",class:this.classes(r,H.icon)})}renderDockButton(){var n,s,o;const{dockEnabled:e,messages:t}=this,r=(s=(n=this.viewModel)==null?void 0:n.view)==null?void 0:s.widthBreakpoint,i=e?t.undock:t.dock;return r!=="xsmall"&&((o=this.dockOptions)==null?void 0:o.buttonEnabled)?x("div",{role:"button","aria-label":i,title:i,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(H.button,H.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:t,collapsible:r,contentCollapsed:i,messagesCommon:n}=this,s={[H.headerContainerButton]:r},o=x(tc,{level:this.headingLevel,class:H.headerTitle,innerHTML:e}),a=r?x("button",{key:`${e}--collapsible`,id:t,title:i?n.expand:n.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(H.headerContainer,s),"aria-expanded":i?"false":"true",onclick:this._toggleCollapsed,type:"button"},o):x("div",{key:e,id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(H.headerContainer,s)},o);return e?a:null}renderCloseIcon(){return x("span",{"aria-hidden":"true",class:this.classes(H.icon,H.iconClose)})}renderCloseButton(){const{visibleElements:e,messagesCommon:t}=this;return e.closeButton?x("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:H.button,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return x("header",{class:H.header},this.renderTitle(),x("div",{class:H.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:t,contentCollapsed:r}=this,{content:i}=this.viewModel;return t&&!r?x("article",{key:i,enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:H.content},this.renderContent()):null}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:r,dividedActions:i,messagesCommon:n}=this,s=r?n.close:n.open,{menuActions:o}=i;return o.length?x("div",{key:Sa("actions-menu-button"),class:this.classes(H.button,H.actionsMenuButton),role:"button",id:t,"aria-haspopup":"true","aria-controls":r?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":s,title:s},x("span",{"aria-hidden":"true",class:H.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:r,dividedActions:i}=this,{menuActions:n}=i;return n.length&&r?x("ul",{id:e,role:"menu","aria-labelledby":t,key:Sa("actions"),class:H.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},n.toArray().map(s=>this.renderAction({action:s,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return!!e.length&&e.toArray().map(t=>this.renderAction({action:t,type:"inline"}))}renderInlineActionsContainer(){const{inlineActions:e,menuActions:t}=this.dividedActions,r=!!e.length,i=!!t.length;return r||i?x("div",{key:"inline-actions-container","data-inline-actions":r.toString(),"data-menu-actions":i.toString(),class:H.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?x("section",{key:Sa("navigation"),class:this.classes(H.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:t}=this,{inlineActions:r,menuActions:i}=t,n=!!r.length,s=!!i.length,o={[H.footerHasPagination]:e,[H.footerHasActions]:n,[H.footerHasActionsMenu]:s};return e||n?x("div",{key:Sa("feature-buttons"),class:this.classes(H.footer,o)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:t,isLoadingFeature:r}=this.viewModel,i=is(e.selectedFeatures,{total:t.length});return x("section",{key:Sa("menu"),class:H.featureMenu},x("strong",{class:H.featureMenuHeader},i),x("nav",{bind:this,class:H.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:vC},this.renderFeatureMenu(),x("div",{class:H.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),r?x("div",{class:H.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:x("div",{key:Sa("pointer"),class:H.pointer,role:"presentation"},x("div",{class:this.classes(H.pointerDirection,H.shadow)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:t,currentDockPosition:r,titleId:i,contentId:n,collapsible:s,hasContent:o,contentCollapsed:a,visibleElements:l}=this,{title:c}=this.viewModel,h=t==="bottom-left"||t==="bottom-center"||t==="bottom-right"||r==="top-left"||r==="top-center"||r==="top-right",f=t==="top-left"||t==="top-center"||t==="top-right"||r==="bottom-left"||r==="bottom-center"||r==="bottom-right",m={[H.shadow]:e,[H.isCollapsible]:s,[H.isCollapsed]:a};return x("div",{class:this.classes(H.main,H.widget,m),tabIndex:l.closeButton?null:-1,role:"dialog","aria-labelledby":c?i:"","aria-describedby":o&&!a?n:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},h?this.renderFooter():null,h?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),f?this.renderFooter():null,f?this.renderFeatureMenuContainer():null)}renderContent(){var t;const e=(t=this.viewModel)==null?void 0:t.content;return e?typeof e=="string"?x("div",{key:e,innerHTML:e}):this.renderNodeContent(e):null}renderActionText(e){return x("span",{key:"text",class:H.actionText},e)}renderActionIcon(e){const t=this._getActionClass(e),r=this._getActionImage(e),i={[H.iconLoading]:e.active,[H.rotating]:e.active,[H.icon]:!!t,[H.actionImage]:!e.active&&!!r};return t&&(i[t]=!e.active),x("span",{key:"icon","aria-hidden":"true",class:this.classes(H.icon,i),styles:this._getIconStyles(r)})}renderAction(e){const{action:t,type:r}=e,i=this._getActionTitle(t),n={[H.action]:t.type!=="toggle",[H.actionToggle]:t.type==="toggle",[H.actionToggleOn]:t.type==="toggle"&&t.value,[H.buttonDisabled]:t.disabled},s=[this.renderActionIcon(t),this.renderActionText(i)],o=r==="menu-item"?x("li",{key:t.uid,role:"menuitem",tabIndex:0,title:i,"aria-label":i,class:this.classes(H.button,n),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},s):x("div",{key:t.uid,role:"button",tabIndex:0,title:i,"aria-label":i,class:this.classes(H.button,n),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},s);return t.visible?o:null}renderFeatureMenuItem(e,t){const{messages:r,messagesCommon:i}=this,{selectedFeatureIndex:n,selectedFeatureViewModel:s}=this.viewModel,o=e===s,a={[H.featureMenuSelected]:o},l=o?x("span",{key:Sa(`feature-menu-selected-feature-${n}`),title:r.selectedFeature,"aria-label":r.selectedFeature,class:H.iconCheckMark}):null,c=x("span",{innerHTML:e.title||i.untitled});return x("li",{role:"menuitem",tabIndex:-1,key:Sa(`feature-menu-feature-${n}`),class:this.classes(a,H.featureMenuItem),bind:this,"data-feature-index":t,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},x("span",{class:H.featureMenuTitle},c,l))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:t}=this.viewModel;return t.length>1?x("ol",{class:H.featureMenuList,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},t.filter(r=>!!r.graphic).map((r,i)=>this.renderFeatureMenuItem(r,i))):null}_getActionTitle(e){const{messages:t,selectedFeature:r,messagesCommon:i}=this,{id:n}=e,s=r==null?void 0:r.attributes,o=n==="zoom-to-feature"?is(e.title,{messages:t}):n==="remove-selected-feature"?is(e.title,{messages:i}):n==="zoom-to-clustered-features"||n==="browse-clustered-features"?is(e.title,{messages:t}):e.title;return o&&s?is(o,s):o}_getActionClass(e){const{selectedFeature:t}=this,r=t==null?void 0:t.attributes,{className:i,image:n}=e,s=n||i?i:H.iconDefaultAction;return s&&r?is(s,r):s}_getActionImage(e){const{selectedFeature:t}=this,r=t==null?void 0:t.attributes,{image:i}=e;return i&&r?is(i,r):i}_createFeatureUpdatedAnimation(){return Jhe("enter",H.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:t}=this;if(typeof e!="number")return null;const r=Math.round(e);return Math.max(t?r-1:r,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const t="actions";this._handles.remove(t),e&&e.forEach(r=>{this._handles.add(G(()=>[r.uid,r.active,r.className,r.disabled,r.id,r.title,r.image,r.visible],()=>this.scheduleRender()),t)})}_divideActions(){const{allActions:e}=this.viewModel,t=e.filter(s=>s.visible),r=this._getInlineActionCount(),i=r===null,n=r===0;return{inlineActions:i?t.slice(0):n?new de:t.slice(0,r),menuActions:i?new de:n?t.slice(0):t.slice(r)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){var r,i;const{selectedFeatureWidget:e,messagesCommon:t}=this;e&&(this.viewModel.title=((r=e.viewModel)==null?void 0:r.state)==="error"?t.errorMessage:((i=e.viewModel)==null?void 0:i.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_handleFeatureMenuKeyup(e){vd(e)==="Escape"&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(e){vd(e)==="Escape"&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(e){const{viewModel:t}=this,r=e.currentTarget["data-feature-index"];t.activeFeature=t.features[r]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(e){const t=vd(e),{_featureMenuNode:r}=this,i=e.currentTarget["data-feature-index"];if(!r)return;const n=r.querySelectorAll("li"),s=n.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),n[n.length-1].focus()):(e.stopPropagation(),n[0].focus()):(e.stopPropagation(),n[(i+1+s)%s].focus()):(e.stopPropagation(),n[(i-1+s)%s].focus())}_handleActionMenuItemKeyup(e){const t=vd(e),{_actionsMenuNode:r}=this,i=e.currentTarget.dataset.actionUid,{menuActions:n}=this.dividedActions,s=n.findIndex(l=>l.uid===i);if(!r)return;const o=r.querySelectorAll("li"),a=o.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),o[o.length-1].focus()):(e.stopPropagation(),o[0].focus()):(e.stopPropagation(),o[(s+1+a)%a].focus()):(e.stopPropagation(),o[(s-1+a)%a].focus())}_handleMainKeyup(e){const t=vd(e);t==="ArrowLeft"&&(e.stopPropagation(),this.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.next())}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const t=this.get("viewModel.view");this._createSpinner(t)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:t,waitingForResult:r}=this.viewModel;r?e.show({location:t}):e.hide()}_getIconStyles(e){return{"background-image":e?`url(${e})`:""}}async _shouldFocus(e){e.shouldFocus&&(await Ev(()=>{var t;return((t=this.viewModel)==null?void 0:t.active)===!0}),this.focus())}_addSelectedFeatureIndexHandle(){const e=G(()=>{var t;return(t=this.viewModel)==null?void 0:t.selectedFeatureIndex},(t,r)=>this._selectedFeatureIndexUpdated(t,r));this._handles.add(e,ej)}_selectedFeatureIndexUpdated(e,t){const{featureCount:r}=this;r&&e!==t&&e!==-1&&(this.actionsMenuOpen=!1,this.featureMenuOpen=!1)}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}_isScreenLocationWithinView(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}_isOutsideView(e){const{popupHeight:t,popupWidth:r,screenLocation:i,side:n,view:s}=e;if(isNaN(r)||isNaN(t)||!s||!i)return!1;const o=s.padding;return n==="right"&&i.x+r/2>s.width-o.right||n==="left"&&i.x-r/2<o.left||n==="top"&&i.y-t<o.top||n==="bottom"&&i.y+t>s.height-o.bottom}_calculateAutoAlignment(e){if(e!=="auto")return e;const{_pointerOffsetInPx:t,_containerNode:r,_mainContainerNode:i,viewModel:n}=this,{screenLocation:s,view:o}=n;if(R(s)||!o||!r)return"top-center";if(!this._isScreenLocationWithinView(s,o))return this._get("currentAlignment")||"top-center";function a(S){return parseInt(S.replace(/[^-\d\.]/g,""),10)}const l=i?window.getComputedStyle(i,null):null,c=l?a(l.getPropertyValue("max-height")):0,h=l?a(l.getPropertyValue("height")):0,{height:f,width:m}=r.getBoundingClientRect(),y=m+t,g=Math.max(f,c,h)+t,v=this._isOutsideView({popupHeight:g,popupWidth:y,screenLocation:s,side:"right",view:o}),_=this._isOutsideView({popupHeight:g,popupWidth:y,screenLocation:s,side:"left",view:o}),w=this._isOutsideView({popupHeight:g,popupWidth:y,screenLocation:s,side:"top",view:o}),b=this._isOutsideView({popupHeight:g,popupWidth:y,screenLocation:s,side:"bottom",view:o});return _?w?"bottom-right":"top-right":v?w?"bottom-left":"top-left":w?b?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return typeof e=="function"?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:t}=this;return t||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const t=["left","right"];return oo(this.container)&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])}_callDockPosition(e){return typeof e=="function"?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((e=this.dockOptions)==null?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){var o;if(e!=="auto")return e;const t=(o=this.viewModel)==null?void 0:o.view,r=oo(this.container)?"top-left":"top-right";if(!t)return r;const i=t.padding||{left:0,right:0,top:0,bottom:0},n=t.width-i.left-i.right,{breakpoints:s}=t;return s&&n<=s.xsmall?"bottom-center":r}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!e)return;const{screenLocation:t}=this.viewModel,{width:r}=e.getBoundingClientRect(),i=this._calculatePositionStyle(t,r);i&&(e.style.top=i.top,e.style.left=i.left,e.style.bottom=i.bottom,e.style.right=i.right)}_calculateFullWidth(e){const{currentAlignment:t,_pointerOffsetInPx:r}=this;return t==="top-left"||t==="bottom-left"||t==="top-right"||t==="bottom-right"?e+r:e}_calculateAlignmentPosition(e,t,r,i){const{currentAlignment:n,_pointerOffsetInPx:s}=this,o=i/2,a=r.height-t,l=r.width-e,{padding:c}=this.view;return n==="bottom-center"?{top:t+s-c.top,left:e-o-c.left}:n==="top-left"?{bottom:a+s-c.bottom,right:l+s-c.right}:n==="bottom-left"?{top:t+s-c.top,right:l+s-c.right}:n==="top-right"?{bottom:a+s-c.bottom,left:e+s-c.left}:n==="bottom-right"?{top:t+s-c.top,left:e+s-c.left}:n==="top-center"?{bottom:a+s-c.bottom,left:e-o-c.left}:void 0}_calculatePositionStyle(e,t){const{dockEnabled:r,view:i}=this;if(!i)return;if(r)return{left:"",top:"",right:"",bottom:""};if(R(e)||!t)return;const n=this._calculateFullWidth(t),s=this._calculateAlignmentPosition(e.x,e.y,i,n);return s?{top:s.top!==void 0?`${s.top}px`:"auto",left:s.left!==void 0?`${s.left}px`:"auto",bottom:s.bottom!==void 0?`${s.bottom}px`:"auto",right:s.right!==void 0?`${s.right}px`:"auto"}:void 0}_viewChange(e,t){e&&t&&(this.close(),this.clear())}_viewReadyChange(e,t){if(e){const r=this.get("viewModel.view");this._wireUpView(r)}else t&&(this.close(),this.clear())}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:t}=this;t&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,t,r){const[i,n]=e,[s,o]=t,{width:a,height:l}=r;return i<=a&&s>a||i>a&&s<=a||n<=l&&o>l||n>l&&o<=l}_updateDockEnabledForViewSize(e,t){if(!e||!t)return;const r=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},i=r.left+r.right,n=r.top+r.bottom,s=[],o=[];s[0]=e[0]-i,s[1]=e[1]-n,o[0]=t[0]-i,o[1]=t[1]-n;const{dockOptions:a}=this,l=a.breakpoint;this._dockingThresholdCrossed(s,o,l)&&this._setDockEnabledForViewSize(a),this._setCurrentDockPosition()}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:t}=this;if(!t)return;const r=t.active&&!e;t.screenLocationEnabled=r}_shouldDockAtCurrentViewSize(e){var a,l;const t=e.breakpoint,r=(l=(a=this.viewModel)==null?void 0:a.view)==null?void 0:l.ui;if(!r)return!1;const{width:i,height:n}=r;if(isNaN(i)||isNaN(n))return!1;const s=t.hasOwnProperty("width")&&i<=t.width,o=t.hasOwnProperty("height")&&n<=t.height;return s||o}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}_getPageText(e,t){return this.featureNavigationVisible?is(this.messages.pageText,{index:t+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:t}=this;e&&(t&&t.ui&&t.ui.remove(this._spinner,tj),e.destroy(),this._spinner=null)}_createSpinner(e){e&&(this._spinner=new ESe({view:e}),e.ui.add(this._spinner,{key:tj,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}_triggerAction(e){const t=e.currentTarget.dataset.actionUid,{allActions:r}=this.viewModel,i=r.findIndex(s=>s.uid===t),n=r.getItemAt(i);n&&n.type==="toggle"&&(n.value=!n.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(i)}_selectFeature(e){const t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};u([d({readOnly:!0})],fe.prototype,"actionsMenuId",null),u([d({readOnly:!0})],fe.prototype,"actionsMenuButtonId",null),u([d({readOnly:!0})],fe.prototype,"featureMenuId",null),u([d({readOnly:!0})],fe.prototype,"titleId",null),u([d({readOnly:!0})],fe.prototype,"contentId",null),u([d({readOnly:!0})],fe.prototype,"hasContent",null),u([d({readOnly:!0})],fe.prototype,"featureNavigationVisible",null),u([d({readOnly:!0})],fe.prototype,"collapsible",null),u([d({readOnly:!0})],fe.prototype,"featureMenuVisible",null),u([d({readOnly:!0})],fe.prototype,"contentCollapsed",null),u([d({readOnly:!0})],fe.prototype,"dividedActions",null),u([X("viewModel.actions")],fe.prototype,"actions",void 0),u([d()],fe.prototype,"actionsMenuOpen",null),u([d()],fe.prototype,"alignment",void 0),u([X("viewModel.autoCloseEnabled")],fe.prototype,"autoCloseEnabled",void 0),u([X("viewModel.autoOpenEnabled")],fe.prototype,"autoOpenEnabled",void 0),u([X("viewModel.defaultPopupTemplateEnabled")],fe.prototype,"defaultPopupTemplateEnabled",void 0),u([X("viewModel.content")],fe.prototype,"content",void 0),u([d()],fe.prototype,"collapsed",void 0),u([d()],fe.prototype,"collapseEnabled",void 0),u([d({readOnly:!0})],fe.prototype,"currentAlignment",null),u([d({readOnly:!0})],fe.prototype,"currentDockPosition",null),u([d()],fe.prototype,"dockOptions",null),u([d()],fe.prototype,"dockEnabled",void 0),u([X("viewModel.featureCount")],fe.prototype,"featureCount",void 0),u([d()],fe.prototype,"featureMenuOpen",void 0),u([X("viewModel.features")],fe.prototype,"features",void 0),u([X("viewModel.goToOverride")],fe.prototype,"goToOverride",void 0),u([d()],fe.prototype,"headingLevel",void 0),u([X("viewModel.highlightEnabled")],fe.prototype,"highlightEnabled",void 0),u([X("viewModel.location")],fe.prototype,"location",void 0),u([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],fe.prototype,"label",void 0),u([d()],fe.prototype,"maxInlineActions",void 0),u([d(),Et("esri/widgets/Popup/t9n/Popup")],fe.prototype,"messages",void 0),u([d(),Et("esri/t9n/common")],fe.prototype,"messagesCommon",void 0),u([X("viewModel.promises")],fe.prototype,"promises",void 0),u([X("viewModel.selectedFeature")],fe.prototype,"selectedFeature",void 0),u([X("viewModel.selectedFeatureIndex")],fe.prototype,"selectedFeatureIndex",void 0),u([d({readOnly:!0})],fe.prototype,"selectedFeatureWidget",null),u([d()],fe.prototype,"spinnerEnabled",void 0),u([X("viewModel.title")],fe.prototype,"title",void 0),u([X("viewModel.updateLocationEnabled")],fe.prototype,"updateLocationEnabled",void 0),u([X("viewModel.view")],fe.prototype,"view",void 0),u([d({type:QJ}),xA(["triggerAction","trigger-action"])],fe.prototype,"viewModel",void 0),u([X("viewModel.visible")],fe.prototype,"visible",void 0),u([d()],fe.prototype,"visibleElements",void 0),u([ze("visibleElements")],fe.prototype,"castVisibleElements",null),u([Gr()],fe.prototype,"_close",null),u([Gr()],fe.prototype,"_toggleDockEnabled",null),u([Gr()],fe.prototype,"_toggleFeatureMenu",null),u([Gr()],fe.prototype,"_toggleActionsMenu",null),u([Gr()],fe.prototype,"_triggerAction",null),u([Gr()],fe.prototype,"_selectFeature",null),u([Gr()],fe.prototype,"_next",null),u([Gr()],fe.prototype,"_previous",null),fe=u([E(KJ)],fe);const oj=fe,NE=[0,0];function K2e(e){const t=(e.ownerDocument||window.document).defaultView,r=e.getBoundingClientRect();return NE[0]=r.left+t.pageXOffset,NE[1]=r.top+t.pageYOffset,NE}function aj(e){e&&(NG(e),e.parentNode&&e.parentNode.removeChild(e))}function X2e(e){const t=document.createElement("div");return e.appendChild(t),t}const by=16,hw=750,e$e=512,t$e=2,r$e=e=>{let t=class extends e{constructor(...r){super(...r),this._freqInfo={freq:by,time:hw},this._overlayRenderTaskHandle=null,this.height=0,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.handles.add([G(()=>this.cursor,i=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",i)}),G(()=>this.interacting,i=>{const{surface:n}=this;n&&n.setAttribute("data-interacting",i.toString())})])}initialize(){this.handles.add(G(()=>this.ui,(r,i)=>this._handleUIChange(r,i))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}set container(r){const i=this._get("container");if(i===r)return;const n="dom-size";if(this.handles.remove(n),this._stopMeasuring(),i&&(i.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),aj(this.root),this._set("root",null),a5(this.userContent,i),aj(this.userContent),this._set("userContent",null)),r){r.classList.add("esri-view");const s=document.createElement("div");s.className="esri-view-user-storage",a5(r,s),r.appendChild(s),this._set("userContent",s);const o=document.createElement("div");o.className="esri-view-root",r.insertBefore(o,r.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const l=new g5;o.appendChild(l.surface),this._set("overlay",l),G(()=>l.needsRender,c=>{c&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=zf({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)}),this.forceDOMReadyCycle(),this.handles.add(G(()=>this.size,c=>{const[h,f]=c,m="esri-view-surface--inset-outline";h>=document.body.clientWidth||f>=document.body.clientHeight?a.classList.add(m):a.classList.remove(m)},je),n),this._set("container",r),this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get popup(){return this._get("popup")||new oj({view:this})}set popup(r){const i=this._get("popup");i&&i!==r&&i.destroy(),this._set("popup",r)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(r,i,n){const s=this.position;return r-=s[0],i-=s[1],n?(n[0]=r,n[1]=i):n=[r,i],n}containerToPage(r,i,n){const s=this.position;return r+=s[0],i+=s[1],n?(n[0]=r,n[1]=i):n=[r,i],n}_handleUIChange(r,i){i&&(this.handles.remove("ui"),i.destroy()),r&&this._wireUI(r),this._set("ui",r)}_wireUI(r){this.handles.remove("ui"),r&&(r.view=this,this.handles.add([G(()=>this.root,i=>{r.container=i?X2e(i):null},je),G(()=>this.popup,(i,n)=>{const s="popup",o="manual";n&&r.remove(n,s),i&&(i.view=r.view,r.add(i,{key:s,position:o}))},je)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=by,r.time=hw,this.handles.add([(()=>{const i=()=>{r.freq=by,r.time=hw};return window.addEventListener("resize",i),{remove(){window.removeEventListener("resize",i)}}})(),zf({prepare:i=>{const n=this._measure(),s=this._freqInfo;if(s.time+=i.deltaTime,n&&(s.freq=by,this._get("resizing")||this._set("resizing",!0)),s.time<s.freq)return;s.time=0;const o=this._position();s.freq=o||n?by:Math.min(hw,s.freq*t$e),!n&&s.freq>=e$e&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,i=r?r.clientWidth:0,n=r?r.clientHeight:0;if(i===0||n===0)return this.suspended||this._set("suspended",!0),!1;const s=this.width,o=this.height;return i===s&&n===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",i),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:s,oldHeight:o,width:i,height:n}),!0)}_position(){const r=this.container,i=this.position,n=K2e(r);return(!i||n[0]!==i[0]||n[1]!==i[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return u([d({value:null,cast:r=>uA(r)})],t.prototype,"container",null),u([d({readOnly:!0})],t.prototype,"focused",null),u([d({readOnly:!0})],t.prototype,"height",void 0),u([d({type:oj})],t.prototype,"popup",null),u([d({type:g5})],t.prototype,"overlay",void 0),u([d({readOnly:!0})],t.prototype,"position",void 0),u([d({readOnly:!0})],t.prototype,"resizing",void 0),u([d({readOnly:!0})],t.prototype,"root",void 0),u([d({value:null,readOnly:!0})],t.prototype,"size",null),u([d({readOnly:!0})],t.prototype,"surface",void 0),u([d({readOnly:!0})],t.prototype,"suspended",void 0),u([d()],t.prototype,"ui",void 0),u([d({readOnly:!0})],t.prototype,"userContent",void 0),u([d({readOnly:!0})],t.prototype,"width",void 0),u([d()],t.prototype,"widthBreakpoint",void 0),t=u([E("esri.views.DOMContainer")],t),t},i$e=e=>{let t=class extends e{async fetchPopupFeatures(r,i){await this.when();const{location:n,queryArea:s,layerViewsAndGraphics:o,clientOnlyGraphics:a}=await this._prepareFetchPopupFeatures(r,i),l=Promise.resolve(a),c=this._queryLayerPopupFeatures(s,o,i),h=c.map(f=>f.promise);return{location:n,clientOnlyGraphics:a,allGraphicsPromise:hre([l,...h]).then(f=>Array.from(new Set(f.flat()))),promisesPerLayerView:c}}_queryLayerPopupFeatures(r,i,n){return i.map(({layerView:s,graphics:o})=>{const a={clientGraphics:o,event:I(n)?n.event:null,signal:I(n)?n.signal:null,defaultPopupTemplateEnabled:!!I(n)&&!!n.defaultPopupTemplateEnabled},l=s.fetchPopupFeatures(r,a);return{layerView:s,promise:l}})}_isValidPopupGraphic(r,i){return r&&!!r.getEffectivePopupTemplate(I(i)&&i.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(r,i){const{clientGraphics:n,queryArea:s,location:o}=await this._popupHitTestGraphics(r,i),a=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:l,clientOnlyGraphics:c}=this._graphicsPerFetchPopupLayerView(n,a);return{clientOnlyGraphics:c,layerViewsAndGraphics:l,queryArea:s,location:o}}async _popupHitTestGraphics(r,i){const{results:n,mapPoint:s}=await this.popupHitTest(r),o=n.filter(l=>l.type==="graphic"&&this._isValidPopupGraphic(l.graphic,i)),a=o.length?o[0].mapPoint:null;return{clientGraphics:o.map(l=>l.graphic),queryArea:s,location:s||a}}_getFetchPopupLayerViews(){const r=[];return this.allLayerViews.forEach(i=>{this._isValidPopupLayerView(i)&&r.push(i)}),I(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&r.push(this.graphicsView),r.reverse()}_isValidPopupLayerView(r){return I(r)&&(!("layer"in r)||!r.suspended)&&"fetchPopupFeatures"in r}_graphicsPerFetchPopupLayerView(r,i){const n=[],s=new Map,o=i.map(a=>{const l=[];return"layer"in a?s.set(a.layer,l):s.set(a.graphics,l),{layerView:a,graphics:l}});for(const a of r){const l=s.get(a.layer)||s.get(a.sourceLayer)||null;l?l.push(a):n.push(a)}return{layerViewsAndGraphics:o,clientOnlyGraphics:n}}};return t=u([E("esri.views.PopupView")],t),t};Z.getLogger("esri.core.support.OwningCollection");let c0=class extends ca(de){constructor(e){super(e),this.handles.add([this.on("before-add",t=>{R(t.item)&&t.preventDefault()}),this.on("after-add",t=>this._own(t.item)),this.on("after-remove",t=>this._release(t.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(de.ofType(this.itemType.Type))(e):new de(e)}};function lj(e,t){return{type:e,cast:R9,set(r){const i=ch(r,this._get(t),e);i.owner=this,this._set(t,i)}}}u([d()],c0.prototype,"owner",null),c0=u([E("esri.core.support.OwningCollection")],c0);const n$e=Z.getLogger("esri.support.AnalysesCollection");let WS=class extends c0{constructor(e){super(e),this.handles.add(this.on("before-add",t=>{R(t.item)||t.item.parent===this.owner&&(n$e.warn("Analysis inside the collection must be unique. Not adding this element again."),t.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};WS=u([E("esri.support.AnalysesCollection")],WS);let d0=class extends c0{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};u([t3({Type:ln,ensureType:dt(ln)})],d0.prototype,"itemType",void 0),d0=u([E("esri.support.GraphicsCollection")],d0);let fu=class extends le{constructor(e){super(e),this.view=null,this.baseLayerViews=new de,this.referenceLayerViews=new de,this._loadingHandle=G(()=>{var t,r;return(r=(t=this.view)==null?void 0:t.map)==null?void 0:r.basemap},t=>{t&&t.load().catch(()=>{})},je)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){var t,r;if(this.view&&this.view.suspended)return!1;const e=(r=(t=this.view)==null?void 0:t.map)==null?void 0:r.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(i=>i.updating)||this.referenceLayerViews.some(i=>i.updating))}};u([d({constructOnly:!0})],fu.prototype,"view",void 0),u([d({readOnly:!0})],fu.prototype,"baseLayerViews",void 0),u([d({readOnly:!0})],fu.prototype,"referenceLayerViews",void 0),u([d({readOnly:!0})],fu.prototype,"suspended",null),u([d({type:Boolean,readOnly:!0})],fu.prototype,"updating",null),fu=u([E("esri.views.BasemapView")],fu);const s$e=Z.getLogger("esri.views.LayerViewManager");class o$e{constructor(t,r,i){this.layer=t,this.view=r,this.layerViewImporter=i,this._controller=new AbortController,this._deferred=gl(),this._started=!1,this.done=!1,vs(this._controller.signal,()=>{const n=new O("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(n)})}get promise(){return this._deferred.promise}destroy(){this._controller.abort();const{layerView:t}=this;if(!t)return;const{layer:r,view:i}=this;r.emit("layerview-destroy",{view:i,layerView:t}),i.emit("layerview-destroy",{layer:r,layerView:t}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){var n,s;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:r,view:i}=this;this._map=i.map;try{let o,a;if(await r.load({signal:t}),"prefetchResources"in r&&await r.prefetchResources({signal:t}),r.createLayerView)o=await r.createLayerView(i,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new O("layer:view-not-supported","No layerview implementation was found");const h=await this.layerViewImporter.importLayerView(r);yt(t),o="default"in h?new h.default({layer:r,view:i}):new h({layer:r,view:i})}const l=()=>{a=en(a),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};a=vs(t,l),yt(t);try{await o.when()}catch(h){throw l(),h}if(!((s=(n=this._map)==null?void 0:n.allLayers)==null?void 0:s.includes(r)))return l(),void this._deferred.reject(new O("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=o,r.emit("layerview-create",{view:i,layerView:o}),i.emit("layerview-create",{layer:r,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(o){r.emit("layerview-create-error",{view:i,error:o}),i.emit("layerview-create-error",{layer:r,error:o}),this.done=!0,this._deferred.reject(new O("layerview:create-error","layerview creation failed",{layer:r,error:o}))}}}let es=class extends D0{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._watchUpdatingTracking=new $f,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var r;const t=(r=this.view.map)==null?void 0:r.allLayers;if(t)for(const i of t)this.layerViewImporter.hasLayerViewModule(i)&&this.layerViewImporter.importLayerView(i)},this._reschedule=()=>(R(this._workPromise)&&(this._workPromise=gl()),this.handles.remove("reschedule"),this.handles.add(pm(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var s,o,a;const t=this.view.map;if(this._map!==t&&(this.clear(),this._map=t),R(this._workPromise))return void this.notifyChange("updating");this.handles.remove("reschedule"),this.handles.remove("collection-change");const r=new Bf({getCollections:()=>this._rootCollectionNames.map(l=>this.get(l)),getChildrenFunction:l=>l&&"layers"in l?l.layers:null});if(!r)return this._workPromise.resolve(),void(this._workPromise=null);for(const l of r)this._createLayerView(l);this._refreshCollections();for(const[l,c]of this._layerLayerViewInfoMap)r.includes(l)||(this._layerLayerViewInfoMap.delete(c.layer),c.destroy());const i=r.filter(l=>l.type==="group").map(l=>l.layers),n=[(s=t==null?void 0:t.ground)==null?void 0:s.layers,(o=t==null?void 0:t.basemap)==null?void 0:o.baseLayers,(a=t==null?void 0:t.basemap)==null?void 0:a.referenceLayers,t==null?void 0:t.layers,...i].filter(l=>!!l);this.handles.add(n.map(l=>this._watchUpdatingTracking.addOnCollectionChange(()=>l,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.handles.add([tn(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.map)==null?void 0:t.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),G(()=>{const e=this.view,t=e==null?void 0:e.map;return[t==null?void 0:t.basemap,t==null?void 0:t.ground,t==null?void 0:t.layers,e==null?void 0:e.ready]},()=>this._reschedule(),Fc)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return I(this._workPromise)||this._watchUpdatingTracking.updating||L2(this._layerLayerViewInfoMap,e=>!e.done)}get updatingRemaining(){let e=0;for(const t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){if(!this.destroyed){for(const e of this._layerLayerViewInfoMap.values())e.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e))throw new O("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,r){if(!e||!t)return void(t&&t.removeAll());let i=0;for(const n of e){const s=this._layerLayerViewInfoMap.get(n);if(!s||!s.layerView)continue;const o=s.layerView;o.layer=n,o.parent=r,t.getItemAt(i)!==o&&t.splice(i,0,o),n.layers&&this._populateLayerViewsOwners(n.layers,o.layerViews,o),i+=1}i<t.length&&t.splice(i,t.length)}_createLayerView(e){if(this._layerLayerViewInfoMap.has(e))return this.view.ready&&this._layerLayerViewInfoMap.get(e).start(),this.notifyChange("updating"),void this.notifyChange("updatingRemaining");e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const t=new o$e(e,this.view,this.layerViewImporter);t.promise.then(()=>this._refreshCollections(),r=>{var i,n;r&&(ui(r)||r.name==="cancelled:layerview-create")||s$e.error(`Failed to create layerview for layer title:'${(i=e.title)!=null?i:"no title"}', id:'${(n=e.id)!=null?n:"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};u([d()],es.prototype,"_workPromise",void 0),u([d({readOnly:!0})],es.prototype,"_watchUpdatingTracking",void 0),u([d({readOnly:!0})],es.prototype,"_layersToLayerViews",null),u([d({readOnly:!0})],es.prototype,"_rootCollectionNames",null),u([d()],es.prototype,"layerViewImporter",void 0),u([d()],es.prototype,"supportsGround",void 0),u([d({readOnly:!0})],es.prototype,"updating",null),u([d({readOnly:!0})],es.prototype,"updatingRemaining",null),u([d({constructOnly:!0})],es.prototype,"view",void 0),es=u([E("esri.views.LayerViewManager")],es);const a$e=es;let Sn=class extends le{constructor(e){super(e),this.factor=1.5,this.offset=Zi(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};u([d({type:Number})],Sn.prototype,"factor",void 0),u([d({nonNullable:!0})],Sn.prototype,"offset",void 0),u([d()],Sn.prototype,"position",void 0),u([d({type:Number,range:{min:0}})],Sn.prototype,"size",void 0),u([d()],Sn.prototype,"maskUrl",void 0),u([d()],Sn.prototype,"maskEnabled",void 0),u([d()],Sn.prototype,"overlayUrl",void 0),u([d()],Sn.prototype,"overlayEnabled",void 0),u([d({readOnly:!0})],Sn.prototype,"version",null),u([d({type:Boolean})],Sn.prototype,"visible",void 0),Sn=u([E("esri.views.Magnifier")],Sn);const XJ=Sn;let H_=class extends le{constructor(){super(...arguments),this._tasks=new Array,this.running=!1}get length(){return this._tasks.length}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,t,r){return this.running=!0,new Promise((i,n)=>this._tasks.push(new uj(i,n,e,t,r)))}unshift(e,t,r){return this.running=!0,new Promise((i,n)=>this._tasks.unshift(new uj(i,n,e,t,r)))}_process(e){if(this._tasks.length===0)return!1;const t=this._tasks.shift();try{const r=go(t.signal);if(r&&!t.abortCallback)t.reject(Ot());else{const i=r?t.abortCallback(Ot()):t.callback(e);xl(i)?i.then(t.resolve,t.reject):t.resolve(i)}}catch(r){t.reject(r)}return this.running=this._tasks.length>0,!0}cancelAll(){const e=Ot();for(const t of this._tasks)if(t.abortCallback){const r=t.abortCallback(e);t.resolve(r)}else t.reject(e);this._tasks.length=0,this.running=!1}};u([d()],H_.prototype,"running",void 0),H_=u([E("esri.layers.support.PromiseQueue")],H_);class uj{constructor(t,r,i,n,s){this.resolve=t,this.reject=r,this.callback=i,this.signal=n,this.abortCallback=s}}let xg=class extends le{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};u([d()],xg.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),u([d()],xg.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),xg=u([E("esri.views.support.DebugFlags")],xg);const l$e=new xg,u$e=Z.getLogger("esri.views.support.Scheduler");var Fe;(function(e){e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="cloud generator",e[e.TEST_PRIO=1]="TEST_PRIO"})(Fe||(Fe={}));const Wo=0,cj=new Map([[Fe.RESOURCE_CONTROLLER,Wo],[Fe.SLIDE,Wo],[Fe.STREAM_DATA_LOADER,Wo],[Fe.ELEVATION_QUERY,Wo],[Fe.TERRAIN_SURFACE,1],[Fe.SURFACE_GEOMETRY_UPDATES,1],[Fe.GRAPHICS_CORE,2],[Fe.I3S_CONTROLLER,2],[Fe.POINT_CLOUD_LAYER,2],[Fe.FEATURE_TILE_FETCHER,2],[Fe.OVERLAY,4],[Fe.STAGE,4],[Fe.GRAPHICS_DECONFLICTOR,4],[Fe.FILTER_VISIBILITY,4],[Fe.SCALE_VISIBILITY,4],[Fe.FRUSTUM_VISIBILITY,4],[Fe.POINT_OF_INTEREST_FREQUENT,6],[Fe.POINT_OF_INTEREST_INFREQUENT,30],[Fe.LABELER,8],[Fe.FEATURE_QUERY_ENGINE,8],[Fe.FEATURE_TILE_TREE,16],[Fe.FEATURE_TILE_TREE_ACTIVE,Wo],[Fe.ELEVATION_ALIGNMENT,12],[Fe.TEXT_TEXTURE_ATLAS,12],[Fe.CLOUDS_GENERATOR,12],[Fe.TEXTURE_UNLOAD,12],[Fe.LINE_OF_SIGHT_TOOL,16],[Fe.LINE_OF_SIGHT_TOOL_INTERACTIVE,Wo],[Fe.SNAPPING,Wo],[Fe.SHADOW_ACCUMULATOR,30]]);function dj(e){return cj.has(e)?cj.get(e):typeof e=="number"?e:1}var En;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(En||(En={}));const hj=6.5,pj=1,c$e=30,fj=1e3/30,mj=100,yj=.9;var bL,Ec;(function(e){let t=class extends le{constructor(){super(),this.updating=!0,this._microTaskQueued=!1,this.performanceInfo={total:new zg("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new i,this._state=En.INTERACTING,this._tasks=new Yd,this._runQueue=new Yd,this._load=0,this._idleStateCallbacks=new Yd,this._idleUpdatesStartFired=!1,this._maxReschedule=pw,this._forceTask=!1,this._debug=!1,this._debugHandle=G(()=>l$e.SCHEDULER_LOG_SLOW_TASKS,o=>this._debug=o,je);for(const o of Object.keys(Fe))this.performanceInfo.tasks.set(Fe[o],new zg(Fe[o]));let n;const s=this;this._test={get state(){return S2(n,s._state)},set state(o){n=o},FRAME_SAFETY_BUDGET:hj,INTERACTING_BUDGET:fj,IDLE_BUDGET:mj,get availableBudget(){return s._budget.budget},usedBudget:0,getBudget:()=>s._budget,setBudget:o=>s._budget=o,updateTask:o=>this._updateTask(o),getState:o=>this._getState(o),getRuntime:o=>this._getRuntime(o),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(n=>n.remove()),this._tasks.clear(),en(this._debugHandle),this._microTaskQueued=!1,this.updating=!1}activate(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=pw,this._schedule(),this.frame()))}))}registerTask(n,s){const o=dj(n),a=new r(this,n,s,o);return this._tasks.push(a),this.performanceInfo.tasks.has(n)||this.performanceInfo.tasks.set(n,new zg(n)),a}registerIdleStateCallbacks(n,s){const o={idleBegin:n,idleEnd:s};this._idleStateCallbacks.push(o),this.state===En.IDLE&&this._idleUpdatesStartFired&&o.idleBegin();const a=this;return{remove:()=>this._removeIdleStateCallbacks(o),set idleBegin(l){a._idleUpdatesStartFired&&(o.idleEnd(),a._state===En.IDLE&&l()),o.idleBegin=l},set idleEnd(l){o.idleEnd=l}}}get load(){return this._load}set state(n){this._state!==n&&(this._state=n,this.state!==En.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(s=>s.idleEnd())))}get state(){return R(this._test.state)?this._state:this._test.state}updateBudget(n){this._test.usedBudget=0;let s=hj,o=n.frameDuration,a=pj;switch(this.state){case En.IDLE:s=0,o=Math.max(mj,n.frameDuration),a=c$e;break;case En.INTERACTING:o=Math.max(fj,n.frameDuration);case En.ANIMATING:}return o=o-n.elapsedFrameTime-s,this.state!==En.IDLE&&o<pj&&!this._forceTask?(this._forceTask=!0,!1):(o=Math.max(o,a),this._budget.reset(o,this.state),this._maxReschedule=pw,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case En.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(n=>n.idleBegin())),this._runIdle();break;case En.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(n){this._idleUpdatesStartFired&&n.idleEnd(),this._idleStateCallbacks.removeUnordered(n)}removeTask(n){this._tasks.removeUnordered(n),this._runQueue.removeUnordered(n)}_updateTask(n){this._tasks.forAll(s=>{s.name===n&&s.setPriority(n)})}_getState(n){if(this._runQueue.some(o=>o.name===n))return Ec.SCHEDULED;let s=Ec.IDLE;return this._tasks.forAll(o=>{o.name===n&&o.needsUpdate&&(o.schedulePriority<=1?s=Ec.READY:s!==Ec.READY&&(s=Ec.WAITING))}),s}_getRuntime(n){let s=0;return this._tasks.forAll(o=>{o.name===n&&(s+=o.runtime)}),s}_resetRuntimes(){this._tasks.forAll(n=>n.runtime=0)}_getRunning(){const n=new Map;if(this._tasks.forAll(o=>{o.needsUpdate&&n.set(o.name,(n.get(o.name)||0)+1)}),n.size===0)return null;let s="";return n.forEach((o,a)=>{s+=o>1?` ${o}x ${a}`:` ${a}`}),s}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const n=this._tasks.reduce((s,o)=>o.needsUpdate?++s:s,0);this._load=this._load*yj+n*(1-yj)}_schedule(){if(this._maxReschedule<=0)return!1;for(this._runQueue.filterInPlace(n=>!!n.needsUpdate||(n.schedulePriority=n.basePriority,!1)),this._tasks.forAll(n=>{n.basePriority===Wo&&n.needsUpdate&&!this._runQueue.includes(n)&&this._runQueue.unshift(n)});this._runQueue.length===0;){let n=!1,s=0;if(this._tasks.forAll(o=>{o.needsUpdate&&o.schedulePriority!==0&&o.basePriority!==Wo&&(n=!0,s=Math.max(s,o.basePriority),o.schedulePriority===1?(o.schedulePriority=0,this._runQueue.push(o)):--o.schedulePriority)}),!n)return this.updating=!1,!1;this._maxReschedule===pw&&(this._maxReschedule=s),--this._maxReschedule}return this.updating=!0,!0}_run(){const n=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const s=this._budget.now(),o=this._runQueue.pop();this._budget.resetProgress();try{o.task.runTask(this._budget)}catch(l){u$e.error(`Exception in task "${o.name}"`,l)}o.schedulePriority=o.basePriority;const a=this._budget.now()-s;if(o.runtime+=a,this._frameTaskTimes.set(o.priority,this._frameTaskTimes.get(o.priority)+a),this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",o.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this.updating=this._tasks.some(l=>l.needsUpdate),void this._recordFrameTaskTimes(this._budget.now()-n)}while(this._schedule());this.updating=this._tasks.some(s=>s.needsUpdate),this._recordFrameTaskTimes(this._budget.now()-n)}_startFrameTaskTimes(){for(const n of Object.keys(Fe))this._frameTaskTimes.set(Fe[n],0)}_recordFrameTaskTimes(n){this._frameTaskTimes.forEach((s,o)=>this.performanceInfo.tasks.get(o).record(s)),this.performanceInfo.total.record(n)}get test(){return this._test}};u([d()],t.prototype,"updating",void 0),t=u([E("esri.views.support.Scheduler")],t),e.Scheduler=t;let r=class extends le{constructor(n,s,o,a){super({}),this._scheduler=n,this.name=s,this._basePriority=a,this.runtime=0,this._queue=new H_,this._handles=new zt,this.schedulePriority=this._basePriority,this.task=I(o)?o:this._queue,this._handles.add(di(()=>this.task.running,()=>n.activate()))}get updating(){return this._queue.running}normalizeCtorArgs(){return{}}remove(){this.processQueue(eZ),this._scheduler.removeTask(this),this.schedule=SL.schedule,this.reschedule=SL.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(n){this.name=n;const s=dj(n);this._basePriority!==Wo&&this.schedulePriority===0||(this.schedulePriority=s),this._basePriority=s}get priority(){return this.name}set priority(n){this.setPriority(n)}get needsUpdate(){return this.updating||this.task.running}schedule(n,s,o){return this._queue.push(n,s,o)}reschedule(n,s,o){return this._queue.unshift(n,s,o)}processQueue(n){this._queue.runTask(n)}};u([d({constructOnly:!0})],r.prototype,"task",void 0),u([d({readOnly:!0})],r.prototype,"updating",null),r=u([E("esri.views.support.SchedulerTask")],r);class i{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=En.IDLE,this._didWork=!1,this._enabled=!0}run(s){return!this.done&&(s()===!0&&(this._didWork=!0),!0)}get done(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}get budget(){return this._budget}madeProgress(){this._didWork=!0}get state(){return this._state}get enabled(){return this._enabled}set enabled(s){this._enabled=s}reset(s,o){this._begin=this.now(),this._budget=s,this._state=o,this._didWork=!1}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._didWork=!1}get hasProgressed(){return this._didWork}}e.Budget=i})(bL||(bL={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(Ec||(Ec={}));const eZ=(()=>{const e=new bL.Budget;return e.enabled=!1,e})();class d$e{remove(){}processQueue(){}schedule(t,r,i){try{if(go(r)){const n=Ot();return i?Promise.resolve(i(n)):Promise.reject(n)}return SM(t(eZ))}catch(n){return Promise.reject(n)}}reschedule(t,r,i){return this.schedule(t,r,i)}}const SL=new d$e,pw=Number.MAX_SAFE_INTEGER;let Eg=class extends le{constructor(e,t){var r;super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(r=t==null?void 0:t.registerTask(Fe.TEXTURE_UNLOAD))!=null?r:SL}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(e=>this._releaseTextureRequest(e)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(e,t,r){const i=this.makeUid(e);let n=this._textureRequests.get(i);return n||(n={referenceCount:0,texture:t(),textureAsync:null,abortController:null,onRemove:r},this._stage&&(this._stage.add(n.texture),this._stage.loadImmediate(n.texture)),this._textureRequests.set(i,n)),n.referenceCount++,{uid:i,texture:n.texture,release:()=>this._release(i)}}_release(e){const t=this._textureRequests.get(e);t?(t.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),t.referenceCount--,t.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const t=this._textureRequests.get(e);!t||t.referenceCount>0||(this._releaseTextureRequest(t),this._textureRequests.delete(e))}_releaseTextureRequest(e){var t;e.onRemove&&e.onRemove(),e.texture?(t=this._stage)==null||t.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,t=null){return I(t)?`${e}.${t}px`:e}};u([d()],Eg.prototype,"_frameTask",void 0),u([d()],Eg.prototype,"updating",null),Eg=u([E("esri.views.3d.support.TextureCollection")],Eg);var gj;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(gj||(gj={}));const tZ=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],rZ={};function iZ(e){return!!rZ[e]}function h$e(e){for(const t of e)if(!iZ(t))return!1;return!0}tZ.forEach(e=>{rZ[e]=!0});class p$e{constructor(t){this.handlers=new Map,this.counter=0,this.handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this.handlers.forEach(({handler:r,priority:i},n)=>this.inputManager.installHandlers(n,[r],i))}disconnect(){this.inputManager&&this.handlers.forEach((t,r)=>this.inputManager.uninstallHandlers(r)),this.inputManager=null}destroy(){this.disconnect(),this.handlers.clear(),this.view=null}on(t,r,i,n){const s=Array.isArray(t)?t:t.split(",");if(!h$e(s))return s.some(iZ)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(r)?a=r:(o=r,a=[]),typeof i=="function"?o=i:n=i,n=n!=null?n:sc.DEFAULT;const l=this._createUniqueGroupName(),c=new f$e(this.view,s,a,o);this.handlers.set(l,{handler:c,priority:n});for(const h of s){const f=this.handlerCounts.get(h)||0;this.handlerCounts.set(h,f+1)}return this.inputManager&&this.inputManager.installHandlers(l,[c],n),{remove:()=>this._removeHandler(l,s)}}hasHandler(t){return!!this.handlerCounts.get(t)}_removeHandler(t,r){if(this.handlers.has(t)){this.handlers.delete(t);for(const i of r){const n=this.handlerCounts.get(i);n===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",i):n===1?this.handlerCounts.delete(i):this.handlerCounts.set(i,n-1)}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this.counter+=1,`viewEvents_${this.counter}`}}class f$e extends Dr{constructor(t,r,i,n){super(!0),this.view=t;for(const s of r)switch(s){case"click":this.registerIncoming("click",i,o=>n(this._wrapClick(o)));break;case"double-click":this.registerIncoming("double-click",i,o=>n(this._wrapDoubleClick(o)));break;case"immediate-click":this.registerIncoming("immediate-click",i,o=>n(this._wrapImmediateClick(o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,o=>n(this._wrapImmediateDoubleClick(o)));break;case"hold":this.registerIncoming("hold",i,o=>n(this._wrapHold(o)));break;case"drag":this.registerIncoming("drag",i,o=>{const a=this._wrapDrag(o);a&&n(a)});break;case"key-down":this.registerIncoming("key-down",i,o=>n(this._wrapKeyDown(o)));break;case"key-up":this.registerIncoming("key-up",i,o=>n(this._wrapKeyUp(o)));break;case"pointer-down":this.registerIncoming("pointer-down",i,o=>n(this._wrapPointer(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",i,o=>n(this._wrapPointer(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",i,o=>n(this._wrapPointer(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,o=>n(this._wrapPointerDrag(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,o=>n(this._wrapMouseWheel(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,o=>n(this._wrapPointer(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,o=>n(this._wrapPointer(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",i,o=>{n(this._wrapGamepad(o))});break;case"focus":this.registerIncoming("focus",i,o=>{n(this._wrapFocus(o))});break;case"blur":this.registerIncoming("blur",i,o=>{n(this._wrapBlur(o))})}}_wrapFocus(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:r=>t.async(r),preventDefault:()=>t.preventDefault()}}_wrapBlur(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:r=>t.async(r),preventDefault:()=>t.preventDefault()}}_wrapClick(t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:l}=t.data,{cancelable:c,timestamp:h}=t;return{type:"click",pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:h,screenPoint:Zi(s,o),mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}_wrapDoubleClick(t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:l}=t.data,{cancelable:c,timestamp:h}=t;return{type:"double-click",pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:h,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}_wrapImmediateClick(t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:l}=t.data,c=a.pointerId,{cancelable:h,timestamp:f}=t;return{type:"immediate-click",pointerId:c,pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:f,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}_wrapImmediateDoubleClick(t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:l}=t.data,c=a.pointerId,{cancelable:h,timestamp:f}=t;return{type:"immediate-double-click",pointerId:c,pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:f,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}_wrapHold(t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a}=t.data,{cancelable:l,timestamp:c}=t;return{type:"hold",pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:c,mapPoint:this._getMapPoint(s,o),cancelable:l,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}_getMapPoint(t,r){return this.view.toMap(Zi(t,r),{exclude:[]})}_wrapDrag(t){const r=t.data,{x:i,y:n}=r.center,{action:s,pointerType:o,button:a}=r;if(s==="start"&&(this.latestDragStart=r),!this.latestDragStart)return;const l=r.pointer.native,c=r.buttons,{cancelable:h,timestamp:f}=t,m={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};return s==="end"&&(this.latestDragStart=void 0),{type:"drag",action:s,x:i,y:n,origin:m,pointerType:o,button:a,buttons:c,radius:r.radius,angle:D7(r.angle),native:l,timestamp:f,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}_wrapKeyDown(t){const{key:r,repeat:i,native:n}=t.data,{cancelable:s,timestamp:o}=t;return{type:"key-down",key:r,repeat:i,native:n,timestamp:o,cancelable:s,stopPropagation:()=>t.stopPropagation(),async:a=>t.async(a),preventDefault:()=>t.preventDefault()}}_wrapKeyUp(t){const{key:r,native:i}=t.data,{cancelable:n,timestamp:s}=t;return{type:"key-up",key:r,native:i,timestamp:s,cancelable:n,stopPropagation:()=>t.stopPropagation(),async:o=>t.async(o),preventDefault:()=>t.preventDefault()}}_wrapPointer(t,r){const{x:i,y:n,button:s,buttons:o,native:a,eventId:l}=t.data,c=a.pointerId,h=a.pointerType,{cancelable:f,timestamp:m}=t;return{type:r,x:i,y:n,pointerId:c,pointerType:h,button:s,buttons:o,native:a,timestamp:m,eventId:l,cancelable:f,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}_wrapPointerDrag(t){const{x:r,y:i,buttons:n,native:s,eventId:o}=t.data.currentEvent,{button:a}=t.data.startEvent,l=t.data.startEvent.native.pointerId,c=t.data.startEvent.native.pointerType,h=t.data.action,f={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:m,timestamp:y}=t;return{type:"pointer-drag",x:r,y:i,pointerId:l,pointerType:c,button:a,buttons:n,action:h,origin:f,native:s,timestamp:y,eventId:o,cancelable:m,stopPropagation:()=>t.stopPropagation(),async:g=>t.async(g),preventDefault:()=>t.preventDefault()}}_wrapMouseWheel(t){const{cancelable:r,data:i,timestamp:n}=t,{x:s,y:o,deltaY:a,native:l}=i;return{type:"mouse-wheel",x:s,y:o,deltaY:a,native:l,timestamp:n,cancelable:r,stopPropagation:()=>t.stopPropagation(),async:c=>t.async(c),preventDefault:()=>t.preventDefault()}}_wrapGamepad(t){const{action:r,state:i,device:n}=t.data,{cancelable:s,timestamp:o}=t,{buttons:a,axes:l}=i;return{type:"gamepad",device:n,timestamp:o,action:r,buttons:a,axes:l,cancelable:s,stopPropagation:()=>t.stopPropagation(),async:c=>t.async(c),preventDefault:()=>t.preventDefault()}}}var uv,vj,wj;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(uv||(uv={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(vj||(vj={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(wj||(wj={}));const m$e=Z.getLogger("esri.views.interactive.interactiveToolUtils");function y$e(e){return[e.on("before-add",t=>{const r=t.item;if(r==null||e.includes(r))return m$e.warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();r.onAdd()}),e.on("after-remove",t=>{const r=t.item;r.visible=!1,r.active&&(r.view.activeTool=null),r.destroy()})]}function HS(e){return e.visible&&e.getEditableFlag(uv.USER)&&e.getEditableFlag(uv.MANAGER)}function Do(e){return Zi(e.x,e.y)}function nZ(e,t){const r=(e instanceof HTMLElement?e:e.surface).getBoundingClientRect();return Zi(t.clientX-r.left,t.clientY-r.top)}function _j(e,t){return t instanceof Event?nZ(e,t):Do(t)}function bj(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}class g$e{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._currentlyActiveTool=null,this._revertToActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(t,r){const i=()=>t.stopPropagation();switch(t.type){case"pointer-move":Sj(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(i(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!$j(t))break;const n=Do(t),s=this._intersect(n,t.pointerType,r.forEachTool);if(R(s))break;const o=this._findToolAndManipulatorByKey(s,r.forEachTool,fw),a=Zo(o,c=>c.manipulator),l=Zo(o,c=>c.tool);!(I(a)&&I(l)&&a.interactive)||a.grabbable&&a.grabbableForEvent(t)||!a.grabbing||a.dragging||this._ungrabManipulatorBeforeDragging(a,l,t),I(a)&&a.interactive&&a.grabbable&&a.grabbableForEvent(t)&&!a.grabbing&&(this._grabbedManipulators.set(t.pointerId,{key:s,start:n,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&r.activeTool!==s.tool&&(this._currentlyActiveTool=r.activeTool,this._revertToActiveTool=!0,r.setActiveTool(s.tool)),a.grabbing=!0,a.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:n}),i());break}case"pointer-up":this._handlePointerEnd(t,r);break;case"pointer-drag":{if(!$j(t))break;const n=this._grabbedManipulators.get(t.pointerId),s=this._draggedManipulators.get(t.pointerId),o=Zo(n||s,({key:h})=>h),a=this._findManipulatorByKey(o,r.forEachTool);if(R(a))break;const l=Do(t);l.x=an(l.x,0,r.view.width),l.y=an(l.y,0,r.view.height);const c=(n||s).start;switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(a.dragging=!0,s?a.events.emit("drag",{action:"update",start:c,screenPoint:l}):a.events.emit("drag",{action:"start",start:c,screenPoint:l,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{key:o,start:c}));break;case"end":a.dragging=!1,s&&a.events.emit("drag",{action:"end",start:c,screenPoint:l}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,r)}i();break}case"immediate-click":{const n=Do(t),s=this._intersect(n,t.pointerType,r.forEachTool),o=this._findToolAndManipulatorByKey(s,r.forEachTool,fw);if(v$e(t)||r.forEachTool(h=>{if((!I(o)||o.tool!==h||h.automaticManipulatorSelection)&&h.manipulators){let f=!1;h.manipulators.forEach(({manipulator:m})=>{m.selected&&(m.selected=!1,f=!0)}),f&&h.manipulatorSelectionChanged&&h.manipulatorSelectionChanged()}}),R(o))break;const{manipulator:a,tool:l}=o;if(!a.interactive)break;a.selectable&&l.automaticManipulatorSelection&&(a.selected=!a.selected,l.manipulatorSelectionChanged&&l.manipulatorSelectionChanged());const c=t.native.shiftKey;a.events.emit("immediate-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:c,stopPropagation:i});break}case"click":{const n=Do(t),s=this._intersect(n,t.pointerType,r.forEachTool),o=this._findManipulatorByKey(s,r.forEachTool);if(R(o)||!o.interactive)break;const a=t.native.shiftKey;o.events.emit(t.type,{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a}),i();break}case"double-click":{const n=Do(t),s=this._intersect(n,t.pointerType,r.forEachTool),o=this._findManipulatorByKey(s,r.forEachTool);if(R(o)||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i});break}case"immediate-double-click":{const n=Do(t),s=this._intersect(n,t.pointerType,r.forEachTool),o=this._findManipulatorByKey(s,r.forEachTool);if(R(o)||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i});break}}this._onFocusChange(r.forEachTool)}_ungrabManipulatorBeforeDragging(t,r,i){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:Do(i)}),this._grabbedManipulators.forEach(({key:n},s)=>{n.tool===r&&r.manipulators.findById(n.manipulatorId)===t&&this._grabbedManipulators.delete(s)})}_handlePointerEnd(t,r){const i=Zo(this._grabbedManipulators.get(t.pointerId),({key:s})=>s),n=this._findManipulatorByKey(i,r.forEachTool);I(n)&&!n.dragging&&(this._grabbedManipulators.size===1&&this._draggedManipulators.size===0&&this._revertToActiveTool&&(r.setActiveTool(this._currentlyActiveTool),this._revertToActiveTool=!1,this._currentlyActiveTool=null),n.grabbing&&(n.grabbing=!1,n.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:Do(t)})),this._grabbedManipulators.delete(t.pointerId))}_cursorFromMap(t,r){let i=null;return L2(t,({key:n})=>{const s=this._findManipulatorByKey(n,r);return!!(I(s)&&s.interactive&&"cursor"in s&&s.cursor)&&(i=s.cursor,!0)}),i}_onFocusChange(t){this._updateCursor(t),this._updateFocusedManipulatorTools(t)}_updateCursor(t){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators,t)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators,t)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const r=new Set;this._grabbedManipulators.forEach(({key:{tool:i}})=>{r.add(i)}),this._hoveredManipulators.forEach(({key:{tool:i}})=>{r.add(i)}),t(i=>{i.hasFocusedManipulators=r.has(i)})}clearPointers(t,r,i=!0,n){const s=o=>o.tool===t&&(R(n)||o.manipulatorId===n);this._grabbedManipulators.forEach(({key:o,pointerType:a},l)=>{if(s(o)){this._grabbedManipulators.delete(l);const c=this._findManipulatorByKey(o,r);I(c)&&(c.grabbing=!1,c.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:a}))}}),this._draggedManipulators.forEach(({key:o},a)=>{if(s(o)){this._draggedManipulators.delete(a);const l=this._findManipulatorByKey(o,r);I(l)&&(l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}}),i&&this._hoveredManipulators.forEach(({key:o},a)=>{if(s(o)){this._hoveredManipulators.delete(a);const l=this._findManipulatorByKey(o,r);I(l)&&(l.hovering=!1)}}),this._onFocusChange(r)}_intersect(t,r,i){let n=null;return i(s=>{if(s.manipulators==null||!HS(s))return!1;const o=s.manipulators.intersect(t,r);return!R(o)&&(n={manipulatorId:o.id,tool:s},!0)}),n}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((r,i)=>{this._updateHoveredStateForPointerAtScreenPosition(Zi(r.x,r.y),i,r.pointerType,t)})}handleHoverEvent(t,r){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!Sj(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(Do(t),t.pointerId,t.pointerType,r)}_updateHoveredStateForPointerAtScreenPosition(t,r,i,n){const s=this._intersect(t,i,n);let o=this._findManipulatorByKey(s,n);const a=Zo(this._hoveredManipulators.get(r),({key:c})=>c),l=this._findManipulatorByKey(a,n);I(o)&&!o.interactive&&(o=null),l!==o&&(I(l)&&(l.hovering=!1),I(o)?(o.hovering=!0,this._hoveredManipulators.set(r,{key:s})):this._hoveredManipulators.delete(r),this._onFocusChange(n))}_findManipulatorByKey(t,r){return this._findToolAndManipulatorByKey(t,r,fw)?fw.manipulator:null}_findToolAndManipulatorByKey(t,r,i){return R(t)?null:(i.tool=null,i.manipulator=null,r(n=>{if(n!==t.tool||n.manipulators==null||!HS(n))return!1;const s=n.manipulators.findById(t.manipulatorId);return!!I(s)&&(i.manipulator=s,i.tool=n,!0)}),i.manipulator?i:null)}}function Sj(e){return e==="mouse"}function $j(e){return e.pointerType!=="mouse"||e.button===0}function v$e(e){return!!e.native.shiftKey}const fw={manipulator:null,tool:null},w$e=Z.getLogger("esri.views.ToolViewManager"),xj="attached",DE="tools";let Ga=class extends D0{constructor(e){super(e),this._manipulatorState=new g$e,this.tools=new de,this.cursor=null,this._forEachTool=t=>{for(const r of this.tools.items)if(t(r))return}}initialize(){this.handles.add([this.view.on(tZ,e=>{this._handleInputEvent(e)},sc.TOOL),...y$e(this.tools),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._forEachTool)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}set activeTool(e){if(I(e)&&!this.view.ready)return void w$e.error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const t=this.activeTool;this._set("activeTool",e),I(t)&&t.deactivate(),I(e)&&e.activate(),this._removeIncompleteTools(e);const r=R(this.activeTool);for(const i of this.tools){i.setEditableFlag(uv.MANAGER,r||i===this.activeTool);const n=HS(i);!r&&n||this._manipulatorState.clearPointers(i,this._forEachTool,!n)}this._updateCursor()}get updating(){var e,t;return this.updatingHandles.updating||this.tools.some(r=>r.updating)||((t=(e=this.textures)==null?void 0:e.updating)!=null?t:!1)}attach(){this.view.type==="3d"?(this._set("textures",new Eg(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([G(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}),this.view.elevationProvider.on("elevation-change",e=>{this._forEachManipulator(t=>{t.onElevationChange!=null&&t.onElevationChange(e)})}),dm(()=>this._set("textures",qi(this.textures)))],xj)):this.handles.add(G(()=>this.view.extent,()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}))}detach(){I(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(xj)}_forEachManipulator(e){this._forEachTool(t=>{t.manipulators&&t.manipulators.forEach(({manipulator:r})=>e(r,t))})}_handleInputEvent(e){let t=!1;const r={...e,stopPropagation:()=>{t=!0,e.stopPropagation()}};I(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool(i=>{!t&&i.visible&&i.handleInputEvent(r)}),!t&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:i=>{this.activeTool=i},view:this.view}),!t&&I(this.activeTool)&&this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(DE),this._forEachTool(e=>{if(e instanceof le){const t=G(()=>[e.cursor,e.visible,e.editable],()=>{HS(e)||this._manipulatorState.clearPointers(e,this._forEachTool),this._updateCursor()});this.handles.add(t,DE)}e.manipulators&&this.handles.add(e.manipulators.on("change",t=>{t.removed.forEach(({id:r})=>{this._manipulatorState.clearPointers(e,this._forEachTool,!0,r)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}),DE)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateCursor(){const e=this._manipulatorState.cursor;let t=e;this._forEachTool(r=>!(!I(r.cursor)||!r.visible||!R(e)&&r.preferManipulatorCursor)&&(t=r.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(e){this.tools.filter(t=>(R(e)||t!==e)&&!t.created&&t.removeIncompleteOnCancel).forEach(t=>{this.tools.remove(t)})}};u([d({constructOnly:!0,nonNullable:!0})],Ga.prototype,"view",void 0),u([d({readOnly:!0,nonNullable:!0})],Ga.prototype,"textures",void 0),u([d({value:null})],Ga.prototype,"activeTool",null),u([d({readOnly:!0,type:de})],Ga.prototype,"tools",void 0),u([d({readOnly:!0})],Ga.prototype,"cursor",void 0),u([d({readOnly:!0})],Ga.prototype,"updating",null),Ga=u([E("esri.views.ToolViewManager")],Ga);const _$e=Ga;let Mp=class extends le{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":b$e.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){return(navigator.getGamepads?navigator.getGamepads():[])[this.nativeIndex]}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return S$e[this.deviceType]}};u([d({nonNullable:!0,readOnly:!0})],Mp.prototype,"nativeIndex",void 0),u([d({type:String,readOnly:!0})],Mp.prototype,"deviceType",null),u([d({type:Number,readOnly:!0})],Mp.prototype,"axisThreshold",null),Mp=u([E("esri.views.input.gamepad.GamepadInputDevice")],Mp);const b$e=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),S$e={standard:.15,spacemouse:.025,unknown:0},TP=Mp;let Tg=class extends le{constructor(...e){super(...e),this.devices=new de,this.enabledFocusMode="document"}};u([d({type:de.ofType(TP),readOnly:!0})],Tg.prototype,"devices",void 0),u([d({type:["document","view","none"]})],Tg.prototype,"enabledFocusMode",void 0),Tg=u([E("esri.views.input.gamepad.GamepadSettings")],Tg);const $$e=Tg;let J_=class extends le{constructor(){super(...arguments),this.gamepad=new $$e}};u([d({readOnly:!0})],J_.prototype,"gamepad",void 0),J_=u([E("esri.views.input.Input")],J_);const x$e=J_;let mu=class extends le{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};u([d({type:Boolean,nonNullable:!0})],mu.prototype,"enabled",void 0),u([d({type:TP})],mu.prototype,"device",void 0),u([d({type:["pan","zoom"],nonNullable:!0})],mu.prototype,"mode",void 0),u([d({type:["forward-down","forward-up"],nonNullable:!0})],mu.prototype,"tiltDirection",void 0),u([d({type:Number,nonNullable:!0})],mu.prototype,"velocityFactor",void 0),mu=u([E("esri.views.navigation.gamepad.GamepadSettings")],mu);const sZ=mu;let dd=class extends le{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new sZ,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};u([d({type:Boolean})],dd.prototype,"browserTouchPanEnabled",void 0),u([d({type:sZ,nonNullable:!0})],dd.prototype,"gamepad",void 0),u([d({type:Boolean})],dd.prototype,"momentumEnabled",void 0),u([d({type:Boolean})],dd.prototype,"mouseWheelZoomEnabled",void 0),dd=u([E("esri.views.navigation.Navigation")],dd);const oZ=dd;var Ej;function E$e(e){const t=e.url&&rm(e.url);return!((e.spatialReference&&e.spatialReference.vcsWkid)==null&&I(t)&&t.serverType==="ImageServer")&&aZ(e)&&e.heightModelInfo?e.heightModelInfo:T$e(e)?g$.deriveUnitFromSR(I$e,e.spatialReference):null}function aZ(e){return"heightModelInfo"in e}function lZ(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"wfs":return!0;default:return!1}}function T$e(e){return lZ(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):uZ(e)}function M$e(e){return e.layers!=null||uZ(e)||lZ(e)||aZ(e)}function uZ(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"line-of-sight":case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(Ej||(Ej={}));const I$e=new g$({heightModel:"gravity-related-height"});var Sl;function Tj(e){return e===Sl.Global?"global":"local"}(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(Sl||(Sl={}));let $L,jE=null;async function C$e(e){jE||(jE=V(()=>import("./geometryServiceUtils.91984502.js"),[],import.meta.url).then(t=>$L=t)),await jE,yt(e)}async function cZ(e,t,r,i){if(!e)return null;const n=e.spatialReference;return dc()||_l(n,t)?Tm(e,t):$L?$L.projectGeometry(e,t,r,i):(await Promise.race([C$e(i),hc(i)]),cZ(e,t,r,i))}let st=class extends le{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=kb(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return I(this.userSpatialReference)?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return R(this.userSpatialReference)||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var r,i,n,s;const e=(r=this.map)==null?void 0:r.call(this),t=[];return I(this.priorityCollection)&&t.push(this.priorityCollection),t.push({parent:e==null?void 0:e.basemap,layers:(i=e==null?void 0:e.basemap)==null?void 0:i.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(n=e==null?void 0:e.ground)==null?void 0:n.layers},{parent:e==null?void 0:e.basemap,layers:(s=e==null?void 0:e.basemap)==null?void 0:s.referenceLayers}),t}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){var n;if(this.suspended)return(n=this._get("_spatialReferenceTask"))!=null?n:{updating:!1};const{layers:e,updating:t}=this._allLayers;let r=null;for(const s of e){const o=this._getSupportedSpatialReferences(s);if(o.length>0){const a=this._narrowDownSpatialReferenceCandidates(r,o);I(a)&&(r=a)}if(I(r)&&r.length===1)break}if(t&&(R(r)||r.length!==1))return{updating:!0};const i=this._pickSpatialReferenceCandidate(r);return{spatialReference:I(i)?i.spatialReference:null,viewingMode:I(i)?i.viewingMode:null,updating:!1}}get _tileInfoTask(){var r,i,n,s,o,a,l,c;if(!this.required.tileInfo)return(r=this._get("_tileInfoTask"))!=null?r:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:t}=this._collectLayers([{parent:(n=(i=this.map)==null?void 0:i.call(this))==null?void 0:n.basemap,layers:(a=(o=(s=this.map)==null?void 0:s.call(this))==null?void 0:o.basemap)==null?void 0:a.baseLayers},{layers:(c=(l=this.map)==null?void 0:l.call(this))==null?void 0:c.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const h=e[0].tileInfo;return{tileInfo:h&&h.spatialReference.equals(this.spatialReference)?h:null,updating:!1}}return{updating:t}}get _heightModelInfoTask(){var r,i,n,s;if(!this.required.heightModelInfo||this.suspended&&((r=this._get("_heightModelInfoTask"))==null?void 0:r.heightModelInfo))return(i=this._get("_heightModelInfoTask"))!=null?i:{updating:!1};const{layers:e,updating:t}=this._allLayers;for(const o of e)if(M$e(o)){const a=E$e(o);if(a)return{heightModelInfo:a,vcsWkid:(n=o.spatialReference)==null?void 0:n.vcsWkid,latestVcsWkid:(s=o.spatialReference)==null?void 0:s.latestVcsWkid,updating:!1}}return{updating:t}}get _extentCandidatesTask(){var i,n;if(this.suspended||!this.required.extent)return(i=this._get("_extentCandidatesTask"))!=null?i:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,t=e.updating,r=[];for(const s of e.layers){const o="fullExtents"in s&&s.fullExtents||(I(s.fullExtent)?[s.fullExtent]:[]),a=this.requiresExtentInSpatialReference?null:o[0],l=(n=o.find(c=>c.spatialReference.equals(this.spatialReference)))!=null?n:a;if(l)return{candidates:[{extent:l,layer:s}],updating:!1};if(this._getSupportedSpatialReferences(s).length>0)for(const c of o)r.push({extent:c,layer:s})}return{candidates:r,updating:t}}get _extentTask(){const{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(R(e)||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),i=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&i.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:I(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:(I(this._projectExtentTask.task)&&(this._projectExtentTask.task=kb(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:i.clone(),task:l9(async n=>{try{const s=await cZ(r.extent,i,r.layer.portalItem,n);this._projectExtentTask={...this._projectExtentTask,task:null,output:s}}catch{if(go(n))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if(R(e))return t;const r=[],i=(n,s)=>I(n)?I(s)?n===s&&n:n:s;for(const n of e)for(const s of t){if(!n.spatialReference.equals(s.spatialReference))continue;const o=i(n.viewingMode,s.viewingMode);if(o!==!1){r.push({spatialReference:n.spatialReference,viewingMode:o});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const t=this.defaultSpatialReference;return R(e)||e.length<1?I(t)?{spatialReference:t,viewingMode:null}:null:(I(t)&&e.length>1&&e.some(({spatialReference:r})=>r.equals(t))&&(e=e.filter(({spatialReference:r})=>r.equals(t))),e.length>1&&e.some(({viewingMode:r})=>r!==Sl.Local)&&(e=e.filter(({viewingMode:r})=>r!==Sl.Local)),e[0])}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(t.length===0)return[];const r=[];for(const i of t){const n=this.getSpatialReferenceSupport({spatialReference:i,layer:e});if(I(n)){const s=I(n.constraints)?n.constraints:[{spatialReference:i,viewingMode:null}];for(const{spatialReference:o,viewingMode:a}of s)(!this.requiresExtentInSpatialReference||R(this.userSpatialReference)||o.equals(this.userSpatialReference))&&r.push({spatialReference:o,viewingMode:a})}}return r}_pickExtentCandidate(e){const t=this.spatialReference;return e.find(({extent:r})=>t.equals(r.spatialReference))||e[0]}_collectLayers(e){var r;if(this._loadMaybe((r=this.map)==null?void 0:r.call(this))!=="loaded")return{layers:[],updating:!0};const t={layers:[],preloading:-1,updating:!1};for(const i of e)if(this._collectCollection(i,t),t.preloading===this.sourcePreloadCount)break;return{layers:t.layers,updating:t.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(const r of e.layers){switch(this._loadMaybe(r)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":t.updating||t.layers.push(r),"layers"in r&&this._collectCollection({layers:r.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e?e.loadStatus==="not-loaded"?(e.load(),"loading"):e.loadStatus:"loaded"}};u([d()],st.prototype,"required",void 0),u([d({constructOnly:!0})],st.prototype,"map",void 0),u([d({constructOnly:!0})],st.prototype,"getSpatialReferenceSupport",void 0),u([d()],st.prototype,"defaultSpatialReference",void 0),u([d()],st.prototype,"userSpatialReference",void 0),u([d()],st.prototype,"sourcePreloadCount",void 0),u([d()],st.prototype,"priorityCollection",void 0),u([d()],st.prototype,"requiresExtentInSpatialReference",void 0),u([d()],st.prototype,"suspended",void 0),u([d({readOnly:!0})],st.prototype,"ready",null),u([d({readOnly:!0})],st.prototype,"heightModelInfoReady",null),u([d({readOnly:!0})],st.prototype,"spatialReference",null),u([d({readOnly:!0})],st.prototype,"extent",null),u([d({readOnly:!0})],st.prototype,"heightModelInfo",null),u([d({readOnly:!0})],st.prototype,"vcsWkid",null),u([d({readOnly:!0})],st.prototype,"latestVcsWkid",null),u([d({readOnly:!0})],st.prototype,"viewingMode",null),u([d({readOnly:!0})],st.prototype,"tileInfo",null),u([d({readOnly:!0})],st.prototype,"mapCollections",null),u([d({readOnly:!0})],st.prototype,"_allLayers",null),u([d({readOnly:!0})],st.prototype,"_spatialReferenceTask",null),u([d({readOnly:!0})],st.prototype,"_tileInfoTask",null),u([d({readOnly:!0})],st.prototype,"_heightModelInfoTask",null),u([d({readOnly:!0})],st.prototype,"_extentCandidatesTask",null),u([d()],st.prototype,"_extentTask",null),u([d()],st.prototype,"_projectExtentTask",void 0),st=u([E("esri.views.support.DefaultsFromMap")],st);var Z_;const mw=Z.getLogger("esri.views.View");let we=Z_=class extends ca(ua.EventedMixin(xv(le))){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new Bf({getCollections:()=>{var t,r,i;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(r=this.groundView)==null?void 0:r.layerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:t=>t.layerViews}),this.groundView=null,this.animation=null,this.basemapView=null,this.fatalError=null,this.extent=null,this.graphics=new d0,this.analyses=new WS,this.navigating=!1,this.typeSpecificPreconditionsReady=!0,this.layerViews=new de,this.magnifier=new XJ,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new x$e,this.navigation=new oZ,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new p$e(this),this.persistableViewModels=new de,this._isValid=!1,this._readyCycleForced=!1,this.handles.add(G(()=>this.preconditionsReady,t=>{var r,i;t?(this._currentSpatialReference=this.spatialReference,Z_.views.add(this)):(this._currentSpatialReference=null,Z_.views.remove(this)),this.notifyChange("spatialReference"),!t&&this.ready?((r=this.layerViewManager)==null||r.clear(),(i=this.toolViewManager)==null||i.detach(),I(this.analysisViewManager)&&this.analysisViewManager.detach(),this._teardown()):t&&!this.ready&&(this._startup(),I(this.analysisViewManager)&&this.analysisViewManager.attach(),this.toolViewManager.attach())},Gf))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,Ev(()=>this.ready)))),this.basemapView=new fu({view:this}),this.layerViewManager=new a$e({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new _$e({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([G(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},{sync:!0,initial:!0}),G(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},{sync:!0}),G(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let e=null;this.handles.add([G(()=>{var t;return(t=this.defaultsFromMap)==null?void 0:t.ready},t=>{var i;const r=((i=this.map)==null?void 0:i.allLayers.length)>0;if(t&&!this.spatialReference&&r){if(I(e))return;const n=dm(()=>e=kb(e));e=l9(async s=>{try{await ZO(this.spatialReferenceWarningDelay,null,s)}catch{return}finally{e=null}mw.warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(n,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=qi(this.graphics),this.analyses=qi(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),qi(this.analysisViewManager),this.toolViewManager=qi(this.toolViewManager),this.layerViewManager=qi(this.layerViewManager),this.basemapView=qi(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const e=this.map;this.map=null,e==null||e.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return mw.error("#toMap()","Not implemented on this instance of View"),null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new st({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:e=>this.getSpatialReferenceSupport(e),...this._defaultsFromMapSettings})}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Nn.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(mw.warn("#map","The provided map is already destroyed",{map:e}),e=null),Nn.isLoadable(e)&&e.load().catch(()=>{}),this.initialized&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",e))}get spatialReference(){var t,r;let e=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return e&&((r=(t=this.defaultsFromMap)==null?void 0:t.required)==null?void 0:r.heightModelInfo)&&(e=e.clone(),e.vcsWkid=this.defaultsFromMap.vcsWkid,e.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),e}set spatialReference(e){const t=!Hr(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){const e=this.toolViewManager?this.toolViewManager.cursor:null;return I(e)?e:this._cursor||"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(e){return this.layerViewManager.whenLayerView(e)}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e,t,r;return(r=(t=this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)!=null?t:(e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)!=null?r:null}importLayerView(e){throw new O("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return I(this.getSpatialReferenceSupport({spatialReference:e}))}when(e,t){return this.isResolved()&&!this.ready&&mw.warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(di(()=>this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};we.views=new de,u([d()],we.prototype,"_userSpatialReference",void 0),u([X("toolViewManager.activeTool")],we.prototype,"activeTool",void 0),u([d({readOnly:!0})],we.prototype,"allLayerViews",void 0),u([d()],we.prototype,"groundView",void 0),u([d()],we.prototype,"animation",void 0),u([d()],we.prototype,"basemapView",void 0),u([d({readOnly:!0})],we.prototype,"_defaultsFromMapSettings",null),u([d()],we.prototype,"defaultsFromMap",null),u([d()],we.prototype,"fatalError",void 0),u([d({type:Je})],we.prototype,"extent",void 0),u([d(lj(d0,"graphics"))],we.prototype,"graphics",void 0),u([d(lj(WS,"analyses"))],we.prototype,"analyses",void 0),u([d({readOnly:!0,type:g$})],we.prototype,"heightModelInfo",null),u([d({readOnly:!0})],we.prototype,"interacting",null),u([d({readOnly:!0})],we.prototype,"navigating",void 0),u([d({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],we.prototype,"preconditionsReady",null),u([d({readOnly:!0})],we.prototype,"typeSpecificPreconditionsReady",void 0),u([d({type:de,readOnly:!0})],we.prototype,"layerViews",void 0),u([d({type:XJ})],we.prototype,"magnifier",void 0),u([d({value:null,type:oU})],we.prototype,"map",null),u([d()],we.prototype,"padding",void 0),u([d({readOnly:!0})],we.prototype,"ready",void 0),u([d({type:Te})],we.prototype,"spatialReference",null),u([d()],we.prototype,"spatialReferenceWarningDelay",void 0),u([d()],we.prototype,"stationary",null),u([d({readOnly:!0})],we.prototype,"supportsGround",void 0),u([d({type:pa})],we.prototype,"timeExtent",void 0),u([X("toolViewManager.tools")],we.prototype,"tools",void 0),u([d()],we.prototype,"toolViewManager",void 0),u([d({readOnly:!0})],we.prototype,"type",void 0),u([d({type:Number})],we.prototype,"scale",void 0),u([d({readOnly:!0})],we.prototype,"updating",void 0),u([d({readOnly:!0})],we.prototype,"initialExtentRequired",void 0),u([d({readOnly:!0})],we.prototype,"initialExtent",null),u([d()],we.prototype,"cursor",null),u([d({readOnly:!0})],we.prototype,"input",void 0),u([d({type:oZ,nonNullable:!0})],we.prototype,"navigation",void 0),u([d()],we.prototype,"layerViewManager",void 0),u([d()],we.prototype,"analysisViewManager",void 0),u([d()],we.prototype,"width",void 0),u([d()],we.prototype,"height",void 0),u([d({readOnly:!0})],we.prototype,"resizing",void 0),u([d({value:null,readOnly:!0})],we.prototype,"size",null),u([d({readOnly:!0})],we.prototype,"suspended",void 0),u([d({readOnly:!0})],we.prototype,"viewEvents",void 0),u([d({readOnly:!0})],we.prototype,"persistableViewModels",void 0),u([d()],we.prototype,"_isValid",void 0),u([d()],we.prototype,"_readyCycleForced",void 0),u([d()],we.prototype,"_currentSpatialReference",void 0),we=Z_=u([E("esri.views.View")],we);const k$e=we;let yu=class extends Wb{constructor(e){super(e),this.state="running",this.target=null}initialize(){this.addResolvingPromise(new Promise((e,t)=>this._dfd={resolve:e,reject:t}))}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._dfd.reject(new O("ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._dfd.resolve())}update(e,t){t||(t=xl(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};u([d({readOnly:!0})],yu.prototype,"done",null),u([d({readOnly:!0,type:String})],yu.prototype,"state",void 0),u([d()],yu.prototype,"target",void 0),yu=u([E("esri.views.ViewAnimation")],yu),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(yu||(yu={}));const xL=yu;function Md(e,t,r,i){const n=3*e,s=3*(r-e)-n,o=1-n-s,a=3*t,l=3*(i-t)-a,c=1-a-l;function h(g){return((o*g+s)*g+n)*g}function f(g){return((c*g+l)*g+a)*g}function m(g){return(3*o*g+2*s)*g+n}function y(g,v){let _,w,b,S,M,T;for(b=g,T=0;T<8;T++){if(S=h(b)-g,Math.abs(S)<v)return b;if(M=m(b),Math.abs(M)<1e-6)break;b-=S/M}if(_=0,w=1,b=g,b<_)return _;if(b>w)return w;for(;_<w;){if(S=h(b),Math.abs(S-g)<v)return b;g>S?_=b:w=b,b=.5*(w-_)+_}return b}return function(g,v=1e-6){return f(y(g,v))}}const L$e=/^cubic-bezier\((.*)\)/,ns={};function O$e(e){let t=ns[e]||null;if(!t){const r=L$e.exec(e);if(r){const i=r[1].split(",").map(n=>parseFloat(n.trim()));i.length!==4||i.some(n=>isNaN(n))||(t=Md.apply(Md,i))}}return t}ns.ease=Md(.25,.1,.25,1),ns.linear=Md(0,0,1,1),ns.easeIn=ns["ease-in"]=Md(.42,0,1,1),ns.easeOut=ns["ease-out"]=Md(0,0,.58,1),ns.easeInOut=ns["ease-in-out"]=Md(.42,0,.58,1);function oc(){return[1,0,0,1,0,0]}function A$e(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function P$e(e,t,r,i,n,s){return[e,t,r,i,n,s]}function R$e(e,t){return new Float64Array(e,t,6)}Object.freeze(Object.defineProperty({__proto__:null,create:oc,clone:A$e,fromValues:P$e,createView:R$e},Symbol.toStringTag,{value:"Module"}));function cv(e,t){return e[0]=t[0],e[1]=t[1],e}function Rr(e,t,r){return e[0]=t,e[1]=r,e}function dZ(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function dv(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function hZ(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function pZ(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function F$e(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function N$e(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function D$e(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function j$e(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function V$e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function Yv(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function z$e(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e}function Qv(e,t){const r=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(r*r+i*i)}function JS(e,t){const r=t[0]-e[0],i=t[1]-e[1];return r*r+i*i}function ZS(e){const t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function fZ(e){const t=e[0],r=e[1];return t*t+r*r}function mZ(e,t){return e[0]=-t[0],e[1]=-t[1],e}function U$e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function EL(e,t){const r=t[0],i=t[1];let n=r*r+i*i;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e}function yZ(e,t){return e[0]*t[0]+e[1]*t[1]}function gZ(e,t,r){const i=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=i,e}function G$e(e,t,r,i){const n=t[0],s=t[1];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e}function B$e(e,t){t=t||1;const r=2*zu()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function q$e(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n,e[1]=r[1]*i+r[3]*n,e}function Ho(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n+r[4],e[1]=r[1]*i+r[3]*n+r[5],e}function W$e(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[3]*n+r[6],e[1]=r[1]*i+r[4]*n+r[7],e}function H$e(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[4]*n+r[12],e[1]=r[1]*i+r[5]*n+r[13],e}function J$e(e,t,r,i){const n=t[0]-r[0],s=t[1]-r[1],o=Math.sin(i),a=Math.cos(i);return e[0]=n*a-s*o+r[0],e[1]=n*o+s*a+r[1],e}function Z$e(e,t){const r=e[0],i=e[1],n=t[0],s=t[1];let o=r*r+i*i;o>0&&(o=1/Math.sqrt(o));let a=n*n+s*s;a>0&&(a=1/Math.sqrt(a));const l=(r*n+i*s)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function Y$e(e){return"vec2("+e[0]+", "+e[1]+")"}function Q$e(e,t){return e[0]===t[0]&&e[1]===t[1]}function K$e(e,t){const r=e[0],i=e[1],n=t[0],s=t[1];return Math.abs(r-n)<=$e*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(i-s)<=$e*Math.max(1,Math.abs(i),Math.abs(s))}function X$e(e,t,r,i,n){let s=t[0]-r[0],o=t[1]-r[1];const a=(i[0]*s+i[1]*o)*(n-1);return s=i[0]*a,o=i[1]*a,e[0]=t[0]+s,e[1]=t[1]+o,e}const exe=ZS,MP=dv,txe=hZ,rxe=pZ,ixe=Qv,nxe=JS,sxe=fZ;Object.freeze(Object.defineProperty({__proto__:null,copy:cv,set:Rr,add:dZ,subtract:dv,multiply:hZ,divide:pZ,ceil:F$e,floor:N$e,min:D$e,max:j$e,round:V$e,scale:Yv,scaleAndAdd:z$e,distance:Qv,squaredDistance:JS,length:ZS,squaredLength:fZ,negate:mZ,inverse:U$e,normalize:EL,dot:yZ,cross:gZ,lerp:G$e,random:B$e,transformMat2:q$e,transformMat2d:Ho,transformMat3:W$e,transformMat4:H$e,rotate:J$e,angle:Z$e,str:Y$e,exactEquals:Q$e,equals:K$e,projectAndScale:X$e,len:exe,sub:MP,mul:txe,div:rxe,dist:ixe,sqrDist:nxe,sqrLen:sxe},Symbol.toStringTag,{value:"Module"}));function Yt(){return[0,0]}function oxe(e){return[e[0],e[1]]}function Kv(e,t){return[e,t]}function axe(e){const t=Yt(),r=Math.min(2,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function lxe(e,t){return new Float64Array(e,t,2)}function vZ(){return Yt()}function wZ(){return Kv(1,1)}function _Z(){return Kv(1,0)}function bZ(){return Kv(0,1)}const uxe=vZ(),cxe=wZ(),dxe=_Z(),hxe=bZ();Object.freeze(Object.defineProperty({__proto__:null,create:Yt,clone:oxe,fromValues:Kv,fromArray:axe,createView:lxe,zeros:vZ,ones:wZ,unitX:_Z,unitY:bZ,ZEROS:uxe,ONES:cxe,UNIT_X:dxe,UNIT_Y:hxe},Symbol.toStringTag,{value:"Module"}));const SZ=96,$Z=39.37,pxe=180/Math.PI;function xZ(e){return e.wkid?e:e.spatialReference||Te.WGS84}function IP(e,t){return t.type?Rr(e,t.x,t.y):cv(e,t)}function EZ(e){return Em(e)}function h0(e,t){const r=Math.max(1,t[0]),i=Math.max(1,t[1]);return Math.max(e.width/r,e.height/i)*Sxe(e.spatialReference)}async function Mg(e,t,r,i){let n,s;if(!e||Array.isArray(e)&&!e.length)return null;if(de.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const a=e.every(h=>"attributes"in h),l=e.some(h=>!h.geometry);let c=e;if(a&&l&&t&&t.allLayerViews){const h=new Map;for(const g of e){const v=g.layer,_=h.get(v)||[],w=g.attributes[v.objectIdField];w!=null&&_.push(w),h.set(v,_)}const f=[];h.forEach((g,v)=>{const _=t.allLayerViews.find(w=>w.layer.id===v.id);if("queryFeatures"in _){const w=v.createQuery();w.objectIds=g,w.returnGeometry=!0,f.push(_.queryFeatures(w))}});const m=await Promise.all(f),y=[];for(const g of m)if(g&&g.features&&g.features.length)for(const v of g.features)I(v.geometry)&&y.push(v.geometry);c=y}for(const h of c)i=await Mg(h,t,r,i);return i}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")n=new ye(e);else if(e instanceof on)n=e;else if("geometry"in e){if(e.geometry)n=e.geometry;else if(e.layer){const a=e.layer,l=t.allLayerViews.find(c=>c.layer.id===a.id);if("queryFeatures"in l){const c=a.createQuery();c.objectIds=[e.attributes[a.objectIdField]],c.returnGeometry=!0;const h=await l.queryFeatures(c);n=zO(h,"features",0,"geometry")}}}if(R(n)||(s=n.type==="point"?new Je({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference}):n.extent,!s))return null;dc()||_l(s.spatialReference,r)||await hc();const o=Tm(s,r);return o?i=i?i.union(o):o:null}function fxe(e){if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&e.layer&&e.layer.minScale&&e.layer.maxScale){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every(t=>"layer"in t)){let t=0,r=0;for(const i of e){const n=i.layer;n&&n.minScale&&n.maxScale&&(t=n.minScale<t?n.minScale:t,r=n.maxScale>r?n.maxScale:r)}return t&&r?{min:t,max:r}:null}}}function VE(e,t){return Hr(xZ(e),t)?e:Tm(e,t)}async function mxe(e,t){if(!e||!t)return new po({targetGeometry:new ye,scale:0,rotation:0});let r=t.spatialReference;const{constraints:i,padding:n,viewpoint:s,size:o}=t,a=[n?o[0]-n.left-n.right:o[0],n?o[1]-n.top-n.bottom:o[1]];let l=null;e instanceof po?l=e:e.viewpoint?l=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(l=e.target);let c=null;l&&l.targetGeometry?c=l.targetGeometry:e instanceof Je?c=e:(e||e&&("center"in e||"extent"in e||"target"in e))&&(c=await Mg(e.center,t,r)||await Mg(e.extent,t,r)||await Mg(e.target,t,r)||await Mg(e,t,r)),!c&&s&&s.targetGeometry?c=s.targetGeometry:!c&&t.extent&&(c=t.extent),r||(r=xZ(t.spatialReference||t.extent||c)),dc()||Hr(c.spatialReference,r)||_l(c,r)||await hc();const h=VE(c.center?c.center:c,r);let f=null;if(l&&I(l.targetGeometry)&&l.targetGeometry.type==="point")f=l.scale;else if("scale"in e&&e.scale)f=e.scale;else if("zoom"in e&&e.zoom!==-1&&i&&i.effectiveLODs)f=i.zoomToScale(e.zoom);else if(Array.isArray(c)||c.type==="point"||c.type==="extent"&&c.width===0&&c.height===0){const v=VE(t.extent,r);f=I(v)?h0(v,a):t.extent?h0(t.extent,a):s.scale}else f=h0(VE(c.extent,r),a);const m=fxe(e);m&&(m.min&&m.min>f?f=m.min:m.max&&m.max<f&&(f=m.max));let y=0;l?y=l.rotation:e.hasOwnProperty("rotation")?y=e.rotation:s&&(y=s.rotation);let g=new po({targetGeometry:h,scale:f,rotation:y});return i&&(g=i.fit(g),i.constrainByGeometry(g),i.rotationEnabled||(g.rotation=y)),g}function wo(e,t){const r=e.targetGeometry,i=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function yxe(e,t,r){return r?Rr(e,.5*(t[0]-r.right+r.left),.5*(t[1]-r.bottom+r.top)):Yv(e,t,.5)}const gxe=function(){const e=Yt();return function(t,r,i){const n=r.targetGeometry;IP(e,n);const s=.5*jm(r);return t.xmin=e[0]-s*i[0],t.ymin=e[1]-s*i[1],t.xmax=e[0]+s*i[0],t.ymax=e[1]+s*i[1],t.spatialReference=n.spatialReference,t}}();function vxe(e,t,r,i,n){return TL(e,t,r.center),e.scale=h0(r,i),n&&n.constraints&&n.constraints.constrain(e),e}function wxe(e,t,r,i){return LP(e,t,r,i),bP(e,e)}const TZ=function(){const e=Yt();return function(t,r,i){return MP(t,$xe(t,r),yxe(e,r,i))}}(),_xe=function(){const e=oc(),t=Yt();return function(r,i,n,s){const o=jm(i),a=CP(i);return Rr(t,o,o),jJ(e,t),Jv(e,e,a),im(e,e,TZ(t,n,s)),im(e,e,[0,s.top-s.bottom]),Rr(r,e[4],e[5])}}();function jm(e){return e.scale*bxe(e.targetGeometry)}function bxe(e){return I(e)&&ci(e.spatialReference)?1/(EZ(e.spatialReference)*$Z*SZ):1}function CP(e){return b3(e.rotation)||0}function Sxe(e){return ci(e)?EZ(e)*$Z*SZ:1}function $xe(e,t){return Yv(e,t,.5)}const kP=function(){const e=Yt(),t=Yt(),r=Yt();return function(i,n,s,o,a,l){return mZ(e,n),Yv(t,s,.5*l),Rr(r,1/o*l,-1/o*l),SP(i,t),a&&Jv(i,i,a),S$(i,i,r),im(i,i,e),i}}(),LP=function(){const e=Yt();return function(t,r,i,n){const s=jm(r),o=CP(r);return IP(e,r.targetGeometry),kP(t,e,i,s,o,n)}}(),xxe=function(){const e=Yt();return function(t,r,i,n){const s=jm(r);return IP(e,r.targetGeometry),kP(t,e,i,s,0,n)}}();function Exe(e){const t=ho(e);return t?t.valid[1]-t.valid[0]:0}function Txe(e,t){return Math.round(Exe(e)/t)}const Mxe=function(){const e=Yt(),t=Yt(),r=[0,0,0];return function(i,n,s){dv(e,i,n),EL(e,e),dv(t,i,s),EL(t,t),gZ(r,e,t);let o=Math.acos(yZ(e,t)/(ZS(e)*ZS(t)))*pxe;return r[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),Ixe=function(){const e=Yt();return function(t,r,i,n){const s=t.targetGeometry;return wo(t,r),_xe(e,r,i,n),s.x+=e[0],s.y+=e[1],t}}(),TL=function(e,t,r){wo(e,t);const i=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e},Cxe=function(){const e=Yt();return function(t,r,i,n,s){s||(s="center"),MP(e,i,n),Yv(e,e,.5);const o=e[0],a=e[1];switch(s){case"center":Rr(e,0,0);break;case"left":Rr(e,-o,0);break;case"top":Rr(e,0,a);break;case"right":Rr(e,o,0);break;case"bottom":Rr(e,0,-a);break;case"top-left":Rr(e,-o,a);break;case"bottom-left":Rr(e,-o,-a);break;case"top-right":Rr(e,o,a);break;case"bottom-right":Rr(e,o,-a)}return T$(t,r,e),t}}();function lje(e,t,r){return wo(e,t),e.rotation+=r,e}function kxe(e,t,r){return wo(e,t),e.rotation=r,e}const Lxe=function(){const e=Yt();return function(t,r,i,n,s){return wo(t,r),isNaN(i)||i===0||(IZ(e,n,r,s),t.scale=r.scale*i,CZ(e,e,t,s),T$(t,t,Rr(e,e[0]-n[0],n[1]-e[1]))),t}}();function Mj(e,t,r){return wo(e,t),e.scale=r,e}const MZ=function(){const e=Yt();return function(t,r,i,n,s,o){return wo(t,r),isNaN(i)||i===0||(IZ(e,s,r,o),t.scale=r.scale*i,t.rotation+=n,CZ(e,e,t,o),T$(t,t,Rr(e,e[0]-s[0],s[1]-e[1]))),t}}(),uje=function(){const e=Yt(),t=Yt();return function(r,i,n,s,o,a,l){return TZ(t,a,l),dZ(e,o,t),s?MZ(r,i,n,s,e,a):Lxe(r,i,n,e,a)}}(),IZ=function(){const e=oc();return function(t,r,i,n){return Ho(t,r,wxe(e,i,n,1))}}(),CZ=function(){const e=oc();return function(t,r,i,n){return Ho(t,r,LP(e,i,n,1))}}(),T$=function(){const e=Yt(),t=oc();return function(r,i,n){wo(r,i);const s=jm(i),o=r.targetGeometry;return DJ(t,CP(i)),S$(t,t,Kv(s,s)),Ho(e,n,t),o.x+=e[0],o.y+=e[1],r}}();class Oxe{constructor(t,r,i,n){const s=t.targetGeometry,o=r.targetGeometry;n?typeof n=="string"&&(n=O$e(n)||ns.ease):n=ns.ease,this.easing=n,this.duration=i,this.sCenterX=s.x,this.sCenterY=s.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=o.x,this.tCenterY=o.y,this.tScale=r.scale,this.tRotation=r.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(t,r){const i=this.easing(r);let n,s,o,a;r>=1?(n=this.tCenterX,s=this.tCenterY,o=this.tRotation,a=this.tScale):(n=this.sCenterX+i*this.dCenterX,s=this.sCenterY+i*this.dCenterY,o=this.sRotation+i*this.dRotation,a=this.sScale+i*this.dScale),t.targetGeometry.x=n,t.targetGeometry.y=s,t.scale=a,t.rotation=o}}let Ba=class extends le{constructor(e){super(e),this.duration=200,this.transition=null,this.easing=ns.ease,this.view=null,this.viewpoint=null,this.viewpoint=new po({targetGeometry:new ye,scale:0,rotation:0}),this._updateTask=zf({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(e,t,r){this.stop();const i=this.viewpoint;wo(i,t),this.transition=new Oxe(this.viewpoint,e.target,r&&r.duration||this.duration,r&&r.easing||this.easing);const n=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const r=new xL({target:e.clone()}),i=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(i,i),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const t=this.animation;if(t&&t.state!==xL.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const r=(performance.now()-this._startTime)/this.transition.duration,i=r>=1;this.transition.applyRatio(this.viewpoint,r),i&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};u([d()],Ba.prototype,"animation",void 0),u([d()],Ba.prototype,"duration",void 0),u([d()],Ba.prototype,"transition",void 0),u([d()],Ba.prototype,"easing",void 0),u([d()],Ba.prototype,"view",void 0),u([d()],Ba.prototype,"viewpoint",void 0),Ba=u([E("esri.views.2d.AnimationManager")],Ba);const Axe=Ba;class Pxe{constructor(t){this.view=t,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{this._updateRequested=!1;const{basemapView:r,graphicsView:i,labelManager:n,layerViews:s,state:{id:o}}=this.view;r.baseLayerViews.forEach(this._updateLayerView,this),s.forEach(this._updateLayerView,this),r.referenceLayerViews.forEach(this._updateLayerView,this),I(n)&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),I(i)&&(i.lastUpdateId!==o&&(i.viewChange(),i.lastUpdateId=o),i.updateRequested&&i.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=G(()=>t.stationary,r=>{this.stationary=r,this.requestFrame()}),this._frameTaskHandle=zf(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){const r=this.view.state,i=t.lastUpdateId;i!=null&&(this.stationary||t.moving)||(t.moving=!0,t.moveStart()),i!==r.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=r.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews.forEach(this._updateLayerView,this)}}function ur(){return Promise.all([V(()=>import("./webglDeps.ecebbaa3.js"),["webglDeps.ecebbaa3.js","VertexArrayObject.527d5600.js","Texture.8d083704.js","enums.c60b1dad.js","ProgramTemplate.a02593e7.js","programUtils.0b81e904.js"],import.meta.url),V(()=>import("./mapViewDeps.68c8dd7e.js"),["mapViewDeps.68c8dd7e.js","CIMSymbolHelper.37e0b825.js","BidiEngine.95523203.js","enums.9bd521fc.js","alignmentUtils.84250e5d.js","number.6e30c64a.js","GeometryUtils.f3664fe1.js","utils.fa9cc6c4.js","Utils.0c18ff61.js","enums.c60b1dad.js","Texture.8d083704.js","VertexElementDescriptor.2400a91d.js","MaterialKey.146e5042.js","WGLContainer.91a92d50.js","pixelUtils.f7c7bbd7.js","VertexArrayObject.527d5600.js","ProgramTemplate.a02593e7.js","StyleDefinition.d46cb482.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","earcut.f65e2fcc.js","enums.58eeda20.js","programUtils.0b81e904.js","Rasterizer.ee0897d5.js","cimAnalyzer.647bc67f.js","quantizationUtils.d80604ad.js","commonjsHelpers.ce2b5698.js","imageutils.014d0c0c.js","Matcher.9194ab46.js","visualVariablesUtils.ebcd76ea.js","visualVariablesUtils.64f629b2.js","tileUtils.882bb3ba.js","TileClipper.363cae3c.js","Geometry.f2d62961.js","ExpandedCIM.fb018184.js","CircularArray.90fbd3f7.js","requestImageUtils.fed49f3c.js","ComputedAttributeStorage.bc2407ee.js","centroid.e2572cbc.js","BaseGraphicContainer.e4112696.js","normalizeUtilsSync.d5715e9a.js","projectionSupport.91dd2487.js","json.8bd707cf.js","FeatureContainer.61e4f1fd.js","TileContainer.fae2730d.js","schemaUtils.a832a97d.js","createSymbolSchema.663f5f56.js","MD5.7323a015.js","util.b952acad.js","vec3f32.ca7a14c1.js","GraphicContainer.0c1125c0.js"],import.meta.url)])}const Sy=()=>ur().then(()=>V(()=>import("./TileLayerView2D.06c1c426.js"),["TileLayerView2D.06c1c426.js","imageUtils.582a1876.js","BitmapTileContainer.f5690242.js","Bitmap.2a22a6f0.js","utils.fa9cc6c4.js","Utils.0c18ff61.js","number.6e30c64a.js","enums.9bd521fc.js","enums.c60b1dad.js","Texture.8d083704.js","VertexElementDescriptor.2400a91d.js","MaterialKey.146e5042.js","alignmentUtils.84250e5d.js","TileContainer.fae2730d.js","WGLContainer.91a92d50.js","pixelUtils.f7c7bbd7.js","VertexArrayObject.527d5600.js","ProgramTemplate.a02593e7.js","StyleDefinition.d46cb482.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","earcut.f65e2fcc.js","LayerView.9e9b7d7f.js","RefreshableLayerView.523f621c.js","drapedUtils.20055e12.js"],import.meta.url)),yw=()=>ur().then(()=>V(()=>import("./FeatureLayerView2D.2a9a08b5.js"),["FeatureLayerView2D.2a9a08b5.js","enums.9bd521fc.js","LayerView.9e9b7d7f.js","utils.fa9cc6c4.js","Utils.0c18ff61.js","number.6e30c64a.js","enums.c60b1dad.js","Texture.8d083704.js","VertexElementDescriptor.2400a91d.js","MaterialKey.146e5042.js","alignmentUtils.84250e5d.js","schemaUtils.a832a97d.js","visualVariablesUtils.64f629b2.js","createSymbolSchema.663f5f56.js","CIMSymbolHelper.37e0b825.js","BidiEngine.95523203.js","GeometryUtils.f3664fe1.js","cimAnalyzer.647bc67f.js","quantizationUtils.d80604ad.js","ExpandedCIM.fb018184.js","MD5.7323a015.js","util.b952acad.js","popupUtils.2c4cd727.js","RefreshableLayerView.523f621c.js"],import.meta.url)),Ij={"base-dynamic":()=>ur().then(()=>V(()=>import("./BaseDynamicLayerView2D.6be6d585.js"),["BaseDynamicLayerView2D.6be6d585.js","BitmapContainer.16955c1c.js","WGLContainer.91a92d50.js","enums.c60b1dad.js","pixelUtils.f7c7bbd7.js","utils.fa9cc6c4.js","Utils.0c18ff61.js","number.6e30c64a.js","enums.9bd521fc.js","Texture.8d083704.js","VertexElementDescriptor.2400a91d.js","MaterialKey.146e5042.js","alignmentUtils.84250e5d.js","VertexArrayObject.527d5600.js","ProgramTemplate.a02593e7.js","StyleDefinition.d46cb482.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","earcut.f65e2fcc.js","LayerView.9e9b7d7f.js","ExportStrategy.c15bbef6.js","Bitmap.2a22a6f0.js","RefreshableLayerView.523f621c.js"],import.meta.url)),"base-tile":Sy,"bing-maps":Sy,csv:yw,"geo-rss":()=>ur().then(()=>V(()=>import("./GeoRSSLayerView2D.940e1d53.js"),["GeoRSSLayerView2D.940e1d53.js","LayerView.9e9b7d7f.js","utils.fa9cc6c4.js","Utils.0c18ff61.js","number.6e30c64a.js","enums.9bd521fc.js","enums.c60b1dad.js","Texture.8d083704.js","VertexElementDescriptor.2400a91d.js","MaterialKey.146e5042.js","alignmentUtils.84250e5d.js","GraphicContainer.0c1125c0.js","BaseGraphicContainer.e4112696.js","CIMSymbolHelper.37e0b825.js","BidiEngine.95523203.js","GeometryUtils.f3664fe1.js","normalizeUtilsSync.d5715e9a.js","projectionSupport.91dd2487.js","json.8bd707cf.js","VertexArrayObject.527d5600.js","FeatureContainer.61e4f1fd.js","TileContainer.fae2730d.js","WGLContainer.91a92d50.js","pixelUtils.f7c7bbd7.js","ProgramTemplate.a02593e7.js","StyleDefinition.d46cb482.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","earcut.f65e2fcc.js","visualVariablesUtils.ebcd76ea.js","visualVariablesUtils.64f629b2.js","Matcher.9194ab46.js","tileUtils.882bb3ba.js","TileClipper.363cae3c.js","Geometry.f2d62961.js","cimAnalyzer.647bc67f.js","quantizationUtils.d80604ad.js","ExpandedCIM.fb018184.js","schemaUtils.a832a97d.js","createSymbolSchema.663f5f56.js","MD5.7323a015.js","util.b952acad.js","ComputedAttributeStorage.bc2407ee.js","centroid.e2572cbc.js","vec3f32.ca7a14c1.js"],import.meta.url)),feature:yw,geojson:yw,graphics:()=>ur().then(()=>V(()=>import("./GraphicsLayerView2D.b4b34274.js"),["GraphicsLayerView2D.b4b34274.js","LayerView.9e9b7d7f.js","utils.fa9cc6c4.js","Utils.0c18ff61.js","number.6e30c64a.js","enums.9bd521fc.js","enums.c60b1dad.js","Texture.8d083704.js","VertexElementDescriptor.2400a91d.js","MaterialKey.146e5042.js","alignmentUtils.84250e5d.js","GraphicContainer.0c1125c0.js","BaseGraphicContainer.e4112696.js","CIMSymbolHelper.37e0b825.js","BidiEngine.95523203.js","GeometryUtils.f3664fe1.js","normalizeUtilsSync.d5715e9a.js","projectionSupport.91dd2487.js","json.8bd707cf.js","VertexArrayObject.527d5600.js","FeatureContainer.61e4f1fd.js","TileContainer.fae2730d.js","WGLContainer.91a92d50.js","pixelUtils.f7c7bbd7.js","ProgramTemplate.a02593e7.js","StyleDefinition.d46cb482.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","earcut.f65e2fcc.js","visualVariablesUtils.ebcd76ea.js","visualVariablesUtils.64f629b2.js","Matcher.9194ab46.js","tileUtils.882bb3ba.js","TileClipper.363cae3c.js","Geometry.f2d62961.js","cimAnalyzer.647bc67f.js","quantizationUtils.d80604ad.js","ExpandedCIM.fb018184.js","schemaUtils.a832a97d.js","createSymbolSchema.663f5f56.js","MD5.7323a015.js","util.b952acad.js","ComputedAttributeStorage.bc2407ee.js","centroid.e2572cbc.js","vec3f32.ca7a14c1.js"],import.meta.url)),group:()=>ur().then(()=>V(()=>import("./GroupLayerView2D.1c66c208.js"),["GroupLayerView2D.1c66c208.js","GroupContainer.1961a281.js","WGLContainer.91a92d50.js","enums.c60b1dad.js","pixelUtils.f7c7bbd7.js","utils.fa9cc6c4.js","Utils.0c18ff61.js","number.6e30c64a.js","enums.9bd521fc.js","Texture.8d083704.js","VertexElementDescriptor.2400a91d.js","MaterialKey.146e5042.js","alignmentUtils.84250e5d.js","VertexArrayObject.527d5600.js","ProgramTemplate.a02593e7.js","StyleDefinition.d46cb482.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","earcut.f65e2fcc.js","LayerView.9e9b7d7f.js"],import.meta.url)),imagery:()=>ur().then(()=>V(()=>import("./ImageryLayerView2D.05834790.js"),["ImageryLayerView2D.05834790.js","RasterVFDisplayObject.938c13dc.js","VertexArrayObject.527d5600.js","Texture.8d083704.js","enums.c60b1dad.js","VertexElementDescriptor.2400a91d.js","dataUtils.ed1da215.js","pixelUtils.f7c7bbd7.js","WGLContainer.91a92d50.js","utils.fa9cc6c4.js","Utils.0c18ff61.js","number.6e30c64a.js","enums.9bd521fc.js","MaterialKey.146e5042.js","alignmentUtils.84250e5d.js","ProgramTemplate.a02593e7.js","StyleDefinition.d46cb482.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","earcut.f65e2fcc.js","LayerView.9e9b7d7f.js","BaseGraphicContainer.e4112696.js","CIMSymbolHelper.37e0b825.js","BidiEngine.95523203.js","GeometryUtils.f3664fe1.js","normalizeUtilsSync.d5715e9a.js","projectionSupport.91dd2487.js","json.8bd707cf.js","FeatureContainer.61e4f1fd.js","TileContainer.fae2730d.js","visualVariablesUtils.ebcd76ea.js","visualVariablesUtils.64f629b2.js","Matcher.9194ab46.js","tileUtils.882bb3ba.js","TileClipper.363cae3c.js","Geometry.f2d62961.js","cimAnalyzer.647bc67f.js","quantizationUtils.d80604ad.js","ExpandedCIM.fb018184.js","schemaUtils.a832a97d.js","createSymbolSchema.663f5f56.js","MD5.7323a015.js","util.b952acad.js","ComputedAttributeStorage.bc2407ee.js","centroid.e2572cbc.js","vec3f32.ca7a14c1.js","HighlightGraphicContainer.75c398f2.js","BitmapContainer.16955c1c.js","Bitmap.2a22a6f0.js","ExportStrategy.c15bbef6.js","rasterProjectionHelper.813268f1.js","popupUtils.2c4cd727.js","RefreshableLayerView.523f621c.js"],import.meta.url)),"imagery-tile":()=>ur().then(()=>V(()=>import("./ImageryTileLayerView2D.e156b1bd.js"),["ImageryTileLayerView2D.e156b1bd.js","RasterVFDisplayObject.938c13dc.js","VertexArrayObject.527d5600.js","Texture.8d083704.js","enums.c60b1dad.js","VertexElementDescriptor.2400a91d.js","dataUtils.ed1da215.js","pixelUtils.f7c7bbd7.js","WGLContainer.91a92d50.js","utils.fa9cc6c4.js","Utils.0c18ff61.js","number.6e30c64a.js","enums.9bd521fc.js","MaterialKey.146e5042.js","alignmentUtils.84250e5d.js","ProgramTemplate.a02593e7.js","StyleDefinition.d46cb482.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","earcut.f65e2fcc.js","LayerView.9e9b7d7f.js","TileContainer.fae2730d.js","RawBlockCache.e03880b9.js","rasterProjectionHelper.813268f1.js","util.b952acad.js","popupUtils.2c4cd727.js","RefreshableLayerView.523f621c.js"],import.meta.url)),kml:()=>ur().then(()=>V(()=>import("./KMLLayerView2D.230f9f78.js"),["KMLLayerView2D.230f9f78.js","kmlUtils.43cf96bf.js","Bitmap.2a22a6f0.js","utils.fa9cc6c4.js","Utils.0c18ff61.js","number.6e30c64a.js","enums.9bd521fc.js","enums.c60b1dad.js","Texture.8d083704.js","VertexElementDescriptor.2400a91d.js","MaterialKey.146e5042.js","alignmentUtils.84250e5d.js","BitmapContainer.16955c1c.js","WGLContainer.91a92d50.js","pixelUtils.f7c7bbd7.js","VertexArrayObject.527d5600.js","ProgramTemplate.a02593e7.js","StyleDefinition.d46cb482.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","earcut.f65e2fcc.js","LayerView.9e9b7d7f.js","GraphicContainer.0c1125c0.js","BaseGraphicContainer.e4112696.js","CIMSymbolHelper.37e0b825.js","BidiEngine.95523203.js","GeometryUtils.f3664fe1.js","normalizeUtilsSync.d5715e9a.js","projectionSupport.91dd2487.js","json.8bd707cf.js","FeatureContainer.61e4f1fd.js","TileContainer.fae2730d.js","visualVariablesUtils.ebcd76ea.js","visualVariablesUtils.64f629b2.js","Matcher.9194ab46.js","tileUtils.882bb3ba.js","TileClipper.363cae3c.js","Geometry.f2d62961.js","cimAnalyzer.647bc67f.js","quantizationUtils.d80604ad.js","ExpandedCIM.fb018184.js","schemaUtils.a832a97d.js","createSymbolSchema.663f5f56.js","MD5.7323a015.js","util.b952acad.js","ComputedAttributeStorage.bc2407ee.js","centroid.e2572cbc.js","vec3f32.ca7a14c1.js"],import.meta.url)),"map-image":()=>ur().then(()=>V(()=>import("./MapImageLayerView2D.02991a59.js"),["MapImageLayerView2D.02991a59.js","BitmapContainer.16955c1c.js","WGLContainer.91a92d50.js","enums.c60b1dad.js","pixelUtils.f7c7bbd7.js","utils.fa9cc6c4.js","Utils.0c18ff61.js","number.6e30c64a.js","enums.9bd521fc.js","Texture.8d083704.js","VertexElementDescriptor.2400a91d.js","MaterialKey.146e5042.js","alignmentUtils.84250e5d.js","VertexArrayObject.527d5600.js","ProgramTemplate.a02593e7.js","StyleDefinition.d46cb482.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","earcut.f65e2fcc.js","LayerView.9e9b7d7f.js","BaseGraphicContainer.e4112696.js","CIMSymbolHelper.37e0b825.js","BidiEngine.95523203.js","GeometryUtils.f3664fe1.js","normalizeUtilsSync.d5715e9a.js","projectionSupport.91dd2487.js","json.8bd707cf.js","FeatureContainer.61e4f1fd.js","TileContainer.fae2730d.js","visualVariablesUtils.ebcd76ea.js","visualVariablesUtils.64f629b2.js","Matcher.9194ab46.js","tileUtils.882bb3ba.js","TileClipper.363cae3c.js","Geometry.f2d62961.js","cimAnalyzer.647bc67f.js","quantizationUtils.d80604ad.js","ExpandedCIM.fb018184.js","schemaUtils.a832a97d.js","createSymbolSchema.663f5f56.js","MD5.7323a015.js","util.b952acad.js","ComputedAttributeStorage.bc2407ee.js","centroid.e2572cbc.js","vec3f32.ca7a14c1.js","HighlightGraphicContainer.75c398f2.js","ExportStrategy.c15bbef6.js","Bitmap.2a22a6f0.js","scaleUtils.b240b6a6.js","drapedUtils.20055e12.js","popupUtils.2c4cd727.js","RefreshableLayerView.523f621c.js"],import.meta.url)),"map-notes":()=>ur().then(()=>V(()=>import("./MapNotesLayerView2D.92fedc4c.js"),["MapNotesLayerView2D.92fedc4c.js","utils.fa9cc6c4.js","Utils.0c18ff61.js","number.6e30c64a.js","enums.9bd521fc.js","enums.c60b1dad.js","Texture.8d083704.js","VertexElementDescriptor.2400a91d.js","MaterialKey.146e5042.js","alignmentUtils.84250e5d.js","GroupContainer.1961a281.js","WGLContainer.91a92d50.js","pixelUtils.f7c7bbd7.js","VertexArrayObject.527d5600.js","ProgramTemplate.a02593e7.js","StyleDefinition.d46cb482.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","earcut.f65e2fcc.js","LayerView.9e9b7d7f.js","GraphicContainer.0c1125c0.js","BaseGraphicContainer.e4112696.js","CIMSymbolHelper.37e0b825.js","BidiEngine.95523203.js","GeometryUtils.f3664fe1.js","normalizeUtilsSync.d5715e9a.js","projectionSupport.91dd2487.js","json.8bd707cf.js","FeatureContainer.61e4f1fd.js","TileContainer.fae2730d.js","visualVariablesUtils.ebcd76ea.js","visualVariablesUtils.64f629b2.js","Matcher.9194ab46.js","tileUtils.882bb3ba.js","TileClipper.363cae3c.js","Geometry.f2d62961.js","cimAnalyzer.647bc67f.js","quantizationUtils.d80604ad.js","ExpandedCIM.fb018184.js","schemaUtils.a832a97d.js","createSymbolSchema.663f5f56.js","MD5.7323a015.js","util.b952acad.js","ComputedAttributeStorage.bc2407ee.js","centroid.e2572cbc.js","vec3f32.ca7a14c1.js"],import.meta.url)),media:()=>ur().then(()=>V(()=>import("./MediaLayerView2D.5f1c76fe.js"),["MediaLayerView2D.5f1c76fe.js","normalizeUtilsSync.d5715e9a.js","utils.fa9cc6c4.js","Utils.0c18ff61.js","number.6e30c64a.js","enums.9bd521fc.js","enums.c60b1dad.js","Texture.8d083704.js","VertexElementDescriptor.2400a91d.js","MaterialKey.146e5042.js","alignmentUtils.84250e5d.js","VertexArrayObject.527d5600.js","vec3f32.ca7a14c1.js","WGLContainer.91a92d50.js","pixelUtils.f7c7bbd7.js","ProgramTemplate.a02593e7.js","StyleDefinition.d46cb482.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","earcut.f65e2fcc.js","LayerView.9e9b7d7f.js"],import.meta.url)),"ogc-feature":()=>ur().then(()=>V(()=>import("./OGCFeatureLayerView2D.c9a5fb48.js"),["OGCFeatureLayerView2D.c9a5fb48.js","FeatureLayerView2D.2a9a08b5.js","enums.9bd521fc.js","LayerView.9e9b7d7f.js","utils.fa9cc6c4.js","Utils.0c18ff61.js","number.6e30c64a.js","enums.c60b1dad.js","Texture.8d083704.js","VertexElementDescriptor.2400a91d.js","MaterialKey.146e5042.js","alignmentUtils.84250e5d.js","schemaUtils.a832a97d.js","visualVariablesUtils.64f629b2.js","createSymbolSchema.663f5f56.js","CIMSymbolHelper.37e0b825.js","BidiEngine.95523203.js","GeometryUtils.f3664fe1.js","cimAnalyzer.647bc67f.js","quantizationUtils.d80604ad.js","ExpandedCIM.fb018184.js","MD5.7323a015.js","util.b952acad.js","popupUtils.2c4cd727.js","RefreshableLayerView.523f621c.js"],import.meta.url)),"open-street-map":Sy,route:()=>ur().then(()=>V(()=>import("./RouteLayerView2D.d1a3b34e.js"),["RouteLayerView2D.d1a3b34e.js","Stop.a4bfc546.js","LayerView.9e9b7d7f.js","utils.fa9cc6c4.js","Utils.0c18ff61.js","number.6e30c64a.js","enums.9bd521fc.js","enums.c60b1dad.js","Texture.8d083704.js","VertexElementDescriptor.2400a91d.js","MaterialKey.146e5042.js","alignmentUtils.84250e5d.js","GraphicContainer.0c1125c0.js","BaseGraphicContainer.e4112696.js","CIMSymbolHelper.37e0b825.js","BidiEngine.95523203.js","GeometryUtils.f3664fe1.js","normalizeUtilsSync.d5715e9a.js","projectionSupport.91dd2487.js","json.8bd707cf.js","VertexArrayObject.527d5600.js","FeatureContainer.61e4f1fd.js","TileContainer.fae2730d.js","WGLContainer.91a92d50.js","pixelUtils.f7c7bbd7.js","ProgramTemplate.a02593e7.js","StyleDefinition.d46cb482.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","earcut.f65e2fcc.js","visualVariablesUtils.ebcd76ea.js","visualVariablesUtils.64f629b2.js","Matcher.9194ab46.js","tileUtils.882bb3ba.js","TileClipper.363cae3c.js","Geometry.f2d62961.js","cimAnalyzer.647bc67f.js","quantizationUtils.d80604ad.js","ExpandedCIM.fb018184.js","schemaUtils.a832a97d.js","createSymbolSchema.663f5f56.js","MD5.7323a015.js","util.b952acad.js","ComputedAttributeStorage.bc2407ee.js","centroid.e2572cbc.js","vec3f32.ca7a14c1.js"],import.meta.url)),stream:()=>ur().then(()=>V(()=>import("./StreamLayerView2D.c1e2ee47.js"),["StreamLayerView2D.c1e2ee47.js","FeatureLayerView2D.2a9a08b5.js","enums.9bd521fc.js","LayerView.9e9b7d7f.js","utils.fa9cc6c4.js","Utils.0c18ff61.js","number.6e30c64a.js","enums.c60b1dad.js","Texture.8d083704.js","VertexElementDescriptor.2400a91d.js","MaterialKey.146e5042.js","alignmentUtils.84250e5d.js","schemaUtils.a832a97d.js","visualVariablesUtils.64f629b2.js","createSymbolSchema.663f5f56.js","CIMSymbolHelper.37e0b825.js","BidiEngine.95523203.js","GeometryUtils.f3664fe1.js","cimAnalyzer.647bc67f.js","quantizationUtils.d80604ad.js","ExpandedCIM.fb018184.js","MD5.7323a015.js","util.b952acad.js","popupUtils.2c4cd727.js","RefreshableLayerView.523f621c.js"],import.meta.url)),"subtype-group":()=>ur().then(()=>V(()=>import("./SubtypeGroupLayerView2D.3b4ecab6.js"),["SubtypeGroupLayerView2D.3b4ecab6.js","FeatureLayerView2D.2a9a08b5.js","enums.9bd521fc.js","LayerView.9e9b7d7f.js","utils.fa9cc6c4.js","Utils.0c18ff61.js","number.6e30c64a.js","enums.c60b1dad.js","Texture.8d083704.js","VertexElementDescriptor.2400a91d.js","MaterialKey.146e5042.js","alignmentUtils.84250e5d.js","schemaUtils.a832a97d.js","visualVariablesUtils.64f629b2.js","createSymbolSchema.663f5f56.js","CIMSymbolHelper.37e0b825.js","BidiEngine.95523203.js","GeometryUtils.f3664fe1.js","cimAnalyzer.647bc67f.js","quantizationUtils.d80604ad.js","ExpandedCIM.fb018184.js","MD5.7323a015.js","util.b952acad.js","popupUtils.2c4cd727.js","RefreshableLayerView.523f621c.js"],import.meta.url)),tile:Sy,"vector-tile":()=>ur().then(()=>V(()=>import("./VectorTileLayerView2D.eec5d9f2.js"),["VectorTileLayerView2D.eec5d9f2.js","enums.58eeda20.js","BidiEngine.95523203.js","enums.c60b1dad.js","Texture.8d083704.js","CIMSymbolHelper.37e0b825.js","enums.9bd521fc.js","alignmentUtils.84250e5d.js","number.6e30c64a.js","GeometryUtils.f3664fe1.js","VertexArrayObject.527d5600.js","config.ded6d251.js","TileContainer.fae2730d.js","utils.fa9cc6c4.js","Utils.0c18ff61.js","VertexElementDescriptor.2400a91d.js","MaterialKey.146e5042.js","WGLContainer.91a92d50.js","pixelUtils.f7c7bbd7.js","ProgramTemplate.a02593e7.js","StyleDefinition.d46cb482.js","GeometryUtils.b4d0dc88.js","earcut.f65e2fcc.js","StyleRepository.9c7eb0a7.js","Geometry.f2d62961.js","LayerView.9e9b7d7f.js","Bitmap.2a22a6f0.js","BitmapContainer.16955c1c.js"],import.meta.url)),wcs:()=>ur().then(()=>V(()=>import("./ImageryTileLayerView2D.e156b1bd.js"),["ImageryTileLayerView2D.e156b1bd.js","RasterVFDisplayObject.938c13dc.js","VertexArrayObject.527d5600.js","Texture.8d083704.js","enums.c60b1dad.js","VertexElementDescriptor.2400a91d.js","dataUtils.ed1da215.js","pixelUtils.f7c7bbd7.js","WGLContainer.91a92d50.js","utils.fa9cc6c4.js","Utils.0c18ff61.js","number.6e30c64a.js","enums.9bd521fc.js","MaterialKey.146e5042.js","alignmentUtils.84250e5d.js","ProgramTemplate.a02593e7.js","StyleDefinition.d46cb482.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","earcut.f65e2fcc.js","LayerView.9e9b7d7f.js","TileContainer.fae2730d.js","RawBlockCache.e03880b9.js","rasterProjectionHelper.813268f1.js","util.b952acad.js","popupUtils.2c4cd727.js","RefreshableLayerView.523f621c.js"],import.meta.url)),"web-tile":Sy,wfs:yw,wms:()=>ur().then(()=>V(()=>import("./WMSLayerView2D.c7eabe08.js"),["WMSLayerView2D.c7eabe08.js","BitmapContainer.16955c1c.js","WGLContainer.91a92d50.js","enums.c60b1dad.js","pixelUtils.f7c7bbd7.js","utils.fa9cc6c4.js","Utils.0c18ff61.js","number.6e30c64a.js","enums.9bd521fc.js","Texture.8d083704.js","VertexElementDescriptor.2400a91d.js","MaterialKey.146e5042.js","alignmentUtils.84250e5d.js","VertexArrayObject.527d5600.js","ProgramTemplate.a02593e7.js","StyleDefinition.d46cb482.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","earcut.f65e2fcc.js","LayerView.9e9b7d7f.js","ExportStrategy.c15bbef6.js","Bitmap.2a22a6f0.js","RefreshableLayerView.523f621c.js","ExportWMSImageParameters.5c208ab2.js"],import.meta.url)),wmts:()=>ur().then(()=>V(()=>import("./WMTSLayerView2D.f80814b9.js"),["WMTSLayerView2D.f80814b9.js","imageUtils.582a1876.js","BitmapTileContainer.f5690242.js","Bitmap.2a22a6f0.js","utils.fa9cc6c4.js","Utils.0c18ff61.js","number.6e30c64a.js","enums.9bd521fc.js","enums.c60b1dad.js","Texture.8d083704.js","VertexElementDescriptor.2400a91d.js","MaterialKey.146e5042.js","alignmentUtils.84250e5d.js","TileContainer.fae2730d.js","WGLContainer.91a92d50.js","pixelUtils.f7c7bbd7.js","VertexArrayObject.527d5600.js","ProgramTemplate.a02593e7.js","StyleDefinition.d46cb482.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","earcut.f65e2fcc.js","LayerView.9e9b7d7f.js","RefreshableLayerView.523f621c.js"],import.meta.url)),"line-of-sight":null,"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function Rxe(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new O(`${r}:view-not-supported`,`${t} is not supported in 2D`)}const Cj={hasLayerViewModule:e=>I(Ij[e.type]),importLayerView:e=>{const t=Ij[e.type];if(R(t))throw Rxe(e);return t(e)}};function Fxe(e,t){const{spatialReference:r}=t,i=[t.x,t.y];let n=Number.POSITIVE_INFINITY,s=0,o=0;const a=[0,0],l=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const c of l)for(let h=0;h<c.length-1;h++){fae(a,i,c,h);const f=Qv(i,a);f<n&&(n=f,s=a[0],o=a[1])}return{coordinate:new ye({x:s,y:o,spatialReference:r}),distance:n}}var ML;const Nxe=Z.getLogger("esri.views.MapView");let Id=ML=class extends le{constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(R(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Tm(this.geometry,this.spatialReference)}catch(e){return Nxe.error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(R(this.normalizedGeometry))return e;const r=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?N2(this.normalizedGeometry,r):l7(this.normalizedGeometry,r))return e;const{coordinate:i}=Fxe(this.normalizedGeometry,r);return i&&(e.targetGeometry=i),e}clone(){var e,t;return new ML({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};u([d({constructOnly:!0})],Id.prototype,"geometry",void 0),u([d({readOnly:!0})],Id.prototype,"normalizedGeometry",null),u([d({constructOnly:!0})],Id.prototype,"spatialReference",void 0),Id=ML=u([E("esri.views.2d.constraints.GeometryConstraint")],Id);var IL;let Ig=IL=class extends le{constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new IL({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};u([d()],Ig.prototype,"enabled",void 0),u([d()],Ig.prototype,"rotationEnabled",void 0),Ig=IL=u([E("esri.views.2d.constraints.RotationConstraint")],Ig);const kZ=Ig;var CL;let Ui=CL=class extends le{constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:r,maxScale:i,minZoom:n,maxZoom:s}=this,o=-1,a=-1,l=!1,c=!1;if(r!==0&&i!==0&&r<i&&([r,i]=[i,r]),!t||!t.length)return this._set("effectiveMinScale",r),void this._set("effectiveMaxScale",i);t=t.map(h=>h.clone()),t.sort((h,f)=>f.scale-h.scale),t.forEach((h,f)=>h.level=f);for(const h of t)!l&&r>0&&r>=h.scale&&(o=h.level,l=!0),!c&&i>0&&i>=h.scale&&(a=e?e.level:-1,c=!0),e=h;n===-1&&(n=r===0?0:o),s===-1&&(s=i===0?t.length-1:a),n=Math.max(n,0),n=Math.min(n,t.length-1),s=Math.max(s,0),s=Math.min(s,t.length-1),n>s&&([n,s]=[s,n]),r=t[n].scale,i=t[s].scale,t.splice(0,n),t.splice(s-n+1,t.length),t.forEach((h,f)=>{this._lodByScale[h.scale]=h,this._scales[f]=h.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",r),this._set("effectiveMaxScale",i)}constrain(e,t){if(t&&e.scale===t.scale)return e;const r=this.effectiveMinScale,i=this.effectiveMaxScale,n=e.targetGeometry,s=t&&t.targetGeometry,o=i!==0&&e.scale<i,a=r!==0&&e.scale>r;if(o||a){const l=a?r:i;if(s){const c=(l-t.scale)/(e.scale-t.scale);n.x=s.x+(n.x-s.x)*c,n.y=s.y+(n.y-s.y)*c}e.scale=l}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),r=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(r>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const r=Math.round(e-.5),i=Math.round(e);return t[i]+(i-e)*(t[r]-t[i])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let r,i;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let n=0;n<t.length-1;n++){if(r=t[n],i=t[n+1],i===e)return n+this.effectiveMinZoom+1;if(r>e&&i<e)return n+this.effectiveMinZoom+1-(e-i)/(r-i)}}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r-1)}clone(){return new CL({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,r)=>Math.abs(r-e)<=Math.abs(t-e)?r:t,this._scales[0])),this._lodByScale[e].scale}};u([d({readOnly:!0})],Ui.prototype,"effectiveLODs",void 0),u([d({readOnly:!0})],Ui.prototype,"effectiveMinZoom",void 0),u([d({readOnly:!0})],Ui.prototype,"effectiveMaxZoom",void 0),u([d({readOnly:!0})],Ui.prototype,"effectiveMinScale",void 0),u([d({readOnly:!0})],Ui.prototype,"effectiveMaxScale",void 0),u([d()],Ui.prototype,"lods",void 0),u([d()],Ui.prototype,"minZoom",void 0),u([d()],Ui.prototype,"maxZoom",void 0),u([d()],Ui.prototype,"minScale",void 0),u([d()],Ui.prototype,"maxScale",void 0),u([d()],Ui.prototype,"snapToZoom",void 0),Ui=CL=u([E("esri.views.2d.constraints.ZoomConstraint")],Ui);const LZ=Ui,Dxe={base:null,key:"type",typeMap:{extent:Je,polygon:ws}};let qt=class extends le{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null,this._set("_zoom",null),this._set("_rotation",null),this._set("_geometry",null)}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e;return this.commitProperty("_zoom"),this.commitProperty("_rotation"),this.commitProperty("_geometry"),((e=this._get("version"))!=null?e:0)+1}get _defaultLODs(){var r,i,n;const e=(i=(r=this.view)==null?void 0:r.defaultsFromMap)==null?void 0:i.tileInfo,t=(n=this.view)==null?void 0:n.spatialReference;return e&&t&&e.spatialReference.equals(t)?e.lods:null}get _geometry(){var e;return new Id({geometry:this.geometry,spatialReference:(e=this.view)==null?void 0:e.spatialReference})}get _rotation(){return new kZ({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),t=this.lods||this._defaultLODs,r=this.minZoom,i=this.maxZoom,n=this.minScale,s=this.maxScale,o=this.snapToZoom;return e&&e.lods===t&&e.minZoom===r&&e.maxZoom===i&&e.minScale===n&&e.maxScale===s&&e.snapToZoom===o?e:new LZ({lods:t,minZoom:r,maxZoom:i,minScale:n,maxScale:s,snapToZoom:o})}canZoomInTo(e){const t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};u([d({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],qt.prototype,"effectiveLODs",void 0),u([d({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],qt.prototype,"effectiveMinScale",void 0),u([d({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],qt.prototype,"effectiveMaxScale",void 0),u([d({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],qt.prototype,"effectiveMinZoom",void 0),u([d({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],qt.prototype,"effectiveMaxZoom",void 0),u([d({types:Dxe,value:null})],qt.prototype,"geometry",null),u([d({type:[lA]})],qt.prototype,"lods",void 0),u([d()],qt.prototype,"minScale",void 0),u([d()],qt.prototype,"maxScale",void 0),u([d()],qt.prototype,"minZoom",void 0),u([d()],qt.prototype,"maxZoom",void 0),u([d()],qt.prototype,"rotationEnabled",void 0),u([d()],qt.prototype,"snapToZoom",void 0),u([d()],qt.prototype,"view",void 0),u([d({readOnly:!0})],qt.prototype,"version",null),u([d()],qt.prototype,"_defaultLODs",null),u([d({type:Id})],qt.prototype,"_geometry",null),u([d({type:kZ})],qt.prototype,"_rotation",null),u([d({readOnly:!0,type:LZ})],qt.prototype,"_zoom",null),qt=u([E("esri.views.2d.MapViewConstraints")],qt);const OZ=qt;function jxe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function Vxe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function AZ(e,t,r,i,n,s,o,a,l,c){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=c,e}function PZ(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function zxe(e,t){if(e===t){const r=t[1],i=t[2],n=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=i,e[7]=n}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function Uxe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],f=h*o-a*c,m=-h*s+a*l,y=c*s-o*l;let g=r*f+i*m+n*y;return g?(g=1/g,e[0]=f*g,e[1]=(-h*i+n*c)*g,e[2]=(a*i-n*o)*g,e[3]=m*g,e[4]=(h*r-n*l)*g,e[5]=(-a*r+n*s)*g,e[6]=y*g,e[7]=(-c*r+i*l)*g,e[8]=(o*r-i*s)*g,e):null}function Gxe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8];return e[0]=o*h-a*c,e[1]=n*c-i*h,e[2]=i*a-n*o,e[3]=a*l-s*h,e[4]=r*h-n*l,e[5]=n*s-r*a,e[6]=s*c-o*l,e[7]=i*l-r*c,e[8]=r*o-i*s,e}function Bxe(e){const t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8];return t*(c*s-o*l)+r*(-c*n+o*a)+i*(l*n-s*a)}function OP(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],m=r[0],y=r[1],g=r[2],v=r[3],_=r[4],w=r[5],b=r[6],S=r[7],M=r[8];return e[0]=m*i+y*o+g*c,e[1]=m*n+y*a+g*h,e[2]=m*s+y*l+g*f,e[3]=v*i+_*o+w*c,e[4]=v*n+_*a+w*h,e[5]=v*s+_*l+w*f,e[6]=b*i+S*o+M*c,e[7]=b*n+S*a+M*h,e[8]=b*s+S*l+M*f,e}function kL(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],m=r[0],y=r[1];return e[0]=i,e[1]=n,e[2]=s,e[3]=o,e[4]=a,e[5]=l,e[6]=m*i+y*o+c,e[7]=m*n+y*a+h,e[8]=m*s+y*l+f,e}function RZ(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],m=Math.sin(r),y=Math.cos(r);return e[0]=y*i+m*o,e[1]=y*n+m*a,e[2]=y*s+m*l,e[3]=y*o-m*i,e[4]=y*a-m*n,e[5]=y*l-m*s,e[6]=c,e[7]=h,e[8]=f,e}function qxe(e,t,r){const i=r[0],n=r[1],s=r[2];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=s*t[6],e[7]=s*t[7],e[8]=s*t[8],e}function Wxe(e,t,r){const i=r[0],n=r[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e}function Hxe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function Jxe(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=-r,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Zxe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Yxe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function Qxe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=r+r,a=i+i,l=n+n,c=r*o,h=i*o,f=i*a,m=n*o,y=n*a,g=n*l,v=s*o,_=s*a,w=s*l;return e[0]=1-f-g,e[3]=h-w,e[6]=m+_,e[1]=h+w,e[4]=1-c-g,e[7]=y-v,e[2]=m-_,e[5]=y+v,e[8]=1-c-f,e}function Kxe(e,t){const r=t[0],i=t[1],n=t[2],s=t[4],o=t[5],a=t[6],l=t[8],c=t[9],h=t[10],f=h*o-a*c,m=-h*s+a*l,y=c*s-o*l,g=r*f+i*m+n*y;if(!g)return null;const v=1/g;return e[0]=f*v,e[1]=(-h*i+n*c)*v,e[2]=(a*i-n*o)*v,e[3]=m*v,e[4]=(h*r-n*l)*v,e[5]=(-a*r+n*s)*v,e[6]=y*v,e[7]=(-c*r+i*l)*v,e[8]=(o*r-i*s)*v,e}function Xxe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],f=t[9],m=t[10],y=t[11],g=t[12],v=t[13],_=t[14],w=t[15],b=r*a-i*o,S=r*l-n*o,M=r*c-s*o,T=i*l-n*a,k=i*c-s*a,N=n*c-s*l,F=h*v-f*g,q=h*_-m*g,z=h*w-y*g,Q=f*_-m*v,K=f*w-y*v,ce=m*w-y*_;let ie=b*ce-S*K+M*Q+T*z-k*q+N*F;return ie?(ie=1/ie,e[0]=(a*ce-l*K+c*Q)*ie,e[1]=(l*z-o*ce-c*q)*ie,e[2]=(o*K-a*z+c*F)*ie,e[3]=(n*K-i*ce-s*Q)*ie,e[4]=(r*ce-n*z+s*q)*ie,e[5]=(i*z-r*K-s*F)*ie,e[6]=(v*N-_*k+w*T)*ie,e[7]=(_*M-g*N-w*S)*ie,e[8]=(g*k-v*M+w*b)*ie,e):null}function eEe(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function tEe(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function rEe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function iEe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function FZ(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function nEe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function sEe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e}function oEe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function aEe(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],f=t[0],m=t[1],y=t[2],g=t[3],v=t[4],_=t[5],w=t[6],b=t[7],S=t[8];return Math.abs(r-f)<=$e*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-m)<=$e*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(n-y)<=$e*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(s-g)<=$e*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(o-v)<=$e*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-_)<=$e*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(l-w)<=$e*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(c-b)<=$e*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(h-S)<=$e*Math.max(1,Math.abs(h),Math.abs(S))}function lEe(e){const t=$e,r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8];return Math.abs(1-(r*r+s*s+l*l))<=t&&Math.abs(1-(i*i+o*o+c*c))<=t&&Math.abs(1-(n*n+a*a+h*h))<=t}const uEe=OP,cEe=FZ;Object.freeze(Object.defineProperty({__proto__:null,fromMat4:jxe,copy:Vxe,set:AZ,identity:PZ,transpose:zxe,invert:Uxe,adjoint:Gxe,determinant:Bxe,multiply:OP,translate:kL,rotate:RZ,scale:qxe,scaleByVec2:Wxe,fromTranslation:Hxe,fromRotation:Jxe,fromScaling:Zxe,fromMat2d:Yxe,fromQuat:Qxe,normalFromMat4Legacy:Kxe,normalFromMat4:Xxe,projection:eEe,str:tEe,frob:rEe,add:iEe,subtract:FZ,multiplyScalar:nEe,multiplyScalarAndAdd:sEe,exactEquals:oEe,equals:aEe,isOrthoNormal:lEe,mul:uEe,sub:cEe},Symbol.toStringTag,{value:"Module"}));function Y_(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function dEe(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function hEe(e,t,r,i,n,s,o,a,l){const c=new Float32Array(9);return c[0]=e,c[1]=t,c[2]=r,c[3]=i,c[4]=n,c[5]=s,c[6]=o,c[7]=a,c[8]=l,c}function pEe(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,create:Y_,clone:dEe,fromValues:hEe,createView:pEe},Symbol.toStringTag,{value:"Module"}));function NZ(){return new Float32Array(2)}function fEe(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function nm(e,t){const r=new Float32Array(2);return r[0]=e,r[1]=t,r}function mEe(e,t){return new Float32Array(e,t,2)}function DZ(){return NZ()}function jZ(){return nm(1,1)}function VZ(){return nm(1,0)}function zZ(){return nm(0,1)}const yEe=DZ(),gEe=jZ(),vEe=VZ(),wEe=zZ();Object.freeze(Object.defineProperty({__proto__:null,create:NZ,clone:fEe,fromValues:nm,createView:mEe,zeros:DZ,ones:jZ,unitX:VZ,unitY:zZ,ZEROS:yEe,ONES:gEe,UNIT_X:vEe,UNIT_Y:wEe},Symbol.toStringTag,{value:"Module"}));function _Ee(e){return e instanceof Float32Array&&e.length>=2}function bEe(e){return Array.isArray(e)&&e.length>=2}function zE(e){return _Ee(e)||bEe(e)}var LL;const $a=[0,0];let gu=LL=class extends B{constructor(e){super(e),this._viewpoint2D={center:Yt(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new Je,this.id=0,this.inverseTransform=oc(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=oc(),this.transformNoRotation=oc(),this.displayMat3=Y_(),this.displayViewMat3=Y_(),this.viewMat3=Y_(),this.viewMat2d=BS(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,r=e.targetGeometry;t.center[0]=r.x,t.center[1]=r.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=r.spatialReference}this._update()}copy(e){const t=this.size,r=this.viewpoint;return r&&t?(this.viewpoint=wo(r,e.viewpoint),this._set("size",cv(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new LL({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,r){return zE(t)?Ho(e,t,this.inverseTransform):($a[0]=t,$a[1]=r,Ho(e,$a,this.inverseTransform))}toScreen(e,t,r){return zE(t)?Ho(e,t,this.transform):($a[0]=t,$a[1]=r,Ho(e,$a,this.transform))}toScreenNoRotation(e,t,r){return zE(t)?Ho(e,t,this.transformNoRotation):($a[0]=t,$a[1]=r,Ho(e,$a,this.transformNoRotation))}getScreenTransform(e,t){const{center:r}=this._viewpoint2D,i=this._get("pixelRatio")||1,n=this._get("size");return kP(e,r,n,t,0,i),e}_update(){const{center:e,spatialReference:t,scale:r,rotation:i}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size"),o=new po({targetGeometry:new ye(e[0],e[1],t),scale:r,rotation:i});if(this._set("viewpoint",o),!s||!t||!r)return;this.resolution=jm(o),this.rotation=i,this.scale=r,this.spatialReference=t,cv(this.center,e);const a=s[0]!==0?2/s[0]:0,l=s[1]!==0?-2/s[1]:0;AZ(this.displayMat3,a,0,0,0,l,0,-1,1,1);const c=PZ(this.viewMat3),h=nm(s[0]/2,s[1]/2),f=nm(-s[0]/2,-s[1]/2),m=b3(i);kL(c,c,h),RZ(c,c,m),kL(c,c,f),OP(this.displayViewMat3,this.displayMat3,c);const y=SP(this.viewMat2d,h);return Jv(y,y,m),im(y,y,f),gxe(this.extent,o,s),LP(this.transform,o,s,n),bP(this.inverseTransform,this.transform),xxe(this.transformNoRotation,o,s,n),this.worldScreenWidth=Txe(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};u([d({readOnly:!0})],gu.prototype,"id",void 0),u([d({value:1,json:{write:!0}})],gu.prototype,"pixelRatio",null),u([d({json:{write:!0}})],gu.prototype,"size",null),u([d()],gu.prototype,"spatialReference",void 0),u([d({type:po,json:{write:!0}})],gu.prototype,"viewpoint",null),gu=LL=u([E("esri.views.2d.ViewState")],gu);const kj=gu;var OL,AL;let tl=OL=class extends le{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new OL({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};u([d()],tl.prototype,"left",void 0),u([d()],tl.prototype,"top",void 0),u([d()],tl.prototype,"right",void 0),u([d()],tl.prototype,"bottom",void 0),tl=OL=u([E("esri.views.2d.PaddedViewState.Padding")],tl);let Ip=AL=class extends kj{constructor(...e){super(...e),this.paddedViewState=new kj,this._updateContent=(()=>{const t=Yt();return()=>{const r=this._get("size"),i=this._get("padding");if(!r||!i)return;const n=this.paddedViewState;Rr(t,i.left+i.right,i.top+i.bottom),dv(t,r,t),cv(n.size,t);const s=n.viewpoint;s&&(this.viewpoint=s)}})(),this.own(G(()=>[this.size,this.padding],()=>this._updateContent(),Gf)),this.padding=new tl,this.size=[0,0]}set padding(e){this._set("padding",e||new tl)}set viewpoint(e){if(e){const t=e.clone();this.paddedViewState.viewpoint=e,Ixe(t,e,this._get("size"),this._get("padding"));const r=this._viewpoint2D,i=t.targetGeometry;r.center[0]=i.x,r.center[1]=i.y,r.rotation=t.rotation,r.scale=t.scale,r.spatialReference=i.spatialReference,this._update()}}clone(){return new AL({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};u([d()],Ip.prototype,"paddedViewState",void 0),u([d({type:tl})],Ip.prototype,"padding",null),u([d()],Ip.prototype,"viewpoint",null),Ip=AL=u([E("esri.views.2d.PaddedViewState")],Ip);const SEe=Ip;class $Ee{constructor(t,r){this.item=t,this.controller=r,this.promise=null}}class UZ{constructor(t){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new nS(t.peeker),this.process=t.process;const r=t.scheduler;t.priority&&I(r)&&(this._task=r.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(t){const r=this._controllers.get(t);r&&r.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(r=>t.push(r)),this._controllers.clear(),t.forEach(r=>r.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((r,i)=>t(i))}get(t){const r=this._deferreds.get(t);return r?r.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(t,r){const i=this.get(t);if(i)return i;const n=new AbortController;let s=null;r&&(s=vs(r,()=>n.abort()));const o=()=>{const h=this._processingItems.get(t);h&&h.controller.abort(),a(),c.reject(Ot())},a=()=>{l.remove(),I(s)&&s.remove(),this._deferreds.delete(t),this._controllers.delete(t),this._queue.remove(t),this._processingItems.delete(t),this._scheduleNext()},l=JO(n.signal,o),c=gl();return this._deferreds.set(t,c),this._controllers.set(t,n),c.promise.then(a,a),this._queue.push(t),this._scheduleNext(),c.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const t=[];this._processingItems.forEach(r=>t.push(r)),this._processingItems.clear();for(const r of t)this._queue.push(r.item),r.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=pm(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(r))}_processError(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(r))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(R(t))return;let r;const i=new AbortController,n=new $Ee(t,i);this._processingItems.set(t,n);try{r=this.process(t,i.signal)}catch(s){this._processError(n,s)}xl(r)?(n.promise=r,r.then(s=>this._processResult(n,s),s=>this._processError(n,s))):this._processResult(n,r)}get test(){return{update:t=>this.runTask(t)}}}function xEe(e,t){return e.length=0,t.forEach(r=>e.push(r)),e}const UE=new Set,gw=[],zh=new Map,Lj=[0,0];let jl=class extends le{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t}=this;this._queue=new UZ({concurrency:e,process:(r,i)=>{const n=this._keyToItem.get(r);return t(n,{signal:i})},peeker:r=>r.values().next().value})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e,t){const r=e.key.id+"-"+t;if(this.has(r))return this.get(r);const i=this._queue.push(r),n=()=>{this._keyToItem.delete(r),this.notifyChange("updating")};return this._keyToItem.set(r,e),i.then(n,n),this.notifyChange("updating"),i}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;e.forEach(c=>{const h=this._keyToItem.get(c),f=this.tileInfoView.getTileScale(h.key);zh.has(f)||(zh.set(f,[]),r=Math.max(f,r),i=Math.min(f,i)),zh.get(f).push(h.key),UE.add(f)});let n=this.state.scale;zh.has(n)||(xEe(gw,UE),gw.sort((c,h)=>c-h),n=gw.reduce((c,h)=>Math.abs(h-n)<Math.abs(c-n)?h:c,gw[0])),n=Math.min(n,r),n=Math.max(n,i);const s=zh.get(n),o=t.getClosestInfoForScale(n),a=o.getColumnForX(this.state.center[0]),l=o.getRowForY(this.state.center[1]);return s.sort((c,h)=>{const f=o.denormalizeCol(c.col,c.world),m=o.denormalizeCol(h.col,h.world);return Math.sqrt((a-f)*(a-f)+(l-c.row)*(l-c.row))-Math.sqrt((a-m)*(a-m)+(l-h.row)*(l-h.row))}),UE.clear(),zh.clear(),s[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,r=this.state.center;let i=Number.POSITIVE_INFINITY,n=null;return e.forEach(s=>{const o=this._keyToItem.get(s);t.getTileCoords(Lj,o.key);const a=Qv(Lj,r);a<i&&(i=a,n=o.key)}),n.id}};u([d({constructOnly:!0})],jl.prototype,"concurrency",void 0),u([d({constructOnly:!0})],jl.prototype,"process",void 0),u([d()],jl.prototype,"state",void 0),u([d({constructOnly:!0})],jl.prototype,"strategy",void 0),u([d({constructOnly:!0})],jl.prototype,"tileInfoView",void 0),u([d({readOnly:!0})],jl.prototype,"updating",null),jl=u([E("esri.views.2d.tiling.PagedTileQueue")],jl);class Wi{constructor(t,r,i,n){this.set(t,r,i,n)}static getId(t,r,i,n){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${r}/${i}/${n}`}get key(){return this}get id(){return this.toString()}set id(t){this.set(t)}get hash(){const t=4095&this.row,r=4095&this.col,i=63&this.level;return(3&this.world)<<30|r<<22|t<<8|i}acquire(t,r,i,n){this.set(t,r,i,n)}contains(t){const r=t.level-this.level;return this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new Wi(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,r,i,n){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[s,o,a,l]=t.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+t,this.row=+r,this.col=+i,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new Wi(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,r=this.row<<1,i=this.col<<1,n=this.world;return[new Wi(t,r,i,n),new Wi(t,r,i+1,n),new Wi(t,r+1,i,n),new Wi(t,r+1,i+1,n)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}Wi.pool=new yo(Wi,null,null,25,50);function Vl(e,t){return[e,t]}function Tc(e,t,r){return e[0]=t,e[1]=r,e}function EEe(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}const Cs=new Wi("0/0/0/0");class AP{constructor(t,r,i,n,s,o,a,l,c,h,f,m){this.level=t,this.resolution=r,this.scale=i,this.origin=n,this.first=s,this.last=o,this.size=a,this.norm=l,this.worldStart=c,this.worldEnd=h,this.worldSize=f,this.wrap=m}static create(t,r,i=null){const n=ho(t.spatialReference),s=r.origin||Vl(t.origin.x,t.origin.y),o=Vl(t.size[0]*r.resolution,t.size[1]*r.resolution),a=Vl(-1/0,-1/0),l=Vl(1/0,1/0),c=Vl(1/0,1/0);I(i)&&(Tc(a,Math.max(0,Math.floor((i.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-i.ymax)/o[1]))),Tc(l,Math.max(0,Math.floor((i.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-i.ymin)/o[1]))),Tc(c,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:h,rows:f}=r;let m,y,g,v;return!i&&h&&f&&(Tc(a,h[0],f[0]),Tc(l,h[1],f[1]),Tc(c,h[1]-h[0]+1,f[1]-f[0]+1)),t.isWrappable?(m=Vl(Math.ceil(Math.round((n.valid[1]-n.valid[0])/r.resolution)/t.size[0]),c[1]),y=Vl(Math.floor((n.origin[0]-s[0])/o[0]),a[1]),g=Vl(m[0]+y[0]-1,l[1]),v=!0):(y=a,g=l,m=c,v=!1),new AP(r.level,r.resolution,r.scale,s,a,l,c,o,y,g,m,v)}normalizeCol(t){if(!this.wrap)return t;const r=this.worldSize[0];return t<0?r-1-Math.abs((t+1)%r):t%r}denormalizeCol(t,r){return this.wrap?this.worldSize[0]*r+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,r,i=!1){Cs.set(r);const n=i?Cs.col:this.denormalizeCol(Cs.col,Cs.world),s=Cs.row;return EEe(t,this.getXForColumn(n),this.getYForRow(s+1),this.getXForColumn(n+1),this.getYForRow(s)),t}getTileCoords(t,r,i=!1){Cs.set(r);const n=i?Cs.col:this.denormalizeCol(Cs.col,Cs.world);return Array.isArray(t)?Tc(t,this.getXForColumn(n),this.getYForRow(Cs.row)):(t.x=this.getXForColumn(n),t.y=this.getYForRow(Cs.row)),t}}class sm{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}forEach(t,r){const{spans:i,lodInfo:n}=this,{level:s}=n;if(i.length!==0)for(const{row:o,colFrom:a,colTo:l}of i)for(let c=a;c<=l;c++)t.call(r,s,o,n.normalizeCol(c),n.getWorldForColumn(c))}}sm.pool=new yo(sm);class GE{constructor(t,r,i){this.row=t,this.colFrom=r,this.colTo=i}}const gt=new Wi("0/0/0/0");class PP{constructor(t,r,i,n,s,o,a,l){this.x=t,this.ymin=r,this.ymax=i,this.invM=n,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}static create(t,r){t[1]>r[1]&&([t,r]=[r,t]);const[i,n]=t,[s,o]=r,a=s-i,l=o-n,c=l!==0?a/l:0,h=(Math.ceil(n)-n)*c,f=(Math.floor(n)-n)*c;return new PP(i,Math.floor(n),Math.ceil(o),c,a<0?h:f,a<0?f:h,a<0?s:i,a<0?i:s)}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const mn=[[0,0],[0,0],[0,0],[0,0]],TEe=1e-6;class MEe{constructor(t,r=null){this.tileInfo=t,this.fullExtent=r,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};const i=t.lods.slice();i.sort((s,o)=>o.scale-s.scale);const n=this._lodInfos=i.map(s=>AP.create(t,s,r));i.forEach((s,o)=>{this._infoByLevel[s.level]=n[o],this._infoByScale[s.scale]=n[o],this.scales[o]=s.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,r,i=!1){gt.set(r);const n=this._infoByLevel[gt.level];return n?n.getTileBounds(t,gt,i):t}getTileCoords(t,r,i=!1){gt.set(r);const n=this._infoByLevel[gt.level];return n?n.getTileCoords(t,gt,i):t}getTileCoverage(t,r=192,i="closest"){const n=i==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),s=sm.pool.acquire(n),o=this._wrap;let a,l,c,h=1/0,f=-1/0;const m=s.spans;mn[0][0]=mn[0][1]=mn[1][1]=mn[3][0]=-r,mn[1][0]=mn[2][0]=t.size[0]+r,mn[2][1]=mn[3][1]=t.size[1]+r;for(const _ of mn)t.toMap(_,_),_[0]=n.getColumnForX(_[0]),_[1]=n.getRowForY(_[1]);const y=[];let g=3;for(let _=0;_<4;_++){if(mn[_][1]===mn[g][1]){g=_;continue}const w=PP.create(mn[_],mn[g]);h=Math.min(w.ymin,h),f=Math.max(w.ymax,f),y[w.ymin]===void 0&&(y[w.ymin]=[]),y[w.ymin].push(w),g=_}if(h==null||f==null||f-h>100)return null;let v=[];for(a=h;a<f;){y[a]!=null&&(v=v.concat(y[a])),l=1/0,c=-1/0;for(let _=v.length-1;_>=0;_--){const w=v[_];l=Math.min(l,w.getLeftCol()),c=Math.max(c,w.getRightCol())}if(l=Math.floor(l),c=Math.floor(c),a>=n.first[1]&&a<=n.last[1])if(o)if(n.size[0]<n.worldSize[0]){const _=Math.floor(c/n.worldSize[0]);for(let w=Math.floor(l/n.worldSize[0]);w<=_;w++)m.push(new GE(a,Math.max(n.getFirstColumnForWorld(w),l),Math.min(n.getLastColumnForWorld(w),c)))}else m.push(new GE(a,l,c));else l>n.last[0]||c<n.first[0]||(l=Math.max(l,n.first[0]),c=Math.min(c,n.last[0]),m.push(new GE(a,l,c)));a+=1;for(let _=v.length-1;_>=0;_--){const w=v[_];w.ymax>=a?w.incrRow():v.splice(_,1)}}return s}getTileParentId(t){gt.set(t);const r=this._infoByLevel[gt.level],i=this._lodInfos.indexOf(r)-1;return i<0?null:(this._getTileIdAtLOD(gt,this._lodInfos[i],gt),gt.id)}getTileResolution(t){const r=this._infoByLevel[typeof t=="object"?t.level:t];return r?r.resolution:-1}getTileScale(t){const r=this._infoByLevel[t.level];return r?r.scale:-1}intersects(t,r){gt.set(r);const i=this._infoByLevel[gt.level],n=t.lodInfo;if(n.resolution>i.resolution){this._getTileIdAtLOD(gt,n,gt);const o=n.denormalizeCol(gt.col,gt.world);for(const a of t.spans)if(a.row===gt.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(n.resolution<i.resolution){const[o,a,l,c]=t.spans.reduce((v,_)=>(v[0]=Math.min(v[0],_.row),v[1]=Math.max(v[1],_.row),v[2]=Math.min(v[2],_.colFrom),v[3]=Math.max(v[3],_.colTo),v),[1/0,-1/0,1/0,-1/0]),h=i.denormalizeCol(gt.col,gt.world),f=n.getColumnForX(i.getXForColumn(h)),m=n.getRowForY(i.getYForRow(gt.row)),y=n.getColumnForX(i.getXForColumn(h+1))-1,g=n.getRowForY(i.getYForRow(gt.row+1))-1;return!(f>c||y<l||m>a||g<o)}const s=n.denormalizeCol(gt.col,gt.world);return t.spans.some(o=>o.row===gt.row&&o.colFrom<=s&&o.colTo>=s)}normalizeBounds(t,r,i){if(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],this._wrap){const n=ho(this.tileInfo.spatialReference),s=-i*(n.valid[1]-n.valid[0]);t[0]+=s,t[2]+=s}return t}getSmallestInfoForScale(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>r[0])return this._infoByScale[r[0]];for(let i=1;i<r.length-1;i++)if(t>r[i]+TEe)return this._infoByScale[r[i-1]];return this._infoByScale[r[r.length-1]]}getClosestInfoForScale(t){const r=this.scales;return this._infoByScale[t]||(t=r.reduce((i,n)=>Math.abs(n-t)<Math.abs(i-t)?n:i,r[0])),this._infoByScale[t]}scaleToLevel(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let i=r.length-1;i>=0;i--)if(t<r[i])return i===r.length-1?this._infoByScale[r[r.length-1]].level:this._infoByScale[r[i]].level+(r[i]-t)/(r[i]-r[i+1]);return this._infoByScale[r[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}_getTileIdAtLOD(t,r,i){const n=this._infoByLevel[i.level];return t.set(i),r.resolution<n.resolution?null:(r.resolution===n.resolution||(t.level=r.level,t.col=Math.floor(i.col*n.resolution/r.resolution+.01),t.row=Math.floor(i.row*n.resolution/r.resolution+.01)),t)}}function IEe(e,t){return e.length=0,t.forEach(r=>e.push(r)),e}const BE=new Set,vw=[],Uh=new Map,Oj=[0,0];let qa=class extends le{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t,strategy:r}=this;this._queue=new UZ({concurrency:e,process:(i,n)=>{const s=this._keyToItem.get(i);return t(s,{signal:n})},peeker:r==="scale-first"?i=>this._peekByScaleFirst(i):i=>this._peekByCenterFirst(i)})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e){const t=e.key.id;if(this._queue.has(t))return this._queue.get(t);const r=this._queue.push(t),i=()=>{this._keyToItem.delete(t),this.notifyChange("updating")};return this._keyToItem.set(t,e),r.then(i,i),this.notifyChange("updating"),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;e.forEach(c=>{const h=this._keyToItem.get(c),f=this.tileInfoView.getTileScale(h.key);Uh.has(f)||(Uh.set(f,[]),r=Math.max(f,r),i=Math.min(f,i)),Uh.get(f).push(h.key),BE.add(f)});let n=this.state.scale;Uh.has(n)||(IEe(vw,BE),vw.sort((c,h)=>c-h),n=vw.reduce((c,h)=>Math.abs(h-n)<Math.abs(c-n)?h:c,vw[0])),n=Math.min(n,r),n=Math.max(n,i);const s=Uh.get(n),o=t.getClosestInfoForScale(n),a=o.getColumnForX(this.state.center[0]),l=o.getRowForY(this.state.center[1]);return s.sort((c,h)=>{const f=o.denormalizeCol(c.col,c.world),m=o.denormalizeCol(h.col,h.world);return Math.sqrt((a-f)*(a-f)+(l-c.row)*(l-c.row))-Math.sqrt((a-m)*(a-m)+(l-h.row)*(l-h.row))}),BE.clear(),Uh.clear(),s[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,r=this.state.center;let i=Number.POSITIVE_INFINITY,n=null;return e.forEach(s=>{const o=this._keyToItem.get(s);t.getTileCoords(Oj,o.key);const a=Qv(Oj,r);a<i&&(i=a,n=o.key)}),n.id}};u([d({constructOnly:!0})],qa.prototype,"concurrency",void 0),u([d({constructOnly:!0})],qa.prototype,"process",void 0),u([d()],qa.prototype,"state",void 0),u([d({constructOnly:!0})],qa.prototype,"strategy",void 0),u([d({constructOnly:!0})],qa.prototype,"tileInfoView",void 0),u([d({readOnly:!0})],qa.prototype,"updating",null),qa=u([E("esri.views.2d.tiling.TileQueue")],qa);const cje=qa;class CEe{constructor(t,r,i){this.maxSize=t,this.tileInfoView=r,this.removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const r=this._tilePerId.get(t);if(!r)return null;const i=r.key.level,n=this._tileKeysPerLevel[i];Aj(this._tilePerId,t);for(let s=0;s<n.length;s++)if(n[s].id===t){n.splice(s,1);break}return r.visible=!0,r}add(t){t.visible=!1;const r=t.key,i=r.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,t);const n=r.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(r)}prune(t,r,i){let n=this._tilePerId.size;if(n<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&s>=0;)s!==t&&(n=this._pruneAroundCenterTile(n,r,i,s)),s--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,r,i,t))}_pruneAroundCenterTile(t,r,i,n){const s=this._tileKeysPerLevel[n];if(!s||s.length===0)return t;const{size:o,origin:a}=this.tileInfoView.tileInfo,l=i*o[0],c=i*o[1],h=[0,0],f=[0,0];for(s.sort((m,y)=>(h[0]=a.x+l*(m.col+.5),h[1]=a.y-c*(m.row+.5),f[0]=a.x+l*(y.col+.5),f[1]=a.y-c*(y.row+.5),JS(h,r)-JS(f,r)));s.length>0;){const m=s.pop();if(this._removeTile(m.id),--t===this.maxSize)break}return t}_removeTile(t){const r=this._tilePerId.get(t);this.removedFunc&&this.removedFunc(r),Aj(this._tilePerId,t)}}function Aj(e,t){e.delete(t)}const Mc=new Wi(0,0,0,0),Bn=new Map,Gh=[],ww=[];class dje{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,this.resampling=t.resampling==null||!!t.resampling,t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new CEe(t.cacheSize,this.tileInfoView,r=>{this.releaseTile(r)}))}destroy(){this.tileIndex.clear()}update(t){const{resampling:r,tileIndex:i}=this,n=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.coveragePolicy);if(ww.length=0,Gh.length=0,Bn.clear(),!n)return;const{minScale:s,maxScale:o}=this.tileInfoView.tileInfo,{spans:a,lodInfo:l}=n,{level:c}=l,{scale:h,center:f,resolution:m}=t.state,y=!t.stationary&&h>this._previousScale;if(this._previousScale=h,this.tiles.length=0,!r&&(h>s||h<o))return this.tiles.length=0,Bn.clear(),i.forEach(w=>{this.releaseTile(w)}),i.clear(),ww.length=0,Gh.length=0,Bn.clear(),sm.pool.release(n),!0;i.forEach(w=>w.visible=!0);let g=0,v=0;if(a.length>0)for(const{row:w,colFrom:b,colTo:S}of a)for(let M=b;M<=S;M++){g++;const T=Mc.set(c,w,l.normalizeCol(M),l.getWorldForColumn(M)).id;if(i.has(T)){const k=i.get(T);k.isReady?(Bn.set(T,k),v++):y||this._addParentTile(T,Bn)}else{let k;if(this._tileCache&&this._tileCache.has(T)){if(k=this._tileCache.pop(T),this.tileIndex.set(T,k),k.isReady){Bn.set(T,k),v++;continue}}else k=this.acquireTile(Mc),this.tileIndex.set(T,k);y||this._addParentTile(T,Bn)}}const _=v===g;i.forEach((w,b)=>{if(Mc.set(b),Bn.has(b))return;const S=this.tileInfoView.intersects(n,Mc),M=this.cachePolicy==="purge"?Mc.level!==c:Mc.level>c;!S||!y&&_?!M&&S||Gh.push(b):w.isReady?M&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Mc,c)?Gh.push(b):ww.push(b):M&&Gh.push(b)});for(const w of ww){const b=i.get(w);b&&b.isReady&&Bn.set(w,b)}for(const w of Gh){const b=i.get(w);this._tileCache?this._tileCache.add(b):this.releaseTile(b),i.delete(w)}return Bn.forEach(w=>this.tiles.push(w)),i.forEach(w=>{Bn.has(w.key.id)||(w.visible=!1)}),this._tileCache&&this._tileCache.prune(c,f,m),sm.pool.release(n),Bn.clear(),_}clear(t=!0){const{tileIndex:r}=this;t&&r.forEach(i=>{this.releaseTile(i)}),r.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,r){let i=t,n=null;for(;i=this.tileInfoView.getTileParentId(i),i;)if(this.tileIndex.has(i)){if(n=this.tileIndex.get(i),n&&n.isReady){r.has(n.key.id)||r.set(n.key.id,n);break}}else if(this._tileCache&&this._tileCache.has(i)&&(n=this._tileCache.pop(i),this.tileIndex.set(i,n),n&&n.isReady)){r.has(n.key.id)||r.set(n.key.id,n);break}}_hasReadyAncestor(t,r){const i=bs();this.tileInfoView.getTileBounds(i,t,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=r&&n.key.level<t.level){const s=bs();if(this.tileInfoView.getTileBounds(s,n.key,!0),Gle(s,i))return!0}return!1}}function RP(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}class Pj extends Dr{constructor(t,r){super(!0),this.view=t,this.registerIncoming("double-click",r,i=>this._handleDoubleClick(i,r))}_handleDoubleClick(t,r){RP(t.data,"primary")&&(t.stopPropagation(),r?this.view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this.view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}}class kEe extends Dr{constructor(t,r,i){super(!0),this.view=t,this.pointerType=r,this.registerIncoming("double-tap-drag",i,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(t){const{data:r}=t,{pointerType:i}=r;if(i!==this.pointerType)return;t.stopPropagation();const{action:n,delta:s}=r,{view:o}=this,{mapViewNavigation:a}=o;switch(n){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const l=1.015**s.y,c=this._startScale*l,h=c/this._currentScale;a.setViewpointImmediate(h),this._currentScale=c;break}case"end":{const{constraints:l}=o,{effectiveLODs:c,snapToZoom:h}=l;if(!h||!c)return void a.end();const f=l.snapScale(this._currentScale),m=(s.y>0?Math.max(f,l.snapToPreviousScale(this._startScale)):Math.min(f,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(m);break}}}}class M${constructor(t){this.callbacks=t,this.currentCount=0,this.callbacks.condition||(this.callbacks.condition=()=>!0)}handle(t){const r=t.data,i=r.pointers.size;switch(r.action){case"start":this.currentCount=i,this._emitStart(t);break;case"added":this._emitEnd(this.previousEvent),this.currentCount=i,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this.startEvent&&this._emitEnd(this.previousEvent),this.currentCount=i,this._emitStart(t);break;case"end":this._emitEnd(t),this.currentCount=0}this.previousEvent=t}_emitStart(t){this.startEvent=t,this.callbacks.condition(this.currentCount,t)&&this.callbacks.start(this.currentCount,t,this.startEvent)}_emitUpdate(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.update(this.currentCount,t,this.startEvent)}_emitEnd(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.end(this.currentCount,t,this.startEvent),this.startEvent=null}}class LEe extends Dr{constructor(t,r,i){super(!0),this.view=t,this.pointerAction=r,this.registerIncoming("drag",i,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this.dragEventSeparator=new M$({start:(r,i)=>{this.view.mapViewNavigation.pan.begin(this.view,i.data),i.stopPropagation()},update:(r,i)=>{this.view.mapViewNavigation.pan.update(this.view,i.data),i.stopPropagation()},end:(r,i)=>{this.view.mapViewNavigation.pan.end(this.view,i.data),i.stopPropagation()},condition:(r,i)=>r===1&&RP(i.data,this.pointerAction)})}_handleDrag(t){const r=this.view.mapViewNavigation;r.pinch.zoomMomentum||r.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class OEe extends Dr{constructor(t,r,i){super(!0),this.view=t,this.pointerAction=r;const n=this.view.mapViewNavigation;this.dragEventSeparator=new M$({start:(s,o)=>{n.rotate.begin(this.view,o.data),o.stopPropagation()},update:(s,o)=>{n.rotate.update(this.view,o.data),o.stopPropagation()},end:(s,o)=>{n.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&RP(o.data,this.pointerAction)}),this.registerIncoming("drag",i,s=>this.dragEventSeparator.handle(s))}}function ks(e){let t=e*e;return e<0&&(t*=-1),t}function AEe(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function PEe(e,t,r){const i=r,n=e.state,s=e.device,o=t.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(i.translation[0]=ks(n.axes[0]),i.translation[1]=ks(n.axes[1]),i.translation[2]=ks(n.buttons[7])-ks(n.buttons[6]),i.heading=ks(n.axes[2]),i.tilt=ks(n.axes[3])):s.deviceType==="spacemouse"&&(i.translation[0]=1.2*ks(n.axes[0]),i.translation[1]=1.2*ks(n.axes[1]),i.translation[2]=2*-ks(n.axes[2]),i.heading=1.2*ks(n.axes[5]),i.tilt=1.2*ks(n.axes[3])),i.tilt*=o,$3(i.translation,i.translation,a),i}function REe(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}class FEe extends Dr{constructor(t){super(!0),this.view=t,this.frameTask=null,this.watchHandles=new zt,this.currentDevice=null,this.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this.handle=this.registerIncoming("gamepad",r=>this._handleGamePadEvent(r)),this.handle.pause()}onInstall(t){super.onInstall(t),this.watchHandles.add([G(()=>{var r;return(r=this.view.navigation.gamepad)==null?void 0:r.enabled},r=>{r?(this.handle.resume(),this.frameTask||(this.frameTask=zf({update:i=>this._frameUpdate(i.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null))},je)])}onUninstall(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const r=this.view.navigation.gamepad.device;r&&t.data.device!==r||this.currentDevice&&this.currentDevice!==t.data.device||(t.data.action==="end"?(this.currentDevice=null,AEe(this.transformation)):(this.currentDevice=t.data.device,PEe(t.data,this.view.navigation.gamepad,this.transformation)))}_frameUpdate(t){const r=this.transformation;if(REe(r))return;const i=this.view.viewpoint.clone(),n=this.view.navigation.gamepad.velocityFactor,s=DEe*n*t;T$(i,i,[r.translation[0]*s,-r.translation[1]*s]);const o=1+r.translation[2]*jEe*t,a=this.view.constraints.rotationEnabled?-r.heading*NEe*t:0,l=this.view.size,c=[l[0]/2,l[1]];MZ(i,i,o,a,c,l);const h=this.view.constraints.constrain(i,this.view.viewpoint);this.view.viewpoint=h}}const NEe=.06,DEe=.7,jEe=6e-4;class VEe extends Dr{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._pressed=!1,this._keyMap={[r.left]:"left",[r.right]:"right",[r.up]:"up",[r.down]:"down"},this.registerIncoming("key-down",i,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",i,n=>this._handleKeyUp(n)),this.registerIncoming("blur",i,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,r){const i=this._keyMap[t.data.key];if(this._pressed=i!=null,this._pressed){if(r)switch(this.view.mapViewNavigation.begin(),i){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}class zEe extends Dr{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._pressed=!1,this._keyToDirection={[r.clockwiseOption1]:"clockwise",[r.clockwiseOption2]:"clockwise",[r.counterClockwiseOption1]:"counterClockwise",[r.counterClockwiseOption2]:"counterClockwise",[r.resetOption1]:"reset",[r.resetOption2]:"reset"},this.registerIncoming("key-down",i,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",i,n=>this._handleKeyUp(n)),this.registerIncoming("blur",i,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,r){const i=t.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection[t.data.key];if(this._pressed=n!=null,this._pressed){if(r)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}var lf;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(lf||(lf={}));class UEe extends Dr{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._keysToZoomAction={},this.registerIncoming("key-down",i,n=>this._handleKeyDown(n)),r.zoomIn.forEach(n=>this._keysToZoomAction[n]=lf.IN),r.zoomOut.forEach(n=>this._keysToZoomAction[n]=lf.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const r=t.modifiers;if(r.size>0&&!r.has("Shift"))return;const{key:i}=t.data;if(!(i in this._keysToZoomAction))return;const n=this._keysToZoomAction[i],{mapViewNavigation:s}=this.view;let o=null;switch(n){case lf.IN:o=s.zoomIn();break;case lf.OUT:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),t.stopPropagation()}}const GEe=.6;class BEe extends Dr{constructor(t,r){super(!0),this.view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",r,i=>this._handleMouseWheel(i))}_handleMouseWheel(t){if(!this.view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const r=this.view.mapViewNavigation,{x:i,y:n,deltaY:s}=t.data,o=1/GEe**(1/60*s),a=r.zoom(o,[i,n]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,r.end()}))}}class qEe extends Dr{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const r=this.view.mapViewNavigation;this.dragEventSeparator=new M$({start:(i,n)=>{r.pinch.begin(this.view,n.data),n.stopPropagation()},update:(i,n)=>{r.pinch.update(this.view,n.data),n.stopPropagation()},end:(i,n)=>{r.pinch.end(this.view),n.stopPropagation()},condition:i=>i>=2})}_handleDrag(t){this.dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}function Rj(e){const t=e.native;return t?{buttons:t.buttons.map(r=>r.pressed?r.value?r.value:1:0),axes:t.axes.map(r=>JEe(r,e.axisThreshold))}:{buttons:[],axes:[]}}function WEe(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let r=0;r<e.axes.length;r++)if(e.axes[r]!==t.axes[r])return!1;for(let r=0;r<e.buttons.length;r++)if(e.buttons[r]!==t.buttons[r])return!1;return!0}function HEe(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function JEe(e,t){const r=Math.abs(e);return r<t?0:Math.sign(e)*(r-t)/(1-t)}class ZEe{constructor(t,r){this.element=t,this.input=r,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,l=this.inputDevices[a];l&&(this._emitGamepadEvent(o,Rj(l),!1),this.inputDevices.splice(a,1),this.latestUpdate.splice(a,1),this.input.gamepad.devices.remove(l),this.ensurePollingState())},this.frameTask=null,this.latestUpdate=new Array,this.inputDevices=new Array,this.callback=null;const i="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=i&&n,this.supported&&(this._forEachGamepad(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get eventsEnabled(){return this.supported&&this.inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this.callback=t}_connectGamepad(t){const r=new TP(t);r.deviceType!=="unknown"&&(this.inputDevices[t.index]=r,this.input.gamepad.devices.add(r)),this.ensurePollingState()}ensurePollingState(){this.eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this.frameTask==null&&(this.frameTask=zf({update:()=>this._readGamepadState()}))}_stopPolling(){this.frameTask!=null&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),r=this.element.contains(document.activeElement),i=this.input.gamepad.enabledFocusMode==="document"&&!t||this.input.gamepad.enabledFocusMode==="view"&&!r;this._forEachGamepad(n=>{const s=this.inputDevices[n.index];if(!s)return;const o=this.latestUpdate[n.index],a=Rj(s),l=i||HEe(a);o&&(o.timestamp===n.timestamp||!o.active&&l||WEe(o.state,a))||this._emitGamepadEvent(n,a,!l)})}_forEachGamepad(t){const r=window.navigator.getGamepads();for(let i=0;i<r.length;i++){const n=r[i];this._validate(n)&&t(n)}}_emitGamepadEvent(t,r,i){const n=this.latestUpdate[t.index],s=n&&n.active;if(!s&&!i)return;const o=!s&&i?"start":s&&i?"update":"end";this.latestUpdate[t.index]={timestamp:t.timestamp,state:r,active:i},this.callback&&this.callback({device:this.inputDevices[t.index],state:r,action:o})}_validate(t){if(!t||!t.connected)return!1;for(let r=0;r<t.axes.length;r++)if(isNaN(t.axes[r]))return!1;return!0}}const Fj=j("trident"),Nj=j("edge"),YEe=j("chrome"),QEe=j("ff"),KEe=j("safari"),Bh={touchNone:"esri-view-surface--touch-none",touchPan:"esri-view-surface--touch-pan"};class I${constructor(t,r){this.input=r,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new ZEe(t,this.input),this._gamepadSource.onEvent=i=>this._callback("gamepad",i)}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const r in this._active)if(!t||!t.has(r)){const i=this._active[r];this._element.removeEventListener(qE[r],i),delete this._active[r]}t&&t.forEach(r=>{if(!this._active[r]&&qE[r]){const i=(this._eventHandlers[r]||this._handleDefault).bind(this,r);this._element.addEventListener(qE[r],i),this._active[r]=i}}),this._gamepadSource.hasEventListeners=t&&t.has("gamepad")}setPointerCapture(t,r){r?(this._element.setPointerCapture(t.pointerId),this._activePointerCaptures.add(t.pointerId)):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Bh.touchNone:Bh.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Bh.touchPan:Bh.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Bh.touchNone),this._element.classList.remove(Bh.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,r){const i=nZ(this._element,t);return I$.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),r.x=i.x,r.y=i.y,r}_handleKey(t,r){const i=A2e(r);i&&t==="key-up"&&this._keyDownState.delete(i);const n={native:r,key:i,repeat:i&&this._keyDownState.has(i)};i&&t==="key-down"&&this._keyDownState.add(n.key),this._callback(t,n)}_handlePointer(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});this._callback(t,i)}_handlePointerPreventDefault(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});r.preventDefault(),this._callback(t,i)}_handleMouseWheel(t,r){let i=r.deltaY;switch(r.deltaMode){case 0:(Fj||Nj)&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}Fj||Nj?i*=.7:YEe||KEe?i*=.6:QEe&&(i*=1.375);const n=100,s=Math.abs(i);s>n&&(i=i/s*200/(1+Math.exp(-.02*(s-n))));const o=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,deltaY:i});this._callback(t,o)}_handlePointerCaptureLost(t,r){this._activePointerCaptures.delete(r.pointerId),this._handleDefault(t,r)}_handleDefault(t,r){const i={native:r};r.preventDefault(),this._callback(t,i)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}}I$.test={disableSubpixelCoordinates:!1};const qE={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class XEe extends Dr{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}}function FP(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function eTe(e,t){const r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)}function tTe(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:Zi()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[S,M]=e,[T,k]=[M.x-S.x,M.y-S.y];return t.radius=Math.sqrt(T*T+k*k)/2,t.center.x=(S.x+M.x)/2,t.center.y=(S.y+M.y)/2,t}let r=0,i=0;for(let S=0;S<e.length;S++)r+=e[S].x,i+=e[S].y;r/=e.length,i/=e.length;const n=e.map(S=>S.x-r),s=e.map(S=>S.y-i);let o=0,a=0,l=0,c=0,h=0,f=0,m=0;for(let S=0;S<n.length;S++){const M=n[S],T=s[S],k=M*M,N=T*T;o+=k,a+=N,l+=M*T,c+=k*M,h+=N*T,f+=M*N,m+=T*k}const y=.5*(c+f),g=.5*(h+m),v=o*a-l*l,_=(y*a-g*l)/v,w=(o*g-l*y)/v,b=Zi(_+r,w+i);return{radius:Math.sqrt(_*_+w*w+(o+a)/e.length),center:b}}const hs={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};class rTe extends Dr{constructor(t=hs.maximumDoubleClickDelay,r=hs.maximumDoubleClickDistance,i=hs.maximumDoubleTouchDelay,n=hs.maximumDoubleTouchDistance,s=_v){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=r,this.maximumDoubleTouchDelay=i,this.maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("drag",this._handleDrag.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimeout=en(t.doubleClickTimeout))}get hasPendingInputs(){return L2(this._pointerState,t=>t.doubleClickTimeout!=null)}_pointerId(t){const r=t.native;return r.pointerType==="mouse"?`${r.pointerId}:${r.button}`:`${r.pointerType}`}_handleImmediateClick(t){const r=t.data,i=this._pointerId(r),n=this._pointerState.get(i);if(n){const s=r.native.pointerType==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;FP(n.event.data,r)>s?(this._clearDoubleClickTimeout(i,!0),this._startClick(t)):(this._clearDoubleClickTimeout(i,!1),this._doubleClick.emit(n.event.data,void 0,n.event.modifiers))}else this._startClick(t)}_startClick(t){const r=this._pointerId(t.data),i=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;this._pointerState.set(r,{event:t,doubleClickTimeout:this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(r),i)}),this.refreshHasPendingInputs()}_handlePointerDrag(t){const r=this._pointerId(t.data.currentEvent);this._clearDoubleClickTimeout(r,!0)}_handleDrag(t){const r=this._pointerId(t.data.pointer);this._clearDoubleClickTimeout(r,!0)}_clearDoubleClickTimeout(t,r){const i=this._pointerState.get(t);i&&(i.doubleClickTimeout.remove(),i.doubleClickTimeout=null,r&&this._doubleClickTimeoutExceeded(t),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const r=this._pointerState.get(t);this._click.emit(r.event.data,void 0,r.event.modifiers),r.doubleClickTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}}class iTe extends Dr{constructor(t=hs.maximumDoubleClickDelay,r=hs.maximumDoubleClickDistance,i=hs.maximumDoubleTouchDelay,n=hs.maximumDoubleTouchDistance,s=_v){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=r,this.maximumDoubleTouchDelay=i,this.maximumDoubleTouchDistance=n,this._clock=s,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Zi(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new M$({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout!=null&&(t.doubleTapTimeout.remove(),t.doubleTapTimeout=null)})}get hasPendingInputs(){return L2(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){const r=this._pointerState.get(t);r&&(r.doubleTapTimeout.remove(),r.doubleTapTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs())}_createDoubleTapDragData(t,r,i){const{button:n,buttons:s,pointer:o,pointers:a,pointerType:l,timestamp:c}=i;return{action:t,delta:r,button:n,buttons:s,pointer:o,pointers:a,pointerType:l,timestamp:c}}_dragStart(t,r){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:n}=r,{center:s}=i;this._dragStartCenter=s;const o=this._createDoubleTapDragData("begin",Zi(0,0),i);this._doubleTapDrag.emit(o,void 0,n),r.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:n}=r,s=Zi(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("update",s,r);this._doubleTapDrag.emit(o,void 0,i),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:n}=r,s=Zi(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("end",s,r);this._doubleTapDrag.emit(o,void 0,i),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:r}=t,i=this._pointerId(r),n=this._pointerState.get(i),{pointerType:s}=r.native;if(n){const o=s==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;this._clearPointerDown(i),FP(n.event.data,r)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_pointerId(t){const{native:r}=t,{pointerId:i,button:n,pointerType:s}=r;return s==="mouse"?`${i}:${n}`:`${s}`}_storePointerDown(t){const{data:r}=t,{pointerType:i}=r.native,n=this._pointerId(r),s=i==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(n),s);this._pointerState.set(n,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}}class nTe extends Dr{constructor(t){super(!1),this.navigationTouch=t,this.startStateModifiers=new Set,this.activePointerMap=new Map,this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,r,i,n){return{action:t,pointerType:this.pointerType,button:this.mouseButton,buttons:r.buttons,timestamp:n,pointers:sTe(this.activePointerMap),pointer:r,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(t){const r=t.native.pointerId,i=_w(this.activePointerMap).angle,n={event:t,initialAngle:0,lastAngle:0};this.activePointerMap.set(r,n);const s=Q_(n,GZ(this.activePointerMap));n.initialAngle=s,n.lastAngle=s,this._updatePointerAngles(i)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const r=t.native.pointerId,i=this.activePointerMap.get(r);i?i.event=t:this._addPointer(t)}_removePointer(t){const r=_w(this.activePointerMap).angle;this.activePointerMap.delete(t),this._updatePointerAngles(r)}_updatePointerAngles(t){const r=_w(this.activePointerMap);this.activePointerMap.forEach(i=>{i.initialAngle=Q_(i,r)-t,i.lastAngle=Q_(i,r)-t})}_emitEvent(t,r,i){const n=_w(this.activePointerMap);this.drag.emit(this._createPayload(t,r,n,i),void 0,this.startStateModifiers)}_handlePointerUpAndPointerLost(t){const r=t.data.native.pointerId,i=t.timestamp;this.activePointerMap.get(r)&&(this.activePointerMap.size===1?(this._updatePointer(t.data),!this.isCurrentDragSuppressed&&this._emitEvent("end",t.data,i),this.isDragging=!1,this.isCurrentDragSuppressed=!1,this._removePointer(r)):(this._removePointer(r),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const r=t.data,i=r.currentEvent,n=t.timestamp;switch(r.action){case"start":case"update":this.isDragging?this.activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),!this.isCurrentDragSuppressed&&this._emitEvent("update",i,n)):(this._addPointer(i),this._emitEvent("added",i,n),this.isCurrentDragSuppressed=this.isSuppressed):(this._updatePointer(i),this.pointerType=t.data.startEvent.pointerType,this.mouseButton=t.data.startEvent.button,this.startStateModifiers=t.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this._emitEvent("start",i,n))}}get isSuppressed(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&this.pointerType==="touch"&&this.activePointerMap.size===1}}function GZ(e){const t=[];return e.forEach(r=>{t.push(Zi(r.event.x,r.event.y))}),tTe(t)}function _w(e){const t=GZ(e);let r=0;return e.forEach(i=>{let n=Q_(i,t),s=n-i.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=i.lastAngle+s,i.lastAngle=n,r+=n-i.initialAngle}),r/=e.size||1,{angle:r,radius:t.radius,center:t.center}}function sTe(e){const t=new Map;return e.forEach((r,i)=>t.set(i,r.event)),t}function Q_(e,t){const r=e.event,i=r.x-t.center.x,n=r.y-t.center.y;return Math.atan2(n,i)}var Dj;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(Dj||(Dj={}));class oTe extends Dr{constructor(t=hs.maximumDoubleClickDelay,r=hs.maximumDoubleClickDistance,i=hs.maximumDoubleTouchDelay,n=hs.maximumDoubleTouchDistance,s=_v){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=r,this.maximumDoubleTouchDelay=i,this.maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",o=>{this._handlePointerLoss(o,"pointer-up")}),this.registerIncoming("pointer-capture-lost",o=>{this._handlePointerLoss(o,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",o=>{this._handlePointerLoss(o,"pointer-cancel")})}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=this._pointerId(r);if(!this._pointerState.has(i)){const n={downButton:r.native.button,immediateDoubleClick:null};this._pointerState.set(i,n),this.startCapturingPointer(r.native)}}_handlePointerLoss(t,r){const i=t.data,n=this._pointerId(i),s=this._pointerState.get(n);if(s&&r==="pointer-up"&&s.downButton===i.native.button){const o=s.immediateDoubleClick;if(o){o.timeoutHandle.remove();const a=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;FP(o,t.data)>a?this._startImmediateDoubleClick(t,s):(this._immediateDoubleClick.emit(t.data,void 0,o.modifiers),this._removeState(i))}else this._startImmediateDoubleClick(t,s)}}_startImmediateDoubleClick(t,r){const i=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;r.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),i)}}_pointerId(t){const r=t.native;return r.pointerType==="mouse"?`${r.pointerId}:${r.button}`:`${r.pointerType}`}_removeState(t){const r=this._pointerId(t);this._pointerState.delete(r),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}}const $y={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};class aTe extends Dr{constructor(t=$y.maximumClickDelay,r=$y.movementUntilMouseDrag,i=$y.movementUntilPenDrag,n=$y.movementUntilTouchDrag,s=$y.holdDelay,o=_v){super(!1),this.maximumClickDelay=t,this.movementUntilMouseDrag=r,this.movementUntilPenDrag=i,this.movementUntilTouchDrag=n,this.holdDelay=s,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout!=null&&(t.holdTimeout.remove(),t.holdTimeout=null)}),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=r.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const o=this._pointerState.get(i);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this.holdDelay));const s={startEvent:r,previousEvent:r,startTimestamp:t.timestamp,isDragging:!1,downButton:r.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(i,s),this.startCapturingPointer(r.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_createPointerDragData(t,r,i){return{action:t,startEvent:r.startEvent,previousEvent:r.previousEvent,currentEvent:i}}_handlePointerMove(t){const r=t.data,i=r.native.pointerId,n=this._pointerState.get(i);n&&(n.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",n,r),void 0,n.modifiers):eTe(r,n.startEvent)>this._getDragThreshold(r.native.pointerType)&&this._startDragging(t),n.previousEvent=r)}_getDragThreshold(t){switch(t){case"touch":return this.movementUntilTouchDrag;case"pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}}_startDragging(t){const r=t.data,i=r.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=t.modifiers,n.isDragging=!0,i===n.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",n,r)):this._pointerDrag.emit(this._createPointerDragData("start",n,n.previousEvent),t.timestamp))})}_handlePointerLoss(t,r){const i=t.data,n=i.native.pointerId,s=this._pointerState.get(n);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",s,r==="pointer-up"?i:s.previousEvent),void 0,s.modifiers):r==="pointer-up"&&s.downButton===i.native.button&&t.timestamp-s.startTimestamp<=this.maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(n),this.stopCapturingPointer(i.native),this._pointerState.size===0&&this._moveHandle.pause())}}const bw={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let Cp=class extends le{constructor(){super(...arguments),this._handles=new zt}initialize(){const e=()=>{var t;return(t=this.view)==null?void 0:t.ready};this._handles.add([di(()=>!e(),()=>this._disconnect()),di(e,()=>this._connect())])}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}_disconnect(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)}_connect(){const e=this.view.surface,t=new I$(e,this.view.input),r=[new oTe,new aTe,new rTe,new nTe(this.view.navigation),new iTe],i=new pu({eventSource:t,recognizers:r});i.installHandlers("prevent-context-menu",[new XEe],sc.INTERNAL),i.installHandlers("navigation",[new qEe(this.view),new FEe(this.view),new BEe(this.view),new Pj(this.view),new Pj(this.view,[bw.counter]),new LEe(this.view,"primary"),new VEe(this.view,bw.pan),new UEe(this.view,bw.zoom),new zEe(this.view,bw.rotate),new OEe(this.view,"secondary"),new kEe(this.view,"touch")],sc.INTERNAL),this.view.viewEvents.connect(i),this._source=t,this._inputManager=i,G(()=>{var n,s;return(s=(n=this.view)==null?void 0:n.navigation)==null?void 0:s.browserTouchPanEnabled},n=>{this._source&&(this._source.browserTouchPanningEnabled=!n)},je)}get test(){return{inputManager:this._inputManager}}};u([d()],Cp.prototype,"view",void 0),u([d()],Cp.prototype,"latestPointerType",null),u([d()],Cp.prototype,"latestPointerLocation",null),Cp=u([E("esri.views.2d.input.MapViewInputManager")],Cp);const lTe=Cp;var jj,Vj,zj,BZ={exports:{}};jj=BZ,Vj=function(){function e(n,s,o,a,l){t(n,s,o||0,a||n.length-1,l||i)}function t(n,s,o,a,l){for(;a>o;){if(a-o>600){var c=a-o+1,h=s-o+1,f=Math.log(c),m=.5*Math.exp(2*f/3),y=.5*Math.sqrt(f*m*(c-m)/c)*(h-c/2<0?-1:1);t(n,s,Math.max(o,Math.floor(s-h*m/c+y)),Math.min(a,Math.floor(s+(c-h)*m/c+y)),l)}var g=n[s],v=o,_=a;for(r(n,o,s),l(n[a],g)>0&&r(n,o,a);v<_;){for(r(n,v,_),v++,_--;l(n[v],g)<0;)v++;for(;l(n[_],g)>0;)_--}l(n[o],g)===0?r(n,o,_):r(n,++_,a),_<=s&&(o=_+1),s<=_&&(a=_-1)}}function r(n,s,o){var a=n[s];n[s]=n[o],n[o]=a}function i(n,s){return n<s?-1:n>s?1:0}return e},(zj=Vj())!==void 0&&(jj.exports=zj);const uTe=BZ.exports;function YS(e,t){if(!(this instanceof YS))return new YS(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function cTe(e,t,r){if(!r)return t.indexOf(e);for(var i=0;i<t.length;i++)if(r(e,t[i]))return i;return-1}function qh(e,t){Cg(e,0,e.children.length,t,e)}function Cg(e,t,r,i,n){n||(n=kp(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,o=t;o<r;o++)s=e.children[o],kg(n,e.leaf?i(s):s);return n}function kg(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function Uj(e,t){return e.minX-t.minX}function Gj(e,t){return e.minY-t.minY}function WE(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Sw(e){return e.maxX-e.minX+(e.maxY-e.minY)}function dTe(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function hTe(e,t){var r=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),n=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,n-r)*Math.max(0,s-i)}function HE(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function $w(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function kp(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Bj(e,t,r,i,n){for(var s,o=[t,r];o.length;)(r=o.pop())-(t=o.pop())<=i||(s=t+Math.ceil((r-t)/i/2)*i,uTe(e,s,t,r,n),o.push(t,s,s,r))}YS.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],i=this.toBBox;if(!$w(e,t))return r;for(var n,s,o,a,l=[];t;){for(n=0,s=t.children.length;n<s;n++)o=t.children[n],$w(e,a=t.leaf?i(o):o)&&(t.leaf?r.push(o):HE(e,a)?this._all(o,r):l.push(o));t=l.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!$w(e,t))return!1;for(var i,n,s,o,a=[];t;){for(i=0,n=t.children.length;i<n;i++)if(s=t.children[i],$w(e,o=t.leaf?r(s):s)){if(t.leaf||HE(e,o))return!0;a.push(s)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var i=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=kp([]),this},remove:function(e,t){if(!e)return this;for(var r,i,n,s,o=this.data,a=this.toBBox(e),l=[],c=[];o||l.length;){if(o||(o=l.pop(),i=l[l.length-1],r=c.pop(),s=!0),o.leaf&&(n=cTe(e,o.children,t))!==-1)return o.children.splice(n,1),l.push(o),this._condense(l),this;s||o.leaf||!HE(o,a)?i?(r++,o=i.children[r],s=!1):o=null:(l.push(o),c.push(r),r=0,i=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:Uj,compareMinY:Gj,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,i){var n,s=r-t+1,o=this._maxEntries;if(s<=o)return qh(n=kp(e.slice(t,r+1)),this.toBBox),n;i||(i=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,i-1))),(n=kp([])).leaf=!1,n.height=i;var a,l,c,h,f=Math.ceil(s/o),m=f*Math.ceil(Math.sqrt(o));for(Bj(e,t,r,m,this.compareMinX),a=t;a<=r;a+=m)for(Bj(e,a,c=Math.min(a+m-1,r),f,this.compareMinY),l=a;l<=c;l+=f)h=Math.min(l+f-1,c),n.children.push(this._build(e,l,h,i-1));return qh(n,this.toBBox),n},_chooseSubtree:function(e,t,r,i){for(var n,s,o,a,l,c,h,f;i.push(t),!t.leaf&&i.length-1!==r;){for(h=f=1/0,n=0,s=t.children.length;n<s;n++)l=WE(o=t.children[n]),(c=dTe(e,o)-l)<f?(f=c,h=l<h?l:h,a=o):c===f&&l<h&&(h=l,a=o);t=a||t.children[0]}return t},_insert:function(e,t,r){var i=this.toBBox,n=r?e:i(e),s=[],o=this._chooseSubtree(n,this.data,t,s);for(o.children.push(e),kg(o,n);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(n,s,t)},_split:function(e,t){var r=e[t],i=r.children.length,n=this._minEntries;this._chooseSplitAxis(r,n,i);var s=this._chooseSplitIndex(r,n,i),o=kp(r.children.splice(s,r.children.length-s));o.height=r.height,o.leaf=r.leaf,qh(r,this.toBBox),qh(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)},_splitRoot:function(e,t){this.data=kp([e,t]),this.data.height=e.height+1,this.data.leaf=!1,qh(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var i,n,s,o,a,l,c,h;for(l=c=1/0,i=t;i<=r-t;i++)o=hTe(n=Cg(e,0,i,this.toBBox),s=Cg(e,i,r,this.toBBox)),a=WE(n)+WE(s),o<l?(l=o,h=i,c=a<c?a:c):o===l&&a<c&&(c=a,h=i);return h},_chooseSplitAxis:function(e,t,r){var i=e.leaf?this.compareMinX:Uj,n=e.leaf?this.compareMinY:Gj;this._allDistMargin(e,t,r,i)<this._allDistMargin(e,t,r,n)&&e.children.sort(i)},_allDistMargin:function(e,t,r,i){e.children.sort(i);var n,s,o=this.toBBox,a=Cg(e,0,t,o),l=Cg(e,r-t,r,o),c=Sw(a)+Sw(l);for(n=t;n<r-t;n++)s=e.children[n],kg(a,e.leaf?o(s):s),c+=Sw(a);for(n=r-t-1;n>=t;n--)s=e.children[n],kg(l,e.leaf?o(s):s),c+=Sw(l);return c},_adjustParentBBoxes:function(e,t,r){for(var i=r;i>=0;i--)kg(t[i],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)e[r].children.length===0?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():qh(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};class QS{constructor(t,r){this.key=new Wi(0,0,0,0),this.bounds=bs(),this.objectIds=new Set,this.key.set(r);const i=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=i.resolution,this.scale=i.scale,this.level=i.level}get id(){return this.key.id}get extent(){return Je.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const t=this.key.getChildKeys(),r=$i.acquire();for(let i=0;i<t.length;i++)r[i]=new QS(this.tileInfoView,t[i]);return r}getQuantizationParameters(){return Mq.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}const Ic={added:[],removed:[]},JE=new Set,pTe=new Wi(0,0,0,0);class fTe extends ua{constructor(t){super(),this._tiles=new Map,this._index=YS(9,j("esri-csp-restrictions")?r=>({minX:r.bounds[0],minY:r.bounds[1],maxX:r.bounds[2],maxY:r.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const r={added:[],removed:[]};for(const i of t.added)if(!this.has(i)){const n=new QS(this.tileScheme,i);this._tiles.set(i,n),this._index.insert(n),r.added.push(n)}for(const i of t.removed)if(this.has(i)){const n=this.get(i);this._tiles.delete(i),this._index.remove(n),r.removed.push(n)}this.tiles.length=0,this._tiles.forEach(i=>this.tiles.push(i)),(r.added.length||r.removed.length)&&this.emit("update",r)}setViewState(t){const r=this.tileScheme.getTileCoverage(t,0);if(!r)return;const{spans:i,lodInfo:n}=r,{level:s}=n;if(i.length>0)for(const{row:o,colFrom:a,colTo:l}of i)for(let c=a;c<=l;c++){const h=pTe.set(s,o,n.normalizeCol(c),n.getWorldForColumn(c)).id;if(JE.add(h),!this.has(h)){const f=new QS(this.tileScheme,h);this._tiles.set(h,f),this._index.insert(f),this.tiles.push(f),Ic.added.push(f)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];JE.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),Ic.removed.push(a))}(Ic.added.length||Ic.removed.length)&&this.emit("update",Ic),sm.pool.release(r),JE.clear(),Ic.added.length=0,Ic.removed.length=0}}let mTe=0,vu=class extends le{constructor(){super(...arguments),this.color=new ae([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}get version(){return mTe++}};u([d({readOnly:!0})],vu.prototype,"version",null),u([d({type:ae})],vu.prototype,"color",void 0),u([d({type:ae})],vu.prototype,"haloColor",void 0),u([d()],vu.prototype,"haloOpacity",void 0),u([d()],vu.prototype,"fillOpacity",void 0),vu=u([E("esri.views.2d.support.HighlightOptions")],vu);const qZ=vu,yTe=e=>e.includes("Brush");class WZ{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),yTe(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}}function gTe(e,t,r,i,n,s,o,a){let l;e.ignorePadding&&(i={left:0,right:0,top:0,bottom:0}),e.width!=null&&e.height!=null?l=[e.width,e.height]:e.width==null&&e.height!=null?l=[e.height,e.height]:e.width!=null&&e.height==null?l=[e.width,e.width]:e.width==null&&e.height==null&&(l=null);const c=r[0]-(i.left+i.right),h=r[1]-(i.top+i.bottom);let f,m,y=e.area||{x:0,y:0,width:c,height:h};if(l){const g=c/h,v=l[0]/l[1];if(v>g){const _=y.width/v;y={x:y.x,y:Math.round(y.y+(y.height-_)/2),width:y.width,height:Math.round(_)}}else{const _=y.height*v;y={x:Math.round(y.x+(y.width-_)/2),y:y.y,width:Math.round(_),height:y.height}}}else l=[y.width,y.height];return l[0]>y.width?(f=Math.min(l[0]/y.width,t),m=l[0]/y.width/f):(f=1,m=l[0]/y.width),{resolutionScale:f,cropArea:{x:Math.round((y.x+i.left)*f),y:Math.round((y.y+i.top)*f),width:Math.round(y.width*f),height:Math.round(y.height*f)},outputScale:m,format:n,quality:s,children:o,rotation:a}}function vTe(e,t,r){const{ctx:i,canvas:n}=HZ(e,r),s=i.getImageData(0,0,e.width,e.height),o=bTe(n,t);return JZ(n),{dataUrl:o,data:s}}function wTe(e,t){const{ctx:r,canvas:i}=HZ(e,t),n=r.getImageData(0,0,e.width,e.height);return JZ(i),n}function HZ(e,t){const r=_Te();t.premultipliedAlpha&&MTe(e),r.width=e.width,r.height=e.height;const i=r.getContext("2d");return i.putImageData(e,0,0),t.flipY&&TTe(i),{ctx:i,canvas:r}}function JZ(e){e.width=0,e.height=0}function _Te(){return R(ZE)&&(ZE=document.createElement("canvas")),ZE}let ZE=null;function bTe(e,t){const r=ITe[t.format],i=t.quality/100;return e.toDataURL(r,i)}function STe(e,t){const r=ETe(e),i=kTe[r];return{format:r,quality:an(t!=null?t:i,0,100)}}function $Te(e,t){return t/Math.max(e[0],e[1])}function hje(e,t,r){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(KS)try{return new ImageData(e,t)}catch{KS=!1}return ZZ(e,t,r)}function pje(e,t,r,i){if(!t||!r)throw new Error("Cannot construct image data without dimensions");if(KS)try{return new ImageData(e,t,r)}catch{KS=!1}const n=ZZ(t,r,i);return n.data.set(e,0),n}function fje(e,t,r,i=0,n=0,s=e.width-i,o=e.height-n,a=!1){const{data:l}=e,{width:c,height:h,data:f}=t,m=s/c,y=o/h,g=Math.ceil(m/2),v=Math.ceil(y/2),_=e.width;for(let w=0;w<h;w++)for(let b=0;b<c;b++){const S=4*(b+(a?h-w-1:w)*c);let M=0,T=0,k=0,N=0,F=0,q=0;const z=(w+.5)*y;for(let Q=Math.floor(w*y);Q<(w+1)*y;Q++){const K=Math.abs(z-(Q+.5))/v,ce=(b+.5)*m,ie=K*K;for(let Oe=Math.floor(b*m);Oe<(b+1)*m;Oe++){const Qe=Math.abs(ce-(Oe+.5))/g,et=Math.sqrt(ie+Qe*Qe);if(et>=1)continue;let re=2*et*et*et-3*et*et+1;const ve=4*(i+Oe+(n+Q)*_);q+=re*l[ve+3],T+=re,!r&&l[ve+3]<255&&(re=re*l[ve+3]/255),k+=re*l[ve],N+=re*l[ve+1],F+=re*l[ve+2],M+=re}}f[S]=k/M,f[S+1]=N/M,f[S+2]=F/M,f[S+3]=q/T}return t}function ZZ(e,t,r){return r||(r=xTe()),r.getContext("2d").createImageData(e,t)}let xy=null,KS=!0;function xTe(){return xy||(xy=document.createElement("canvas"),xy.width=1,xy.height=1),xy}function ETe(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return CTe}}function TTe(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function MTe(e){const t=e.data,r=t.length;for(let i=0;i<r;i+=4){const n=t[i+3];if(n!==255&&n>0){const s=255/n;t[i+0]=t[i+0]*s,t[i+1]=t[i+1]*s,t[i+2]=t[i+2]*s}}}const ITe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},qj=98,CTe="png",kTe={png:100,jpg:qj,jpeg:qj};var tr;function mje(e,t,r={}){const i=YZ(e);for(;i.length>1;){const n=XS(t,i.shift(),r);if(I(n))return n}return LTe(t,i.shift(),r)}function YZ(e){const t=j("esri-force-webgl");if(t===tr.WEBGL1||t===tr.WEBGL2)return[t];switch(e){case"2d":return j("mac")&&j("chrome")?[tr.WEBGL1,tr.WEBGL2]:[tr.WEBGL2,tr.WEBGL1];case"3d":return[tr.WEBGL2,tr.WEBGL1]}}function LTe(e,t,r={}){if(!window.WebGLRenderingContext)return Wj(e,OTe),null;const i=XS(e,t,r);return R(i)&&Wj(e,ATe),i}function XS(e,t,r={}){const i=t===tr.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let n=null;for(const s of i){try{n=e.getContext(s,r)}catch{}if(n)break}return n}function Wj(e,t){const r=e.parentNode;r&&(r.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>")}(function(e){e[e.WEBGL1=1]="WEBGL1",e[e.WEBGL2=2]="WEBGL2"})(tr||(tr={}));const OTe='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',ATe=`It doesn't appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>`;let YE,QE;function PTe(e){const t=YZ(e);for(;t.length>1;){const r=Hj(t.shift());if(r.available)return r}return Hj(t.shift())}function Hj(e){switch(e){case tr.WEBGL1:return RTe();case tr.WEBGL2:return FTe()}}function RTe(){return YE||(YE=jTe()),YE}function FTe(){return QE||(QE=VTe()),QE}class QZ{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}class NTe extends QZ{constructor(){super(...arguments),this.type=tr.WEBGL1}}class DTe extends QZ{constructor(){super(...arguments),this.type=tr.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}}function KZ(e,t){var s;if(e===tr.WEBGL1&&typeof WebGLRenderingContext===void 0||e===tr.WEBGL2&&typeof WebGL2RenderingContext===void 0)return null;const r=document.createElement("canvas");if(!r)return null;let i=XS(r,e,{failIfMajorPerformanceCaveat:!0});if(R(i)&&(i=XS(r,e),I(i)&&(t.majorPerformanceCaveat=!0)),R(i))return i;if(e===tr.WEBGL1){const o=(s=i.getParameter(i.VERSION))==null?void 0:s.match(/^WebGL\s+([\d.]*)/);if(o){const a=parseFloat(o[1]);t.available=a>=.94}}else t.available=!0;t.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const n=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return n&&(t.supportsHighPrecisionFragment=n.precision>0),i}function jTe(){const e=new NTe,t=KZ(tr.WEBGL1,e);return R(t)||(e.supportsElementIndexUint=t.getExtension("OES_element_index_uint")!==null,e.supportsStandardDerivatives=t.getExtension("OES_standard_derivatives")!==null,e.supportsInstancedArrays=t.getExtension("ANGLE_instanced_arrays")!==null,e.supportsTextureFloat=t.getExtension("OES_texture_float")!==null,e.supportsTextureHalfFloat=t.getExtension("OES_texture_half_float")!==null,e.supportsColorBufferFloat=t.getExtension("WEBGL_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=t.getExtension("EXT_color_buffer_half_float")!==null),e}function VTe(){const e=new DTe,t=KZ(tr.WEBGL2,e);return R(t)||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function zTe(e){const t=PTe(e);if(!t.available)return new O("webgl:required","WebGL is required but not supported.");if(e==="3d"&&t.majorPerformanceCaveat)return new O("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!t.supportsHighPrecisionFragment)return new O("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!t.supportsVertexShaderSamplers)return new O("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(t.type===tr.WEBGL1){if(!t.supportsElementIndexUint)return new O("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!t.supportsStandardDerivatives)return new O("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!t.supportsInstancedArrays)return new O("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function UTe(e){return e&&"nodeType"in e}function GTe(e){return e&&typeof e.render=="function"}const Jj={component:"esri-component"};let hd=class extends le{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const t=this._get("node");e!==t&&(e&&e.classList.add(Jj.component),t&&t.classList.remove(Jj.component),this._set("node",e))}castNode(e){return e?typeof e=="string"||UTe(e)?(this._set("widget",null),uA(e)):(GTe(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};u([d({dependsOn:[]})],hd.prototype,"id",null),u([d()],hd.prototype,"node",null),u([ze("node")],hd.prototype,"castNode",null),u([d({readOnly:!0})],hd.prototype,"widget",void 0),hd=u([E("esri.views.ui.Component")],hd);const K_=hd,BTe={left:0,top:0,bottom:0,right:0},XZ={bottom:30,top:15,right:15,left:15},KE="manual",pi={ui:"esri-ui",corner:"esri-ui-corner",innerContainer:"esri-ui-inner-container",manualContainer:"esri-ui-manual-container",cornerContainer:"esri-ui-corner-container",topLeft:"esri-ui-top-left",topRight:"esri-ui-top-right",bottomLeft:"esri-ui-bottom-left",bottomRight:"esri-ui-bottom-right"};function qTe(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function XE(e){const t=e,r=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(r===null||r===Object.prototype)&&("component"in t||"index"in t||"position"in t)?e:null}function eT(e,{top:t,bottom:r,left:i,right:n}){e.style.top=t,e.style.bottom=r,e.style.left=i,e.style.right=n}let Wa=class extends ua.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new zt,this.view=null,this._applyViewPadding=()=>{const t=this.container;t&&eT(t,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const t=this._innerContainer;t&&eT(t,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this._handles.add([G(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,je),G(()=>this.padding,this._applyUIPadding,je)])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(pi.ui),mme(e),this._attachContainers(e)),t&&(t.classList.remove(pi.ui),eT(t,{top:"",bottom:"",left:"",right:""}),NG(t)),this._set("container",e))}get height(){const e=this.get("view.height")||0;if(e===0)return e;const t=this._getViewPadding(),r=t.top+t.bottom;return Math.max(e-r,0)}get padding(){return this._get("padding")}set padding(e){e?this._override("padding",e):this._clearOverride("padding")}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...XZ,...e}}get width(){const e=this.get("view.width")||0;if(e===0)return e;const t=this._getViewPadding(),r=t.left+t.right;return Math.max(e-r,0)}add(e,t){let r,i;if(Array.isArray(e))return void e.forEach(s=>this.add(s,t));const n=XE(e);n&&({index:r,position:t,component:e,key:i}=n),t&&typeof t=="object"&&({index:r,key:i,position:t}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,r,i)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(i=>this.remove(i,t));const r=this._find(e);if(r){const i=this._componentToKey;if(i.has(e)&&i.get(e)!==t)return;const n=this._components.indexOf(r);return r.node.parentNode&&r.node.parentNode.removeChild(r.node),this._componentToKey.delete(e),this._components.splice(n,1)[0]}}empty(e){return Array.isArray(e)?e.map(t=>this.empty(t)).reduce((t,r)=>t.concat(r)):(e=e||KE)===KE?Array.prototype.slice.call(this._manualContainer.children).filter(t=>!t.classList.contains(pi.corner)).map(t=>this.remove(t)):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}move(e,t){if(Array.isArray(e)&&e.forEach(s=>this.move(s,t)),!e)return;let r;const i=XE(e)||XE(t);if(i&&(r=i.index,t=i.position,e=i.component||e),t&&!this._isValidPosition(t))return;const n=this.remove(e);n&&this.add(n,{position:t,index:r})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,r,i){e instanceof K_||(e=new K_({node:e})),this._place({component:e,position:t,index:r}),this._components.push(e),i&&this._componentToKey.set(e,i)}_find(e){return e?e instanceof K_?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.get("view.padding")||BTe}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(pi.innerContainer),e.classList.add(pi.cornerContainer);const t=document.createElement("div");t.classList.add(pi.innerContainer),t.classList.add(pi.manualContainer);const r=document.createElement("div");r.classList.add(pi.topLeft),r.classList.add(pi.corner),e.appendChild(r);const i=document.createElement("div");i.classList.add(pi.topRight),i.classList.add(pi.corner),e.appendChild(i);const n=document.createElement("div");n.classList.add(pi.bottomLeft),n.classList.add(pi.corner),e.appendChild(n);const s=document.createElement("div");s.classList.add(pi.bottomRight),s.classList.add(pi.corner),e.appendChild(s),this._innerContainer=e,this._manualContainer=t;const o=oo();this._cornerNameToContainerLookup={"top-left":r,"top-right":i,"bottom-left":n,"bottom-right":s,"top-leading":o?i:r,"top-trailing":o?r:i,"bottom-leading":o?s:n,"bottom-trailing":o?n:s},this._positionNameToContainerLookup={manual:t,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.component,r=e.position||KE,i=e.index,n=this._positionNameToContainerLookup[r],s=i>-1;if(qTe(t.widget)&&t.widget.startup(),!s)return void n.appendChild(t.node);const o=Array.prototype.slice.call(n.children);if(i===0)return void(n.firstChild?o5(t.node,n.firstChild):n.appendChild(t.node));i>=o.length?n.appendChild(t.node):o5(t.node,o[i])}_toPxPosition(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}_toPxUnit(e){return e===0?"0":e+"px"}_findByComponent(e){let t,r=null;return this._components.some(i=>(t=i===e,t&&(r=i),t)),r}_findById(e){let t,r=null;return this._components.some(i=>(t=i.id===e,t&&(r=i),t)),r}_findByNode(e){let t,r=null;return this._components.some(i=>(t=i.node===e,t&&(r=i),t)),r}};u([d()],Wa.prototype,"container",null),u([d()],Wa.prototype,"height",null),u([d({value:XZ})],Wa.prototype,"padding",null),u([ze("padding")],Wa.prototype,"castPadding",null),u([d()],Wa.prototype,"view",void 0),u([d()],Wa.prototype,"width",null),Wa=u([E("esri.views.ui.UI")],Wa);const WTe=Wa;function Zj(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function HTe(e,t){return e.length!==t.length||e.some((r,i)=>r.text!==t[i].text)}function xw(e,t,r){!r||!t||e.find(i=>i.layerView===t&&i.text===r)||e.push({text:r,layerView:t})}function JTe(e){return e.type==="bing-maps"}const zl=[];let Lp=class extends D0{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new de,this.view=null,this._allLayerViewsChange=t=>{this.handles.remove("suspension");const r=this.get("view.allLayerViews");r&&this.handles.add(r.map(i=>G(()=>{var n;return[i.suspended,(n=i.layer)==null?void 0:n.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),t&&t.removed&&t.removed.forEach(i=>{this._pendingAttributions.delete(i),this._fetchedAttributionData.delete(i)}),this._updateAttributionItems()},this.handles.add([tn(()=>{var t;return(t=this.view)==null?void 0:t.allLayerViews},"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),di(()=>{var t;return((t=this.view)==null?void 0:t.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.get("view.allLayerViews");zl.length=0,e?(e.forEach(t=>{var n;if(t.suspended||!((n=t.layer)!=null&&n.attributionVisible))return;const r=t.layer;if(Zj(r,"user"))return void xw(zl,t,r.copyright);if(r.hasAttributionData){if(this._fetchedAttributionData.has(t)){const s=this._fetchedAttributionData.get(t);return void(s?xw(zl,t,this._getDynamicAttribution(s,this.view,r)):Zj(r)&&xw(zl,t,r.copyright))}return void this._fetchAttributionData(t)}const i=r.get("portalItem.accessInformation");xw(zl,t,i||r.copyright)}),HTe(this.items,zl)&&(this.items.removeAll(),this.items.addMany(zl)),zl.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await A2(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=t.ok?this._createContributionIndex(t.value,JTe(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,t){const r=e.contributors,i={};if(!r)return i;for(let n=0;n<r.length;n++){const s=r[n],o=s.coverageAreas;if(!o)return;for(const a of o){const l=a.bbox,c=a.zoomMin-(t&&a.zoomMin?1:0),h=a.zoomMax-(t&&a.zoomMax?1:0),f={xmin:l[1],ymin:l[0],xmax:l[3],ymax:l[2],spatialReference:Te.WGS84},m={extent:cl(f),attribution:s.attribution||"",score:a.score!=null?a.score:100,id:n};for(let y=c;y<=h;y++)i[y]=i[y]||[],i[y].push(m)}}return i.maxKey=Math.max.apply(null,Object.keys(i)),i}_getDynamicAttribution(e,t,r){const{extent:i,scale:n}=t;let s=r.tileInfo.scaleToZoom(n);if(s=Math.min(e.maxKey,Math.round(s)),!i||s==null||s<=-1)return"";const o=e[s],a=F2(i.center.clone().normalize(),t.spatialReference),l={};return o?o.filter(c=>{const h=!l[c.id]&&a&&N2(c.extent,a);return h&&(l[c.id]=!0),h}).sort((c,h)=>h.score-c.score||c.objectId-h.objectId).map(c=>c.attribution).join(", "):""}};u([d({readOnly:!0,type:de})],Lp.prototype,"items",void 0),u([d({readOnly:!0})],Lp.prototype,"state",null),u([d()],Lp.prototype,"view",void 0),Lp=u([E("esri.widgets.Attribution.AttributionViewModel")],Lp);const eY=Lp,Ul={base:"esri-attribution esri-widget",poweredBy:"esri-attribution__powered-by",sources:"esri-attribution__sources",open:"esri-attribution--open",sourcesOpen:"esri-attribution__sources--open",link:"esri-attribution__link",widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let gi=class extends Kt{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(r=>r.forEach(({target:i})=>this._checkSourceTextOverflow(i))),this.iconClass=Ul.widgetIcon,this.itemDelimiter=" | ",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new eY}initialize(){this.own(tn(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,t)=>(e.includes(t.text)||e.push(t.text),e),[]).join(this.itemDelimiter)}render(){const e={[Ul.open]:this._isOpen};return x("div",{bind:this,class:this.classes(Ul.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return x("div",{class:Ul.poweredBy},"Powered by"," ",x("a",{class:Ul.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,r=t?"0":"",{attributionText:i}=this,n={[Ul.sourcesOpen]:e,[Ul.interactive]:t};return x("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Ul.sources,n),innerHTML:i,tabindex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let t=!1;const{clientHeight:r,clientWidth:i,scrollWidth:n}=e,s=n>i,o=this._attributionTextOverflowed!==s;if(this._attributionTextOverflowed=s,o&&(t=!0),this._isOpen){const a=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,a&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};u([d()],gi.prototype,"_isOpen",void 0),u([d()],gi.prototype,"_isInteractive",null),u([d()],gi.prototype,"_attributionTextOverflowed",void 0),u([d()],gi.prototype,"_prevSourceNodeHeight",void 0),u([d({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],gi.prototype,"attributionText",null),u([d()],gi.prototype,"iconClass",void 0),u([d()],gi.prototype,"itemDelimiter",void 0),u([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],gi.prototype,"label",void 0),u([d(),Et("esri/widgets/Attribution/t9n/Attribution")],gi.prototype,"messages",void 0),u([X("viewModel.view")],gi.prototype,"view",void 0),u([d({type:eY})],gi.prototype,"viewModel",void 0),u([Gr()],gi.prototype,"_toggleState",null),gi=u([E("esri.widgets.Attribution")],gi);const ZTe=gi,YTe="esri.widgets.CompassViewModel";let pd=class extends E$(le){constructor(e){super(e),this._handles=new zt,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(G(()=>this.view,this._updateRotationWatcher,je))}destroy(){this._handles=en(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const e={};this.view.type==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const t=-e.heading;this.orientation={x:0,y:0,z:t}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?G(()=>e==null?void 0:e.rotation,this._updateForRotation,je):G(()=>e==null?void 0:e.camera,this._updateForCamera,je))}};u([d({readOnly:!0})],pd.prototype,"canShowNorth",null),u([d()],pd.prototype,"orientation",void 0),u([d({readOnly:!0})],pd.prototype,"state",null),u([d()],pd.prototype,"view",void 0),pd=u([E(YTe)],pd);const tY=pd,Gl={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let jo=class extends Kt{constructor(e,t){super(e,t),this.goToOverride=null,this.iconClass=Gl.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new tY}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:t}=this.viewModel,r=t==="disabled",i=(t==="rotation"?"rotation":"compass")=="compass",n=r?-1:0,s={[Gl.disabled]:r,[Gl.interactive]:!r},o={[Gl.northIcon]:i,[Gl.rotationIcon]:!i},{messages:a}=this;return x("div",{bind:this,class:this.classes(Gl.base,s),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:n,"aria-label":a.reset,title:a.reset},x("span",{"aria-hidden":"true",class:this.classes(Gl.icon,o),styles:this._toRotationTransform(e)}),x("span",{class:Gl.text},a.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};u([X("viewModel.goToOverride")],jo.prototype,"goToOverride",void 0),u([d()],jo.prototype,"iconClass",void 0),u([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],jo.prototype,"label",void 0),u([d(),Et("esri/widgets/Compass/t9n/Compass")],jo.prototype,"messages",void 0),u([X("viewModel.view")],jo.prototype,"view",void 0),u([d({type:tY})],jo.prototype,"viewModel",void 0),u([Gr()],jo.prototype,"_reset",null),jo=u([E("esri.widgets.Compass")],jo);const QTe=jo;let Op=class extends le{constructor(e){super(e),this._handles=new zt,this.navigationMode="pan",this.view=null}initialize(){this._handles.add(di(()=>{var e;return(e=this.view)==null?void 0:e.inputManager},()=>this._setNavigationMode()))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")&&this.view.type==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};u([d({readOnly:!0})],Op.prototype,"state",null),u([d()],Op.prototype,"navigationMode",void 0),u([d()],Op.prototype,"view",void 0),Op=u([E("esri.widgets.NavigationToggleViewModel")],Op);const rY=Op,qn={base:"esri-navigation-toggle esri-widget",button:"esri-navigation-toggle__button esri-widget--button",activeButton:"esri-navigation-toggle__button--active",panButton:"esri-navigation-toggle__button--pan",rotateButton:"esri-navigation-toggle__button--rotate",isLayoutHorizontal:"esri-navigation-toggle--horizontal",rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let Vo=class extends Kt{constructor(e,t){super(e,t),this.iconClass=qn.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new rY}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",t=this.get("viewModel.navigationMode")==="pan",r={[qn.disabled]:e,[qn.isLayoutHorizontal]:this.layout==="horizontal"},i={[qn.activeButton]:t},n={[qn.activeButton]:!t},s=e?-1:0,o=this.messages.toggle;return x("div",{bind:this,class:this.classes(qn.base,r),onclick:this._toggle,onkeydown:this._toggle,tabIndex:s,"aria-label":o,title:o},x("div",{class:this.classes(qn.button,qn.panButton,i)},x("span",{class:qn.panIcon})),x("div",{class:this.classes(qn.button,qn.rotateButton,n)},x("span",{class:qn.rotationIcon})))}_toggle(){this.toggle()}};u([d()],Vo.prototype,"iconClass",void 0),u([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Vo.prototype,"label",void 0),u([d({value:"vertical"})],Vo.prototype,"layout",null),u([d(),Et("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Vo.prototype,"messages",void 0),u([X("viewModel.view")],Vo.prototype,"view",void 0),u([d({type:rY})],Vo.prototype,"viewModel",void 0),u([Gr()],Vo.prototype,"_toggle",null),Vo=u([E("esri.widgets.NavigationToggle")],Vo);const KTe=Vo,Ey={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let wu=class extends Kt{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const e=this.enabled?0:-1,t={[Ey.disabled]:!this.enabled,[Ey.interactive]:this.enabled},r={[this.iconClass]:!!this.iconClass};return x("div",{bind:this,class:this.classes(Ey.button,t),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},x("span",{"aria-hidden":"true",role:"presentation",class:this.classes(Ey.icon,r)}),x("span",{class:Ey.iconText},this.title))}_triggerAction(){this.action.call(this)}};u([d()],wu.prototype,"action",void 0),u([d()],wu.prototype,"enabled",void 0),u([d()],wu.prototype,"iconClass",void 0),u([d()],wu.prototype,"title",void 0),u([Gr()],wu.prototype,"_triggerAction",null),wu=u([E("esri.widgets.IconButton")],wu);const Yj=wu;let Ap=class extends le{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMaxScale");return t===0||e>t}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMinScale");return t===0||e<t}};u([d({readOnly:!0})],Ap.prototype,"canZoomIn",null),u([d({readOnly:!0})],Ap.prototype,"canZoomOut",null),u([d()],Ap.prototype,"view",void 0),Ap=u([E("esri.widgets.Zoom.ZoomConditions2D")],Ap);const XTe=Ap;let Pp=class extends le{get canZoomIn(){return!!this.get("view.ready")}get canZoomOut(){return!!this.get("view.ready")}};u([d({readOnly:!0})],Pp.prototype,"canZoomIn",null),u([d({readOnly:!0})],Pp.prototype,"canZoomOut",null),u([d()],Pp.prototype,"view",void 0),Pp=u([E("esri.widgets.Zoom.ZoomConditions3D")],Pp);const eMe=Pp;let _u=class extends le{constructor(e){super(e),this.canZoomIn=!1,this.canZoomOut=!1}destroy(){this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new XTe({view:e}):e.type==="3d"&&(this._zoomConditions=new eMe({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():bM(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():bM(e.goTo({zoomFactor:.5}))}};u([d()],_u.prototype,"_zoomConditions",void 0),u([d({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],_u.prototype,"canZoomIn",void 0),u([d({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],_u.prototype,"canZoomOut",void 0),u([d({readOnly:!0})],_u.prototype,"state",null),u([d()],_u.prototype,"view",null),_u=u([E("esri.widgets.Zoom.ZoomViewModel")],_u);const iY=_u,Ty={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let Ha=class extends Kt{constructor(e,t){super(e,t),this.iconClass=Ty.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new iY}initialize(){this._zoomInButton=new Yj({action:this.zoomIn.bind(this),iconClass:Ty.zoomInIcon}),this._zoomOutButton=new Yj({action:this.zoomOut.bind(this),iconClass:Ty.zoomOutIcon})}destroy(){this._zoomInButton.destroy(),this._zoomOutButton.destroy(),this._zoomInButton=null,this._zoomOutButton=null}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}render(){const e=this.viewModel,t={[Ty.horizontalLayout]:this.layout==="horizontal"};return this._zoomInButton.enabled=e.state==="ready"&&e.canZoomIn,this._zoomOutButton.enabled=e.state==="ready"&&e.canZoomOut,this._zoomInButton.title=this.messages.zoomIn,this._zoomOutButton.title=this.messages.zoomOut,x("div",{class:this.classes(Ty.base,t)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};u([d()],Ha.prototype,"iconClass",void 0),u([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ha.prototype,"label",void 0),u([d({value:"vertical"})],Ha.prototype,"layout",null),u([d(),Et("esri/widgets/Zoom/t9n/Zoom")],Ha.prototype,"messages",void 0),u([X("viewModel.view")],Ha.prototype,"view",void 0),u([d({type:iY})],Ha.prototype,"viewModel",void 0),Ha=u([E("esri.widgets.Zoom")],Ha);const nY=Ha,sY="esri.views.ui.DefaultUI";function tMe(e){return e&&e.view!==void 0}Z.getLogger(sY);let X_=class extends WTe{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this._handles.add([G(()=>this.components,this._componentsWatcher.bind(this),je),G(()=>this.view,this._updateViewAwareWidgets.bind(this),je)])}_add(e,t,r,i){if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;e=this._createComponent(e)}super._add(e,t,r,i)}_removeComponents(e){e.forEach(t=>{const r=this._find(t);r&&(this.remove(r),r.destroy())})}_updateViewAwareWidgets(e){this.components.forEach(t=>{const r=this._find(t),i=r&&r.widget;tMe(i)&&(i.view=e)})}_componentsWatcher(e,t){this._removeComponents(t),this._addComponents(e),this._adjustPadding(e)}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t}}_addComponents(e){this.initialized&&e.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(e){const t=this._createWidget(e);if(t)return new K_({id:e,node:t})}_createWidget(e){return e==="attribution"?this._createAttribution():e==="compass"?this._createCompass():e==="navigation-toggle"?this._createNavigationToggle():e==="zoom"?this._createZoom():void 0}_createAttribution(){return new ZTe({view:this.view})}_createCompass(){return new QTe({view:this.view})}_createNavigationToggle(){return new KTe({view:this.view})}_createZoom(){return new nY({view:this.view})}};u([d()],X_.prototype,"components",void 0),X_=u([E(sY)],X_);const rMe=X_;let eb=class extends rMe{constructor(e){super(e),this.components=["attribution","zoom"]}};u([d()],eb.prototype,"components",void 0),eb=u([E("esri.views.ui.2d.DefaultUI2D")],eb);const oY=eb;var PL;let tb=PL=class extends B{constructor(e){super(e),this.color=new ae([0,0,0,1])}clone(){return new PL(P({color:this.color}))}};u([d({type:ae,json:{write:!0}})],tb.prototype,"color",void 0),tb=PL=u([E("esri.webmap.background.ColorBackground")],tb);const iMe=tb,xa=Z.getLogger("esri.views.MapView");let aY,lY,uY,cY,dY,hY;async function nMe(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:r,MapViewNavigation:i,MagnifierView2D:n,Stage:s}]=await Promise.all([V(()=>import("./webglDeps.ecebbaa3.js"),["webglDeps.ecebbaa3.js","VertexArrayObject.527d5600.js","Texture.8d083704.js","enums.c60b1dad.js","ProgramTemplate.a02593e7.js","programUtils.0b81e904.js"],import.meta.url),V(()=>import("./mapViewDeps.68c8dd7e.js"),["mapViewDeps.68c8dd7e.js","CIMSymbolHelper.37e0b825.js","BidiEngine.95523203.js","enums.9bd521fc.js","alignmentUtils.84250e5d.js","number.6e30c64a.js","GeometryUtils.f3664fe1.js","utils.fa9cc6c4.js","Utils.0c18ff61.js","enums.c60b1dad.js","Texture.8d083704.js","VertexElementDescriptor.2400a91d.js","MaterialKey.146e5042.js","WGLContainer.91a92d50.js","pixelUtils.f7c7bbd7.js","VertexArrayObject.527d5600.js","ProgramTemplate.a02593e7.js","StyleDefinition.d46cb482.js","config.ded6d251.js","GeometryUtils.b4d0dc88.js","earcut.f65e2fcc.js","enums.58eeda20.js","programUtils.0b81e904.js","Rasterizer.ee0897d5.js","cimAnalyzer.647bc67f.js","quantizationUtils.d80604ad.js","commonjsHelpers.ce2b5698.js","imageutils.014d0c0c.js","Matcher.9194ab46.js","visualVariablesUtils.ebcd76ea.js","visualVariablesUtils.64f629b2.js","tileUtils.882bb3ba.js","TileClipper.363cae3c.js","Geometry.f2d62961.js","ExpandedCIM.fb018184.js","CircularArray.90fbd3f7.js","requestImageUtils.fed49f3c.js","ComputedAttributeStorage.bc2407ee.js","centroid.e2572cbc.js","BaseGraphicContainer.e4112696.js","normalizeUtilsSync.d5715e9a.js","projectionSupport.91dd2487.js","json.8bd707cf.js","FeatureContainer.61e4f1fd.js","TileContainer.fae2730d.js","schemaUtils.a832a97d.js","createSymbolSchema.663f5f56.js","MD5.7323a015.js","util.b952acad.js","vec3f32.ca7a14c1.js","GraphicContainer.0c1125c0.js"],import.meta.url)]);lY=e,uY=t,cY=r,dY=i,hY=n,aY=s}const Qj=160;function sMe(e){return e&&e.declaredClass==="esri.Viewpoint"}let Se=class extends zde(r$e(i$e(k$e))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Bf({getCollections:()=>{var t,r;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!1,this.supportsGround=!1,this._stationaryTimer=null,this.frameTask=new Pxe(this),this._pePromise=null,this.floors=new de,this.highlightOptions=new qZ,this.inputManager=new lTe({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new WZ,this.type="2d",this.ui=new oY,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new OZ,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([G(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(Qj)},Gf),this.on("resize",t=>this._resizeHandler(t)),G(()=>{var t;return(t=this.animationManager)==null?void 0:t.animation},t=>{this.animation=t})]),oce()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new fTe(this.featuresTilingScheme)}get initialExtentRequired(){var o;const{scale:e,constraints:t,center:r,viewpoint:i,extent:n}=this;let s=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((o=this.map.initialViewProperties)==null?void 0:o.viewpoint))&&!n&&(t!=null&&t.effectiveLODs||(s=-1),(!r||e===0&&s===-1)&&(!i||!I(i.targetGeometry)||i.targetGeometry.type!=="extent"&&!i.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!dc()||(this._pePromise||(this._pePromise=hc().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=this.spatialReference,r=e.targetGeometry;return!!_l(r.spatialReference,t)||this._projectionEngineLoaded}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const r=()=>{e===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame()),this.frameTask.animationInProgress=!1};e.when(r,r)}get background(){return this.get("map.initialViewProperties.background")||null}set background(e){e===void 0?this._clearOverride("background"):this._override("background",e)}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:t}=this.state.paddedViewState;return new ye({x:e[0],y:e[1],spatialReference:t})}set center(e){if(e==null)return;if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(i){return void xa.error(new O("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:i}))}const r=this.viewpoint;TL(r,r,t),this.viewpoint=r}set constraints(e){const t=this._get("constraints");t&&(this.handles.remove("map-view-constraints"),t.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add(G(()=>e.version,()=>{this.ready&&this.state&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint))},Gf),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void xa.error(new O("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(i){return void xa.error(new O("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:i}))}const r=this.viewpoint;vxe(r,r,t,this.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const t=this.viewpoint;kxe(t,t,e),this.viewpoint=t}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",-1);const r=this._get("extent");return r&&(this._set("extent",null),this._set("center",r.center)),void this.notifyChange("initialExtentRequired")}const t=this.viewpoint;Mj(t,t,e),this.viewpoint=t}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){return!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(e=>!e.destroyed&&!("layerViews"in e)&&e.updating===!0))}get viewpoint(){if(!this.ready)return this._get("viewpoint");const e=this.state.paddedViewState;return e&&e.viewpoint.clone()}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let t,r;try{t=this._project(e,this.spatialReference),!e.scale||isNaN(e.scale)?r=new O("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):R(e.targetGeometry)&&(r=new O("mapview:invalid-viewpoint","geometry not defined"))}catch(n){r=new O("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:n})}if(r)return void xa.error(r);this._scaleBeforeChangingSpatialReference=null;const i=new po({targetGeometry:new ye,scale:0,rotation:0});wo(i,t),this.constraints.constrain(i,this.state.paddedViewState.viewpoint),this.state.viewpoint=i,this.frameTask.requestFrame(),this._set("viewpoint",i)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(e){if(e==null)return;if(!this.ready){this._set("zoom",e),this._set("scale",0);const r=this._get("extent");return r&&(this._set("extent",null),this._set("center",r.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const t=this.viewpoint;Mj(t,t,this.constraints.zoomToScale(e)),this.viewpoint=t,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(e,t){if(e)return this.animation&&(this.animation=null),this._createAnimation(),Ev(()=>this.ready,t).then(()=>{const r={animate:!0,...t},i=mxe(e,this);return this.animation.update(i),this._gotoTask={},r.animate?this._gotoAnimated(i,r):this._gotoImmediate(i,r)});xa.error("#goTo()","target cannot be null or undefined")}async hitTest(e,t){const r=bj(e)?_j(this,e):e;if(!this.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let i=new Set,n=!1,s=null,o=null;t!=null&&t.include?Xj(t.include,Kj(this,h=>i.add(h),h=>{s||(s=new Set),s.add(h)},h=>i.add(h),()=>n=!0)):(n=!0,i=new Set(this.allLayerViews)),t!=null&&t.exclude&&Xj(t.exclude,Kj(this,h=>i.delete(h),h=>{o||(o=new Set),o.add(h)}));const a=this.allLayerViews.filter(h=>!h.suspended&&i.has(h)).reverse(),l=this.toMap(r);let c=[...n?this.graphicsView.hitTest(l).map(h=>({type:"graphic",graphic:h,layer:null,mapPoint:l})):[],...await Promise.all(a.map(h=>h.hitTest(l,r)).toArray())].filter(I).flat().filter(I);return s&&(c=c.filter(h=>!("graphic"in h)||!h.graphic||s.has(RL(h.graphic)))),o&&(c=c.filter(h=>!("graphic"in h)||!h.graphic||o.has(RL(h.graphic)))),{screenPoint:r,results:c}}async takeScreenshot(e){const t=this._createScreenshotPlan(e),r=await this._stage.takeScreenshot(t);return vTe(r,{format:t.format,quality:t.quality,rotation:0,disableDecorations:!1},this._pixelFormat)}async _takeScreenshot(e){const t=this._createScreenshotPlan(e),r=await this._stage.takeScreenshot(t);return wTe(r,this._pixelFormat)}_createScreenshotPlan(e){e=e||{};const t=this.supersampleScreenshotsEnabled?Math.min(4,$Te(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let r;e.layers?(r=[],e.layers.forEach(s=>{const o=this.allLayerViews.find(a=>a.layer.id===s.id);o&&"container"in o&&o.container&&r.push(o.container)})):r=this._stage.children;const{format:i,quality:n}=STe(e.format,e.quality);return gTe(e,t,this.size,this.padding,i,n,r,e.rotation)}get test(){return{takeScreenshot:e=>this._takeScreenshot(e)}}toMap(e){if(!this.ready)return null;const t=bj(e)?_j(this,e):e,r=[0,0],[i,n]=this.state.toMap(r,[t.x,t.y]),s=this.spatialReference;return new ye({x:i,y:n,spatialReference:s})}toScreen(e){if(!this.ready)return null;const t=this._project(e,this.spatialReference),r=[t.x,t.y];return this.state.toScreen(r,r),Zi(r[0],r[1])}on(e,t,r,i){return this.inputManager&&this.viewEvents.on(e,t,r,i)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,t,r;return this.map&&"initialViewProperties"in this.map&&((t=(e=this.map)==null?void 0:e.initialViewProperties)==null?void 0:t.spatialReference)||((r=this.defaultsFromMap)==null?void 0:r.spatialReference)||null}hasLayerViewModule(e){return Cj.hasLayerViewModule(e)}importLayerView(e){return Cj.importLayerView(e)}pixelSizeAt(){return this.ready?this.state.resolution:(xa.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(t=>({...t,mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=zTe(this.type);return j("safari")&&j("safari")<9&&(e=new O("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:j("safari")})),I(e)?(xa.warn("#validate()",e.message),Promise.reject(e)):nMe()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new xL),this.animation}_cancellableGoTo(e,t,r){const i=()=>e===this._gotoTask,n=r.then(()=>{i()&&(this.animation=null)}).catch(o=>{throw i()&&(this.animation=null,t.done||(t.stop(),this.frameTask.animationInProgress=!1)),o}),s=new Promise(o=>o(n));return t.when().catch(()=>{i()&&s.cancel&&s.cancel()}),s}_gotoImmediate(e,t){const r=this._gotoTask,i=this.animation,n=e.then(s=>{if(yt(t),r!==this._gotoTask)throw new O("view:goto-interrupted","Goto was interrupted");this.viewpoint=i.target=s,i.finish()});return this._cancellableGoTo(r,i,n)}_flipStationary(e){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const t=performance.now()-this._lastStationaryEventTimestamp;t<Qj&&(this._stationaryTimer=this._flipStationary(t))},e)),this._stationaryTimer}_getDefaultViewpoint(){var _,w,b,S;const{constraints:e,initialExtent:t,map:r,padding:i,size:n}=this;if(!e)return null;const s=r&&"initialViewProperties"in r&&r.initialViewProperties,o={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};e.effectiveLODs?o.zoom!==-1&&(o.scale=e.zoomToScale(o.zoom)):o.zoom=-1;let a=null,l=null,c=0;const h=o.viewpoint&&o.viewpoint.rotation,f=o.viewpoint&&o.viewpoint.targetGeometry;I(f)&&(f.type==="extent"?a=f:f.type==="point"&&(l=f,c=o.viewpoint.scale));const m=o.extent||a||((w=(_=s==null?void 0:s.viewpoint)==null?void 0:_.targetGeometry)==null?void 0:w.extent)||t,y=o.center||l||(m==null?void 0:m.center),g=o.scale||c||((b=s==null?void 0:s.viewpoint)==null?void 0:b.scale)||m&&h0(m,[n[0]-i.left-i.right,n[1]-i.top-i.bottom]),v=o.rotation||h||((S=s==null?void 0:s.viewpoint)==null?void 0:S.rotation)||0;return y&&g?new po({targetGeometry:y,scale:g,rotation:v}):null}_gotoAnimated(e,t){const r=this._gotoTask,i=this.animation,n=e.then(s=>{if(yt(t),r!==this._gotoTask)throw new O("view:goto-interrupted","Goto was interrupted");return i.update(s),this.animationManager.animate(i,this.viewpoint,t),i.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,i,n)}_project(e,t){var n;const r=e&&e.targetGeometry||e;if(!t)return e;if(!r)return null;if(t.imageCoordinateSystem||((n=r.spatialReference)==null?void 0:n.imageCoordinateSystem)||Hr(t,r.spatialReference))return e;const i=Tm(r,t);if(!i)throw new O("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:t});return sMe(e)?(e.targetGeometry=i,e):i}_resizeHandler(e){if(!this.ready)return;const t=this.state;let r=this.state.paddedViewState.viewpoint;const i=this.state.paddedViewState.size.concat();t.size=[e.width,e.height],Cxe(r,r,i,this.state.paddedViewState.size,this.resizeAlign),r=this.constraints.constrain(r,null),this.state.viewpoint=r}_startup(){var a,l;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint(),t=e.targetGeometry;try{this._project(e,this.spatialReference)}catch(c){xa.warn(new ki("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:t.toJSON(),spatialReference:this.spatialReference,error:c})),e.targetGeometry=((a=this.defaultsFromMap.extent)==null?void 0:a.center)||new ye({x:0,y:0,spatialReference:this.spatialReference})}(l=this.constraints)==null||l.fit(e),this._set("state",new SEe({padding:this._get("padding"),size:this.size,viewpoint:e})),this.graphics.owner=this;const r=new aY(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=r,this._magnifierView=new hY,this._magnifierView.magnifier=this.magnifier;const i=new cY({view:this});this._set("labelManager",i);const n=new Axe({view:this});this._set("animationManager",n);const s=new dY({view:this,animationManager:n});this._set("mapViewNavigation",s),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),r.on("post-render",()=>this._set("rendering",r.renderRequested)),r.on("will-render",()=>this._set("rendering",r.renderRequested)),r.on("webgl-error",c=>this.fatalError=c.error),G(()=>this.stationary,c=>r.stationary=c,Fc),G(()=>this.background,c=>{r.background=c,this._magnifierView.background=c},Fc),G(()=>this.magnifier,c=>this._magnifierView.magnifier=c,Fc),G(()=>this.renderingOptions,c=>r.renderingOptions=c,Fc),G(()=>this.highlightOptions,c=>r.highlightOptions=c,Fc),G(()=>this.state.id,()=>r.state=this.state,Fc)],"map-view"),this._updateStageChildren();const o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach(c=>c(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[e,t],spatialReference:r,rotation:i,scale:n}=this.state.paddedViewState,s=new ye({x:e,y:t,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",s),this._set("zoom",-1),this._set("rotation",i),this._set("scale",n),this._set("spatialReference",r),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this._stage.addChild(t.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new MEe(Qg.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new lY({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new uY(e)});this.frameTask.graphicsView=t,this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(!this.ready)return;this.frameTask.stop();for(const a of this.allLayerViews)a.processDetach();this._destroySpatialReferenceDependentProperties();const t=this.state.paddedViewState.clone();if(R(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=t.scale;else{const a=t.viewpoint.clone();a.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=a}const r=t.clone(),[i,n]=t.center;let s=null;try{s=this._project(new ye({x:i,y:n,spatialReference:t.spatialReference}),e)}catch(a){dc()||xa.warn(new ki("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:s.toJSON(),spatialReference:e,error:a}))}s||(s=new ye({x:0,y:0,spatialReference:e}));const o=TL(new po({targetGeometry:new ye,scale:0,rotation:0}),t.viewpoint,s);r.viewpoint=o;try{const l=[t.size[0]/2,t.size[1]/2],c=[l[0]+20,l[1]],h=t.toMap([0,0],c),{x:f,y:m}=this._project(new ye({x:h[0],y:h[1],spatialReference:t.spatialReference}),e);h[0]=f,h[1]=m,r.toScreen(h,h);const y=Mxe(l,h,c),g=Math.hypot(h[0]-l[0],h[1]-l[1])/20;!Number.isFinite(g)||Math.abs(g)>4?(o.rotation=0,o.targetGeometry=new ye({x:0,y:0,spatialReference:e})):(o.scale*=g,o.scale>j("mapview-srswitch-adjust-rotation-scale-threshold")?o.rotation=0:o.rotation+=Number.isFinite(y)?y:0)}catch{}this._get("constraints").constrain(o,null),this._get("state").viewpoint=o,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const a of this.allLayerViews)a.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};Se.type="2d",u([d({readOnly:!0})],Se.prototype,"animationManager",void 0),u([d({constructOnly:!0})],Se.prototype,"deactivatedWebGLExtensions",void 0),u([d({constructOnly:!0})],Se.prototype,"debugWebGLExtensions",void 0),u([d({readOnly:!0})],Se.prototype,"featuresTilingScheme",void 0),u([d({readOnly:!0})],Se.prototype,"fullOpacity",void 0),u([d({readOnly:!0})],Se.prototype,"graphicsTileStore",null),u([d()],Se.prototype,"graphicsView",void 0),u([d({readOnly:!0})],Se.prototype,"state",void 0),u([d()],Se.prototype,"initialExtentRequired",null),u([d()],Se.prototype,"labelManager",void 0),u([d({readOnly:!0})],Se.prototype,"resourceManager",null),u([d({readOnly:!0})],Se.prototype,"textureManager",null),u([d({readOnly:!0})],Se.prototype,"mapViewNavigation",void 0),u([d({constructOnly:!0})],Se.prototype,"renderCanvas",void 0),u([d()],Se.prototype,"renderingOptions",void 0),u([d({readOnly:!0})],Se.prototype,"rendering",void 0),u([d({constructOnly:!0})],Se.prototype,"supersampleScreenshotsEnabled",void 0),u([d({readOnly:!0})],Se.prototype,"supportsGround",void 0),u([d()],Se.prototype,"_stationaryTimer",void 0),u([d()],Se.prototype,"_defaultsFromMapSettings",null),u([d()],Se.prototype,"_pePromise",void 0),u([d({readOnly:!0})],Se.prototype,"typeSpecificPreconditionsReady",null),u([d()],Se.prototype,"animation",null),u([d({type:iMe})],Se.prototype,"background",null),u([d({value:null,type:ye,dependsOn:["state.id","ready"]})],Se.prototype,"center",null),u([d({type:OZ})],Se.prototype,"constraints",null),u([d({value:null,type:Je,dependsOn:["state.id","ready"]})],Se.prototype,"extent",null),u([d()],Se.prototype,"floors",void 0),u([d({type:qZ})],Se.prototype,"highlightOptions",void 0),u([d({readOnly:!0})],Se.prototype,"inputManager",void 0),u([d()],Se.prototype,"map",void 0),u([d({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],Se.prototype,"padding",null),u([d()],Se.prototype,"resizeAlign",void 0),u([d({readOnly:!0,dependsOn:["state.id"]})],Se.prototype,"resolution",null),u([d({value:0,type:Number,dependsOn:["state.id","ready"]})],Se.prototype,"rotation",null),u([d({value:0,type:Number,dependsOn:["state.id","ready"]})],Se.prototype,"scale",null),u([d({constructOnly:!0})],Se.prototype,"spatialReferenceLocked",void 0),u([d()],Se.prototype,"stationary",null),u([d({type:WZ,readOnly:!0})],Se.prototype,"timeline",void 0),u([d({readOnly:!0})],Se.prototype,"type",void 0),u([d({readOnly:!0})],Se.prototype,"updating",null),u([d({value:null,type:po,dependsOn:["state.id","ready"]})],Se.prototype,"viewpoint",null),u([d({value:-1,dependsOn:["state.id","ready"]})],Se.prototype,"zoom",null),u([d({type:Boolean})],Se.prototype,"navigating",null),u([d({type:oY})],Se.prototype,"ui",void 0),Se=u([E("esri.views.MapView")],Se);const oMe=Se;function RL(e){var r,i,n,s;const t=e.getObjectId();return t?`${(s=(n=(r=e.layer)==null?void 0:r.uid)!=null?n:(i=e.sourceLayer)==null?void 0:i.uid)!=null?s:"MapView"}/${t}`:`"MapView/${e.uid}`}function Kj(e,t,r,i,n){return s=>{if(s instanceof ln){if(s.layer===e)n==null||n();else{const o=e.allLayerViews.find(a=>a.layer===s.layer);o&&(i==null||i(o))}r(RL(s))}else{const o=e.allLayerViews.find(a=>a.layer===s);o&&t(o)}}}function Xj(e,t){if(e)if(yM(e))for(const r of e)if(yM(r))for(const i of r)t(i);else t(r);else t(e)}const hv=-1;let zo=class extends le{constructor(e){super(e),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=j("mapview-transitions-duration"),this.effects=[]}set effect(e){if(this._get("effect")!==(e=e||"")){this._set("effect",e);try{this._transitionTo(e6(e))}catch(t){this._transitionTo([]),Z.getLogger(this.declaredClass).warn("Invalid Effect",{effect:e,error:t})}}}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(e){this._updateForScale(e)}get transitioning(){return this._to!==null}canTransitionTo(e){try{return this.scale>0&&t6(this._current,e6(e),this.scale)}catch{return!1}}transitionStep(e,t){this._applyTimeTransition(e),this._updateForScale(t)}end(){this._applyTimeTransition(this.duration)}_transitionTo(e){this.scale>0&&t6(this._current,e,this.scale)?(this._final=e,this._to=P(e),aMe(this._current,this._to,this.scale),this._from=P(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=e),this._set("effects",this._current[0]?P(this._current[0].effects):[])}_applyTimeTransition(e){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=e;const t=Math.min(1,this._time/this.duration);for(let r=0;r<this._current.length;r++){const i=this._current[r],n=this._from[r],s=this._to[r];i.scale=lMe(n.scale,s.scale,t);for(let o=0;o<i.effects.length;o++){const a=i.effects[o],l=n.effects[o],c=s.effects[o];a.interpolate(l,c,t)}}t===1&&(this._current=this._final,this._set("effects",this._current[0]?P(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(e){if(this._set("scale",e),this._current.length===0)return;const t=this._current,r=this._current.length-1;let i,n,s=1;if(t.length===1||e>=t[0].scale)n=i=t[0].effects;else if(e<=t[r].scale)n=i=t[r].effects;else for(let o=0;o<r;o++){const a=t[o],l=t[o+1];if(a.scale>=e&&l.scale<=e){s=(e-a.scale)/(l.scale-a.scale),i=a.effects,n=l.effects;break}}for(let o=0;o<this.effects.length;o++)this.effects[o].interpolate(i[o],n[o],s)}};function e6(e){const t=TA(e)||[];return uMe(t)?[{scale:hv,effects:t}]:t}function t6(e,t,r){var i,n,s,o;return!((i=e[0])!=null&&i.effects)||!((n=t[0])!=null&&n.effects)?!0:!((((s=e[0])==null?void 0:s.scale)===hv||((o=t[0])==null?void 0:o.scale)===hv)&&(e.length>1||t.length>1)&&r<=0)&&JB(e[0].effects,t[0].effects)}function aMe(e,t,r){var l,c;const i=e.length>t.length?e:t,n=e.length>t.length?t:e,s=n[n.length-1],o=(l=s==null?void 0:s.scale)!=null?l:r,a=(c=s==null?void 0:s.effects)!=null?c:[];for(let h=n.length;h<i.length;h++)n.push({scale:o,effects:[...a]});for(let h=0;h<i.length;h++)n[h].scale=n[h].scale===hv?r:n[h].scale,i[h].scale=i[h].scale===hv?r:i[h].scale,ZB(n[h].effects,i[h].effects)}function lMe(e,t,r){return e+(t-e)*r}function uMe(e){const t=e[0];return!!t&&"type"in t}u([d()],zo.prototype,"_to",void 0),u([d()],zo.prototype,"duration",void 0),u([d({value:""})],zo.prototype,"effect",null),u([d({readOnly:!0})],zo.prototype,"effects",void 0),u([d({readOnly:!0})],zo.prototype,"hasEffects",null),u([d({value:0})],zo.prototype,"scale",null),u([d({readOnly:!0})],zo.prototype,"transitioning",null),zo=u([E("esri.layers.effects.EffectView")],zo);function yje(e){var r;const t=e.layer;return"floorInfo"in t&&((r=t.floorInfo)==null?void 0:r.floorField)&&"floors"in e.view?pY(e.view.floors,t.floorInfo.floorField):null}function r6(e,t){var r;return"floorInfo"in t&&((r=t.floorInfo)==null?void 0:r.floorField)?pY(e,t.floorInfo.floorField):null}function pY(e,t){if(!(e!=null&&e.length))return null;const r=e.filter(i=>i!=="").map(i=>`'${i}'`);return r.push("''"),`${t} IN (${r.join(",")}) OR ${t} IS NULL`}function gje(e,t,r){return t.flatten(({sublayers:n})=>n).length!==e.length?!0:!!e.some(n=>n.originIdOf("minScale")>r||n.originIdOf("maxScale")>r||n.originIdOf("renderer")>r||n.originIdOf("labelingInfo")>r||n.originIdOf("opacity")>r||n.originIdOf("labelsVisible")>r||n.originIdOf("source")>r)||!fY(e,t)}function cMe(e,t,r){return!!e.some(i=>{const n=i.source;return!(!n||n.type==="map-layer"&&n.mapLayerId===i.id&&(R(n.gdbVersion)||n.gdbVersion===r))||i.originIdOf("renderer")>xe.SERVICE||i.originIdOf("labelingInfo")>xe.SERVICE||i.originIdOf("opacity")>xe.SERVICE||i.originIdOf("labelsVisible")>xe.SERVICE})||!fY(e,t)}function fY(e,t){if(!e||!e.length||R(t))return!0;const r=t.slice().reverse().flatten(({sublayers:s})=>s&&s.toArray().reverse()).map(s=>s.id).toArray();if(e.length>r.length)return!1;let i=0;const n=r.length;for(const{id:s}of e){for(;i<n&&r[i]!==s;)i++;if(i>=n)return!1}return!0}function vje(e){return!!e&&e.some(t=>t.minScale!=null||t.layerDefinition&&t.layerDefinition.minScale!=null)}const dMe={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let $n=class extends ca(le){constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(t=>{const r=r6(this.floors,t);return t.toExportImageJSON(r)});return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&cMe(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",t=>this.notifyChange(dMe[t.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(t=>t.id).join(","):"show:-1":null}get layerDefs(){var r;const e=!!((r=this.floors)!=null&&r.length),t=this.visibleSublayers.filter(i=>i.definitionExpression!=null||e&&i.floorInfo!=null);return t.length?JSON.stringify(t.reduce((i,n)=>{const s=r6(this.floors,n),o=PH(s,n.definitionExpression);return I(o)&&(i[n.id]=o),i},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const t=this.layer.sublayers,r=n=>{const s=this.scale,o=s===0,a=n.minScale===0||s<=n.minScale,l=n.maxScale===0||s>=n.maxScale;n.visible&&(o||a&&l)&&(n.sublayers?n.sublayers.forEach(r):e.unshift(n))};t&&t.forEach(r);const i=this._get("visibleSublayers");return!i||i.length!==e.length||i.some((n,s)=>e[s]!==n)?e:i}toJSON(){const e=this.layer;let t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t={...t,layers:this.layers,layerDefs:this.layerDefs},t}};u([d({readOnly:!0})],$n.prototype,"dynamicLayers",null),u([d()],$n.prototype,"floors",void 0),u([d({readOnly:!0})],$n.prototype,"hasDynamicLayers",null),u([d()],$n.prototype,"layer",null),u([d({readOnly:!0})],$n.prototype,"layers",null),u([d({readOnly:!0})],$n.prototype,"layerDefs",null),u([d({type:Number})],$n.prototype,"scale",void 0),u([d(sbe)],$n.prototype,"timeExtent",void 0),u([d({readOnly:!0})],$n.prototype,"version",null),u([d({readOnly:!0})],$n.prototype,"visibleSublayers",null),$n=u([E("esri.layers.mixins.ExportImageParameters")],$n);function hMe(e){return R(e)||e.type==="simple"||e.type==="unique-value"||e.type==="class-breaks"||e.type==="dictionary"||e.type==="heatmap"}const pMe=(e,t)=>{const r=e.featuresTilingScheme.getClosestInfoForScale(e.scale).level;return t!=null&&t.levels?t.levels[r]:null};function fMe(e,t){if(!e||!("visualVariables"in e)||!e.visualVariables)return null;const r=e.visualVariables.find(n=>n.type==="size"),i=pMe(t,r);return i?new iP({field:r.field,minSize:i[2].size,minDataValue:i[2].value,maxSize:i[3].size,maxDataValue:i[3].value}):null}function mMe(e){return e=e||globalThis.location.hostname,yMe.some(t=>(e==null?void 0:e.match(t))!=null)}function i6(e,t){return e&&(t=t||globalThis.location.hostname)?t.match(mY)!=null||t.match(gY)!=null?e.replace("static.arcgis.com","staticdev.arcgis.com"):t.match(yY)!=null||t.match(vY)!=null?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e}const mY=/^devext.arcgis.com$/,yY=/^qaext.arcgis.com$/,gY=/^[\w-]*\.mapsdevext.arcgis.com$/,vY=/^[\w-]*\.mapsqa.arcgis.com$/,yMe=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,mY,yY,/^jsapps.esri.com$/,gY,vY];function wY(e,t,r,i){return e.name?e.styleName&&e.styleName==="Esri2DPointSymbolsStyle"?gMe(e,t,i):CH(e,t,i).then(n=>_Y(n,e.name,t,r,i)):Promise.reject(new O("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function _Y(e,t,r,i,n){const s=e.data,o=r&&I(r.portal)?r.portal:Mr.getDefault(),a={portal:o,url:Qt(e.baseUrl),origin:"portal-item"},l=s.items.find(y=>y.name===t);if(!l){const y=`The symbol name '${t}' could not be found`;return Promise.reject(new O("symbolstyleutils:symbol-name-not-found",y,{symbolName:t}))}let c=cc(g_e(l,i),a),h=l.thumbnail&&l.thumbnail.href;const f=l.thumbnail&&l.thumbnail.imageData;mMe()&&(c=i6(c),h=i6(h));const m={portal:o,url:Qt(c3(c)),origin:"portal-item"};return aP(c,n).then(y=>{const g=i==="cimRef"?kH(y.data):y.data,v=mH(g,m);if(v&&aa(v)){if(h){const _=cc(h,a);v.thumbnail=new Kd({url:_})}else f&&(v.thumbnail=new Kd({url:`data:image/png;base64,${f}`}));e.styleUrl?v.styleOrigin=new W0({portal:r.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(v.styleOrigin=new W0({portal:r.portal,styleName:e.styleName,name:t}))}return v})}function gMe(e,t,r){const i=v_e.replace(/\{SymbolName\}/gi,e.name),n=I(t.portal)?t.portal:Mr.getDefault();return aP(i,r).then(s=>{const o=kH(s.data);return mH(o,{portal:n,url:Qt(c3(i)),origin:"portal-item"})})}const vMe=Object.freeze(Object.defineProperty({__proto__:null,fetchSymbolFromStyle:_Y,resolveWebStyleSymbol:wY},Symbol.toStringTag,{value:"Module"})),Cd=fr.size,rb=fr.maxSize,NP=fr.maxOutlineSize,n6=fr.lineWidth,FL=fr.tallSymbolWidth,wMe=Z.getLogger("esri.symbols.support.previewSymbol3D");function uf(e){const t=e.outline,r=I(e.material)?e.material.color:null,i=I(r)?r.toHex():null;if(R(t)||"pattern"in t&&I(t.pattern)&&t.pattern.type==="style"&&t.pattern.style==="none")return e.type==="fill"&&i==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const n=xt(t.size)||0;return{color:"rgba("+(I(t.color)?t.color.toRgba():"255,255,255,1")+")",width:Math.min(n,NP),style:"pattern"in t&&I(t.pattern)&&t.pattern.type==="style"?AA(t.pattern.style):null,join:"butt",cap:"patternCap"in t?t.patternCap:"butt"}}function _Me(e,t){const r=t&&t.resource,i=r&&r.href;if(e.thumbnail&&e.thumbnail.url)return Promise.resolve(e.thumbnail.url);if(i&&t.type!=="object")return Promise.resolve(Tye(e,t));const n=De("esri/images/Legend/legend3dsymboldefault.png");return e.styleOrigin&&(e.styleOrigin.styleName||e.styleOrigin.styleUrl)?wY(e.styleOrigin,{portal:e.styleOrigin.portal},"webRef").catch(s=>s).then(s=>{var o;return((o=s==null?void 0:s.thumbnail)==null?void 0:o.url)||n}):Promise.resolve(n)}function tT(e,t=1){const r=e.a,i=_P(e),n=i.h,s=i.s/t,o=100-(100-i.v)/t,{r:a,g:l,b:c}=Hv({h:n,s,v:o});return[a,l,c,r]}function e2(e){return e.type==="water"?R(e.color)?null:e.color:R(e.material)||R(e.material.color)?null:e.material.color}function it(e,t=0){const r=e2(e);if(!r){if(e.type==="fill")return null;const n=Sye.r,s=nc(n,t);return[s,s,s,100]}const i=r.toRgba();for(let n=0;n<3;n++)i[n]=nc(i[n],t);return i}async function bY(e,t){const r=e.style;return r==="none"?null:{type:"pattern",x:0,y:0,src:await bye(De(`esri/symbols/patterns/${r}.png`),t.toCss(!0)),width:5,height:5}}function s6(e){return e.outline?uf(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function SY(e,t){const r=e2(e);if(!r)return null;let i="rgba(";return i+=nc(r.r,t)+",",i+=nc(r.g,t)+",",i+=nc(r.b,t)+",",i+r.a+");"}function NL(e,t){const r=SY(e,t);return r?"pattern"in e&&I(e.pattern)&&e.pattern.type==="style"&&e.pattern.style==="none"?null:{color:r,width:Math.min(e.size?xt(e.size):.75,NP),style:"pattern"in e&&I(e.pattern)&&e.pattern.type==="style"?AA(e.pattern.style):null,cap:"cap"in e?e.cap:null,join:"join"in e?e.join==="miter"?xt(2):e.join:null}:{}}function Ew(e,t,r){const i=.75*r;return{type:"linear",x1:i?.25*i:0,y1:i?.5*i:0,x2:i||4,y2:i?.5*i:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function bMe(e){const t=e.depth,r=e.height,i=e.width;return i&&t&&r&&i===t&&i<r}function SMe(e,t,r){const i=[];if(!e)return i;switch(e.type){case"icon":{const o=t,a=t;switch(e.resource&&e.resource.primitive||uue){case"circle":i.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:it(e,0),stroke:uf(e)});break;case"square":i.push({shape:{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[0,0]},{command:"L",values:[o,0]},{command:"L",values:[o,a]},{command:"Z",values:[]}]},fill:it(e,0),stroke:uf(e)});break;case"triangle":i.push({shape:{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[.5*o,0]},{command:"L",values:[o,a]},{command:"Z",values:[]}]},fill:it(e,0),stroke:uf(e)});break;case"cross":i.push({shape:{type:"path",path:[{command:"M",values:[.5*o,0]},{command:"L",values:[.5*o,a]},{command:"M",values:[0,.5*a]},{command:"L",values:[o,.5*a]}]},stroke:s6(e)});break;case"x":i.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[o,a]},{command:"M",values:[o,0]},{command:"L",values:[0,a]}]},stroke:s6(e)});break;case"kite":i.push({shape:{type:"path",path:[{command:"M",values:[0,.5*a]},{command:"L",values:[.5*o,0]},{command:"L",values:[o,.5*a]},{command:"L",values:[.5*o,a]},{command:"Z",values:[]}]},fill:it(e,0),stroke:uf(e)})}break}case"object":switch(e.resource&&e.resource.primitive||fue){case"cone":{const n=Ew(it(e,0),it(e,-.6),r?FL:t),s=LSe(t,r);i.push({shape:s[0],fill:n}),i.push({shape:s[1],fill:n});break}case"inverted-cone":{const n=it(e,0),s=Ew(n,it(e,-.6),t),o=OSe(t);i.push({shape:o[0],fill:s}),i.push({shape:o[1],fill:n});break}case"cube":{const n=CSe(t,r);i.push({shape:n[0],fill:it(e,0)}),i.push({shape:n[1],fill:it(e,-.3)}),i.push({shape:n[2],fill:it(e,-.5)});break}case"cylinder":{const n=Ew(it(e,0),it(e,-.6),r?FL:t),s=kSe(t,r);i.push({shape:s[0],fill:n}),i.push({shape:s[1],fill:n}),i.push({shape:s[2],fill:it(e,0)});break}case"diamond":{const n=ASe(t);i.push({shape:n[0],fill:it(e,-.3)}),i.push({shape:n[1],fill:it(e,0)}),i.push({shape:n[2],fill:it(e,-.3)}),i.push({shape:n[3],fill:it(e,-.7)});break}case"sphere":{const n=Ew(it(e,0),it(e,-.6));n.x1=0,n.y1=0,n.x2=.25*t,n.y2=.25*t,i.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:n});break}case"tetrahedron":{const n=PSe(t);i.push({shape:n[0],fill:it(e,-.3)}),i.push({shape:n[1],fill:it(e,0)}),i.push({shape:n[2],fill:it(e,-.6)});break}}break}return i}function C$(e){const t=typeof(e==null?void 0:e.size)=="number"?e==null?void 0:e.size:null;return t?xt(t):null}function $Me(e){return e.type==="icon"?"multiply":"tint"}function xMe(e,t){const r=C$(t),i=t&&t.maxSize?xt(t.maxSize):null,n=t&&t.disableUpsampling,s=e.symbolLayers,o=[];let a=0,l=0;const c=s.getItemAt(s.length-1);let h;return c&&c.type==="icon"&&(h=c.size&&xt(c.size)),s.forEach(f=>{var g;if(f.type!=="icon"&&f.type!=="object")return;const m=f.type==="icon"?f.size&&xt(f.size):0,y=r||m?Math.ceil(Math.min(r||m,i||rb)):Cd;if(f&&f.resource&&f.resource.href){const v=_Me(e,f).then(_=>{const w=f.get("material.color"),b=$Me(f);return T2e(_,y,w,b,n)}).then(_=>{const w=_.width,b=_.height;return a=Math.max(a,w),l=Math.max(l,b),[{shape:{type:"image",x:0,y:0,width:w,height:b,src:_.url},fill:null,stroke:null}]});o.push(v)}else{let v=y;f.type==="icon"&&h&&r&&(v=y*(m/h));const _=(t==null?void 0:t.symbolConfig)==="tall"||((g=t==null?void 0:t.symbolConfig)==null?void 0:g.isTall)||f.type==="object"&&bMe(f);a=Math.max(a,_?FL:v),l=Math.max(l,v),o.push(Promise.resolve(SMe(f,v,_)))}}),Zt(o).then(f=>{const m=[];return f.forEach(y=>{y.value?m.push(y.value):y.error&&wMe.warn("error while building swatchInfo!",y.error)}),Zv(m,[a,l],{node:t&&t.node,scale:!1,opacity:t&&t.opacity})})}function EMe(e,t){const r=e.symbolLayers,i=[],n=o$(e),s=C$(t),o=(t&&t.maxSize?xt(t.maxSize):null)||NP;let a,l=0,c=0;return r.forEach((h,f)=>{if(!h||h.type!=="line"&&h.type!=="path")return;const m=[];switch(h.type){case"line":{const y=NL(h,0);if(R(y))break;const g=y&&y.width||0;f===0&&(a=g);const v=Math.min(s||g,o),_=f===0?v:s?v*(g/a):v,w=_>n6/2?2*_:n6;c=Math.max(c,_),l=Math.max(l,w),y.width=_,m.push({shape:{type:"path",path:[{command:"M",values:[0,.5*c]},{command:"L",values:[l,.5*c]}]},stroke:y});break}case"path":{const y=Math.min(s||Cd,o),g=it(h,0),v=it(h,-.2),_=SY(h,-.4),w=_?{color:_,width:1}:{};if(h.profile==="quad"){const b=h.width,S=h.height,M=TSe(b&&S?b/S:1,S===0,b===0),T={...w,join:"bevel"};m.push({shape:M[0],fill:v,stroke:T}),m.push({shape:M[1],fill:v,stroke:T}),m.push({shape:M[2],fill:g,stroke:T})}else m.push({shape:vL.pathSymbol3DLayer[0],fill:v,stroke:w}),m.push({shape:vL.pathSymbol3DLayer[1],fill:g,stroke:w});c=Math.max(c,y),l=c}}i.push(m)}),Promise.resolve(Zv(i,[l,c],{node:t&&t.node,scale:n,opacity:t&&t.opacity}))}async function TMe(e,t){const r=e.type==="mesh-3d",i=e.symbolLayers,n=C$(t),s=t&&t.maxSize?xt(t.maxSize):null,o=n||Cd,a=[];let l=0,c=0,h=!1;for(let f=0;f<i.length;f++){const m=i.getItemAt(f),y=[];if(r&&m.type!=="fill")continue;const g=vL.fill[0];switch(m.type){case"fill":{const v=uf(m),_=Math.min(o,s||rb);l=Math.max(l,_),c=Math.max(c,_),h=!0;let w=it(m,0);const b="pattern"in m&&m.pattern,S=e2(m);!r&&I(b)&&b.type==="style"&&b.style!=="solid"&&S&&(w=await bY(b,S)),y.push({shape:g,fill:w,stroke:v});break}case"line":{const v=NL(m,0);if(R(v))break;const _={stroke:v,shape:g};l=Math.max(l,Cd),c=Math.max(c,Cd),y.push(_);break}case"extrude":{const v={join:"round",width:1,...NL(m,-.4)},_=it(m,0),w=it(m,-.2),b=Math.min(o,s||rb),S=MSe(b);v.width=1,y.push({shape:S[0],fill:w,stroke:v}),y.push({shape:S[1],fill:w,stroke:v}),y.push({shape:S[2],fill:_,stroke:v});const M=Cd,T=.7*Cd+.5*b;l=Math.max(l,M),c=Math.max(c,T);break}case"water":{const v=e2(m),_=tT(v),w=tT(v,2),b=tT(v,3),S=ISe();h=!0,y.push({shape:S[0],fill:_}),y.push({shape:S[1],fill:w}),y.push({shape:S[2],fill:b});const M=Math.min(o,s||rb);l=Math.max(l,M),c=Math.max(c,M);break}}a.push(y)}return Zv(a,[l,c],{node:t&&t.node,scale:h,opacity:t&&t.opacity})}function MMe(e,t){if(e.symbolLayers.length===0)return Promise.reject(new O("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(e.type){case"point-3d":return xMe(e,t);case"line-3d":return EMe(e,t);case"polygon-3d":case"mesh-3d":return TMe(e,t)}return Promise.reject(new O("symbolPreview: swatchInfo3D","symbol not supported."))}const IMe=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:bY,getSizeFromOptions:C$,getSymbolLayerFill:it,previewSymbol3D:MMe},Symbol.toStringTag,{value:"Module"})),o6={HH:315,HL:45,LL:135,LH:225},CMe={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function kMe(e){if(!e)return;const{type:t}=e;if(t.includes("3d"))return it(e.symbolLayers.getItemAt(0));if(t==="simple-line"){const r=ev(e);return r&&r.color}if(e.type==="simple-marker"&&(e.style==="x"||e.style==="cross")){const r=ev(e);return r&&r.color}return _ye(e)}function LMe(e,t){const r=t.HH.label,i=t.LL.label,n=t.HL.label,s=t.LH.label;switch(e){case"HH":default:return{top:r,bottom:i,left:n,right:s};case"HL":return{top:n,bottom:s,left:i,right:r};case"LL":return{top:i,bottom:r,left:s,right:n};case"LH":return{top:s,bottom:n,left:r,right:i}}}function OMe(e){const{focus:t,infos:r,numClasses:i}=e,n=CMe[i],s={};r.forEach(a=>{s[a.value]={label:a.label,fill:kMe(a.symbol)}});const o=[];for(let a=0;a<i;a++){const l=[];for(let c=0;c<i;c++){const h=s[n[a][c]];l.push(h.fill)}o.push(l)}return{type:"relationship-ramp",numClasses:i,focus:t,colors:o,labels:LMe(t,s),rotation:$Y(t)}}function $Y(e){let t=o6[e];return e&&t==null&&(t=o6.HH),t||0}const DL=30,jL=12,xY=[255,255,255],EY=[200,200,200],cf=[128,128,128],AMe=20,PMe=5;function RMe(e){return e.declaredClass==="esri.symbols.SimpleMarkerSymbol"}function FMe(e){return e.declaredClass==="esri.symbols.PictureMarkerSymbol"}function NMe(e){return e.declaredClass==="esri.symbols.SimpleLineSymbol"}function DMe(e){return e.declaredClass==="esri.symbols.TextSymbol"}function jMe(e,t){const r=e.length-1;return e.map((i,n)=>lq(i,n,r,t))}async function VMe(e,t,r,i,n,s){const o=t.legendOptions,a=o&&o.customValues,l=await GMe(e,r),c=!!l,h=!!a,f=t.minSize!=null&&t.maxSize!=null,m=t.stops&&t.stops.length>1,y=!!t.target;if(!c||!h&&!(f||m&&!y))return;const g=o$(l);let v=null,_=null,w=null;_=g&&!m?IS([t.minDataValue,t.maxDataValue]):a||await qMe(t,l,i,n);const b=e==null?void 0:e.authoringInfo,S=(b==null?void 0:b.type)==="univariate-color-size",M=S&&(b==null?void 0:b.univariateTheme)==="above-and-below";if(!_&&m&&(_=t.stops.map(F=>F.value),v=t.stops.some(F=>!!F.label),e.type==="flow"&&(_=IS(_)),v&&(w=t.stops.map(F=>F.label))),g&&(_==null?void 0:_.length)>2&&!M&&(_=[_[0],_[_.length-1]]),!_)return null;S&&(_==null?void 0:_.length)!==5&&(_=IY({minSize:_[0],maxSize:_[_.length-1]}));const T=g?zMe(e,_):null,k=Eye(l),N=v?null:jMe(_,s);return(await Promise.all(_.map(async(F,q)=>{const z=g?T[q]:await Rp(t,l,F,i,n);return{value:F,symbol:JMe(M&&e.type==="class-breaks"?UMe(e,q):l,z),label:v?w[q]:N[q],size:z,outlineSize:k}}))).reverse()}function zMe(e,t){const r=e==null?void 0:e.authoringInfo,i=(r==null?void 0:r.type)==="univariate-color-size";let n=[jL,DL];if(i){const s=t[0],o=t[t.length-1],a=jL,l=DL;n=t.map(c=>a+(c-s)/(o-s)*(l-a))}return i&&(r==null?void 0:r.univariateTheme)==="below"&&n.reverse(),n}function UMe(e,t){const r=e.classBreakInfos,i=r.length,n=i<2||!(t>=2)?r[0].symbol.clone():r[i-1].symbol.clone();return e.visualVariables.some(s=>s.type==="color")&&(n.type.includes("3d")?TY(n):MY(n)),n}async function GMe(e,t){var n;if(e.type==="flow")return uq(e,t);if(e.type==="pie-chart")return new rn({color:null,outline:(n=e.outline)!=null&&n.width?e.outline:new hn});let r=null,i=null;if(e.type==="simple")r=e.symbol;else if(e.type==="class-breaks"){const s=e.classBreakInfos;r=s&&s[0]&&s[0].symbol,i=s.length>1}else if(e.type==="unique-value"){const s=e.uniqueValueInfos;r=s&&s[0]&&s[0].symbol,i=s.length>1}return!r||BMe(r)?null:(r=r.clone(),(t||i)&&(r.type.includes("3d")?TY(r):MY(r)),r)}function BMe(e){return e?aa(e)?!!e.symbolLayers&&e.symbolLayers.some(t=>t&&t.type==="fill"):e.type.includes("fill"):!1}function TY(e){e.type==="line-3d"?e.symbolLayers.forEach(t=>{t.material={color:cf}}):e.symbolLayers.forEach(t=>{t.type!=="icon"||t.resource&&t.resource.href?t.material={color:EY}:(t.material={color:xY},t.outline={color:cf,size:1.5})})}function MY(e){var r,i;const t=EA();e.type==="cim"?eq(e,new ae(EY)):e.type.includes("line")?e.color=cf:(e.color=t?cf:xY,e.type==="simple-marker"&&(e.outline?((i=(r=e.outline)==null?void 0:r.color)==null?void 0:i.toHex())==="#ffffff"&&(e.outline.color=cf):e.outline={color:cf,width:1.5}))}async function qMe(e,t,r,i){const n=(await V(()=>Promise.resolve().then(()=>Oh),void 0,import.meta.url)).getSizeRangeAtScale(e,r,i),s=n&&IY(n);if(!n&&!s)return;let o=s.map(a=>WMe(a,e,n));o=IS(o);for(let a=1;a<o.length-1;a++){const l=await HMe(e,t,o[a],o[a-1],r,i);l&&(o[a]=l[0],s[a]=l[1])}return o}function IY(e){const t=e.minSize,r=e.maxSize,i=PMe,n=(r-t)/(i-1),s=[];for(let o=0;o<i;o++)s.push(t+n*o);return s}function WMe(e,t,r){const i=r.minSize,n=r.maxSize,s=t.minDataValue,o=t.maxDataValue;let a=null;return e<=i?a=s:e>=n?a=o:a=(e-i)/(n-i)*(o-s)+s,a}async function HMe(e,t,r,i,n,s){const o=await Rp(e,t,r,n,s),a=await Rp(e,t,i,n,s),l=MS(r),c=l.fractional,h=AMe;let f=l.integer,m=null,y=null;r>0&&r<1&&(m=10**c,f=MS(r*=m).integer);for(let g=f-1;g>=0;g--){const v=10**g;let _=Math.floor(r/v)*v,w=Math.ceil(r/v)*v;m!=null&&(_/=m,w/=m);let b=(_+w)/2;[,b]=IS([_,b,w],{indexes:[1]});const S=await Rp(e,t,_,n,s),M=await Rp(e,t,w,n,s),T=await Rp(e,t,b,n,s),k=$_(o,S,a,null),N=$_(o,M,a,null),F=$_(o,T,a,null);let q=k.previous<=h,z=N.previous<=h;if(q&&z&&(k.previous<=N.previous?(q=!0,z=!1):(z=!0,q=!1)),q?y=[_,S]:z?y=[w,M]:F.previous<=h&&(y=[b,T]),y)break}return y}async function Rp(e,t,r,i,n){const{getSize:s}=await V(()=>Promise.resolve().then(()=>Oh),void 0,import.meta.url);return s(e,r,{scale:i,view:n,shape:t.type==="simple-marker"?t.style:null})}function JMe(e,t){const r=e.clone();if(aa(r))o$(r)||r.symbolLayers.forEach(i=>{i.type!=="fill"&&(i.size=t)});else if(RMe(r))r.size=t;else if(FMe(r)){const i=r.width,n=r.height;r.height=t,r.width=t*(i/n)}else NMe(r)?r.width=t:DMe(r)&&r.font&&(r.font.size=t);return r}function ZMe(e){const r=Math.floor(Math.log10(Math.abs(e)))+1,i=r<4||r>6?4:r,n=1e6,s=Math.abs(e)>=n?"compact":"standard";return sa(e,{notation:s,minimumSignificantDigits:2,maximumSignificantDigits:i})}const Bl=Z.getLogger("esri.widgets.Legend.support.ActiveLayerInfo"),YMe="https://utility.arcgis.com/sharing/tools/legend",QMe="esri.layers.ImageryLayer",KMe="esri.layers.ImageryTileLayer",XMe="esri.layers.WCSLayer",Tw=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,eIe=new Ee({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),a6={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34e38,34e38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},Mw=new rn({size:6,outline:{color:[128,128,128,.5],width:.5}}),tIe=new ha({style:"solid"});function VL(e){return e.type==="flow"}function CY(e){return e.type==="vector-field"}function kY(e){return e.type==="raster-colormap"}function LY(e){return e.type==="raster-stretch"}function OY(e){return e.type==="raster-shaded-relief"}function Fp(e){return e.declaredClass==="esri.renderers.SimpleRenderer"}function Np(e){return e.declaredClass==="esri.renderers.ClassBreaksRenderer"}function zL(e){return e.declaredClass==="esri.renderers.UniqueValueRenderer"}function AY(e){return e.declaredClass==="esri.renderers.HeatmapRenderer"}function rIe(e){return DP(e)||jP(e)||VP(e)||iIe(e)}function iIe(e){return e.declaredClass==="esri.renderers.PointCloudRGBRenderer"}function DP(e){return e.declaredClass==="esri.renderers.PointCloudClassBreaksRenderer"}function jP(e){return e.declaredClass==="esri.renderers.PointCloudStretchRenderer"}function VP(e){return e.declaredClass==="esri.renderers.PointCloudUniqueValueRenderer"}function PY(e){return e.declaredClass==="esri.renderers.DotDensityRenderer"}function RY(e){return e.declaredClass==="esri.renderers.PieChartRenderer"}function nIe(e,t){return Fp(e)||Np(e)||zL(e)||AY(e)||PY(e)||RY(e)?t.type==="2d"||hMe(e):LY(e)||kY(e)||OY(e)||DP(e)||jP(e)||VP(e)||CY(e)||VL(e)}function l6(e){return e.declaredClass==="esri.layers.BuildingSceneLayer"}function sIe(e){return e.declaredClass==="esri.layers.VoxelLayer"}function oIe(e){return e.declaredClass==="esri.layers.WMSLayer"}function aIe(e){return e.declaredClass==="esri.layers.WMTSLayer"}function u6(e){return e.declaredClass==="esri.layers.MapImageLayer"}function lIe(e){return e.declaredClass==="esri.layers.TileLayer"}function uIe(e){return e.declaredClass==="esri.layers.FeatureLayer"}function My(e){return e.declaredClass===QMe}function rT(e){return e.declaredClass===KMe}function cIe(e){return e.declaredClass===XMe}function dIe(e){return e.type==="stretch-ramp"}function hIe(e){var t;return((t="authoringInfo"in e&&(e==null?void 0:e.authoringInfo))==null?void 0:t.type)==="univariate-color-size"}function pIe(e){const t="authoringInfo"in e&&(e==null?void 0:e.authoringInfo);return(t==null?void 0:t.type)==="univariate-color-size"&&(t==null?void 0:t.univariateTheme)==="above-and-below"}const fIe=new rn({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let Wh={},lr=class extends le{constructor(e){super(e),this._handles=new zt,this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this.children=new de,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const e=()=>this.notifyChange("ready");this._handles.add([tn(()=>this.children,"change",t=>{const{added:r,removed:i}=t,n=this._handles;r.forEach(s=>{const o=`activeLayerInfo-ready-watcher-${s.layer.uid}`;n.add(G(()=>s.ready,e,je),o)}),i.forEach(s=>n.remove(s.layer.uid)),e()})]),this.keepCacheOnDestroy||(Wh={})}destroy(){this._handles.destroy(),this._handles=null,this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(Wh=null)}get effectList(){const e=this.layer;let t=null;return"effect"in e&&e.effect&&(t=new zo,t.effect=e.effect,t.end(),t.scale=this.scale),t}get opacity(){var n;const e=this.layer.opacity,t=(n=this.parent)==null?void 0:n.opacity,r=this.layer.parent,i=r&&"uid"in r?this._getParentLayerOpacity(r):null;return t!=null?t*e:i!=null?i*e:e}get ready(){return this.layer===null||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){return this.view&&this.view.scale}get isScaleDriven(){const e=this.layer;if(e===null)return!1;if("effect"in e&&e.effect&&Array.isArray(e.effect))return!0;if("featureReduction"in e&&e.featureReduction){if(e.featureReduction.type==="cluster")return!0;if(e.featureReduction.type==="binning"&&"renderer"in e.featureReduction&&e.featureReduction.renderer)return this._isRendererScaleDriven(e.featureReduction.renderer)}return"renderer"in e&&e.renderer?this._isRendererScaleDriven(e.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}async buildLegendElementsForFeatureCollections(e){if(!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],void this.notifyChange("ready");const t=Array.from(e,r=>{if(uIe(r))return this._getRendererLegendElements(r.renderer,{title:r.title});if(r.featureSet&&r.featureSet.features.length){const i=r.layerDefinition,n=i&&i.drawingInfo,s=n&&__e(n.renderer),o=eIe.read(i.geometryType);return s?this._getRendererLegendElements(s,{title:r.name,geometryType:o}):(Bl.warn("drawingInfo not available!"),null)}return null});try{const r=[];await Zt(t).then(i=>{i.forEach(({value:n})=>n&&r.push(...n))}),this.legendElements=r,this.notifyChange("ready")}catch(r){Bl.warn("error while building legend for layer!",r)}}async buildLegendElementsForRenderer(e){try{const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getRendererLegendElements(e):[],this.notifyChange("ready")}catch(t){Bl.warn("error while building legend for layer!",t)}}async buildLegendElementsForTools(){var t,r;const e=this.layer;if(sIe(e))this._constructLegendElementsForVoxellayer();else if(aIe(e))this._constructLegendElementsForWMTSlayer();else if(oIe(e))await this._constructLegendElementsForWMSSublayers();else if(l6(e))await this._constructLegendElementsForBuildingSceneLayer();else if(u6(e)||lIe(e)||l6(e))await this._constructLegendElementsForSublayers();else{this._handles.remove("imageryLayers-watcher");let i="default";My(e)&&(i=(((t=e==null?void 0:e.renderingRule)==null?void 0:t.functionName)||"default")+"_"+((r=e.bandIds)!=null&&r.length?e.bandIds.join(""):"###")),await this._getLegendLayers(`${e.uid}-${i}`).then(async n=>{this.legendElements=[],this.notifyChange("ready");const s=n.map(async o=>{if(My(e)||rT(e)){const l=G(()=>["renderingRule"in e&&e.renderingRule,e.bandIds],()=>C2(async()=>{Wh.default=null,e.renderer?await this.buildLegendElementsForRenderer(e.renderer):await this.buildLegendElementsForTools()})());this._handles.add(l,"imageryLayers-watcher")}const a=this._generateSymbolTableElementForLegendLayer(o);a&&a.infos.length&&(My(e)&&(a.title=e.title),this.legendElements.push(a)),this.notifyChange("ready")});await Zt(s)}).catch(n=>{Bl.warn("Request to server for legend has failed!",n)})}}async _isLayerInCurrentView(){const e=this.layer,t=this.layerView,r=t&&"createQuery"in t&&"queryFeatureCount"in t;if(!r&&!(t&&"createQuery"in e&&"queryFeatureCount"in e))return!0;await Ev(()=>!t.updating);const i=r?"createQuery"in t&&t.createQuery():"createQuery"in e&&e.createQuery();return i.geometry=this.view.extent,(r?"queryFeatureCount"in t&&await t.queryFeatureCount(i):"queryFeatureCount"in e&&await e.queryFeatureCount(i))!==0}_getParentLayerOpacity(e){let t=1;const r=e.parent;return r&&"uid"in r&&(t=this._getParentLayerOpacity(r)),e.opacity*t}_isGroupActive(){const e=this.children;return!!e.length&&e.some(t=>t.ready)}_isRendererScaleDriven(e){if(e.type==="dot-density")return!0;const t="valueExpression"in e&&e.valueExpression;if(Tw.test(t))return!0;const r="visualVariables"in e&&e.visualVariables;return!!r&&r.some(i=>this._isScaleDrivenSizeVariable(i))}_isScaleDrivenSizeVariable(e){if(e&&e.type!=="size")return!1;const t=e,r=t.minSize,i=t.maxSize;return typeof r=="object"&&r?this._isScaleDrivenSizeVariable(r):typeof i=="object"&&i?this._isScaleDrivenSizeVariable(i):!!t.expression||Tw.test(t.valueExpression)}_isLayerScaleDriven(e){if("minScale"in e&&e.minScale>0||"maxScale"in e&&e.maxScale>0)return!0;if("sublayers"in e&&e.sublayers)return e.sublayers.some(r=>this._isLayerScaleDriven(r));const t=e.parent;if(e.loaded===!1&&t&&u6(t)&&"source"in e&&e.source&&e.source.type==="map-layer"){for(const r of t.sourceJSON.layers)if(r.id===e.source.mapLayerId&&(r.minScale>0||r.maxScale>0))return!0}return!1}async _constructLegendElementsForVoxellayer(){var s;this.legendElements=[],this._handles.remove("voxel-style-watcher");const e=this.layer;this._handles.add(G(()=>e.currentVariableId,()=>this._constructLegendElementsForVoxellayer()),"voxel-style-watcher");const t=e.getVariableStyle(null),r=[];if(t){if((s=t.uniqueValues)!=null&&s.length){const o=[];t.uniqueValues.forEach(a=>{a.enabled&&o.push({label:a.label||`${a.value}`,value:a.value,symbol:new ha({color:a.color,outline:null})})}),o.length&&r.push({type:"symbol-table",title:t.label,infos:o})}else if(t.transferFunction){const{colorStops:o,stretchRange:a}=t.transferFunction,l=o.toArray().reverse(),c=a.map((f,m)=>`${m===0?oq:aq} ${ZMe(f)}`).reverse(),h=l.map(f=>({color:f.color,value:null,label:null}));h[0].label=c[0],h[h.length-1].label=c[1],r.push({type:"color-ramp",title:t.label,infos:h,preview:cd(l.map(f=>f.color))})}}const i=e.opacity,n=r.reduce((o,a)=>o.concat(this._getAllInfos(a)),[]).filter(o=>!!(o!=null&&o.symbol)).map(o=>this._getSymbolPreview(o,i));await Zt(n),this.legendElements=r,this.notifyChange("ready")}_constructLegendElementsForWMTSlayer(){this.legendElements=[],this._handles.remove("wmts-activeLayer-watcher");const e=this.layer.activeLayer;if(this._handles.add(G(()=>{const{layer:t}=this;return t&&"activeLayer"in t&&t.activeLayer},()=>this._constructLegendElementsForWMTSlayer()),"wmts-activeLayer-watcher"),e.styleId&&e.styles){let t=null;e.styles.some(r=>e.styleId===r.id&&(t=r.legendUrl,!0)),t&&(this.legendElements=[{type:"symbol-table",title:e.title,infos:[{src:t,opacity:this.opacity}]}])}this.notifyChange("ready")}async _constructLegendElementsForWMSSublayers(){this.legendElements=[],this._handles.remove("wms-sublayers-watcher");const e=this.layer;let t=null;(e.customParameters||e.customLayerParameters)&&(t={...e.customParameters,...e.customLayerParameters}),this._handles.add(G(()=>{const{layer:r}=this;return r&&"sublayers"in r&&r.sublayers},()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher"),this.legendElements=await this._generateLegendElementsForWMSSublayers(e.sublayers,t),this.notifyChange("ready")}async _generateLegendElementsForWMSSublayers(e,t){const r=[];this._handles.add(e.on("change",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");const i=e.toArray();for(const n of i){const s=G(()=>[n.title,n.visible,n.legendEnabled],()=>this._constructLegendElementsForWMSSublayers());if(this._handles.add(s,"wms-sublayers-watcher"),!this.respectLayerVisibility||n.visible&&n.legendEnabled){const o=await this._generateSymbolTableElementForWMSSublayer(n,t);o&&o.infos.length&&r.unshift(o)}}return r}async _generateSymbolTableElementForWMSSublayer(e,t){if(!e.legendUrl&&e.sublayers){const r=(await this._generateLegendElementsForWMSSublayers(e.sublayers,t)).filter(i=>i);return{type:"symbol-table",title:e.title,infos:r}}return this._generateSymbolTableElementForLegendUrl(e,t)}async _generateSymbolTableElementForLegendUrl(e,t){var o;let r=e.legendUrl;if(!r)return;const i={type:"symbol-table",title:e.title||e.name||e.id&&e.id+"",infos:[]};t&&(r=Hw(r,t));let n=null;const s=(o=e.layer)==null?void 0:o.opacity;try{n=(await nt(r,{responseType:"image"})).data,n&&(n.style.opacity=s)}catch{}return i.infos.push({src:r,preview:n,opacity:s}),i}_getLegendLayers(e,t){const r=Wh&&Wh[e];return r?Promise.resolve(r):this._legendRequest(t).then(i=>{const n=i.layers;return Wh[e]=n,n})}_legendRequest(e){const t=this.layer;let r={f:"json",dynamicLayers:e};if(My(t)){const n=t.exportImageServiceParameters.renderingRule;if(n&&(r.renderingRule=JSON.stringify(n.rasterFunctionDefinition||n.toJSON())),t.bandIds&&(r.bandIds=t.bandIds.join()),t.raster||t.viewId||t.customParameters){const{raster:s,viewId:o,customParameters:a}=t;r={raster:s,viewId:o,...r,...a}}}let i=t.url.replace(/(\/)+$/,"");if("version"in t&&t.version>=10.01){const n=i.indexOf("?");n>-1?i=i.substring(0,n)+"/legend"+i.substring(n):i+="/legend"}else{const n=i.toLowerCase().indexOf("/rest/"),s=i.substring(0,n)+i.substring(n+5,i.length);i=YMe+"?soapUrl="+encodeURI(s)+"&returnbytes=true"}return nt(i,{query:r}).then(n=>n.data)}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this._handles.remove("sublayers-watcher");const e=this.layer;this._handles.add(G(()=>e.sublayers,()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(e.sublayers,this.opacity),this.notifyChange("ready")}catch(t){Bl.warn("Request to server for legend has failed!",t)}}async _generateLegendElementsForBuildingSublayers(e,t){let r=[];this._handles.add(e.on("change",()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");const i=e.toArray();for(const n of i){const s=G(()=>["renderer"in n&&n.renderer,n.opacity,n.title,n.visible],()=>this._constructLegendElementsForBuildingSceneLayer());if(this._handles.add(s,"sublayers-watcher"),!this.respectLayerVisibility||n.visible){const o=n&&n.opacity!=null?n.opacity:null,a=o!=null?o*t:t;if(n.type==="building-group"){const l={type:"symbol-table",title:n.title,infos:[]},c=await this._generateLegendElementsForBuildingSublayers(n.sublayers,a);l.infos.push(...c),r=[l,...r]}else n.renderer&&(r=[...await this._getRendererLegendElements(n.renderer,{title:n.title,opacity:a,sublayer:n}),...r])}}return r.filter(n=>!!n&&(!("infos"in n)||n.infos.length>0))}async _constructLegendElementsForSublayers(){this.legendElements=[],this._handles.remove("sublayers-watcher");const e=this.layer;this._handles.add(G(()=>e.sublayers,()=>this._constructLegendElementsForSublayers),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForSublayers(e.sublayers,this.opacity),this.notifyChange("ready")}catch(t){Bl.warn("Request to server for legend has failed!",t)}}async _generateLegendElementsForSublayers(e,t,r){const i=this.layer;let n=[];this._handles.add(e.on("change",()=>this._constructLegendElementsForSublayers()),"sublayers-watcher");let s=e.toArray();!r&&this.sublayerIds&&this.sublayerIds.length&&(s=this.sublayerIds.map(o=>i.findSublayerById(o)).filter(Boolean));for(const o of s){const a=G(()=>[o.renderer,o.opacity,o.title,o.visible,o.legendEnabled],()=>this._constructLegendElementsForSublayers());if(this._handles.add(a,"sublayers-watcher"),!this.respectLayerVisibility||o.visible&&o.legendEnabled&&this._isSublayerInScale(o)){const l=o&&o.opacity!=null?o.opacity:null,c=l!=null?l*t:t;if(o.renderer&&!o.sublayers&&o.originIdOf("renderer")>xe.SERVICE)await o.load(),n=[...await this._getRendererLegendElements(o.renderer,{title:o.title,opacity:c,sublayer:o}),...n];else{const h=await this._generateSymbolTableElementForSublayer(o,c,r);h&&n.unshift(h)}}}return n.filter(o=>!!o&&(!("infos"in o)||o.infos.length>0))}async _generateSymbolTableElementForSublayer(e,t,r){if(!r){r=new Map;const n=this.layer,s=e.source;let o=null;if(!(!s||s.type==="map-layer"&&s.mapLayerId===e.id&&(!s.gdbVersion||s.gdbVersion===("gdbVersion"in n&&n.gdbVersion)))||e.originIdOf("renderer")>xe.SERVICE||e.originIdOf("labelingInfo")>xe.SERVICE||e.originIdOf("labelsVisible")>xe.SERVICE){const l=new $n({layer:this.layer});o=l.hasDynamicLayers?l.dynamicLayers:null,l.destroy()}const a=o||`${n.uid}-default`;(await this._getLegendLayers(a,o)).forEach(l=>r.set(l.layerId,l))}const i=r.get(e.id);if((!i||(i==null?void 0:i.subLayerIds)&&i.defaultVisibility)&&e.sublayers){const n=await this._generateLegendElementsForSublayers(e.sublayers,t,r);return{type:"symbol-table",title:e.title,infos:n}}return this._generateSymbolTableElementForLegendLayer(i,e,t)}_generateSymbolTableElementForLegendLayer(e,t,r){var a;if(!e||!e.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(e,t))return null;const i=t==null?void 0:t.renderer;let n=(t==null?void 0:t.title)||e.layerName;if(i&&(!t||(t==null?void 0:t.originIdOf("renderer"))>xe.SERVICE)){const l=(t==null?void 0:t.title)||this._getRendererTitle(i,t);l&&(n&&typeof l!="string"&&"title"in l&&(l.title=n),n=l)}const s={type:"symbol-table",title:n,legendType:e.legendType?e.legendType:null,infos:[]},o=t?this._sanitizeLegendForSublayer(e.legend.slice(),t):e.legend;return((a=e.legendGroups)==null?void 0:a.length)>0?e.legendGroups.forEach(l=>{var h;const c={type:"symbol-table",title:l.heading,legendType:e.legendType?e.legendType:null,infos:this._generateSymbolTableElementInfosForLegendLayer(o.filter(f=>f.groupId===l.id),e.layerId,r)};((h=c.infos)==null?void 0:h.length)>0&&s.infos.push(c)}):s.infos=this._generateSymbolTableElementInfosForLegendLayer(o,e.layerId,r),s.infos.length>0?s:null}_generateSymbolTableElementInfosForLegendLayer(e,t,r){return e.map(i=>{let n=i.url;if(i.imageData&&i.imageData.length>0)n=`data:image/png;base64,${i.imageData}`;else{if(n.indexOf("http")===0)return null;n=mne(`${this.layer.url}/${t}/images/${n}`)}return{label:i.label,src:n,opacity:r==null?this.opacity:r,width:i.width,height:i.height}}).filter(i=>!!i)}_isSublayerInScale(e){const t=e.minScale||0,r=e.maxScale||0;return!(t>0&&t<this.scale||r>this.scale)}_isLegendLayerInScale(e,t){const r=t||this.layer;let i=null,n=null,s=!0;return!r.minScale&&r.minScale!==0||!r.maxScale&&r.maxScale!==0?(e.minScale===0&&r.tileInfo&&(i=r.tileInfo.lods[0].scale),e.maxScale===0&&r.tileInfo&&(n=r.tileInfo.lods[r.tileInfo.lods.length-1].scale)):(i=Math.min(r.minScale,e.minScale)||r.minScale||e.minScale,n=Math.max(r.maxScale,e.maxScale)),(i>0&&i<this.scale||n>this.scale)&&(s=!1),s}_sanitizeLegendForSublayer(e,t){if("version"in this.layer&&this.layer.version<10.1||e.length===0)return e;const r=t.renderer,i=e.some(o=>o.values);let n=null,s=null;return i&&e.some((o,a)=>(o.values||(n=a,s=o,s.label||(s.label="others")),s!=null)),r?r.type==="unique-value"?s&&(e.splice(n,1),e.push(s)):r.type==="class-breaks"&&(s&&e.splice(n,1),e.reverse(),s&&e.push(s)):s&&(e.splice(n,1),e.push(s)),e}async _getRendererLegendElements(e,t={}){return nIe(e,this.view)?rIe(e)?this._constructPointCloudRendererLegendElements(e,t):PY(e)?this._constructDotDensityRendererLegendElements(e):RY(e)?this._constructPieChartRendererLegendElements(e):this._constructRendererLegendElements(e,t):(Bl.warn(`Renderer of type '${e.type}' not supported!`),[])}_getPointCloudRendererTitle(e){return e.legendOptions&&e.legendOptions.title||e.field}_constructPointCloudRendererLegendElements(e,t={}){const r=t.title,i=[];let n=null,s=null;if(DP(e))n={type:"symbol-table",title:r||this._getPointCloudRendererTitle(e),infos:[]},e.colorClassBreakInfos.forEach(a=>{n.infos.unshift({label:a.label||a.minValue+" - "+a.maxValue,value:[a.minValue,a.maxValue],symbol:this._getAppliedCloneSymbol(Mw,a.color)})});else if(jP(e)){const a=e.stops;let l=null;if(a.length&&(a.length===1&&(l=a[0].color),!l)){const h=a[0].value,f=a[a.length-1].value;h!=null&&f!=null&&(l=dq(h+(f-h)/2,a))}n={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(Mw,l||Mw.color)}]};const c=Bye(e.stops);s={type:"color-ramp",title:r||this._getPointCloudRendererTitle(e),infos:c,preview:cd(c.map(h=>h.color))}}else VP(e)&&(n={type:"symbol-table",title:r||this._getPointCloudRendererTitle(e),infos:[]},e.colorUniqueValueInfos.forEach(a=>{n.infos.push({label:a.label||a.values.join(", "),value:a.values.join(", "),symbol:this._getAppliedCloneSymbol(Mw,a.color)})}));n&&n.infos.length&&i.push(n),s&&s.infos.length&&i.push(s);const o=i.reduce((a,l)=>a.concat(l.infos),[]).filter(a=>!!a.symbol).map(a=>this._getSymbolPreview(a,this.opacity,{symbolConfig:{applyColorModulation:!!e.colorModulation}}));return Zt(o).then(()=>i)}_getElementInfoForDotDensity(e,t){var m;const{backgroundColor:r,outline:i,dotSize:n}=e,s=(m=this.effectList)==null?void 0:m.effects.map(y=>y.toJSON()),o=CS(s),a=n+"-"+t+"-"+r+"-"+(i&&JSON.stringify(i.toJSON()))+"-"+o,l=this._dotDensityUrlCache,c=l.has(a)?l.get(a):M2e(e,t);l.set(a,c);const h={shape:{type:"image",x:0,y:0,width:c.width,height:c.height,src:c.src},fill:null,stroke:null,offset:[0,0]},f=Zv([[h]],[c.width,c.height],{effectView:this.effectList});return{opacity:1,src:c.src,preview:f,width:c.width,height:c.height}}_constructDotDensityRendererLegendElements(e){const t=e.calculateDotValue(this.view.scale),r=e.legendOptions&&e.legendOptions.unit,i={type:"symbol-table",title:{value:t&&Math.round(t),unit:r||""},infos:[]};return e.attributes.forEach(n=>{const s=this._getElementInfoForDotDensity(e,n.color);s.label=n.label||n.valueExpressionTitle||n.field,i.infos.push(s)}),Promise.resolve([i])}async _constructPieChartRendererLegendElements(e){var l,c,h,f;const t=this.layer.opacity,r=[],i="Others",n=e.outline;e.attributes.forEach(m=>{const y=new rn({color:m.color,outline:n}),g=m.label||m.valueExpressionTitle||m.field;r.push({label:g,symbol:y})});const s=r.length?[...r]:[];if(((l=e.othersCategory)==null?void 0:l.color)&&((c=e.othersCategory)==null?void 0:c.threshold)!==0){const m=new rn({color:e.othersCategory.color,outline:n});r.push({label:e.othersCategory.label||i,symbol:m})}if((h=e.defaultColor)!=null&&h.a){const m=new rn({color:e.defaultColor,outline:n});r.push({label:e.defaultLabel,symbol:m})}const o=await this._getVisualVariableLegendElements(e,this.layer)||[];if(r.length){o.unshift({type:"symbol-table",title:null,infos:r});const m=s.filter(g=>g.label!==i).map(g=>g.symbol.color).filter(Boolean),y=I2e(m,{holePercentage:e.holePercentage,backgroundColor:(f=e.backgroundFillSymbol)==null?void 0:f.color,effectList:this.effectList,outline:n});o.unshift({type:"pie-chart-ramp",title:this._getRendererTitle(e,this.layer),infos:r,preview:y})}const a=o.reduce((m,y)=>m.concat(this._getAllInfos(y)),[]).filter(m=>!!(m!=null&&m.symbol)&&!(m!=null&&m.preview)).map(m=>this._getSymbolPreview(m,t,{effectList:this.effectList}));return await Zt(a),o}async _constructRendererLegendElements(e,t={}){var _;const{title:r,sublayer:i}=t,n=i||this.layer;let s=await this._loadRenderer(e);this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const o=await this._getVisualVariableLegendElements(s,n)||[],a={type:"symbol-table",title:r||this._getRendererTitle(s,n),infos:[]};let l=null,c=!1;const h=new Set;if(VL(s)&&!this._hasSizeRamp){const w=await uq(s);a.infos.push({label:null,symbol:w})}else if(hIe(s)){let w=r;const b=pIe(s)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",S=o.findIndex(F=>F.type==="color-ramp"),M=S!==-1?o.splice(S,1)[0]:null,T=o.findIndex(F=>F.type==="size-ramp"),k=T!==-1?o.splice(T,1)[0]:null,N=[];M&&(w=M.title,N.push(M)),k&&(w=k.title,N.push(k)),N.length>0&&o.push({type:b,title:w,infos:N})}else if(AY(s)){const w=hq(s);o.push({type:"heatmap-ramp",title:r||((_=s.legendOptions)==null?void 0:_.title),infos:w,preview:cd(w.map(b=>b.color),{effectList:this.effectList})})}else if(zL(s)){const w=s&&s.authoringInfo;if(w&&w.type==="relationship"){const{focus:b,numClasses:S,field1:M,field2:T}=w;if(S&&M&&T){const k=[M,T];let N=$Y(b)||0;for(const q of k){const{field:z,normalizationField:Q,label:K}=q,ce=K||{field:this._getFieldAlias(z,n),normField:Q&&this._getFieldAlias(Q,n)},ie=fIe.clone();ie.angle=N,a.infos.push({label:ce,symbol:ie}),h.add(ie),N+=90}const F=OMe({focus:b,numClasses:S,infos:s.uniqueValueInfos});o.unshift(F)}}else{const b=s.field;s.uniqueValueInfos.forEach(S=>{S.symbol&&a.infos.push({label:S.label||this._getDomainName(b,S.value,n)||S.value,value:S.value,symbol:S.symbol})})}s.defaultSymbol&&(a.infos.push({label:s.defaultLabel||"others",symbol:s.defaultSymbol}),c=!0)}else if(Np(s))l=this._isUnclassedRenderer(s),(!l||!this._hasSizeRamp)&&(s.classBreakInfos.forEach(w=>{w.symbol&&a.infos.unshift({label:w.label||(l?null:w.minValue+" - "+w.maxValue),value:[w.minValue,w.maxValue],symbol:w.symbol})}),l&&(a.title=null),this._updateInfosforClassedSizeRenderer(s,a.infos)),s.defaultSymbol&&!l&&(a.infos.push({label:s.defaultLabel||"others",symbol:s.defaultSymbol}),c=!0);else if(LY(s))if(rT(this.layer)||cIe(this.layer)){const w=this._constructTileImageryStretchRendererElements(s);dIe(w)?o.push(w):a.infos=w}else{const w=this.layer;let b,S;s.statistics&&s.statistics.length&&(b=s.statistics[0].min!=null?s.statistics[0].min:s.statistics[0][0],S=s.statistics[0].max!=null?s.statistics[0].max:s.statistics[0][1]);let M=[];const T=w.renderingRule?await w.generateRasterInfo(w.renderingRule):w.serviceRasterInfo,k=T.keyProperties.BandProperties,N=a6[w.rasterInfo.pixelType.toLowerCase()];T.bandCount===1||w.bandIds&&w.bandIds.length===1?(b=b!=null?b:T.statistics?T.statistics[w.bandIds[0]].min:N[0],S=S!=null?S:T.statistics?T.statistics[w.bandIds[0]].max:N[1],b||S?o.push(this._getStretchLegendElements(s,{min:b,max:S})):this._getServerSideLegend()):T.bandCount>=3?k&&k.length>=T.bandCount?w.bandIds&&w.bandIds.length===3?(M=w.bandIds.map(F=>k[F].BandName),a.infos=this._createSymbolTableElementMultiBand(M)):w.format==="lerc"?(M=[0,1,2].map(F=>k[F].BandName),a.infos=this._createSymbolTableElementMultiBand(M)):this._getServerSideLegend():w.format==="lerc"?(M=["band1","band2","band3"],a.infos=this._createSymbolTableElementMultiBand(M)):this._getServerSideLegend():this._getServerSideLegend()}else if(kY(s))s.colormapInfos.forEach(w=>{a.infos.push({label:w.label,value:w.value,symbol:this._getAppliedCloneSymbol(tIe,w.color)})});else if(Fp(s)){let w=s.symbol;switch(t.geometryType){case"point":w="pointSymbol"in n&&n.pointSymbol;break;case"polyline":w="lineSymbol"in n&&n.lineSymbol;break;case"polygon":w="polygonSymbol"in n&&n.polygonSymbol}s.symbol&&!this._hasSizeRamp&&a.infos.push({label:s.label,symbol:w})}else if(CY(s)){s.outputUnit&&(this.title="("+s.toJSON().outputUnit+")"),a.title=s.attributeField;const w=s.getClassBreakInfos();w!=null&&w.length?w.forEach(b=>{a.infos.push({label:b.minValue+" - "+b.maxValue,symbol:b.symbol})}):a.infos.push({label:s.attributeField,symbol:s.getDefaultSymbol()})}else OY(s)&&o.push(this._getStretchLegendElements(s,{min:0,max:255}));const f=s.defaultSymbol;!f||c||Fp(s)||l&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||o.push({type:"symbol-table",infos:[{label:s.defaultLabel||"others",symbol:f}]}),a.infos.length&&o.unshift(a);const m=t.opacity==null?this.opacity:t.opacity,y=this._isTallSymbol("visualVariables"in s&&s.visualVariables),g=My(this.layer)||rT(this.layer),v=o.reduce((w,b)=>w.concat(this._getAllInfos(b)),[]).filter(w=>!!(w!=null&&w.symbol)).map(w=>this._getSymbolPreview(w,m,{isDefault:w.symbol===f,applyScaleDrivenSize:!h.has(w.symbol),symbolConfig:{isTall:y,isSquareFill:g},effectList:h.has(w.symbol)?null:this.effectList}));return s=null,await Zt(v),o}_getServerSideLegend(){setTimeout(()=>this.buildLegendElementsForTools(),0)}_getAllInfos(e){const t=e==null?void 0:e.infos;return t?t.reduce((r,i)=>r.concat(this._getAllInfos(i)),[]):[e]}_constructTileImageryStretchRendererElements(e){var h,f;const t=this.layer,r=t.rasterInfo,i=r.bandCount||e.statistics.length;let n,s,o=[];const a=r.keyProperties&&r.keyProperties.BandProperties,l=(h=e==null?void 0:e.statistics)!=null&&h.length?e.statistics:r==null?void 0:r.statistics;if(l)n=l[0].min!==void 0?l[0].min:l[0][0],s=l[0].max||l[0][1];else{const m=a6[t.rasterInfo.pixelType.toLowerCase()];n=m[0],s=m[1]}if(t.hasStandardTime()&&(n=t.getStandardTimeValue(n),s=t.getStandardTimeValue(s)),r.bandCount===1||((f=t.bandIds)==null?void 0:f.length)===1)return this._getStretchLegendElements(e,{min:n,max:s});function c(m){var g;const y=((g=t==null?void 0:t.bandIds)!=null&&g.length?t.bandIds:Array.from(Array(Math.min(r.bandCount,3)).keys())).map(v=>m&&m[v]&&m[v].BandName||"band"+(v+1));return y.length<3?y.push(y[1]):y.length>3&&y.splice(3),y}return o=a&&a.length>=i?c(a):c(),this._createSymbolTableElementMultiBand(o)}_getStretchLegendElements(e,t){const r=e.colorRamp,i=Wye(r,t);return{type:"stretch-ramp",title:"",infos:i,preview:cd(i.map(n=>n.color))}}async _getSizeLegendElement(e,t,r,i){return{type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(t):e,infos:await VMe(r,t,await AC(r),this.scale,this.view.type,i)}}_createSymbolTableElementMultiBand(e){const t=[],r=["red","green","blue"];return e.forEach((i,n)=>{var s;t.push({label:{colorName:r[n],bandName:i},src:zye[n],opacity:(s=this.opacity)!=null?s:1})}),t}_updateInfosforClassedSizeRenderer(e,t){const r=e.authoringInfo&&e.authoringInfo.type==="class-breaks-size",i=e.classBreakInfos.some(n=>o$(n.symbol));if(r&&i){const n=DL,s=jL,o=e.classBreakInfos.length,a=(n-s)/(o>1?o-1:o);t.forEach((l,c)=>{l.size=n-a*c})}}_isTallSymbol(e){let t=!1,r=!1;if(e)for(let i=0;i<e.length&&(!t||!r);i++){const n=e[i];n.type==="size"&&(n.axis==="height"&&(t=!0),n.axis==="width-and-depth"&&(r=!0))}return t&&r}async _getSymbolPreview(e,t,r){let i=!(r!=null&&r.isDefault)&&e.size==null&&this._hasSizeRamp?_s(fr.size):e.size;if(this._scaleDrivenSizeVariable&&(r==null?void 0:r.applyScaleDrivenSize)){const{getSize:n}=await V(()=>Promise.resolve().then(()=>Oh),void 0,import.meta.url);i=n(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:e.symbol.type==="simple-marker"?e.symbol.style:null})}return HJ(e.symbol,{size:i,opacity:t,scale:!1,symbolConfig:r==null?void 0:r.symbolConfig,effectView:r==null?void 0:r.effectList}).then(n=>(e.preview=n,e)).catch(()=>(e.preview=null,e))}async _loadRenderer(e){var s,o;const t=[],r=this.layer;e=e.clone(),this._hasClusterSizeVariable=!1;const i="visualVariables"in e&&((s=e.visualVariables)==null?void 0:s.some(a=>a.type==="size"&&a.target!=="outline"&&!Tw.test(a.valueExpression)));if(e&&"visualVariables"in e&&!i&&"featureReduction"in r&&((o=r.featureReduction)==null?void 0:o.type)==="cluster"){const a=this.layerView._effectiveRenderer,l=fMe(a,this.view);if(l){const c=r.featureReduction;if("clusterMinSize"in c&&"clusterMaxSize"in c){const{clusterMinSize:f,clusterMaxSize:m}=c;l.legendOptions=new sH({showLegend:f!==m})}const h=e.visualVariables||[];e.visualVariables=h.concat([l]),this._hasClusterSizeVariable=!0}}const n=await AC(e);if(Np(e)||zL(e)){const a=(e.classBreakInfos||e.uniqueValueInfos).map(l=>this._fetchSymbol(l.symbol,n).then(c=>{l.symbol=c}).catch(()=>{l.symbol=null}));Array.prototype.push.apply(t,a)}return t.push(this._fetchSymbol(e.symbol||e.defaultSymbol,e.defaultSymbol?null:n).then(a=>{this._applySymbolToRenderer(e,a,Fp(e))}).catch(()=>{this._applySymbolToRenderer(e,null,Fp(e))})),Zt(t).then(()=>e)}_applySymbolToRenderer(e,t,r){r?e.symbol=t:e.defaultSymbol=t}async _fetchSymbol(e,t){if(!e)throw new Error;if(e.type==="web-style"){const r=this._webStyleSymbolCache;try{const i=await(this.view.type==="2d"?e.fetchCIMSymbol({cache:r}):e.fetchSymbol({cache:r}));return this._getAppliedCloneSymbol(i,t)}catch{throw Bl.warn("Fetching web-style failed!"),new Error}}return this._getAppliedCloneSymbol(e,t)}_getAppliedCloneSymbol(e,t){if(!e||!t)return e;const r=e.clone(),i=t&&t.toRgba();return r.type.includes("3d")?this._applyColorTo3dSymbol(r,i):r.type==="cim"?eq(r,t):r.color&&(r.color=new ae(i||r.color)),r}_applyColorTo3dSymbol(e,t){t&&e.symbolLayers.forEach(r=>{r&&(r.material||(r.material={}),r.material.color=new ae(t))})}async _getVisualVariableLegendElements(e,t){if(!("visualVariables"in e)||!e.visualVariables||e.type==="vector-field")return null;const r=e.visualVariables,i=[],n=[],s=[];for(const h of r)h.type==="color"?i.push(h):h.type==="size"?n.push(h):h.type==="opacity"&&s.push(h);const o=[...i,...n,...s];let a,l;if(i.length===0&&Np(e)&&e.classBreakInfos&&e.classBreakInfos.length===1){const h=e.classBreakInfos[0];a=h&&h.symbol}if(i.length===0&&Fp(e)&&(a=e.symbol),a)if(a.type.includes("3d")){const h=a.symbolLayers.getItemAt(0);h.type==="water"?I(h.color)&&(l=h.color):I(h.material)&&I(h.material.color)&&(l=h.material.color)}else a.url||(l=a.color);const c=this.effectList;return(await Promise.all(o.map(async h=>{if(!h.legendOptions||h.legendOptions.showLegend!==!1){const f=VL(e)?h.field:this._getRampTitle(h,t);let m=null;const y="getField"in t&&t.getField&&t.getField(h.field),g=y&&Kae(y);if(h.type==="color"){const v=await PC(h,null,g);m={type:"color-ramp",title:f,infos:v,preview:cd(v.map(_=>_.color),{effectList:c})},this._hasColorRamp||(this._hasColorRamp=!(m.infos==null||!m.infos.length))}else if(h.type==="size"&&h.target!=="outline")Tw.test(h.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=h):(m=await this._getSizeLegendElement(f,h,e,g),this._hasSizeRamp||(this._hasSizeRamp=!(m.infos==null||!m.infos.length)));else if(h.type==="opacity"){const v=await PC(h,l,g);m={type:"opacity-ramp",title:f,infos:v,preview:cd(v.map(_=>_.color),{effectList:c})},this._hasOpacityRamp||(this._hasOpacityRamp=!(m.infos==null||!m.infos.length))}return m&&m.infos?m:null}}))).filter(h=>!!h)}_getDomainName(e,t,r){if(e&&typeof e!="function"){const i="getField"in r&&r.getField&&r.getField(e),n=i&&"getFieldDomain"in r&&r.getFieldDomain?r.getFieldDomain(i.name):null;return n&&n.type==="coded-value"?n.getName(t):null}return null}_getClusterTitle(e){const t=this.layer,r=e.field;if("featureReduction"in t&&t.featureReduction&&t.featureReduction.type==="cluster"){const i=t.featureReduction,n="popupTemplate"in i&&i.popupTemplate,s=n&&n.fieldInfos;if(s){for(const o of s)if(o.fieldName===r)return r==="cluster_count"?o.label||{showCount:!0}:o.label}}return{showCount:!0}}_getRampTitle(e,t){let r=e.field,i=e.normalizationField,n=!1,s=!1,o=!1,a=null;r=typeof r=="function"?null:r,i=typeof i=="function"?null:i;const l=e.legendOptions&&e.legendOptions.title;if(l!=null)a=l;else if(e.valueExpressionTitle)a=e.valueExpressionTitle;else{if("renderer"in t&&t.renderer&&"authoringInfo"in t.renderer&&t.renderer.authoringInfo&&t.renderer.authoringInfo.visualVariables){const c=t.renderer.authoringInfo.visualVariables;for(let h=0;h<c.length;h++){const f=c[h];if(f.type==="color"){if(f.style==="ratio"){n=!0;break}if(f.style==="percent"){s=!0;break}if(f.style==="percent-of-total"){o=!0;break}}}}a={field:r&&this._getFieldAlias(r,t),normField:i&&this._getFieldAlias(i,t),ratio:n,ratioPercent:s,ratioPercentTotal:o}}return a}_getRendererTitle(e,t){const r=e;if(r.legendOptions&&r.legendOptions.title)return r.legendOptions.title;if(r.valueExpressionTitle)return r.valueExpressionTitle;let i=r.field,n=null,s=null;Np(r)&&(n=r.normalizationField,s=r.normalizationType==="percent-of-total"),i=typeof i=="function"?null:i,n=typeof n=="function"?null:n;let o=null;return(i||n)&&(o={field:i&&this._getFieldAlias(i,t),normField:n&&this._getFieldAlias(n,t),normByPct:s}),o}_getFieldAlias(e,t){const r="popupTemplate"in t&&t.popupTemplate,i=r&&r.fieldInfos;let n=null;i&&i.some(l=>e===l.fieldName&&(n=l,!0));let s=null;"getField"in t&&t.getField?s=t.getField(e):"fieldsIndex"in t&&t.fieldsIndex&&(s=t.fieldsIndex.get(e));const o=n||s;let a=null;return o&&(a=n&&n.label||s&&s.alias||"name"in o&&o.name||"fieldName"in o&&o.fieldName),a}_isUnclassedRenderer(e){const t=e.visualVariables;let r=!1;return Np(e)&&e.classBreakInfos&&e.classBreakInfos.length===1&&t&&(r=e.field?t.some(i=>!(!i||e.field!==i.field||(e.normalizationField||i.normalizationField)&&e.normalizationField!==i.normalizationField)):!!t.length),r}};u([d()],lr.prototype,"children",void 0),u([d({readOnly:!0})],lr.prototype,"effectList",null),u([d()],lr.prototype,"layerView",void 0),u([d()],lr.prototype,"layer",void 0),u([d()],lr.prototype,"legendElements",void 0),u([d({readOnly:!0})],lr.prototype,"opacity",null),u([d()],lr.prototype,"parent",void 0),u([d({readOnly:!0,dependsOn:[]})],lr.prototype,"ready",null),u([d()],lr.prototype,"hideLayersNotInCurrentView",void 0),u([d()],lr.prototype,"keepCacheOnDestroy",void 0),u([d()],lr.prototype,"respectLayerVisibility",void 0),u([d({readOnly:!0})],lr.prototype,"scale",null),u([d()],lr.prototype,"sublayerIds",void 0),u([d({readOnly:!0})],lr.prototype,"isScaleDriven",null),u([d()],lr.prototype,"title",void 0),u([d({readOnly:!0,dependsOn:["ready"],value:0})],lr.prototype,"version",null),u([d()],lr.prototype,"view",void 0),lr=u([E("esri.widgets.Legend.support.ActiveLayerInfo")],lr);const FY=lr,Cc={state:"state",view:"view",allLayerViews:"all-layer-views",legendProperties:"legend-properties"},NY=de.ofType(FY),mIe=["esri.layers.BuildingSceneLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.TileLayer","esri.layers.VoxelLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer"],DY="view.basemapView.baseLayerViews",jY="view.groundView.layerViews",VY="view.basemapView.referenceLayerViews",yIe=[DY,jY,"view.layerViews",VY];let ts=class extends le{constructor(e){super(e),this._handles=new zt,this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new de,this.activeLayerInfos=new NY,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this._handles.add(G(()=>this.view,()=>this._viewHandles(),je),Cc.view),this._handles.add(m3(()=>this._refresh()))}destroy(){this._destroyViewActiveLayerInfos(),this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}_viewHandles(){this._handles.remove(Cc.state),this.view&&this._handles.add(G(()=>this.state,()=>this._stateHandles(),je),Cc.state)}_stateHandles(){this._resetAll(),this.state==="ready"&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this._handles.remove([Cc.allLayerViews,Cc.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(e){this._handles.remove(e);const t=this._activeLayerInfosByLayerViewId[e];delete this._activeLayerInfosByLayerViewId[e],t&&t.parent&&t.parent.children.remove(t)}_watchPropertiesAndAllLayerViews(){const{allLayerViews:e}=this.view;e.length&&this._refresh(),this._handles.add(e.on("change",t=>this._allLayerViewsChangeHandle(t)),Cc.allLayerViews),this._handles.add(G(()=>[this.layerInfos,this.basemapLegendVisible,this.groundLegendVisible],()=>this._propertiesChangeHandle()),Cc.legendProperties)}_allLayerViewsChangeHandle(e){e.removed.forEach(t=>this._destroyViewActiveLayerInfo(t.uid)),this._refresh()}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(e){if(e.length<2)return;const t=[];e.forEach(i=>{if(!i.parent){const n=i.layer.parent,s=n&&"uid"in n&&this._layerViewByLayerId[n.uid],o=s&&this._activeLayerInfosByLayerViewId[s.uid];o&&e.includes(o)&&(t.push(i),i.parent=o,o.children.add(i),this._sortActiveLayerInfos(o.children))}}),e.removeMany(t);const r={};this.view.allLayerViews.forEach((i,n)=>r[i.layer.uid]=n),e.sort((i,n)=>{const s=r[i.layer.uid]||0;return(r[n.layer.uid]||0)-s})}_generateLayerViews(){const e=[];return yIe.filter(this._filterLayerViews,this).map(this.get,this).filter(t=>t!=null).forEach(this._collectLayerViews("layerViews",e)),e}_filterLayerViews(e){const t=!this.basemapLegendVisible&&(e===DY||e===VY),r=!this.groundLegendVisible&&e===jY;return!t&&!r}_collectLayerViews(e,t){const r=i=>(i&&i.forEach(n=>{t.push(n),r(n[e])}),t);return r}_filterLayerViewsByLayerInfos(e){const t=this.layerInfos;return!t||!t.length||t.some(r=>this._hasLayerInfo(r,e))}_hasLayerInfo(e,t){const r=this._isLayerUIDMatching(e.layer,t.layer.uid);return r&&(this._layerInfosByLayerViewId[t.uid]=e),r}_isLayerUIDMatching(e,t){return e&&(e.uid===t||this._hasLayerUID(e.layers,t))}_hasLayerUID(e,t){return e&&e.some(r=>this._isLayerUIDMatching(r,t))}_isLayerViewSupported(e){return!!mIe.includes(e.layer.declaredClass)&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this._handles.remove(e.uid),this._handles.add(G(()=>{var t;return[e.legendEnabled,(t=e.layer)==null?void 0:t.legendEnabled]},()=>this._layerActiveHandle(e)),e.uid))}_layerActiveHandle(e){this._isLayerActive(e)&&(this._handles.remove(e.uid),this._buildActiveLayerInfo(e))}_isLayerActive(e){return!this.respectLayerVisibility||e.legendEnabled&&e.get("layer.legendEnabled")}_buildActiveLayerInfo(e){var o;const t=e.layer,r=e.uid,i=this._layerInfosByLayerViewId[r];let n=this._activeLayerInfosByLayerViewId[r];if(!n){const a=i&&i.title!==void 0&&i.layer.uid===t.uid;n=new FY({layer:t,layerView:e,title:a?i.title:t.title,view:this.view,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:i&&i.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[r]=n}const s=t.parent&&"uid"in t.parent&&this._layerViewByLayerId[(o=t.parent)==null?void 0:o.uid];if(n.parent=this._activeLayerInfosByLayerViewId[s==null?void 0:s.uid],!this._handles.has(r)){const a=[G(()=>t.title,l=>this._titleHandle(l,n)),G(()=>[t.opacity,"renderer"in t&&t.renderer,"pointSymbol"in t&&t.pointSymbol,"lineSymbol"in t&&t.lineSymbol,"polygonSymbol"in t&&t.polygonSymbol],()=>this._constructLegendElements(n)),di(()=>{var l;return((l=this.view)==null?void 0:l.stationary)===!0},()=>this._scaleHandle(n),je),G(()=>e._effectiveRenderer,()=>this._constructLegendElements(n)),G(()=>"effect"in t&&t.effect,()=>this._constructLegendElements(n))];if(this.respectLayerVisibility){const l=G(()=>e.legendEnabled,h=>this._legendEnabledHandle(h,n)),c=G(()=>t.legendEnabled,h=>this._legendEnabledHandle(h,n));a.push(l,c)}this._handles.add(a,r)}n.isScaleDriven||this._constructLegendElements(n),this._addActiveLayerInfo(n)}_titleHandle(e,t){t.title=e,this._constructLegendElements(t)}_legendEnabledHandle(e,t){e?this._addActiveLayerInfo(t):this._removeActiveLayerInfo(t)}_scaleHandle(e){(e.isScaleDriven||e.hideLayersNotInCurrentView)&&this._constructLegendElements(e)}_addActiveLayerInfo(e){var i;const{layerView:t,layer:r}=e;if(this._isLayerActive(t)&&!this.activeLayerInfos.includes(e)){const n=e.parent;if(n)n.children.includes(e)||n.children.push(e),this._sortActiveLayerInfos(n.children);else{const s=(i=this.layerInfos)==null?void 0:i.some(o=>o.layer.uid===r.uid);r.parent&&"uid"in r.parent&&!s?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const s=[];this._activeLayerInfosWithNoParent.forEach(o=>{const a=o.layer.parent,l=a&&"uid"in a&&this._layerViewByLayerId[a==null?void 0:a.uid],c=this._activeLayerInfosByLayerViewId[l==null?void 0:l.uid];c&&(s.push(o),o.parent=c)}),s.length&&(this._activeLayerInfosWithNoParent.removeMany(s),s.forEach(o=>this._addActiveLayerInfo(o)))}}}_removeActiveLayerInfo(e){const t=e.parent;t?t.children.remove(e):this.activeLayerInfos.remove(e)}_constructLegendElements(e){var r;const t=e.layer;"featureCollections"in t&&t.featureCollections?e.buildLegendElementsForFeatureCollections(t.featureCollections):"featureReduction"in t&&((r=t.featureReduction)==null?void 0:r.type)==="binning"&&"renderer"in t.featureReduction?e.buildLegendElementsForRenderer(t.featureReduction.renderer):"renderer"in t&&t.renderer?e.buildLegendElementsForRenderer(t.renderer):"url"in t&&t.url?e.buildLegendElementsForTools():e.children.forEach(i=>this._constructLegendElements(i))}};u([d({type:NY})],ts.prototype,"activeLayerInfos",void 0),u([d()],ts.prototype,"basemapLegendVisible",void 0),u([d()],ts.prototype,"groundLegendVisible",void 0),u([d()],ts.prototype,"hideLayersNotInCurrentView",void 0),u([d()],ts.prototype,"keepCacheOnDestroy",void 0),u([d()],ts.prototype,"respectLayerVisibility",void 0),u([d()],ts.prototype,"layerInfos",void 0),u([d({readOnly:!0})],ts.prototype,"state",null),u([d()],ts.prototype,"view",void 0),ts=u([E("esri.widgets.Legend.LegendViewModel")],ts);const gIe=ts,vIe="http://www.w3.org/2000/svg",ut={diamondContainer:"esri-relationship-ramp--diamond__container",diamondLeftCol:"esri-relationship-ramp--diamond__left-column",diamondRightCol:"esri-relationship-ramp--diamond__right-column",diamondMidCol:"esri-relationship-ramp--diamond__middle-column",diamondMidColLabel:"esri-relationship-ramp--diamond__middle-column--label",diamondMidColRamp:"esri-relationship-ramp--diamond__middle-column--ramp",squareTable:"esri-relationship-ramp--square__table",squareTableRow:"esri-relationship-ramp--square__table-row",squareTableCell:"esri-relationship-ramp--square__table-cell",squareTableLabel:"esri-relationship-ramp--square__table-label",squareTableLabelLeftBottom:"esri-relationship-ramp--square__table-label--left-bottom",squareTableLabelRightBottom:"esri-relationship-ramp--square__table-label--right-bottom",squareTableLabelLeftTop:"esri-relationship-ramp--square__table-label--left-top",squareTableLabelRightTop:"esri-relationship-ramp--square__table-label--right-top"};function zY(e,t,r,i){const{focus:n,labels:s}=e,o=!!n,a=wIe(e,t,r,i),l={justifyContent:"center"},c=oo();return o?x("div",{class:ut.diamondContainer,styles:l},x("div",{class:ut.diamondLeftCol},c?s.right:s.left),x("div",{class:ut.diamondMidCol},x("div",{class:ut.diamondMidColLabel},s.top),a,x("div",{class:ut.diamondMidColLabel},s.bottom)),x("div",{class:ut.diamondRightCol},c?s.left:s.right)):x("div",{class:ut.squareTable},x("div",{class:ut.squareTableRow},x("div",{class:tf(ut.squareTableCell,ut.squareTableLabel,ut.squareTableLabelRightBottom)},c?s.top:s.left),x("div",{class:ut.squareTableCell}),x("div",{class:tf(ut.squareTableCell,ut.squareTableLabel,ut.squareTableLabelLeftBottom)},c?s.left:s.top)),x("div",{class:ut.squareTableRow},x("div",{class:ut.squareTableCell}),a,x("div",{class:ut.squareTableCell})),x("div",{class:ut.squareTableRow},x("div",{class:tf(ut.squareTableCell,ut.squareTableLabel,ut.squareTableLabelRightTop)},c?s.right:s.bottom),x("div",{class:ut.squareTableCell}),x("div",{class:tf(ut.squareTableCell,ut.squareTableLabel,ut.squareTableLabelLeftTop)},c?s.bottom:s.right)))}function c6(e,t,r){const i=`${r}_arrowStart`,n=`${r}_arrowEnd`,s=e==="left",o={markerStart:null,markerEnd:null};switch(t){case"HL":s?o.markerStart=`url(#${n})`:o.markerEnd=`url(#${i})`;break;case"LL":o.markerStart=`url(#${n})`;break;case"LH":s?o.markerEnd=`url(#${i})`:o.markerStart=`url(#${n})`;break;default:o.markerEnd=`url(#${i})`}return o}function wIe(e,t,r,i,n=60){const{focus:s,numClasses:o,colors:a,rotation:l}=e,c=!!s,h=Math.sqrt(n**2+n**2)+(c?0:5),f=[],m=[],y=[],g=(n||75)/o;for(let z=0;z<o;z++){const Q=z*g;for(let K=0;K<o;K++){const ce=K*g,ie=xP(a[z][K]),Oe=EP(null),Qe={type:"rect",x:ce,y:Q,width:g,height:g};f.push(GJ(ie)),m.push($P(Qe,ie.fill,Oe,null)),y.push(BJ(Qe))}}const v=10,_=15,w=15,b=10;let S=null;c||(S="margin: -15px -15px -18px -15px");const M=c6("left",s,t),T=c6("right",s,t),k=qJ(y),N=wL(k,h,h,0,!1,l,!1),F=wL(k,h,h,0,!1,c?-45:null,!1),q={filter:rv(i),opacity:r==null?null:`${r}`};return x("div",{styles:q,class:c?ut.diamondMidColRamp:ut.squareTableCell},x("svg",{xmlns:vIe,width:h,height:h,style:S},x("defs",null,x("marker",{id:`${t}_arrowStart`,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"strokeWidth",orient:"auto"},x("polyline",{points:"0,0 5,5 0,10",fill:"none",stroke:"#555555","stroke-width":"1"})),x("marker",{id:`${t}_arrowEnd`,markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",markerUnits:"strokeWidth",orient:"auto"},x("polyline",{points:"5,0 0,5 5,10",fill:"none",stroke:"#555555","stroke-width":"1"})),f),x("g",{transform:N},m),x("g",{transform:F},x("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":M.markerStart,"marker-end":M.markerEnd,x1:-v,y1:n-_,x2:-v,y2:_}),x("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":T.markerStart,"marker-end":T.markerEnd,x1:w,y1:n+b,x2:n-w,y2:n+b}))))}const _Ie=mS(),UY=10,zP=20,k$=10,UP=20,GP={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};function bIe(e="vertical"){const t="stroke:rgb(200, 200, 200);stroke-width:1";return e==="vertical"?x("svg",{height:"4",width:"10"},x("line",{x1:"0",y1:"2",x2:"10",y2:"2",style:t})):x("svg",{height:"10",width:"10"},x("line",{x1:"5",y1:"0",x2:"5",y2:"10",style:t}))}function SIe(e,t="vertical"){const r=document.createElement("div");return r.style.height=`${zP}px`,r.className=GP.univariateAboveAndBelowSymbol,e!=null&&(r.style.opacity=e.toString()),_Ie.append(r,bIe.bind(null,t)),r}function GY(e,t,r="vertical",i){e.infos.forEach((n,s)=>{if(i&&s===2)n.preview=SIe(t,r);else{const o=xt(n.size)+(r==="horizontal"?UP:k$),a=n.preview.tagName.toLowerCase()==="div",l=a?n.preview:document.createElement("div");l.className=GP.univariateAboveAndBelowSymbol,r==="horizontal"?l.style.width=`${o}px`:l.style.height=`${o}px`,a||l.appendChild(n.preview),n.preview=l}})}function t2(e,t="classic"){const r=e.infos;return t==="classic"?(xt(r[0].size)+k$)/2:(xt(r[0].size)-xt(r[r.length-1].size))/2}function Lf(e,t){if(!e)return null;const r=e.infos.map(n=>n.color),i=cd(t.type==="full"?r:t.type==="above"?r.slice(0,3):r.slice(2,5),{width:t.width,height:t.height,align:t.rampAlignment,effectList:t.effectList});return i.className=GP.colorRamp,t.opacity!=null&&(i.style.opacity=t.opacity.toString()),i}function UL(e,t,r,i="vertical"){let n=0;const s=e.infos,o=Math.floor(s.length/2),a=t==="full"||t==="above"?0:o,l=t==="full"||t==="below"?s.length-1:o;for(let c=a;c<=l;c++)r&&c===o?n+=i==="horizontal"?UY:zP:n+=xt(s[c].size)+(i==="horizontal"?UP:k$);return Math.round(n)}function Of(e,t,r,i="vertical"){const n=UL(e,t,r,i),s=e.infos,o=Math.floor(s.length/2),a=t==="full"||t==="above"?0:o,l=t==="full"||t==="below"?s.length-1:o,c=t==="full"?s[a].size+s[l].size:t==="above"?s[a].size:s[l].size,h=r?i==="vertical"?zP:UY:0,f=i==="vertical"?k$*(t==="full"?2:1):UP*(t==="full"?2:1);return Math.round(n-(xt(c)/2+h/2+f/2))}function BY(e,t,r="vertical"){const i=e.infos;let n=i.find(({type:o})=>o==="size-ramp"),s=i.find(({type:o})=>o==="color-ramp");return n&&(n={...n},n.infos=[...n.infos],GY(n,t,r,!0)),s&&(s={...s},s.infos=[...s.infos]),r==="horizontal"&&(n==null||n.infos.reverse(),s==null||s.infos.reverse()),{sizeRampElement:n,colorRampElement:s}}function qY(e,t="vertical"){const r=e.infos;let i=r.find(({type:s})=>s==="size-ramp"),n=r.find(({type:s})=>s==="color-ramp");return i&&(i={...i},i.infos=[...i.infos],GY(i,null,t,!1)),n&&(n={...n},n.infos=[...n.infos]),t==="horizontal"&&(i==null||i.infos.reverse(),n==null||n.infos.reverse()),{sizeRampElement:i,colorRampElement:n}}function $Ie(e,t){return t}function Sr(e){const t=this;e.appendChild(t)}function Af(e,t,r){if(!t)return;if(typeof t=="string"||typeof t=="number")return t;if("value"in t||"unit"in t)return is(e.dotValue,t);if("colorName"in t||"bandName"in t)return e[t.colorName]+": "+(e[t.bandName]||t.bandName);if("showCount"in t)return t.showCount?e.clusterCountTitle:null;let i=null;return $Ie(t,r)?i=t.ratioPercentTotal?"showRatioPercentTotal":t.ratioPercent?"showRatioPercent":t.ratio?"showRatio":t.normField?"showNormField":t.field?"showField":null:WY(t,r)&&(i=t.normField?"showNormField":t.normByPct?"showNormPct":t.field?"showField":null),i?is(i==="showField"?"{field}":e[i],{field:t.field,normField:t.normField}):null}function WY(e,t){return!t}function HY(e,t){return!!(t&&t==="Stretched"&&e.version>=10.3&&e.declaredClass==="esri.layers.ImageryLayer")}const pe={activated:"esri-legend--card__carousel-indicator--activated",base:"esri-legend--card",stacked:"esri-legend--stacked",carouselTitle:"esri-legend--card__carousel-title",indicator:"esri-legend--card__carousel-indicator",intervalSeparator:"esri-legend--card__interval-separator",imageryLayerStretchedImage:"esri-legend--card__imagery-layer-image--stretched",imageLabel:"esri-legend--card__image-label",layerCaption:"esri-legend--card__layer-caption",labelElement:"esri-legend--card__label-element",layerRow:"esri-legend--card__layer-row",labelCell:"esri-legend--card__label-cell",message:"esri-legend--card__message",rampLabel:"esri-legend--card__ramp-label",section:"esri-legend--card__section",relationshipSection:"esri-legend--card__relationship-section",serviceCaptionText:"esri-legend--card__service-caption-text",serviceContent:"esri-legend--card__service-content",service:"esri-legend--card__service",groupLayer:"esri-legend--card__group-layer",groupLayerChild:"esri-legend--card__group-layer-child",symbol:"esri-legend--card__symbol",sizeRampRow:"esri-legend--card__size-ramp-row",symbolRow:"esri-legend--card__symbol-row",symbolCell:"esri-legend--card__symbol-cell",indicatorContainer:"esri-legend--card__carousel-indicator-container",intervalSeparatorsContainer:"esri-legend--card__interval-separators-container",relationshipLabelContainer:"esri-legend--card__relationship-label-container",labelContainer:"esri-legend--card__label-container",serviceCaptionContainer:"esri-legend--card__service-caption-container",symbolContainer:"esri-legend--card__symbol-container",sizeRampContainer:"esri-legend--card__size-ramp-container",sizeRampPreview:"esri-legend--card__size-ramp-preview",pieChartRampPreview:"esri-legend--card__pie-chart-ramp-preview",rampContainer:"esri-legend__ramps",sizeRampHorizontal:"esri-legend__size-ramp--horizontal",rampLabelsContainer:"esri-legend__ramp-labels",layerInfo:"esri-legend__layer-cell esri-legend__layer-cell--info",univariateAboveAndBelowColorRamp:"esri-univariate-above-and-below-ramp__color--card",hidden:"esri-hidden"},xIe=25,EIe=25,TIe=768,MIe=100;var p0;(function(e){e.Auto="auto",e.Stack="stack",e.SideBySide="side-by-side"})(p0||(p0={}));const IIe="#ddd",Hh=window.devicePixelRatio;function CIe(e){if(e){if(e.type.includes("3d")){const t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;const r=e.symbolLayers.getItemAt(t-1),i=r.resource&&r.resource.primitive;return i==="circle"||i==="cross"||i==="kite"||i==="sphere"||i==="cube"||i==="diamond"}{const t=e.style;return t==="circle"||t==="diamond"||t==="cross"}}}function kIe(e){if(e){if(e.type.includes("3d")){const t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;const r=e.symbolLayers.getItemAt(t-1).get("resource.primitive");return r==="triangle"||r==="cone"||r==="tetrahedron"}return e.style==="triangle"}}let Hs=class extends Kt{constructor(e,t){super(e,t),this._handles=new zt,this._hasIndicators=!1,this._selectedSectionName=null,this._sectionNames=[],this._sectionMap=new Map,this.activeLayerInfos=null,this.headingLevel=3,this.layout=p0.Stack,this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}initialize(){this.own(G(()=>this.activeLayerInfos,e=>{this._handles.removeAll(),this._watchForSectionChanges(e)}))}destroy(){this._handles.destroy(),this._handles=null}render(){this._hasIndicators=this.layout===p0.Auto&&this.view.container.clientWidth<=TIe||this.layout===p0.Stack;const e=this.activeLayerInfos,t=e&&e.toArray().map(a=>this._renderLegendForLayer(a)).filter(a=>!!a);this._hasIndicators?this._selectedSectionName&&this._sectionNames.includes(this._selectedSectionName)||(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;const r=this._sectionNames.length,i=this._sectionNames.map((a,l)=>{const c=is(this.messagesCommon.pagination.pageText,{index:l+1,total:r});return x("div",{key:a,role:"tab",id:a,"aria-label":c,"aria-controls":`${a}-panel`,"aria-selected":(this._selectedSectionName===a).toString(),tabIndex:this._selectedSectionName===a?0:-1,title:c,onclick:this._selectSection,onkeydown:this._focusSection,bind:this,class:this.classes(pe.indicator,{[pe.activated]:this._selectedSectionName===a}),"data-section-name":a})}),n=this._hasIndicators&&r>1?x("div",{class:pe.indicatorContainer,key:"carousel-navigation",role:"tablist"},i):null,s=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):t&&t.length?t:null,o={[pe.stacked]:this._hasIndicators};return x("div",{class:this.classes(pe.base,o)},s||x("div",{class:pe.message},this.messages.noLegend),n)}_selectSection(e){const t=e.target.getAttribute("data-section-name");t&&(this._selectedSectionName=t)}_focusSection(e){switch(e.key){case"ArrowLeft":case"ArrowRight":this._switchSectionOnArrowPress(e);break;case"Enter":case" ":this._selectSection(e)}}_switchSectionOnArrowPress(e){const t=e.key,r=t==="ArrowLeft"?-1:1,i=e.target.getAttribute("data-section-name"),n=this._sectionNames.indexOf(i),s=this._sectionNames;let o=null;n!==-1&&(s[n+r]?o=document.getElementById(s[n+r]):t==="ArrowLeft"?o=document.getElementById(s[s.length-1]):t==="ArrowRight"&&(o=document.getElementById(s[0])),o&&o.focus())}_watchForSectionChanges(e){if(this._generateSectionNames(),e){e.forEach(r=>{const i=`activeLayerInfo-${r.layer.uid}-version-change`;this._handles.remove(i),this._watchForSectionChanges(r.children),this._handles.add(G(()=>r.version,()=>this._generateSectionNames()),i)});const t="activeLayerInfos-collection-change";this._handles.remove(t),this._handles.add(e.on("change",()=>this._watchForSectionChanges(e)),t)}}_generateSectionNames(){this._sectionNames.length=0,this._selectedSectionName=null,this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this)}_getSectionName(e,t,r){return`${this.id}${e.uid}-type-${t.type}-${r}`}_generateSectionNamesForActiveLayerInfo(e){e.children.forEach(this._generateSectionNamesForActiveLayerInfo,this),e.legendElements&&e.legendElements.forEach((t,r)=>{this._sectionNames.push(this._getSectionName(e.layer,t,r))})}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const t=e.children.map(r=>this._renderLegendForLayer(r)).toArray();return x("div",{key:e.layer.uid,class:this.classes(pe.service,pe.groupLayer)},x("div",{class:pe.serviceCaptionContainer},e.title),t)}{const t=e.legendElements;if(t&&!t.length)return null;const r=t.some(s=>s.type==="relationship-ramp"),i=t.map((s,o)=>this._renderLegendForElement(s,e,o,r)).filter(s=>!!s);if(!i.length)return null;const n={[pe.groupLayerChild]:!!e.parent};return x("div",{key:e.layer.uid,class:this.classes(pe.service,n)},x("div",{class:pe.serviceCaptionContainer},x("div",{class:pe.serviceCaptionText},e.title)),x("div",{class:pe.serviceContent},i))}}_renderLegendForElement(e,t,r,i=!1){const n=e.type==="color-ramp",s=e.type==="opacity-ramp",o=e.type==="size-ramp",a=t.layer;let l=null;if(typeof e.title=="string")l=e.title;else if(e.title){const g=e.title,v=Af(this.messages,g,n||s);l=g.title?`${g.title} (${v})`:v}const c=this._getSectionName(a,e,r),h=this._hasIndicators?x("div",null,x(tc,{level:this.headingLevel,class:pe.carouselTitle},t.title),x(tc,{level:ame(this.headingLevel),class:pe.layerCaption},l)):l?x(tc,{level:this.headingLevel,class:pe.layerCaption},l):null,f=t.effectList;let m=null;if(e.type==="symbol-table"){const g=e.infos.map((v,_)=>this._renderLegendForElementInfo(v,t,e.legendType,_)).filter(v=>!!v);if(g.length){const v=g[0].properties.classes&&g[0].properties.classes[pe.symbolRow],_={[pe.labelContainer]:!v&&!i,[pe.relationshipLabelContainer]:i};m=x("div",{class:this.classes(_)},g)}}else e.type==="color-ramp"||e.type==="opacity-ramp"||e.type==="heatmap-ramp"?m=this._renderLegendForRamp(e,a.opacity,f):o?m=this._renderSizeRamp(e,a.opacity):e.type==="pie-chart-ramp"?m=this._renderPieChartRamp(e):e.type==="relationship-ramp"?m=zY(e,this.id,a.opacity,f):e.type==="univariate-above-and-below-ramp"?m=this._renderUnivariateAboveAndBelowRamp(e,a.opacity,f):e.type==="univariate-color-size-ramp"&&(m=this._renderUnivariateColorSizeRamp(e,a.opacity,f));if(!m)return null;const y=x("div",{key:c,class:pe.section,id:`${c}-panel`,role:"tabpanel","aria-labelledby":c,tabIndex:0},[h,m]);return this._sectionMap.set(c,y),y}_renderPieChartRamp(e){return x("div",{class:pe.pieChartRampPreview,bind:e.preview,afterCreate:Sr})}_renderUnivariateAboveAndBelowRamp(e,t,r){const{sizeRampElement:i,colorRampElement:n}=BY(e,t,"horizontal");if(!i)return null;const s=UL(i,"full",!0,"horizontal"),o=Of(i,"above",!0,"horizontal"),a=Of(i,"below",!0,"horizontal"),l=12,c=Lf(n,{width:o,height:l,rampAlignment:"horizontal",opacity:t,type:"above",effectList:r}),h=Lf(n,{width:a,height:l,rampAlignment:"horizontal",opacity:t,type:"below",effectList:r}),f=t2(i,"card"),m=i.infos.map(S=>S.label),y=m.length-1,g=m.map((S,M)=>M===0||M===y?x("div",{key:M},S):null),v={display:"flex",flexDirection:"column"},_={display:"flex",flexDirection:"row"},w={marginTop:"3px",display:"flex"};oo(this.container)?w.marginRight=`${f}px`:w.marginLeft=`${f}px`;const b={width:`${s}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return x("div",{class:pe.layerRow,key:"size-ramp-preview",styles:v},x("div",{class:this.classes(pe.symbolContainer,pe.sizeRampHorizontal),styles:_},i.infos.map((S,M)=>x("div",{key:M,class:pe.symbol,bind:S.preview,afterCreate:Sr}))),c?x("div",{class:pe.univariateAboveAndBelowColorRamp,styles:w,key:"color-ramp-preview"},x("div",{bind:c,afterCreate:Sr}),x("div",{bind:h,afterCreate:Sr})):null,x("div",{class:pe.layerInfo},x("div",{class:pe.rampLabelsContainer,styles:b},g)))}_renderUnivariateColorSizeRamp(e,t,r){const{sizeRampElement:i,colorRampElement:n}=qY(e,"horizontal");if(!i)return null;const s=UL(i,"full",!1,"horizontal"),o=Of(i,"full",!1,"horizontal"),a=Lf(n,{width:o,height:12,rampAlignment:"horizontal",opacity:t,type:"full",effectList:r}),l=t2(i,"card"),c=i.infos.length-1,h=i.infos.map((v,_)=>_===0||_===c?x("div",{key:_},v.label):null),f={display:"flex",flexDirection:"column"},m={display:"flex",flexDirection:"row"},y={marginTop:"3px",display:"flex"};oo(this.container)?y.marginRight=`${l}px`:y.marginLeft=`${l}px`;const g={width:`${s}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return x("div",{class:pe.layerRow,key:"size-ramp-preview",styles:f},x("div",{class:this.classes(pe.symbolContainer,pe.sizeRampHorizontal),styles:m},i.infos.map((v,_)=>x("div",{key:_,class:pe.symbol,bind:v.preview,afterCreate:Sr}))),x("div",{class:pe.univariateAboveAndBelowColorRamp,styles:y,key:"color-ramp-preview"},x("div",{bind:a,afterCreate:Sr})),x("div",{class:pe.layerInfo},x("div",{class:pe.rampLabelsContainer,styles:g},h)))}_renderLegendForElementInfo(e,t,r,i){var o,a;const n=t.layer;if(e.type)return this._renderLegendForElement(e,t,i);const s=HY(n,r);if(e.preview){if(!e.symbol||!e.symbol.type.includes("simple-fill")){if(!e.label)return x("div",{key:i,bind:e.preview,afterCreate:Sr});const T={[pe.symbolCell]:this._hasIndicators};return x("div",{key:i,class:this.classes(pe.layerRow,{[pe.symbolRow]:this._hasIndicators})},x("div",{class:this.classes(T),bind:e.preview,afterCreate:Sr}),x("div",{class:this.classes(pe.imageLabel,{[pe.labelCell]:this._hasIndicators})},Af(this.messages,e.label,!1)||""))}let l=255,c=255,h=255,f=0,m=255,y=255,g=255,v=0;const _=e.symbol.color&&e.symbol.color.a,w=e.symbol.outline&&e.symbol.outline.color&&e.symbol.outline.color.a;_&&(l=e.symbol.color.r,c=e.symbol.color.g,h=e.symbol.color.b,f=e.symbol.color.a*n.opacity),w&&(m=e.symbol.outline.color.r,y=e.symbol.outline.color.g,g=e.symbol.outline.color.b,v=e.symbol.outline.color.a*n.opacity);const b=(a=(o=e.symbol.color)==null?void 0:o.isBright)!=null?a:!0,S=b?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)",M={background:_?`rgba(${l}, ${c}, ${h}, ${f})`:"none",color:b?"black":"white",textShadow:`-1px -1px 0 ${S},
                                              1px -1px 0 ${S},
                                              -1px 1px 0 ${S},
                                              1px 1px 0 ${S}`,border:w?`1px solid rgba(${m}, ${y}, ${g}, ${v})`:"none",filter:rv(t.effectList)};return x("div",{key:i,class:pe.layerRow},x("div",{class:pe.labelElement,styles:M}," ",e.label," "))}if(e.src){const l=this._renderImage(e,n,s);return x("div",{key:i,class:pe.layerRow},l,x("div",{class:pe.imageLabel},e.label||""))}}_renderImage(e,t,r){const{label:i,src:n,opacity:s}=e,o={[pe.imageryLayerStretchedImage]:r,[pe.symbol]:!r},a={opacity:`${s!=null?s:t.opacity}`};return x("img",{alt:Af(this.messages,i,!1),src:n,border:0,width:e.width,height:e.height,class:this.classes(o),styles:a})}_renderSizeRampLines(e){const t=e.infos,r=t[0],i=t[t.length-1],n=r.symbol,s=this._hasIndicators,o=xt(r.size+r.outlineSize)*Hh,a=xt(i.size+i.outlineSize)*Hh,l=s?o:o+50*Hh,c=s?o/2+50*Hh:o,h=kIe(n),f=CIe(n),m=document.createElement("canvas");m.width=l,m.height=c,m.style.width=m.width/Hh+"px",m.style.height=m.height/Hh+"px";const y=m.getContext("2d");if(s){y.beginPath();const g=0,v=0,_=l/2-a/2,w=c;y.moveTo(g,v),y.lineTo(_,w);const b=l,S=0,M=l/2+a/2,T=c;y.moveTo(b,S),y.lineTo(M,T)}else{y.beginPath();const g=0,v=c/2-a/2,_=l,w=0;y.moveTo(g,v),y.lineTo(_,w);const b=0,S=c/2+a/2,M=l,T=c;y.moveTo(b,S),y.lineTo(M,T)}return y.strokeStyle=IIe,y.stroke(),x("div",{bind:m,afterCreate:Sr,styles:s?{display:"flex",marginTop:`-${h?0:f?o/2:0}px`,marginBottom:`-${h?a:f?a/2:0}px`}:{display:"flex",marginRight:`-${h?0:f?o/2:0}px`,marginLeft:`-${h?0:f?a/2:0}px`}})}_renderSizeRamp(e,t){const r=e.infos,i=r[0].label,n=r[r.length-1].label;let s=r[0].preview,o=r[r.length-1].preview;const a=this._hasIndicators,l={"flex-direction":a?"column":"row-reverse"};s&&(s=s.cloneNode(!0),s.style.display="flex"),o&&(o=o.cloneNode(!0),o.style.display="flex");const c={opacity:t!=null?`${t}`:""};return x("div",{class:this.classes(pe.layerRow,{[pe.sizeRampRow]:a})},x("div",{class:pe.rampLabel},a?i:n),x("div",{class:pe.sizeRampContainer,styles:l},x("div",{bind:s,afterCreate:Sr,class:pe.sizeRampPreview,styles:c}),this._renderSizeRampLines(e),x("div",{bind:o,afterCreate:Sr,class:pe.sizeRampContainer,styles:c})),x("div",{class:pe.rampLabel},a?n:i))}_renderLegendForRamp(e,t,r){const i=e.infos,n=e.type==="heatmap-ramp",s=i.length-1,o=EIe,a=s>2&&!n?xIe*s:MIe,l=a+20,c=10,h=i.slice(0).reverse();h.forEach((T,k)=>{T.offset=n?T.ratio:k/s});const f=h.length-1,m=h.length%2!=0&&h[h.length/2|0],y=m&&x("div",{class:pe.intervalSeparatorsContainer},x("div",{class:pe.intervalSeparator},"|"),x("div",{class:pe.rampLabel},m.label)),g=i[i.length-1].label,v=i[0].label,_=[[{shape:{type:"path",path:`M0 ${o/2} L${c} 0 L${c} ${o} Z`},fill:h[0].color,stroke:{width:0}},{shape:{type:"rect",x:c,y:0,width:a,height:o},fill:{type:"linear",x1:c,y1:0,x2:a+c,y2:0,colors:h},stroke:{width:0}},{shape:{type:"path",path:`M${a+c} 0 L${l} ${o/2} L${a+c} ${o} Z`},fill:h[f].color,stroke:{width:0}}]],w=WJ(_,l,o),{messages:b}=this,S={filter:rv(r),opacity:t==null?null:`${t}`},M={justifyContent:"center"};return x("div",{class:pe.layerRow,styles:M},x("div",{class:pe.rampLabel},n?b[g]:g),x("div",{class:pe.symbolContainer},x("div",{styles:S},w),y),x("div",{class:pe.rampLabel},n?b[v]:v))}};u([d()],Hs.prototype,"activeLayerInfos",void 0),u([d()],Hs.prototype,"headingLevel",void 0),u([d()],Hs.prototype,"layout",void 0),u([d(),Et("esri/widgets/Legend/t9n/Legend")],Hs.prototype,"messages",void 0),u([d(),Et("esri/t9n/common")],Hs.prototype,"messagesCommon",void 0),u([d({readOnly:!0})],Hs.prototype,"type",void 0),u([d()],Hs.prototype,"view",void 0),u([Gr()],Hs.prototype,"_selectSection",null),Hs=u([E("esri.widgets.Legend.styles.Card")],Hs);const iT=Hs,_e={service:"esri-legend__service",label:"esri-legend__service-label",layer:"esri-legend__layer",groupLayer:"esri-legend__group-layer",groupLayerChild:"esri-legend__group-layer-child",layerTable:"esri-legend__layer-table",layerTableSizeRamp:"esri-legend__layer-table--size-ramp",layerChildTable:"esri-legend__layer-child-table",layerCaption:"esri-legend__layer-caption",layerBody:"esri-legend__layer-body",layerRow:"esri-legend__layer-row",layerCell:"esri-legend__layer-cell",layerInfo:"esri-legend__layer-cell esri-legend__layer-cell--info",imageryLayerStretchedImage:"esri-legend__imagery-layer-image--stretched",imageryLayerCellStretched:"esri-legend__imagery-layer-cell--stretched",imageryLayerInfoStretched:"esri-legend__imagery-layer-info--stretched",symbolContainer:"esri-legend__layer-cell esri-legend__layer-cell--symbols",symbol:"esri-legend__symbol",rampContainer:"esri-legend__ramps",sizeRamp:"esri-legend__size-ramp",colorRamp:"esri-legend__color-ramp",opacityRamp:"esri-legend__opacity-ramp",borderlessRamp:"esri-legend__borderless-ramp",rampTick:"esri-legend__ramp-tick",rampFirstTick:"esri-legend__ramp-tick-first",rampLastTick:"esri-legend__ramp-tick-last",rampLabelsContainer:"esri-legend__ramp-labels",rampLabel:"esri-legend__ramp-label",univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",univariateAboveAndBelowLabel:"esri-univariate-above-and-below-ramp__label",message:"esri-legend__message",header:"esri-widget__heading",hidden:"esri-hidden"},LIe="esri-legend__",OIe=24,d6={display:"flex",alignItems:"flex-start"},nT={marginLeft:"3px"},Jh={display:"table-cell",verticalAlign:"middle"};let fd=class extends Kt{constructor(e,t){super(e,t),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){const e=this.activeLayerInfos,t=e&&e.toArray().map(r=>this._renderLegendForLayer(r)).filter(r=>!!r);return x("div",null,t&&t.length?t:x("div",{class:_e.message},this.messages.noLegend))}_renderLegendForLayer(e){if(!e.ready)return null;const t=!!e.children.length,r=`${LIe}${e.layer.uid}-version-${e.version}`,i=e.title?tc({level:this.headingLevel,class:this.classes(_e.header,_e.label)},e.title):null;if(t){const n=e.children.map(s=>this._renderLegendForLayer(s)).toArray();return x("div",{key:r,class:this.classes(_e.service,_e.groupLayer)},i,n)}{const n=e.legendElements;if(n&&!n.length)return null;const s=n.map(a=>this._renderLegendForElement(a,e.layer,e.effectList)).filter(a=>!!a);if(!s.length)return null;const o={[_e.groupLayerChild]:!!e.parent};return x("div",{key:r,class:this.classes(_e.service,o),tabIndex:0},i,x("div",{class:_e.layer},s))}}_renderLegendForElement(e,t,r,i){const n=e.type==="color-ramp",s=e.type==="opacity-ramp",o=e.type==="size-ramp";let a=null;if(e.type==="symbol-table"||o){const y=e.infos.map(g=>this._renderLegendForElementInfo(g,t,r,o,e.legendType)).filter(g=>!!g);y.length&&(a=x("div",{class:_e.layerBody},y))}else e.type==="color-ramp"||e.type==="opacity-ramp"||e.type==="heatmap-ramp"||e.type==="stretch-ramp"?a=this._renderLegendForRamp(e,t.opacity):e.type==="relationship-ramp"?a=zY(e,this.id,t.opacity,r):e.type==="pie-chart-ramp"?a=this._renderPieChartRamp(e):e.type==="univariate-above-and-below-ramp"?a=this._renderUnivariateAboveAndBelowRamp(e,t.opacity,r):e.type==="univariate-color-size-ramp"&&(a=this._renderUnivariateColorSizeRamp(e,t.opacity,r));if(!a)return null;const l=e.title;let c=null;if(typeof l=="string")c=l;else if(l){const y=Af(this.messages,l,n||s);c=WY(l,n||s)&&l.title?`${l.title} (${y})`:y}const h=i?_e.layerChildTable:_e.layerTable,f=c?x("div",{class:_e.layerCaption},c):null,m={[_e.layerTableSizeRamp]:o||!i};return x("div",{class:this.classes(h,m)},f,a)}_renderPieChartRamp(e){return x("div",{bind:e.preview,afterCreate:Sr})}_renderUnivariateAboveAndBelowRamp(e,t,r){const{sizeRampElement:i,colorRampElement:n}=BY(e,t);if(!i)return null;const s=Of(i,"above",!0),o=Of(i,"below",!0),a=12,l=Lf(n,{width:a,height:s,rampAlignment:"vertical",opacity:t,type:"above",effectList:r}),c=Lf(n,{width:a,height:o,rampAlignment:"vertical",opacity:t,type:"below",effectList:r}),h=t2(i),f=i.infos.map(M=>M.label),m=f.map((M,T)=>T===0?x("div",{key:T,class:M?l?_e.univariateAboveAndBelowLabel:_e.rampLabel:null},M):T===2?x("div",null):null),y=f.length-1,g=Math.floor(f.length/2),v=f.map((M,T)=>T===g||T===y?x("div",{key:T,class:M?l?_e.univariateAboveAndBelowLabel:_e.rampLabel:null},M):null),_={display:"table-cell",verticalAlign:"middle"},w={marginTop:`${h}px`},b={height:`${s}px`},S={height:`${o}px`};return x("div",{key:"univariate-above-and-below-ramp-preview",styles:d6},x("div",{class:_e.layerBody},i.infos.map((M,T)=>x("div",{class:this.classes(_e.layerRow,_e.sizeRamp)},x("div",{class:_e.symbol,styles:_,bind:M.preview,afterCreate:Sr}),l||T%2!=0?null:x("div",{class:_e.layerInfo},f[T])))),l?x("div",{styles:w,key:"color-ramp-preview"},x("div",{styles:nT},x("div",{styles:Jh},x("div",{class:_e.rampContainer,bind:l,afterCreate:Sr})),x("div",{styles:Jh},x("div",{class:_e.rampLabelsContainer,styles:b},m))),x("div",{styles:nT},x("div",{styles:Jh},x("div",{class:_e.rampContainer,bind:c,afterCreate:Sr})),x("div",{styles:Jh},x("div",{class:_e.rampLabelsContainer,styles:S},v)))):null)}_renderUnivariateColorSizeRamp(e,t,r){const{sizeRampElement:i,colorRampElement:n}=qY(e);if(!i)return null;const s=t2(i),o=12,a=Of(i,"full",!1),l=Lf(n,{width:o,height:a,rampAlignment:"vertical",opacity:t,type:"full",effectList:r}),c=i.infos.length-1,h=i.infos.map((g,v)=>v===0||v===c?x("div",{key:v,class:g.label?n?_e.univariateAboveAndBelowLabel:_e.rampLabel:null},g.label):null),f={display:"table-cell",verticalAlign:"middle"},m={marginTop:`${s}px`},y={height:`${a}px`};return x("div",{key:"univariate-above-and-below-ramp-preview",styles:d6},x("div",{class:_e.layerBody},i.infos.map(g=>x("div",{class:this.classes(_e.layerRow,_e.sizeRamp)},x("div",{class:_e.symbol,styles:f,bind:g.preview,afterCreate:Sr})))),x("div",{styles:m,key:"color-ramp-preview"},x("div",{styles:nT},x("div",{styles:Jh},x("div",{class:_e.rampContainer,bind:l,afterCreate:Sr})),x("div",{styles:Jh},x("div",{class:_e.rampLabelsContainer,styles:y},h)))))}_renderLegendForRamp(e,t){const r=e.infos,i=e.type==="opacity-ramp",n=e.type==="heatmap-ramp",s=e.type==="stretch-ramp",o=e.preview,a=i?_e.opacityRamp:"";o.className=`${_e.colorRamp} ${a}`,t!=null&&(o.style.opacity=t.toString());const l=r.map(f=>x("div",{class:f.label?_e.rampLabel:null},n?this.messages[f.label]||f.label:s?this._getStretchStopLabel(f):f.label)),c={width:`${OIe}px`},h={height:o.style.height};return x("div",{class:_e.layerRow},x("div",{class:_e.symbolContainer,styles:c},x("div",{class:_e.rampContainer,bind:o,afterCreate:Sr})),x("div",{class:_e.layerInfo},x("div",{class:_e.rampLabelsContainer,styles:h},l)))}_getStretchStopLabel(e){return e.label?this.messages[e.label]+": "+(typeof e.value=="string"?e.value:sa(e.value,{style:"decimal",notation:e.value.toString().includes("e")?"scientific":"standard"})):""}_renderLegendForElementInfo(e,t,r,i,n){if(e.type)return this._renderLegendForElement(e,t,r,!0);let s=null;const o=HY(t,n);if(e.preview?s=x("div",{class:_e.symbol,bind:e.preview,afterCreate:Sr}):e.src&&(s=this._renderImage(e,t,o)),!s)return null;const a={[_e.imageryLayerInfoStretched]:o},l={[_e.imageryLayerInfoStretched]:o,[_e.sizeRamp]:!o&&i};return x("div",{class:_e.layerRow},x("div",{class:this.classes(_e.symbolContainer,l)},s),x("div",{class:this.classes(_e.layerInfo,a)},Af(this.messages,e.label,!1)||""))}_renderImage(e,t,r){const{label:i,src:n,opacity:s}=e,o={[_e.imageryLayerStretchedImage]:r,[_e.symbol]:!r},a={opacity:`${s!=null?s:t.opacity}`};return x("img",{alt:Af(this.messages,i,!1),src:n,border:0,width:e.width,height:e.height,class:this.classes(o),styles:a})}};u([d()],fd.prototype,"activeLayerInfos",void 0),u([d()],fd.prototype,"headingLevel",void 0),u([d(),Et("esri/widgets/Legend/t9n/Legend")],fd.prototype,"messages",void 0),u([d({readOnly:!0})],fd.prototype,"type",void 0),fd=u([E("esri.widgets.Legend.styles.Classic")],fd);const Zh=fd,Iw={base:"esri-legend",widget:"esri-widget",panel:"esri-widget--panel",widgetIcon:"esri-icon-layer-list"};let Ar=class extends Kt{constructor(e,t){super(e,t),this._handles=new zt,this.activeLayerInfos=null,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.headingLevel=3,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.iconClass=Iw.widgetIcon,this.label=void 0,this.layerInfos=null,this.messages=null,this.style=new Zh,this.view=null,this.viewModel=new gIe}initialize(){this.own([tn(()=>this.view,"resize",()=>this.scheduleRender()),tn(()=>this.activeLayerInfos,"change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),G(()=>this.headingLevel,e=>{const{style:t}=this;t&&(t.headingLevel=e)}),G(()=>this.style,(e,t)=>{t&&e!==t&&t.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,e.type==="card"&&(e.view=this.view),e.headingLevel=this.headingLevel)},je)])}destroy(){this._handles=qi(this._handles)}castStyle(e){if(e instanceof iT||e instanceof Zh)return e;if(typeof e=="string")return e==="card"?new iT:new Zh;if(e&&typeof e.type=="string"){const t={...e};return delete t.type,new(e.type==="card"?iT:Zh)(t)}return new Zh}render(){return x("div",{class:this.classes(Iw.base,Iw.widget,this.style instanceof Zh?Iw.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){this._handles.removeAll(),e.forEach(t=>this._renderOnActiveLayerInfoChange(t)),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){const t=G(()=>e.version,()=>this.scheduleRender());this._handles.add(t,`version_${e.layer.uid}`);const r=tn(()=>e.children,"change",()=>e.children.forEach(i=>this._renderOnActiveLayerInfoChange(i)),je);this._handles.add(r,`children_${e.layer.uid}`),e.children.forEach(i=>this._renderOnActiveLayerInfoChange(i))}};u([X("viewModel.activeLayerInfos")],Ar.prototype,"activeLayerInfos",void 0),u([X("viewModel.basemapLegendVisible")],Ar.prototype,"basemapLegendVisible",void 0),u([X("viewModel.groundLegendVisible")],Ar.prototype,"groundLegendVisible",void 0),u([d()],Ar.prototype,"headingLevel",void 0),u([X("viewModel.hideLayersNotInCurrentView")],Ar.prototype,"hideLayersNotInCurrentView",void 0),u([X("viewModel.keepCacheOnDestroy")],Ar.prototype,"keepCacheOnDestroy",void 0),u([X("viewModel.respectLayerVisibility")],Ar.prototype,"respectLayerVisibility",void 0),u([d()],Ar.prototype,"iconClass",void 0),u([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ar.prototype,"label",void 0),u([X("viewModel.layerInfos")],Ar.prototype,"layerInfos",void 0),u([d(),Et("esri/widgets/Legend/t9n/Legend")],Ar.prototype,"messages",void 0),u([d()],Ar.prototype,"style",void 0),u([ze("style")],Ar.prototype,"castStyle",null),u([X("viewModel.view")],Ar.prototype,"view",void 0),u([d()],Ar.prototype,"viewModel",void 0),Ar=u([E("esri.widgets.Legend")],Ar);const AIe=Ar;function bh(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Ri(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function ma(e){Ri(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function PIe(e,t){Ri(2,arguments);var r=ma(e).getTime(),i=bh(t);return new Date(r+i)}var RIe={};function L$(){return RIe}function FIe(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function NIe(e){return Ri(1,arguments),e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function DIe(e){if(Ri(1,arguments),!NIe(e)&&typeof e!="number")return!1;var t=ma(e);return!isNaN(Number(t))}function jIe(e,t){Ri(2,arguments);var r=bh(t);return PIe(e,-r)}var VIe=864e5;function zIe(e){Ri(1,arguments);var t=ma(e),r=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var i=t.getTime(),n=r-i;return Math.floor(n/VIe)+1}function r2(e){Ri(1,arguments);var t=1,r=ma(e),i=r.getUTCDay(),n=(i<t?7:0)+i-t;return r.setUTCDate(r.getUTCDate()-n),r.setUTCHours(0,0,0,0),r}function JY(e){Ri(1,arguments);var t=ma(e),r=t.getUTCFullYear(),i=new Date(0);i.setUTCFullYear(r+1,0,4),i.setUTCHours(0,0,0,0);var n=r2(i),s=new Date(0);s.setUTCFullYear(r,0,4),s.setUTCHours(0,0,0,0);var o=r2(s);return t.getTime()>=n.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function UIe(e){Ri(1,arguments);var t=JY(e),r=new Date(0);r.setUTCFullYear(t,0,4),r.setUTCHours(0,0,0,0);var i=r2(r);return i}var GIe=6048e5;function BIe(e){Ri(1,arguments);var t=ma(e),r=r2(t).getTime()-UIe(t).getTime();return Math.round(r/GIe)+1}function i2(e,t){var r,i,n,s,o,a,l,c;Ri(1,arguments);var h=L$(),f=bh((r=(i=(n=(s=t==null?void 0:t.weekStartsOn)!==null&&s!==void 0?s:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&n!==void 0?n:h.weekStartsOn)!==null&&i!==void 0?i:(l=h.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&r!==void 0?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=ma(e),y=m.getUTCDay(),g=(y<f?7:0)+y-f;return m.setUTCDate(m.getUTCDate()-g),m.setUTCHours(0,0,0,0),m}function ZY(e,t){var r,i,n,s,o,a,l,c;Ri(1,arguments);var h=ma(e),f=h.getUTCFullYear(),m=L$(),y=bh((r=(i=(n=(s=t==null?void 0:t.firstWeekContainsDate)!==null&&s!==void 0?s:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&n!==void 0?n:m.firstWeekContainsDate)!==null&&i!==void 0?i:(l=m.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(y>=1&&y<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(f+1,0,y),g.setUTCHours(0,0,0,0);var v=i2(g,t),_=new Date(0);_.setUTCFullYear(f,0,y),_.setUTCHours(0,0,0,0);var w=i2(_,t);return h.getTime()>=v.getTime()?f+1:h.getTime()>=w.getTime()?f:f-1}function qIe(e,t){var r,i,n,s,o,a,l,c;Ri(1,arguments);var h=L$(),f=bh((r=(i=(n=(s=t==null?void 0:t.firstWeekContainsDate)!==null&&s!==void 0?s:t==null||(o=t.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&n!==void 0?n:h.firstWeekContainsDate)!==null&&i!==void 0?i:(l=h.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&r!==void 0?r:1),m=ZY(e,t),y=new Date(0);y.setUTCFullYear(m,0,f),y.setUTCHours(0,0,0,0);var g=i2(y,t);return g}var WIe=6048e5;function HIe(e,t){Ri(1,arguments);var r=ma(e),i=i2(r,t).getTime()-qIe(r,t).getTime();return Math.round(i/WIe)+1}function at(e,t){for(var r=e<0?"-":"",i=Math.abs(e).toString();i.length<t;)i="0"+i;return r+i}var JIe={y:function(e,t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return at(t==="yy"?i%100:i,t.length)},M:function(e,t){var r=e.getUTCMonth();return t==="M"?String(r+1):at(r+1,2)},d:function(e,t){return at(e.getUTCDate(),t.length)},a:function(e,t){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,t){return at(e.getUTCHours()%12||12,t.length)},H:function(e,t){return at(e.getUTCHours(),t.length)},m:function(e,t){return at(e.getUTCMinutes(),t.length)},s:function(e,t){return at(e.getUTCSeconds(),t.length)},S:function(e,t){var r=t.length,i=e.getUTCMilliseconds(),n=Math.floor(i*Math.pow(10,r-3));return at(n,t.length)}};const ql=JIe;var Yh={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ZIe={G:function(e,t,r){var i=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){var i=e.getUTCFullYear(),n=i>0?i:1-i;return r.ordinalNumber(n,{unit:"year"})}return ql.y(e,t)},Y:function(e,t,r,i){var n=ZY(e,i),s=n>0?n:1-n;if(t==="YY"){var o=s%100;return at(o,2)}return t==="Yo"?r.ordinalNumber(s,{unit:"year"}):at(s,t.length)},R:function(e,t){var r=JY(e);return at(r,t.length)},u:function(e,t){var r=e.getUTCFullYear();return at(r,t.length)},Q:function(e,t,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return at(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return at(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,r){var i=e.getUTCMonth();switch(t){case"M":case"MM":return ql.M(e,t);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,r){var i=e.getUTCMonth();switch(t){case"L":return String(i+1);case"LL":return at(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,r,i){var n=HIe(e,i);return t==="wo"?r.ordinalNumber(n,{unit:"week"}):at(n,t.length)},I:function(e,t,r){var i=BIe(e);return t==="Io"?r.ordinalNumber(i,{unit:"week"}):at(i,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):ql.d(e,t)},D:function(e,t,r){var i=zIe(e);return t==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):at(i,t.length)},E:function(e,t,r){var i=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,r,i){var n=e.getUTCDay(),s=(n-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return at(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(n,{width:"short",context:"formatting"});case"eeee":default:return r.day(n,{width:"wide",context:"formatting"})}},c:function(e,t,r,i){var n=e.getUTCDay(),s=(n-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return at(s,t.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(n,{width:"narrow",context:"standalone"});case"cccccc":return r.day(n,{width:"short",context:"standalone"});case"cccc":default:return r.day(n,{width:"wide",context:"standalone"})}},i:function(e,t,r){var i=e.getUTCDay(),n=i===0?7:i;switch(t){case"i":return String(n);case"ii":return at(n,t.length);case"io":return r.ordinalNumber(n,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,r){var i=e.getUTCHours(),n=i/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,r){var i=e.getUTCHours(),n;switch(i===12?n=Yh.noon:i===0?n=Yh.midnight:n=i/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,r){var i=e.getUTCHours(),n;switch(i>=17?n=Yh.evening:i>=12?n=Yh.afternoon:i>=4?n=Yh.morning:n=Yh.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return ql.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):ql.H(e,t)},K:function(e,t,r){var i=e.getUTCHours()%12;return t==="Ko"?r.ordinalNumber(i,{unit:"hour"}):at(i,t.length)},k:function(e,t,r){var i=e.getUTCHours();return i===0&&(i=24),t==="ko"?r.ordinalNumber(i,{unit:"hour"}):at(i,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):ql.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):ql.s(e,t)},S:function(e,t){return ql.S(e,t)},X:function(e,t,r,i){var n=i._originalDate||e,s=n.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return p6(s);case"XXXX":case"XX":return md(s);case"XXXXX":case"XXX":default:return md(s,":")}},x:function(e,t,r,i){var n=i._originalDate||e,s=n.getTimezoneOffset();switch(t){case"x":return p6(s);case"xxxx":case"xx":return md(s);case"xxxxx":case"xxx":default:return md(s,":")}},O:function(e,t,r,i){var n=i._originalDate||e,s=n.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+h6(s,":");case"OOOO":default:return"GMT"+md(s,":")}},z:function(e,t,r,i){var n=i._originalDate||e,s=n.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+h6(s,":");case"zzzz":default:return"GMT"+md(s,":")}},t:function(e,t,r,i){var n=i._originalDate||e,s=Math.floor(n.getTime()/1e3);return at(s,t.length)},T:function(e,t,r,i){var n=i._originalDate||e,s=n.getTime();return at(s,t.length)}};function h6(e,t){var r=e>0?"-":"+",i=Math.abs(e),n=Math.floor(i/60),s=i%60;if(s===0)return r+String(n);var o=t||"";return r+String(n)+o+at(s,2)}function p6(e,t){if(e%60===0){var r=e>0?"-":"+";return r+at(Math.abs(e)/60,2)}return md(e,t)}function md(e,t){var r=t||"",i=e>0?"-":"+",n=Math.abs(e),s=at(Math.floor(n/60),2),o=at(n%60,2);return i+s+r+o}const YIe=ZIe;var f6=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},YY=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},QIe=function(e,t){var r=e.match(/(P+)(p+)?/)||[],i=r[1],n=r[2];if(!n)return f6(e,t);var s;switch(i){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",f6(i,t)).replace("{{time}}",YY(n,t))},KIe={p:YY,P:QIe};const XIe=KIe;var eCe=["D","DD"],tCe=["YY","YYYY"];function rCe(e){return eCe.indexOf(e)!==-1}function iCe(e){return tCe.indexOf(e)!==-1}function m6(e,t,r){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var nCe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},sCe=function(e,t,r){var i,n=nCe[e];return typeof n=="string"?i=n:t===1?i=n.one:i=n.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};const oCe=sCe;function sT(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth,i=e.formats[r]||e.formats[e.defaultWidth];return i}}var aCe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},lCe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},uCe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},cCe={date:sT({formats:aCe,defaultWidth:"full"}),time:sT({formats:lCe,defaultWidth:"full"}),dateTime:sT({formats:uCe,defaultWidth:"full"})};const dCe=cCe;var hCe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},pCe=function(e,t,r,i){return hCe[e]};const fCe=pCe;function Iy(e){return function(t,r){var i=r!=null&&r.context?String(r.context):"standalone",n;if(i==="formatting"&&e.formattingValues){var s=e.defaultFormattingWidth||e.defaultWidth,o=r!=null&&r.width?String(r.width):s;n=e.formattingValues[o]||e.formattingValues[s]}else{var a=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;n=e.values[l]||e.values[a]}var c=e.argumentCallback?e.argumentCallback(t):t;return n[c]}}var mCe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},yCe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},gCe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},vCe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},wCe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_Ce={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},bCe=function(e,t){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},SCe={ordinalNumber:bCe,era:Iy({values:mCe,defaultWidth:"wide"}),quarter:Iy({values:yCe,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Iy({values:gCe,defaultWidth:"wide"}),day:Iy({values:vCe,defaultWidth:"wide"}),dayPeriod:Iy({values:wCe,defaultWidth:"wide",formattingValues:_Ce,defaultFormattingWidth:"wide"})};const $Ce=SCe;function Cy(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.width,n=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],s=t.match(n);if(!s)return null;var o=s[0],a=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?ECe(a,function(f){return f.test(o)}):xCe(a,function(f){return f.test(o)}),c;c=e.valueCallback?e.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;var h=t.slice(o.length);return{value:c,rest:h}}}function xCe(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r}function ECe(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r}function TCe(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.match(e.matchPattern);if(!i)return null;var n=i[0],s=t.match(e.parsePattern);if(!s)return null;var o=e.valueCallback?e.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;var a=t.slice(n.length);return{value:o,rest:a}}}var MCe=/^(\d+)(th|st|nd|rd)?/i,ICe=/\d+/i,CCe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},kCe={any:[/^b/i,/^(a|c)/i]},LCe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},OCe={any:[/1/i,/2/i,/3/i,/4/i]},ACe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},PCe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},RCe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},FCe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},NCe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},DCe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},jCe={ordinalNumber:TCe({matchPattern:MCe,parsePattern:ICe,valueCallback:function(e){return parseInt(e,10)}}),era:Cy({matchPatterns:CCe,defaultMatchWidth:"wide",parsePatterns:kCe,defaultParseWidth:"any"}),quarter:Cy({matchPatterns:LCe,defaultMatchWidth:"wide",parsePatterns:OCe,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Cy({matchPatterns:ACe,defaultMatchWidth:"wide",parsePatterns:PCe,defaultParseWidth:"any"}),day:Cy({matchPatterns:RCe,defaultMatchWidth:"wide",parsePatterns:FCe,defaultParseWidth:"any"}),dayPeriod:Cy({matchPatterns:NCe,defaultMatchWidth:"any",parsePatterns:DCe,defaultParseWidth:"any"})};const VCe=jCe;var zCe={code:"en-US",formatDistance:oCe,formatLong:dCe,formatRelative:fCe,localize:$Ce,match:VCe,options:{weekStartsOn:0,firstWeekContainsDate:1}};const UCe=zCe;var GCe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,BCe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,qCe=/^'([^]*?)'?$/,WCe=/''/g,HCe=/[a-zA-Z]/;function JCe(e,t,r){var i,n,s,o,a,l,c,h,f,m,y,g,v,_,w,b,S,M;Ri(2,arguments);var T=String(t),k=L$(),N=(i=(n=r==null?void 0:r.locale)!==null&&n!==void 0?n:k.locale)!==null&&i!==void 0?i:UCe,F=bh((s=(o=(a=(l=r==null?void 0:r.firstWeekContainsDate)!==null&&l!==void 0?l:r==null||(c=r.locale)===null||c===void 0||(h=c.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&a!==void 0?a:k.firstWeekContainsDate)!==null&&o!==void 0?o:(f=k.locale)===null||f===void 0||(m=f.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(F>=1&&F<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var q=bh((y=(g=(v=(_=r==null?void 0:r.weekStartsOn)!==null&&_!==void 0?_:r==null||(w=r.locale)===null||w===void 0||(b=w.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&v!==void 0?v:k.weekStartsOn)!==null&&g!==void 0?g:(S=k.locale)===null||S===void 0||(M=S.options)===null||M===void 0?void 0:M.weekStartsOn)!==null&&y!==void 0?y:0);if(!(q>=0&&q<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!N.localize)throw new RangeError("locale must contain localize property");if(!N.formatLong)throw new RangeError("locale must contain formatLong property");var z=ma(e);if(!DIe(z))throw new RangeError("Invalid time value");var Q=FIe(z),K=jIe(z,Q),ce={firstWeekContainsDate:F,weekStartsOn:q,locale:N,_originalDate:z},ie=T.match(BCe).map(function(Oe){var Qe=Oe[0];if(Qe==="p"||Qe==="P"){var et=XIe[Qe];return et(Oe,N.formatLong)}return Oe}).join("").match(GCe).map(function(Oe){if(Oe==="''")return"'";var Qe=Oe[0];if(Qe==="'")return ZCe(Oe);var et=YIe[Qe];if(et)return!(r!=null&&r.useAdditionalWeekYearTokens)&&iCe(Oe)&&m6(Oe,t,String(e)),!(r!=null&&r.useAdditionalDayOfYearTokens)&&rCe(Oe)&&m6(Oe,t,String(e)),et(K,Oe,N.localize,ce);if(Qe.match(HCe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Qe+"`");return Oe}).join("");return ie}function ZCe(e){var t=e.match(qCe);return t?t[1].replace(WCe,"'"):e}const YCe={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};function wje(e){return{renderer:{type:"simple",symbol:e==="esriGeometryPoint"||e==="esriGeometryMultipoint"?hJ:e==="esriGeometryPolyline"?pJ:fJ}}}const QCe=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let KCe=1;function _je(e,t){if(j("esri-csp-restrictions"))return()=>({[t]:null,...e});try{let r=`this.${t} = null;`;for(const n in e)r+=`this${QCe.test(n)?`.${n}`:`["${n}"]`} = ${JSON.stringify(e[n])};`;const i=new Function(`
      return class AttributesClass$${KCe++} {
        constructor() {
          ${r};
        }
      }
    `)();return()=>new i}catch{return()=>({[t]:null,...e})}}function bje(e={}){return[{name:"New Feature",description:"",prototype:{attributes:P(e)}}]}function XCe(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:YCe,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}const y6=Z.getLogger("esri.layers.graphics.sources.GeoJSONSource");let yd=class extends Nn{constructor(){super(...arguments),this.type="geojson",this.refresh=C2(async e=>{await this.load();const{extent:t,timeExtent:r}=await this._connection.invoke("refresh",e);return this.sourceJSON.extent=t,r&&(this.sourceJSON.timeInfo.timeExtent=[r.start,r.end]),{dataChanged:!0,updates:{extent:this.sourceJSON.extent,timeInfo:this.sourceJSON.timeInfo}}})}load(e){const t=I(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}queryFeatures(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatures",e?e.toJSON():null,t)).then(r=>Dv.fromJSON(r))}queryFeaturesJSON(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatures",e?e.toJSON():null,t))}queryFeatureCount(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t))}queryObjectIds(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t))}queryExtent(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t)).then(r=>({count:r.count,extent:Je.fromJSON(r.extent)}))}querySnapping(e,t={}){return this.load(t).then(()=>this._connection.invoke("querySnapping",e,t))}_applyEdits(e){if(!this._connection)throw new O("geojson-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField,r=[],i=[],n=[];if(e.addFeatures)for(const s of e.addFeatures)r.push(this._serializeFeature(s));if(e.deleteFeatures)for(const s of e.deleteFeatures)"objectId"in s&&s.objectId!=null?i.push(s.objectId):"attributes"in s&&s.attributes[t]!=null&&i.push(s.attributes[t]);if(e.updateFeatures)for(const s of e.updateFeatures)n.push(this._serializeFeature(s));return this._connection.invoke("applyEdits",{adds:r,updates:n,deletes:i}).then(({extent:s,timeExtent:o,featureEditResults:a})=>(this.sourceJSON.extent=s,o&&(this.sourceJSON.timeInfo.timeExtent=[o.start,o.end]),this._createEditsResult(a)))}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new O("geojson-layer-source:edit-failure",t.description,{code:t.code}):null}}_serializeFeature(e){const{attributes:t}=e,r=this._geometryForSerialization(e);return r?{geometry:r.toJSON(),attributes:t}:{attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return R(t)?null:t.type==="mesh"||t.type==="extent"?ws.fromExtent(t.extent):t}async _startWorker(e){this._connection=await cG("GeoJSONSourceWorker",{strategy:j("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:r,hasZ:i,geometryType:n,objectIdField:s,url:o,timeInfo:a,customParameters:l}=this.layer,c=this.layer.originOf("spatialReference")==="defaults",h={url:o,customParameters:l,fields:t&&t.map(m=>m.toJSON()),geometryType:C3.toJSON(n),hasZ:i,objectIdField:s,timeInfo:a?a.toJSON():null,spatialReference:c?null:r&&r.toJSON()},f=await this._connection.invoke("load",h,{signal:e});for(const m of f.warnings)y6.warn(m.message,{layer:this.layer,warning:m});f.featureErrors.length&&y6.warn(`Encountered ${f.featureErrors.length} validation errors while loading features`,f.featureErrors),this.sourceJSON=f.layerDefinition,this.capabilities=XCe(this.sourceJSON.hasZ,!0)}};u([d()],yd.prototype,"capabilities",void 0),u([d()],yd.prototype,"type",void 0),u([d({constructOnly:!0})],yd.prototype,"layer",void 0),u([d()],yd.prototype,"sourceJSON",void 0),yd=u([E("esri.layers.graphics.sources.GeoJSONSource")],yd);const eke=wJ();let Re=class extends tJ(qH(WH(BH(aJ(sJ(nJ(XH(cP(j0))))))))){constructor(e){super(e),this.copyright=null,this.definitionExpression=null,this.displayField=null,this.editingEnabled=!1,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.hasZ=void 0,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="GeoJSON",this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new yd({layer:this}),this.spatialReference=Te.WGS84,this.templates=null,this.title="GeoJSON",this.type="geojson",this.typeIdField=null,this.types=null}destroy(){var e;(e=this.source)==null||e.destroy()}load(e){return this.addResolvingPromise(this.source.load(e).then(()=>{this.read(this.source.sourceJSON,{origin:"service",url:this.parsedUrl}),this.revert(["objectIdField","fields","timeInfo"],"service"),tS(this.renderer,this.fieldsIndex),P3(this.timeInfo,this.fieldsIndex)})),Promise.resolve(this)}get capabilities(){return this.source?this.source.capabilities:null}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("capabilities"),(this._get("createQueryVersion")||0)+1}get defaultPopupTemplate(){return this.createPopupTemplate()}get isTable(){return this.loaded&&this.geometryType==null}get parsedUrl(){return this.url?Qt(this.url):null}set renderer(e){tS(e,this.fieldsIndex),this._set("renderer",e)}set url(e){if(!e)return void this._set("url",e);const t=Qt(e);this._set("url",t.path),t.query&&(this.customParameters={...this.customParameters,...t.query})}async applyEdits(e,t){const r=await V(()=>import("./editingSupport.14c66c43.js"),[],import.meta.url);await this.load();const i=await r.applyEdits(this,this.source,e,t);return this.read({extent:this.source.sourceJSON.extent,timeInfo:this.source.sourceJSON.timeInfo},{origin:"service",ignoreDefaults:!0}),i}on(e,t){return super.on(e,t)}createPopupTemplate(e){return _J(this,e)}createQuery(){const e=new xi,t=this.get("capabilities.data");e.returnGeometry=!0,t&&t.supportsZ&&(e.returnZ=!0),e.outFields=["*"],e.where=this.definitionExpression||"1=1";const{timeOffset:r,timeExtent:i}=this;return e.timeExtent=r!=null&&i!=null?i.offset(-r.value,r.unit):i||null,e}getFieldDomain(e,t){let r,i=!1;const n=t&&t.feature,s=n&&n.attributes,o=this.typeIdField&&s&&s[this.typeIdField];return o!=null&&this.types&&(i=this.types.some(a=>a.id==o&&(r=a.domains&&a.domains[e],r&&r.type==="inherited"&&(r=this._getLayerDomain(e)),!0))),i||r||(r=this._getLayerDomain(e)),r}getField(e){return this.fieldsIndex.get(e)}queryFeatures(e,t){return this.load().then(()=>this.source.queryFeatures(xi.from(e)||this.createQuery(),t)).then(r=>{if(r!=null&&r.features)for(const i of r.features)i.layer=i.sourceLayer=this;return r})}queryObjectIds(e,t){return this.load().then(()=>this.source.queryObjectIds(xi.from(e)||this.createQuery(),t))}queryFeatureCount(e,t){return this.load().then(()=>this.source.queryFeatureCount(xi.from(e)||this.createQuery(),t))}queryExtent(e,t){return this.load().then(()=>this.source.queryExtent(xi.from(e)||this.createQuery(),t))}async hasDataChanged(){try{const{dataChanged:e,updates:t}=await this.source.refresh(this.customParameters);return I(t)&&this.read(t,{origin:"service",url:this.parsedUrl,ignoreDefaults:!0}),e}catch{}return!1}_getLayerDomain(e){if(!this.fields)return null;let t=null;return this.fields.some(r=>(r.name===e&&(t=r.domain),!!t)),t}};u([d({readOnly:!0,json:{read:!1,write:!1}})],Re.prototype,"capabilities",null),u([d({type:String})],Re.prototype,"copyright",void 0),u([d({readOnly:!0})],Re.prototype,"createQueryVersion",null),u([d({readOnly:!0})],Re.prototype,"defaultPopupTemplate",null),u([d({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],Re.prototype,"definitionExpression",void 0),u([d({type:String})],Re.prototype,"displayField",void 0),u([d({type:Boolean})],Re.prototype,"editingEnabled",void 0),u([d(YH)],Re.prototype,"elevationInfo",void 0),u([d(vJ)],Re.prototype,"featureReduction",void 0),u([d({type:[Nv],json:{name:"layerDefinition.fields",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"fields"}}}})],Re.prototype,"fields",void 0),u([d(eke.fieldsIndex)],Re.prototype,"fieldsIndex",void 0),u([d({type:Je,json:{name:"extent"}})],Re.prototype,"fullExtent",void 0),u([d({type:["point","polygon","polyline","multipoint"],json:{read:{reader:C3.read}}})],Re.prototype,"geometryType",void 0),u([d({type:Boolean})],Re.prototype,"hasZ",void 0),u([d(QH)],Re.prototype,"id",void 0),u([d({type:Boolean,readOnly:!0})],Re.prototype,"isTable",null),u([d(w$)],Re.prototype,"labelsVisible",void 0),u([d({type:[Wv],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:yL},write:!0}})],Re.prototype,"labelingInfo",void 0),u([d(ZH)],Re.prototype,"legendEnabled",void 0),u([d({type:["show","hide"]})],Re.prototype,"listMode",void 0),u([d({type:String,json:{name:"layerDefinition.objectIdField",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"objectIdField"}}}})],Re.prototype,"objectIdField",void 0),u([d(a0)],Re.prototype,"opacity",void 0),u([d({type:["GeoJSON"]})],Re.prototype,"operationalLayerType",void 0),u([d({readOnly:!0})],Re.prototype,"parsedUrl",null),u([d(v$)],Re.prototype,"popupEnabled",void 0),u([d({type:Mh,json:{name:"popupInfo",write:!0}})],Re.prototype,"popupTemplate",void 0),u([d({types:qv,json:{name:"layerDefinition.drawingInfo.renderer",write:!0,origins:{service:{name:"drawingInfo.renderer"},"web-scene":{types:LH}}}})],Re.prototype,"renderer",null),u([d(HH)],Re.prototype,"screenSizePerspectiveEnabled",void 0),u([d({readOnly:!0})],Re.prototype,"source",void 0),u([d({type:Te})],Re.prototype,"spatialReference",void 0),u([d({type:[_$]})],Re.prototype,"templates",void 0),u([d()],Re.prototype,"title",void 0),u([d({json:{read:!1},readOnly:!0})],Re.prototype,"type",void 0),u([d({type:String,readOnly:!0})],Re.prototype,"typeIdField",void 0),u([d({type:[yP]})],Re.prototype,"types",void 0),u([d(JH)],Re.prototype,"url",null),Re=u([E("esri.layers.GeoJSONLayer")],Re);const BP=Re,Sje=Object.freeze(Object.defineProperty({__proto__:null,default:BP},Symbol.toStringTag,{value:"Module"})),tke="#294f89",rke="#8db9d4",ike={FC_BRAND_BLUE_DARK:tke,FC_BRAND_BLUE_LIGHT:rke},{FC_BRAND_BLUE_LIGHT:$je,FC_BRAND_BLUE_DARK:g6}=ike;function nke(e){const t=new BP({url:"./Jurisdictional_Boundary.json",title:"Falls Church - Jurisdictional Boundary",id:"Jurisdictional_Boundary",opacity:.125,renderer:{type:"simple",symbol:{type:"simple-fill",style:"solid",color:g6,outline:{color:g6,width:1}}}});e.add(t)}class ske{constructor(t){this.message=t}toString(){return`AssertException: ${this.message}`}}function QY(e,t){if(!e)throw t=t||"assert",console.log(new Error(t).stack),new ske(t)}function xje(e,t,r,i){let n,s=(r[0]-e[0])/t[0],o=(i[0]-e[0])/t[0];s>o&&(n=s,s=o,o=n);let a=(r[1]-e[1])/t[1],l=(i[1]-e[1])/t[1];if(a>l&&(n=a,a=l,l=n),s>l||a>o)return!1;a>s&&(s=a),l<o&&(o=l);let c=(r[2]-e[2])/t[2],h=(i[2]-e[2])/t[2];return c>h&&(n=c,c=h,h=n),!(s>h||c>o)&&(h<o&&(o=h),!(o<0))}class oke{constructor(t){this.client=t,this._cancelled=!1,this.size=0,this.duration=0}}class ake{constructor(t){this.typeWorkerQuota=t,this.tasks=new Array,this.numWorkers=0,this.statistics=new lke}}class lke{constructor(){this.requests=0,this.size=0,this.duration=0,this.speed=0}}class uke{constructor(t,r,i,n){this._workerFunc=t,this._callbackFunc=r,this._maxTotalNumWorkers=i,this._totalNumWorkers=0,this._clients=n.map(s=>new ake(s))}hasQuota(t){const r=this._clients[t];return!!r&&(this._totalNumWorkers<this._maxTotalNumWorkers||r.numWorkers+r.tasks.length<r.typeWorkerQuota)}push(t){const r=this._clients[t.client];r&&(this._totalNumWorkers<this._maxTotalNumWorkers?(r.numWorkers++,this._totalNumWorkers++,this._workerFunc(t,(i,n)=>this._taskCallback(i,n))):r.tasks.push(t))}cancel(t){this._taskFinished(t),t._cancelled=!0}destroy(){this._clients.length=0}_taskFinished(t){const r=this._clients[t.client];this._totalNumWorkers--,r.numWorkers--,r.statistics.requests++,r.statistics.size+=t.size||0,r.statistics.duration+=t.duration||0,r.statistics.speed=r.statistics.duration>0?r.statistics.size/r.statistics.duration:0,QY(r.numWorkers>=0),this._next()}_next(){for(const t of this._clients)if(t&&t.numWorkers<t.typeWorkerQuota&&this._processQueue(t))return;for(const t of this._clients)if(t&&this._processQueue(t))return}_processQueue(t){for(;t.tasks.length>0;)if(this._workerFunc(t.tasks.shift(),(r,i)=>this._taskCallback(r,i)))return t.numWorkers++,this._totalNumWorkers++,!0;return!1}_taskCallback(t,r){t._cancelled||(this._callbackFunc(t,r),this._taskFinished(t))}getStatsForType(t){const r=this._clients[t];return r?{quota:r.typeWorkerQuota,workers:r.numWorkers,queueSize:r.tasks.length,requestStats:r.statistics}:null}get test(){const t=this;return{set workerFunc(r){t._workerFunc=r}}}}let oT=class extends le{constructor(){super(...arguments),this._tasks=new Map,this._onLoadQueue=new Array,this._doneQueue=new Array,this.updating=!1}setup(e,t,r){this._loadQueue=new uke((i,n)=>this._startLoading(i,n),(i,n)=>this._doneLoadingCB(i,n),e,t),r&&(this._frameTask=r.registerTask(Fe.STREAM_DATA_LOADER,this))}destroy(){this._frameTask=en(this._frameTask),this._tasks.forEach(e=>kb(e.abortController)),this._loadQueue=qi(this._loadQueue),this._onLoadQueue=null,this._doneQueue=null,this._tasks=null}hasDownloadSlots(e){return this._loadQueue.hasQuota(e)}request(e,t,r,i={}){const n=a9();n.__signal=I(i)?i.signal:null;const s=this._createOrUpdateTask(e,t,r,i,n);return vs(i,()=>this._cancelRequest(s,n)),n.promise}_createTask(e,t,r,i,n,s){const o=new pke(e,t,r,i,n);return this._updateTask(o,s),this._tasks.set(n,o),this._tasks.size===1&&this._set("updating",!0),this._loadQueue.push(o),o}_cancelRequest(e,t){GO(e.resolvers,t),t.reject(Ot()),e.resolvers.length===0&&(e.status===rs.DOWNLOADING&&(e.status=rs.CANCELLED,this._loadQueue.cancel(e),e.abortController.abort(),e.request=null,e.abortController=null),e.status=rs.CANCELLED,this._tasks.delete(e.key),this._tasks.size===0&&this._set("updating",!1))}_updateTask(e,t){e.resolvers.push(t)}_createOrUpdateTask(e,t,r,i,n){const s=fke(I(i)&&i.uid||e,t,r),o=this._tasks.get(s);return o?(this._updateTask(o,n),o):this._createTask(e,i,t,r,s,n)}_doneLoadingCB(e,t){this._loadQueue&&(QY(e.status===rs.DOWNLOADING),e.status=rs.DOWNLOADED,this._frameTask?this._doneQueue.push({task:e,err:t}):this._doneLoading(e,t))}get running(){return this._doneQueue.length>0||this._onLoadQueue.length>0}runTask(e){for(;!e.done&&this._onLoadQueue.length>0;){const t=this._onLoadQueue.shift();yt(t.task.abortController),t.task.abortController=null,t.callback(t.task),e.madeProgress()}for(;!e.done&&this._doneQueue.length>0;){const t=this._doneQueue.shift();t.task.status!==rs.DOWNLOADED&&(t.err=t.err||Ot()),this._doneLoading(t.task,t.err),e.madeProgress()}}_doneLoading(e,t){if(t&&!ui(t)&&e.numRetries>0)return--e.numRetries,void this._loadQueue.push(e);let r=e.result instanceof HTMLImageElement?0:e.resolvers.length;for(const i of e.resolvers)if(t)ui(t)?i.reject(t):i.reject(new O("stream-data-loader:request-error",`Failed to request resource at '${e.url}'. ${t}`,{url:e.url,error:t}));else{--r;const n=r<=0?e.result:P(e.result);i.resolve(n)}this._tasks.delete(e.key),this._tasks.size===0&&this._set("updating",!1)}_startLoading(e,t){if(e.status===rs.CANCELLED)return!1;let r,i;switch(e.startTime=performance.now(),e.status=rs.DOWNLOADING,e.docType){case"binary":i="array-buffer",r=0;break;case"image":i="image";break;case"image+type":i="array-buffer";break;default:i="json"}e.abortController=new AbortController;const n=e.abortController.signal;e.request=nt(e.url,{...e.options,responseType:i,timeout:r,signal:n});let s=()=>{};const o=l=>{e.duration=performance.now()-e.startTime,e.size=l instanceof ArrayBuffer?l.byteLength:e.size||0,e.result=l,this._frameTask?this._onLoadQueue.push({callback:t,task:e}):(e.abortController=null,t(e))},a=l=>{e.status===rs.DOWNLOADING&&t(e,l),s()};return e.docType!=="image+type"?(e.request.then(l=>o(l.data),a),!0):(e.request.then(l=>{const c=l.data,h=dke(c);if(i="image",e.size=c.byteLength,h==="unknown")return e.request=nt(e.url,{responseType:i,timeout:r,signal:n}),void e.request.then(y=>o(y.data),a);const f=new Blob([c],{type:h}),m=window.URL.createObjectURL(f);s=()=>window.URL.revokeObjectURL(m),e.request=nt(m,{responseType:i,timeout:r,signal:n}),e.request.then(y=>o(new hke(y.data,h,s)),a)},a),!0)}get test(){return{loadQueue:this._loadQueue}}};u([d({readOnly:!0})],oT.prototype,"updating",void 0),oT=u([E("esri.views.3d.support.StreamDataLoader")],oT);const cke={numRetries:0};function dke(e){if(e.byteLength<2)return"unknown";const t=new Uint8Array(e,0,e.byteLength);return t[0]===137&&t[1]===80?"image/png":t[0]===71&&t[1]===73?"image/gif":t[0]===66&&t[1]===77?"image/bmp":t[0]===255&&t[1]===216?"image/jpeg":"unknown"}class hke{constructor(t,r,i){this.image=t,this.type=r,this.release=i}get isOpaque(){return this.type==="image/jpeg"}}class pke extends oke{constructor(t,r,i,n,s){super(n),this.url=t,this.options=r,this.docType=i,this.key=s,this.result=null,this.status=rs.QUEUED,this.request=null,this.abortController=null,this.resolvers=new Array,this.startTime=0,this.numRetries=cke.numRetries}}function fke(e,t,r){return`${e}:${t}:${r}`}var rs;(function(e){e[e.QUEUED=1]="QUEUED",e[e.DOWNLOADING=2]="DOWNLOADING",e[e.DOWNLOADED=3]="DOWNLOADED",e[e.CANCELLED=4]="CANCELLED"})(rs||(rs={}));var v6,w6,Ko,_6,b6,S6;(function(e){e[e.INNER=0]="INNER",e[e.OUTER=1]="OUTER"})(v6||(v6={})),function(e){e[e.REGULAR=0]="REGULAR",e[e.HAS_NORTH_POLE=1]="HAS_NORTH_POLE",e[e.HAS_SOUTH_POLE=2]="HAS_SOUTH_POLE",e[e.HAS_BOTH_POLES=3]="HAS_BOTH_POLES"}(w6||(w6={})),function(e){e[e.NORTH=0]="NORTH",e[e.NORTH_EAST=1]="NORTH_EAST",e[e.EAST=2]="EAST",e[e.SOUTH_EAST=3]="SOUTH_EAST",e[e.SOUTH=4]="SOUTH",e[e.SOUTH_WEST=5]="SOUTH_WEST",e[e.WEST=6]="WEST",e[e.NORTH_WEST=7]="NORTH_WEST"}(Ko||(Ko={})),function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON"}(_6||(_6={})),function(e){e[e.Color=0]="Color",e[e.ColorNoRasterImage=1]="ColorNoRasterImage",e[e.Highlight=2]="Highlight",e[e.Water=3]="Water",e[e.Occluded=4]="Occluded"}(b6||(b6={})),function(e){e[e.FADING=0]="FADING",e[e.IMMEDIATE=1]="IMMEDIATE",e[e.UNFADED=2]="UNFADED"}(S6||(S6={}));const mke=12;class kt{constructor(t){const r=kt.checkUnsupported(t);if(I(r))throw r;const i=t;this.spatialReference=i.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=nA(this.spatialReference)||ym(this.spatialReference)||gm(this.spatialReference),this.origin=[i.origin.x,i.origin.y],this.pixelSize=i.size[0],this.dpi=i.dpi;const n=i.lods.reduce((c,h,f)=>(h.level<c.min&&(c.min=h.level,c.minIndex=f),c.max=Math.max(c.max,h.level),c),{min:1/0,minIndex:0,max:-1/0}),s=i.lods[n.minIndex],o=2**s.level;let a=s.resolution*o,l=s.scale*o;this.levels=new Array(n.max+1);for(let c=0;c<this.levels.length;c++)this.levels[c]={resolution:a,scale:l,tileSize:[a*i.size[0],a*i.size[1]]},a/=2,l/=2}clone(){return new kt(this.toTileInfo())}toTileInfo(){return new Qg({dpi:this.dpi,origin:{x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference},size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map((t,r)=>({level:r,scale:t.scale,resolution:t.resolution}))})}getExtent(t,r,i,n){const s=this.levels[t],o=s.tileSize[0],a=s.tileSize[1];n[0]=this.origin[0]+i*o,n[2]=this.origin[0]+(i+1)*o,n[3]=this.origin[1]-r*a,n[1]=this.origin[1]-(r+1)*a}convertExtentToRadians(t,r){this._isWebMercator?(r[0]=rN(t[0]),r[1]=iN(t[1]),r[2]=rN(t[2]),r[3]=iN(t[3])):this._isGCS&&(r[0]=Uy(t[0]),r[1]=Uy(t[1]),r[2]=Uy(t[2]),r[3]=Uy(t[3]))}getExtentGeometry(t,r,i,n=new Je){return this.getExtent(t,r,i,xo),n.spatialReference=this.spatialReference,n.xmin=xo[0],n.ymin=xo[1],n.xmax=xo[2],n.ymax=xo[3],n.zmin=void 0,n.zmax=void 0,n}ensureMaxLod(t){if(t==null)return!1;let r=!1;for(;this.levels.length<=t;){const i=this.levels[this.levels.length-1],n=i.resolution/2;this.levels.push({resolution:n,scale:i.scale/2,tileSize:[n*this.pixelSize,n*this.pixelSize]}),r=!0}return r}capMaxLod(t){this.levels.length>t+1&&(this.levels.length=t+1)}getMaxLod(){return this.levels.length-1}scaleAtLevel(t){return this.levels[0].scale/2**t}levelAtScale(t){const r=this.levels[0].scale;return t>=r?0:Math.log(r/t)*Math.LOG2E}resolutionAtLevel(t){return this.levels[0].resolution/2**t}compatibleWith(t){if(!(t instanceof kt)){if(kt.checkUnsupported(t))return!1;t=new kt(t)}if(!t.spatialReference.equals(this.spatialReference)||t.pixelSize!==this.pixelSize)return!1;const r=Math.min(this.levels.length,t.levels.length)-1,i=this.levels[r].resolution;let n=.5*i;return!Sf(t.origin[0],this.origin[0],n)||!Sf(t.origin[1],this.origin[1],n)?!1:(n=.5*i/2**r/this.pixelSize*mke,Sf(i,t.levels[r].resolution,n))}rootTilesInExtent(t,r=null,i=1/0){const n=new Array,s=this.levels[0].tileSize;if(R(t)||s[0]===0||s[1]===0)return n;kt.computeRowColExtent(t,s,this.origin,xo);let o=xo[1],a=xo[3],l=xo[0],c=xo[2];const h=c-l,f=a-o;if(h*f>i){const m=Math.floor(Math.sqrt(i));f>m&&(o=o+Math.floor(.5*f)-Math.floor(.5*m),a=o+m),h>m&&(l=l+Math.floor(.5*h)-Math.floor(.5*m),c=l+m)}for(let m=o;m<a;m++)for(let y=l;y<c;y++)n.push([0,m,y]);return I(r)&&(r[0]=this.origin[0]+l*s[0],r[1]=this.origin[1]-a*s[1],r[2]=this.origin[0]+c*s[0],r[3]=this.origin[1]-o*s[1]),n}static computeRowColExtent(t,r,i,n){const s=.001*(t[2]-t[0]+(t[3]-t[1]));n[0]=Math.max(0,Math.floor((t[0]+s-i[0])/r[0])),n[2]=Math.max(0,Math.ceil((t[2]-s-i[0])/r[0])),n[1]=Math.max(0,Math.floor((i[1]-t[3]+s)/r[1])),n[3]=Math.max(0,Math.ceil((i[1]-t[1]-s)/r[1]))}static isPowerOfTwo(t){const r=t.lods,i=r[0].resolution*2**r[0].level;return!r.some(n=>!qoe(n.resolution,i/2**n.level))}static hasGapInLevels(t){const r=t.lods.map(i=>i.level);r.sort((i,n)=>i-n);for(let i=1;i<r.length;i++)if(r[i]!==r[0]+i)return!0;return!1}static tileSizeSupported(t){const r=t.size[1];return r===t.size[0]&&(r&r-1)==0&&r>=128&&r<=512}static hasOriginPerLODs(t){const r=t.origin;return t.lods.some(i=>i.origin!=null&&(i.origin[0]!==r.x||i.origin[1]!==r.y))}static getMissingTileInfoError(){return new O("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}static checkUnsupported(t){return R(t)?qP():t.lods.length<1?new O("tilingscheme:generic","Tiling scheme must have at least one level"):kt.isPowerOfTwo(t)?kt.hasGapInLevels(t)?new O("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):kt.tileSizeSupported(t)?kt.hasOriginPerLODs(t)?new O("tilingscheme:multiple-origin","Tiling scheme levels must not have their own origin"):null:new O("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new O("tilingscheme:power-of-two","Tiling scheme must be power of two")}static fromExtent(t,r){const i=t[2]-t[0],n=t[3]-t[1],s=Em(r),o=1.2*Math.max(i,n),a=256,l=96,c=.0254,h=new kt(new Qg({size:[a,a],origin:{x:t[0]-.5*(o-i),y:t[3]+.5*(o-n)},lods:[{level:0,resolution:o/a,scale:1/(a/l*c/(o*s))}],spatialReference:r}));return h.ensureMaxLod(20),h}static makeWebMercatorAuxiliarySphere(t){const r=new kt(kt.WebMercatorAuxiliarySphereTileInfo);return r.ensureMaxLod(t),r}static makeGCSWithTileSize(t,r=256,i=16){const n=256/r,s=new kt(new Qg({size:[r,r],origin:{x:-180,y:90,spatialReference:t},spatialReference:t,lods:[{level:0,resolution:.703125*n,scale:295497598570834e-6*n}]}));return s.ensureMaxLod(i),s}get test(){return{isWebMercator:this._isWebMercator,isGCS:this._isGCS}}}function qP(){return new O("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}kt.WebMercatorAuxiliarySphereTileInfo=new Qg({size:[256,256],origin:{x:-20037508342787e-6,y:20037508342787e-6,spatialReference:Te.WebMercator},spatialReference:Te.WebMercator,lods:[{level:0,resolution:156543.03392800014,scale:591657527591555e-6}]}),kt.WebMercatorAuxiliarySphere=kt.makeWebMercatorAuxiliarySphere(19);const xo=bs(),$6=64;Woe(HM/10);const yke=bs();kt.WebMercatorAuxiliarySphere.getExtent(0,0,0,yke);bs([-180,-90,180,90]);const Qh=cn(),gke=cn(),Ea=cn(),Ta=cn();function vke(e,t,r=0){const i=e.extent;if(R(i))return!1;if(r===0)return Vle(i,t);const n=Math.min(i[2]-i[0],i[3]-i[1]);return Ule(i,t,r*n)}function Cw(e,t,r,i){Kb(Qh,r),Qh[i]=t[i];const n=Hg(Qh,Qh,t),s=Hg(gke,e,t),o=Xb(s,n),a=Xb(n,n);let l;l=o<=0?t:a<=o?r:x7(Qh,t,$3(n,n,o/a));const c=Hg(Qh,e,l);return Math.PI/2-Math.atan(c[2]/Math.sqrt(c[0]*c[0]+c[1]*c[1]))}function wke(e,t,r){const i=e.extent;if(R(i))return 0;Ea[0]=i[0],Ea[1]=i[1],Ea[2]=r,Ta[0]=i[2],Ta[1]=i[3],Ta[2]=r;let n=1/0,s=1/0;return t[0]<Ea[0]?n=Cw(t,Ea,Ta,0):t[0]>Ta[0]&&(n=Cw(t,Ta,Ea,0)),t[1]<Ea[1]?s=Cw(t,Ea,Ta,1):t[1]>Ta[1]&&(s=Cw(t,Ta,Ea,1)),Math.min(n,s)}function _ke(e,t,r){if(R(e))return qP();if(e.spatialReference.isGeographic&&!nA(e.spatialReference))return new O("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");const i=kt.checkUnsupported(e);if(I(i))return i;if(R(r))return new O("tilingscheme:extent-not-exist","The layer does not provide a layer extent.");const n=bke(e,r);if(n)return n;const s=e.spatialReference;return I(t)&&!(s.equals(t)||t.isWGS84&&s.isWebMercator)?new O("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene"):null}function bke(e,t){const r=e.lods,i=r[0].resolution*2**r[0].level,n=[i*e.size[0],i*e.size[1]],s=[e.origin.x,e.origin.y],o=Nle(t),a=bs();kt.computeRowColExtent(o,n,s,a);const l=(a[2]-a[0])*(a[3]-a[1]);if(l>$6){const c=r[0].scale*2**r[0].level;let h=Math.max((o[3]-o[1])/e.size[1],(o[2]-o[0])/e.size[0])*c/i;const f=Math.floor(Math.log(h)/Math.log(10));return h=Math.ceil(h/10**f)*10**f,new O("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(c).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+h.toLocaleString()+".",{level0Scale:c,suggestedLevel0Scale:h,requiredNumRootTiles:l,allowedNumRootTiles:$6})}return null}const Ske=Object.freeze(Object.defineProperty({__proto__:null,isInsideExtent:vke,tiltToExtentEdge:wke,checkIfTileInfoSupportedForViewSR:_ke},Symbol.toStringTag,{value:"Module"}));function $ke(){return!0}function xke(){return 0}function Eke(e,t){if(R(e))return qP();const r=e.lods.length-1,i=e.spatialReference,n=nA(i)||ym(i)||gm(i);if(i.isWebMercator){if(!kt.makeWebMercatorAuxiliarySphere(r).compatibleWith(e))return new O("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!n)return new O("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!kt.makeGCSWithTileSize(e.spatialReference,e.size[0],r).compatibleWith(e))return e.spatialReference.isWGS84?new O("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new O("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}return I(t)&&!e.spatialReference.equals(t)?new O("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene"):void 0}const Tke=Object.freeze(Object.defineProperty({__proto__:null,isInsideExtent:$ke,tiltToExtentEdge:xke,checkIfTileInfoSupportedForViewSR:Eke},Symbol.toStringTag,{value:"Module"})),Mke={[Sl.Global]:Tke,[Sl.Local]:Ske};function GL(e,t,r,i){return Mke[i].checkIfTileInfoSupportedForViewSR(e,r,t)}function Ike(e,t,r){const i=gse(e);if(I(i)){if(!de.isCollection(i))return{tileInfo:i.tileInfo,fullExtent:i.fullExtent};{const n=i.find(s=>GL(s.tileInfo,s.fullExtent,t,r)==null);if(n)return{tileInfo:n.tileInfo,fullExtent:n.fullExtent}}}return{tileInfo:null,fullExtent:null}}Ko.NORTH,Ko.EAST,Ko.SOUTH,Ko.WEST;Ko.NORTH_EAST,Ko.SOUTH_EAST,Ko.SOUTH_WEST,Ko.NORTH_WEST;function Cke(e,t){return e!=null&&(t==null||(t===Sl.Local?!e.isGeographic||e.isWGS84||e.wkid===us.CGCS2000:e.isWebMercator||e.isWGS84||e.wkid===us.CGCS2000||e.wkid===us.GCSMARS2000||e.wkid===us.GCSMARS2000_SPHERE||e.wkid===us.GCSMOON2000))}async function kke(e,t={}){await Oke(e,t),yt(t)}async function Lke(e,t={}){const{basemap:r,view:i}=e;if(yt(t),"spatialReferenceLocked"in i&&!i.spatialReferenceLocked||(await r.load(t),yt(t),r.baseLayers.length===0))return;const n=r.baseLayers.getItemAt(0);if(!yse(n))return;if(r.spatialReference){if(i.spatialReference.equals(r.spatialReference))return;x6()}await n.load(t),yt(t);const s=(("supportedSpatialReferences"in n?n.supportedSpatialReferences:null)||["tileInfo"in n?n.tileInfo.spatialReference:null]).filter(Boolean);s.length!==0&&s.every(o=>!i.spatialReference.equals(o))&&x6()}function x6(){throw new O("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}async function Oke(e,t){const{basemap:r,view:i}=e;if(await r.load(t),r.baseLayers.length===0)return;const n=r.baseLayers.concat(r.referenceLayers).toArray().filter(o=>!cN(o)).map(o=>new O("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:o,operationalLayerType:o.operationalLayerType||"unknown"}));if(n.length)throw n[0];const s=r.baseLayers.getItemAt(0);if(cN(s)){try{await s.load(t)}catch(o){const a="basemap-compatibility:unknown-error",l="Unknown basemap compatibility error",{name:c=a,message:h=l,details:f}=o;throw new O(c,h,f)}Ake(s,i)}}function Ake(e,t){const r=t.state.viewingMode;if(!r)return;let i,n;if((e==null?void 0:e.type)==="wmts"){const l=Ike(e,t.spatialReference,r);if(R(l.tileInfo))throw new O("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view");i=l.tileInfo,n=l.fullExtent}else i=e.tileInfo,n=e.fullExtent;if(R(i))return;if(!Cke(i.spatialReference,r))throw new O(`basemapgalleryitem:spatial-reference-unsupported-${Tj(r)}`,`Basemap spatial reference is unsupported in ${Tj(r)} mode`);const s=i.spatialReference.isGeographic,o=(e==null?void 0:e.type)==="vector-tile"?i.getOrCreateCompatible(256,s?1:2):null;if(r===Sl.Global){let l=GL(i,n,null,r);if(l&&(e==null?void 0:e.type)==="vector-tile"&&I(n)&&o&&!GL(o,n,null,r)&&(l=null),l){const c=i.spatialReference.isWebMercator?"web-mercator":"wgs84";throw new O(`basemapgalleryitem:tiling-scheme-unsupported-${c}-global`,"Basemap tiling scheme is unsupported in global mode",{error:l})}}else if(kt.checkUnsupported(i))throw new O("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");const a=t.get("basemapTerrain.tilingScheme");if(a&&!a.compatibleWith(i)&&((e==null?void 0:e.type)!=="vector-tile"||!o||!a.compatibleWith(o)))throw new O("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}let Uo=class extends ca(le){constructor(e){super(e),this.compatibilityFunction=null,this.error=null,this.state="loading",this.view=null}initialize(){const e=()=>this.refresh();this.handles.add([G(()=>{var t;return(t=this.basemap)==null?void 0:t.loadStatus},e),G(()=>this.compatibilityFunction,e),G(()=>{var t;return this.view&&"basemapTerrain"in this.view&&((t=this.view.basemapTerrain)==null?void 0:t.tilingScheme)},e),G(()=>{var t;return(t=this.view)==null?void 0:t.ready},e),G(()=>{var t;return(t=this.view)==null?void 0:t.spatialReference},e)]),this.refresh()}destroy(){this._cancelRefresh(),this.basemap=null,this.compatibilityFunction=null,this.view=null}get _spatialReferenceTask(){return rae(this.view,this.basemap)}set basemap(e){const t=this._get("basemap");t&&t.cancelLoad(),e&&e.load().catch(()=>{}),this._set("basemap",e)}get spatialReference(){return this._spatialReferenceTask.spatialReference}refresh(){var i;this._cancelRefresh(),this._set("state","loading");const e=(i=this.basemap)==null?void 0:i.loadStatus;if(e!=="loaded"&&e!=="failed")return;if(!this.compatibilityFunction)return void(e==="loaded"?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError)));const t=new AbortController,{signal:r}=t;this.compatibilityFunction(this,{signal:r}).then(()=>Ev(()=>!this._spatialReferenceTask.updating,r)).then(()=>{this._set("state","ready"),this._set("error",null)}).catch(n=>{ui(n)||(this._set("state","error"),this._set("error",n))}),this._refreshController=t}_cancelRefresh(){this._refreshController&&(this._refreshController.abort(),this._refreshController=null)}};u([d({readOnly:!0})],Uo.prototype,"_spatialReferenceTask",null),u([d()],Uo.prototype,"basemap",null),u([d()],Uo.prototype,"compatibilityFunction",void 0),u([d({readOnly:!0})],Uo.prototype,"error",void 0),u([d({readOnly:!0})],Uo.prototype,"spatialReference",null),u([d({readOnly:!0})],Uo.prototype,"state",void 0),u([d()],Uo.prototype,"view",void 0),Uo=u([E("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],Uo);const KY=Uo,XY=de.ofType(ta);let Lg=class extends le{constructor(e){super(e),this.basemaps=new XY}get state(){return"ready"}refresh(){}};u([d({type:XY})],Lg.prototype,"basemaps",void 0),u([d({readOnly:!0})],Lg.prototype,"state",null),Lg=u([E("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],Lg);const eQ=Lg,tQ=de.ofType(ta),rQ="esri.widgets.BasemapGallery.support.PortalBasemapsSource",Pke=Z.getLogger(rQ);let Ja=class extends Nn.LoadableMixin(xv(eQ)){constructor(e){super(e),this._handles=new zt,this.basemaps=new tQ,this.filterFunction=null,this.portal=Mr.getDefault(),this.query=null,this.updateBasemapsCallback=null}initialize(){this._handles.add([G(()=>{var e,t;return[this.filterFunction,this.loadStatus,(e=this.portal)==null?void 0:e.basemapGalleryGroupQuery,(t=this.portal)==null?void 0:t.user,this.query,this.updateBasemapsCallback]},()=>this.refresh(),je)])}destroy(){this._handles.destroy(),this._handles=null,this.filterFunction=null,this.portal=null}get state(){return this.loadStatus==="not-loaded"?"not-loaded":this.loadStatus==="loading"||this._lastPortalBasemapFetchController?"loading":"ready"}load(e){return this.addResolvingPromise(this.portal.load(e)),this.notifyChange("state"),Promise.resolve(this)}async refresh(){if(this.state!=="ready")return;this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null);const e=this.portal,t=new AbortController;this._lastPortalBasemapFetchController=t,this.notifyChange("state");try{const r=await e.fetchBasemaps(this._toQueryString(this.query),t);this._updateBasemaps(r)}catch(r){if(ui(r))throw r;Pke.warn(new O("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:r})),this._updateBasemaps()}this._lastPortalBasemapFetchController=null,this.notifyChange("state")}_toQueryString(e){return e&&typeof e!="string"?Object.keys(e).map(t=>`${t}:${e[t]}`).join(" AND "):e}_updateBasemaps(e=[]){let t=this.filterFunction?e.filter(this.filterFunction):e;t=this.updateBasemapsCallback?this.updateBasemapsCallback(t):t,this.basemaps.removeAll(),this.basemaps.addMany(t)}};u([d({readOnly:!0,type:tQ})],Ja.prototype,"basemaps",void 0),u([d()],Ja.prototype,"filterFunction",void 0),u([d({type:Mr})],Ja.prototype,"portal",void 0),u([d()],Ja.prototype,"query",void 0),u([d({readOnly:!0})],Ja.prototype,"state",null),u([d()],Ja.prototype,"updateBasemapsCallback",void 0),Ja=u([E(rQ)],Ja);const ib=Ja,iQ=de.ofType(KY);function Rke(e){return e&&e.declaredClass==="esri.portal.Portal"}function Fke(e){return e&&!(e instanceof ib)&&(!!e.portal||!!e.query)}function Nke(e){return e&&"basemaps"in e&&"state"in e&&"refresh"in e}let Js=class extends ca(Nn){constructor(e){super(e),this._loadingProjectionEngine=!1,this.items=new iQ,this.source=new ib,this.view=null}initialize(){const e=()=>this._recreateItems();this.handles.add([G(()=>this.state==="ready"?this.compatibilityFunction:null,()=>this._updateItems()),tn(()=>{var t;return(t=this.source)==null?void 0:t.basemaps},"change",e,{onListenerAdd:e})])}get activeBasemap(){var e,t,r;return(r=(t=(e=this.view)==null?void 0:e.map)==null?void 0:t.basemap)!=null?r:null}set activeBasemap(e){var i,n;if(!this.view.map)return;const t=typeof e=="string"?ta.fromId(e):e;if(!t||!this.view.ready)return this.view.map.basemap=t,void this._clearOverride("activeBasemap");const r=t.spatialReference||((n=(i=this.items)==null?void 0:i.find(s=>this.basemapEquals(t,s.basemap)))==null?void 0:n.spatialReference);if(r&&"spatialReferenceLocked"in this.view&&!this.view.spatialReferenceLocked){const s=this.view.spatialReference;if(I(r)&&!Hr(s,r)&&!_l(this.view.spatialReference,r)&&!dc())return this._override("activeBasemap",t),this._loadingProjectionEngine=!0,void hc().then(()=>{this._get("activeBasemap")===e&&(this.view.map.basemap=e,this.view.spatialReference=r,this._clearOverride("activeBasemap"))},()=>{}).then(()=>{this._loadingProjectionEngine=!1});this.view.map.basemap=t,this._clearOverride("activeBasemap"),I(r)&&!Hr(this.view.spatialReference,r)&&(this.view.spatialReference=r)}else this.view.map.basemap=t,this._clearOverride("activeBasemap")}get compatibilityFunction(){var e;return((e=this.view)==null?void 0:e.type)==="3d"?kke:Lke}set compatibilityFunction(e){I(e)?this._override("compatibilityFunction",e):this._clearOverride("compatibilityFunction")}castSource(e){return Array.isArray(e)||de.isCollection(e)?new eQ({basemaps:e}):Rke(e)?new ib({portal:e}):Fke(e)?new ib(e):Nke(e)?e:null}get state(){var e;return((e=this.view)==null?void 0:e.ready)&&this.source?this._loadingProjectionEngine?"loading":"ready":"disabled"}basemapEquals(e,t){return tae(e,t)}refresh(){this._recreateItems()}load(e){return this.addResolvingPromise(Nn.isLoadable(this.source)?this.source.load(e):null),Promise.resolve(this)}_recreateItems(){var i;const e=(i=this.source)==null?void 0:i.basemaps,{view:t,compatibilityFunction:r}=this;this.items.removeAll().forEach(n=>n.destroy()),e&&this.items.addMany(e.map(n=>new KY({basemap:n,compatibilityFunction:r,view:t})))}_updateItems(){for(const e of this.items)e.compatibilityFunction=this.compatibilityFunction,e.view=this.view}};u([d()],Js.prototype,"_loadingProjectionEngine",void 0),u([d()],Js.prototype,"activeBasemap",null),u([d()],Js.prototype,"compatibilityFunction",null),u([d({readOnly:!0,type:iQ})],Js.prototype,"items",void 0),u([d()],Js.prototype,"source",void 0),u([ze("source")],Js.prototype,"castSource",null),u([d({readOnly:!0})],Js.prototype,"state",null),u([d()],Js.prototype,"view",void 0),Js=u([E("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],Js);const Dke=Js,yn={base:"esri-basemap-gallery esri-widget esri-widget--panel-height-only",sourceLoading:"esri-basemap-gallery--source-loading",loader:"esri-basemap-gallery__loader",item:"esri-basemap-gallery__item",itemContainer:"esri-basemap-gallery__item-container",itemTitle:"esri-basemap-gallery__item-title",itemThumbnail:"esri-basemap-gallery__item-thumbnail",selectedItem:"esri-basemap-gallery__item--selected",itemError:"esri-basemap-gallery__item--error",emptyMessage:"esri-widget__content--empty",widgetIcon:"esri-icon-basemap",disabled:"esri-disabled",loaderAnimation:"esri-widget__loader-animation"};let xn=class extends Kt{constructor(e,t){super(e,t),this._handles=new zt,this.activeBasemap=null,this.disabled=!1,this.headingLevel=2,this.iconClass=yn.widgetIcon,this.label=void 0,this.messages=null,this.source=null,this.view=null,this.viewModel=new Dke}initialize(){const e=this._handles;this.own([tn(()=>this.viewModel.items,"change",t=>{const r="basemap-gallery-item-changes",{added:i,moved:n}=t;e.remove(r),e.add([...i,...n].map(s=>G(()=>s.state,()=>this.scheduleRender())),r),this.scheduleRender()}),e,di(()=>this.source,()=>this.viewModel.load(),{initial:!0,once:!0})])}destroy(){this._handles.destroy()}loadDependencies(){return V(()=>import("./calcite-scrim.188721cd.js"),[],import.meta.url)}render(){const e=this.get("source.state")==="loading",t=this.disabled||this.get("viewModel.state")==="disabled",r=this.get("viewModel.items").toArray().map(this._renderBasemapGalleryItem,this),i={[yn.sourceLoading]:e,[yn.disabled]:t},n=e?x("div",{class:yn.loader,key:"esri-basemap-gallery__loader"}):null,s=e?null:r.length>0?x("ul",{class:yn.itemContainer,key:"esri-basemap-gallery__item-container",role:"menu"},r):x("div",{class:yn.emptyMessage,key:"esri-basemap-gallery__empty-message"},x(tc,{level:this.headingLevel},this.messages.noBasemaps));return x("div",{class:this.classes(yn.base,i)},n,s)}_handleClick(e){const t=e.currentTarget["data-item"];t.state==="ready"&&(this.viewModel.activeBasemap=t.basemap)}_renderBasemapGalleryItem(e){const t=e.get("basemap.thumbnailUrl")||De("esri/themes/base/images/basemap-toggle-64.svg"),r=e.get("basemap.title"),i=e.get("basemap.portalItem.snippet"),n=e.get("error.message")||i||r,{viewModel:s}=this,o=!this.disabled&&s.state!=="disabled"&&e.state==="ready"?0:-1,a=s.basemapEquals(e.basemap,this.activeBasemap),l=s.state==="loading",c={[yn.selectedItem]:a,[yn.itemError]:e.state==="error"};return x("li",{"aria-selected":a.toString(),bind:this,class:this.classes(yn.item,c),"data-item":e,onkeydown:this._handleClick,onclick:this._handleClick,role:"menuitem",tabIndex:o,title:n},x("img",{alt:"",class:yn.itemThumbnail,src:t}),x("div",{class:yn.itemTitle},r),e.state==="loading"||a&&l?x("calcite-scrim",null,x("span",{"aria-hidden":"true",role:"presentation",class:yn.loaderAnimation})):null)}};u([X("viewModel.activeBasemap")],xn.prototype,"activeBasemap",void 0),u([d()],xn.prototype,"disabled",void 0),u([d()],xn.prototype,"headingLevel",void 0),u([d()],xn.prototype,"iconClass",void 0),u([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],xn.prototype,"label",void 0),u([d(),Et("esri/widgets/BasemapGallery/t9n/BasemapGallery")],xn.prototype,"messages",void 0),u([X("viewModel.source")],xn.prototype,"source",void 0),u([X("viewModel.view")],xn.prototype,"view",void 0),u([d()],xn.prototype,"viewModel",void 0),u([Gr()],xn.prototype,"_handleClick",null),xn=u([E("esri.widgets.BasemapGallery")],xn);const jke=xn;let Za=class extends E$(ua.EventedAccessor){constructor(e){super(e),this._initialViewpoint=null,this._goingHomeController=null,this.go=this.go.bind(this)}destroy(){this._cancelGo(),this.view=null}get state(){return this.get("view.ready")?this._goingHomeController?"going-home":"ready":"disabled"}set view(e){this._initialViewpoint=null,this._set("view",e),e&&e.when().then(()=>{this.view===e&&(this._initialViewpoint=e.viewpoint.clone(),this.notifyChange("viewpoint"))})}get viewpoint(){return this._get("viewpoint")||this._initialViewpoint}set viewpoint(e){this._set("viewpoint",e)}async go(){if(!this.get("view.ready"))throw new O("home:disabled-state","Cannot go when disabled.");this._cancelGo(),this.emit("go");const e=new AbortController;this._goingHomeController=e;try{await this.view.when(),await this.callGoTo({target:this.viewpoint,options:{signal:e.signal}})}catch{}this._goingHomeController=null}cancelGo(){this._cancelGo()}_cancelGo(){const{_goingHomeController:e}=this;e&&e.abort(),this._goingHomeController=null}};u([d()],Za.prototype,"_goingHomeController",void 0),u([d({readOnly:!0})],Za.prototype,"state",null),u([d()],Za.prototype,"view",null),u([d({type:po})],Za.prototype,"viewpoint",null),u([d()],Za.prototype,"go",null),u([d()],Za.prototype,"cancelGo",null),Za=u([E("esri.widgets.Home.HomeViewModel")],Za);const nQ=Za,kc={base:"esri-home esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",homeIcon:"esri-icon esri-icon-home",loadingIcon:"esri-icon-loading-indicator",rotatingIcon:"esri-rotating",widgetIcon:"esri-icon-home",disabled:"esri-disabled"};let vi=class extends Kt{constructor(e,t){super(e,t),this.goToOverride=null,this.iconClass=kc.widgetIcon,this.label=void 0,this.messages=null,this.messagesCommon=null,this.view=null,this.viewModel=new nQ,this.viewpoint=null}get homeTitle(){var i;const e=(i=this.viewModel)==null?void 0:i.state,{messagesCommon:t,messages:r}=this;return e==="going-home"?t.cancel:r.title}cancelGo(){return null}go(){return null}render(){var i;const e=(i=this.viewModel)==null?void 0:i.state,{homeTitle:t}=this,r={[kc.disabled]:e==="disabled"};return x("div",{bind:this,class:this.classes(kc.base,r),role:"button",tabIndex:0,onclick:this._go,onkeydown:this._go,"aria-label":t,title:t},this.renderIcon(),this.renderText())}renderIcon(){var r;const e=(r=this.viewModel)==null?void 0:r.state,t={[kc.loadingIcon]:e==="going-home",[kc.rotatingIcon]:e==="going-home"};return x("span",{"aria-hidden":"true",class:this.classes(kc.homeIcon,t)})}renderText(){const{messages:e}=this;return x("span",{class:kc.text},e.button)}_go(){const{viewModel:e}=this;e.state==="going-home"?e.cancelGo():e.go()}};u([X("viewModel.goToOverride")],vi.prototype,"goToOverride",void 0),u([d({readOnly:!0})],vi.prototype,"homeTitle",null),u([d()],vi.prototype,"iconClass",void 0),u([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],vi.prototype,"label",void 0),u([d(),Et("esri/widgets/Home/t9n/Home")],vi.prototype,"messages",void 0),u([d(),Et("esri/t9n/common")],vi.prototype,"messagesCommon",void 0),u([X("viewModel.view")],vi.prototype,"view",void 0),u([d({type:nQ}),xA("go")],vi.prototype,"viewModel",void 0),u([X("viewModel.viewpoint")],vi.prototype,"viewpoint",void 0),u([X("viewModel.cancelGo")],vi.prototype,"cancelGo",null),u([X("viewModel.go")],vi.prototype,"go",null),u([Gr()],vi.prototype,"_go",null),vi=u([E("esri.widgets.Home")],vi);const Vke=vi;let bu=class extends le{constructor(e){super(e),this._viewpointHandle=null,this._handles=new zt,this.group=null}initialize(){this._handles.add(tn(()=>{var e;return(e=this.view)==null?void 0:e.ui},"expand",e=>{const{target:t}=e;t&&t!==this&&t.expanded&&t.group&&t.group===this.group&&this._collapse()}))}destroy(){this._viewpointHandle=null,this.view=null,this._handles.destroy(),this._handles=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){const t=!!e;this._set("expanded",t);const r=this.get("view.ui");r&&r.emit("expand",{target:this}),this._viewpointHandleChange(t)}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&di(()=>e.ready,()=>{this.view===e&&this._watchViewpoint()},{once:!0,initial:!0}))}_viewpointHandleChange(e){this._viewpointHandle&&(e?di(()=>this.view.stationary,()=>this._viewpointHandle.resume(),{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){const e="viewpoint";this._handles.remove(e),this._viewpointHandle=null;const{autoCollapse:t,view:r}=this;if(r&&t){const i=Yoe(()=>r.type==="3d"?r.camera:r.viewpoint,()=>this._collapse());this._handles.add(i,e),this._viewpointHandle=i}}_collapse(){this.expanded=!1}};u([d({value:!1})],bu.prototype,"autoCollapse",null),u([d({value:!1})],bu.prototype,"expanded",null),u([d()],bu.prototype,"group",void 0),u([d({readOnly:!0})],bu.prototype,"state",null),u([d({value:null})],bu.prototype,"view",null),bu=u([E("esri.widgets.Expand.ExpandViewModel")],bu);const sQ=bu,nr={base:"esri-expand esri-widget",modeAuto:"esri-expand--auto",modeDrawer:"esri-expand--drawer",modeFloating:"esri-expand--floating",container:"esri-expand__container",containerExpanded:"esri-expand__container--expanded",panel:"esri-expand__panel",button:"esri-widget--button",text:"esri-icon-font-fallback-text",icon:"esri-collapse__icon",iconExpanded:"esri-expand__icon--expanded",iconNumber:"esri-expand__icon-number",iconNumberExpanded:"esri-expand__icon-number--expanded",expandIcon:"esri-icon-expand",collapseIcon:"esri-icon-collapse",content:"esri-expand__content",contentExpanded:"esri-expand__content--expanded",expandMask:"esri-expand__mask",expandMaskExpanded:"esri-expand__mask--expanded"};let Wt=class extends Kt{constructor(e,t){super(e,t),this.autoCollapse=null,this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expanded=null,this.expandTooltip="",this.group=null,this.iconNumber=0,this.label=void 0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.view=null,this.viewModel=new sQ,this._handleKeyDown=r=>{const{closeOnEsc:i,_toggleButtonEl:n,expanded:s}=this;!s||!i||r.target===n||r.key!=="Escape"||(typeof i=="function"?i(r):i)&&(this.expanded=!1,n==null||n.focus())}}get contentId(){return`${this.id}_controls_content`}get expandTitle(){const{expanded:e,messagesCommon:t,collapseTooltip:r,expandTooltip:i}=this;return e?r||t.collapse:i||t.expand}get collapseIconClass(){return nr.collapseIcon}set collapseIconClass(e){e?this._override("collapseIconClass",e):this._clearOverride("collapseIconClass")}get expandIconClass(){return TS(this.content)?this.content.iconClass:nr.expandIcon}set expandIconClass(e){e?this._override("expandIconClass",e):this._clearOverride("expandIconClass")}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}toggle(){this.viewModel.expanded=!this.viewModel.expanded}render(){const{mode:e}=this,t={[nr.modeAuto]:e==="auto",[nr.modeDrawer]:e==="drawer",[nr.modeFloating]:e==="floating"};return x("div",{class:this.classes(nr.base,t),onkeydown:this._handleKeyDown},this.renderMask(),this.renderContainer())}renderContainer(){const{expanded:e}=this,t={[nr.containerExpanded]:e};return x("div",{class:this.classes(nr.container,t)},this.renderPanel(),this.renderContent())}renderMask(){const{expanded:e}=this,t={[nr.expandMaskExpanded]:e};return x("div",{bind:this,onclick:this._toggle,class:this.classes(nr.expandMask,t)})}renderBadgeNumber(){const{expanded:e,iconNumber:t}=this;return t&&!e?x("span",{key:"expand__icon-number",class:nr.iconNumber},t):null}renderPanelNumber(){const{iconNumber:e,expanded:t}=this;return e&&t?x("span",{key:"expand__expand-icon-number",class:this.classes(nr.iconNumber,nr.iconNumberExpanded)},e):null}renderIcon(){const{collapseIconClass:e,expandIconClass:t,expanded:r}=this,i={[nr.iconExpanded]:r,[e]:r,[t]:!r};return e===t&&(i[e]=!0),x("span",{"aria-hidden":"true",class:this.classes(nr.icon,i)})}renderTitle(){return x("span",{class:nr.text},this.expandTitle)}renderExpandButton(){const{expanded:e,expandTitle:t,contentId:r}=this;return x("div",{afterCreate:this._storeToggleButtonEl,"aria-controls":r,"aria-expanded":e?"true":"false",bind:this,class:nr.button,onclick:this._toggle,onkeydown:this._toggle,role:"button",tabindex:"0",title:t},this.renderBadgeNumber(),this.renderIcon(),this.renderTitle())}renderPanel(){return x("div",{class:nr.panel},this.renderExpandButton(),this.renderPanelNumber())}renderContent(){const{expanded:e,contentId:t,content:r}=this,i={[nr.contentExpanded]:e},n={id:t,role:"region",class:this.classes(nr.content,i)};return typeof r=="string"?x("div",{key:"content__string",innerHTML:r,...n}):TS(r)?x("div",{key:"content__widget",...n},r.render()):r instanceof HTMLElement?x("div",{key:"content__html-element",bind:r,afterCreate:this._attachToNode,...n}):WB(r)?x("div",{key:"content__node",bind:r.domNode,afterCreate:this._attachToNode,...n}):null}_toggle(){this.toggle()}_attachToNode(e){const t=this;e.appendChild(t)}_storeToggleButtonEl(e){this._toggleButtonEl=e}};u([d({readOnly:!0})],Wt.prototype,"contentId",null),u([d({readOnly:!0})],Wt.prototype,"expandTitle",null),u([X("viewModel.autoCollapse")],Wt.prototype,"autoCollapse",void 0),u([d()],Wt.prototype,"closeOnEsc",void 0),u([d()],Wt.prototype,"collapseIconClass",null),u([d()],Wt.prototype,"collapseTooltip",void 0),u([d()],Wt.prototype,"content",void 0),u([X("viewModel.expanded")],Wt.prototype,"expanded",void 0),u([d()],Wt.prototype,"expandIconClass",null),u([d()],Wt.prototype,"expandTooltip",void 0),u([X("viewModel.group")],Wt.prototype,"group",void 0),u([d()],Wt.prototype,"iconNumber",void 0),u([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Wt.prototype,"label",void 0),u([d(),Et("esri/widgets/Expand/t9n/Expand")],Wt.prototype,"messages",void 0),u([d(),Et("esri/t9n/common")],Wt.prototype,"messagesCommon",void 0),u([d()],Wt.prototype,"mode",void 0),u([X("viewModel.view")],Wt.prototype,"view",void 0),u([d({type:sQ})],Wt.prototype,"viewModel",void 0),u([Gr()],Wt.prototype,"_toggle",null),Wt=u([E("esri.widgets.Expand")],Wt);const zke=Wt;new Ee({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});new Ee({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});let Lc=class extends B{constructor(e){super(e),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null}};u([d({type:String,json:{write:!0}})],Lc.prototype,"deviationUnit",void 0),u([d({json:{read:{reader:e=>e?e.map(t=>Li(t)):null},write:{writer:(e,t)=>{t.geometries=e.map(r=>r.toJSON())}}}})],Lc.prototype,"geometries",void 0),u([d({type:Number,json:{write:!0}})],Lc.prototype,"maxDeviation",void 0),Lc=u([E("esri.rest.support.GeneralizeParameters")],Lc),Lc.from=dt(Lc);new Ee({preserveShape:"preserve-shape"});let Wl=class extends B{constructor(e){super(e),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null}};u([d({type:String,json:{write:!0}})],Wl.prototype,"calculationType",void 0),u([d({type:Boolean,json:{write:!0}})],Wl.prototype,"geodesic",void 0),u([d({json:{write:!0}})],Wl.prototype,"lengthUnit",void 0),u([d({type:[Ei],json:{read:{reader:e=>e?e.map(t=>Li(t)):null},write:{writer:(e,t)=>{t.polylines=e.map(r=>r.toJSON())}}}})],Wl.prototype,"polylines",void 0),Wl=u([E("esri.rest.support.LengthsParameters")],Wl),Wl.from=dt(Wl);new Ee({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"});new Ee({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});let Ma=class extends B{constructor(e){super(e),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null}};u([d({type:Number,json:{write:!0}})],Ma.prototype,"bevelRatio",void 0),u([d({json:{read:{reader:e=>e?e.map(t=>Li(t)):null},write:{writer:(e,t)=>{t.geometries=e.map(r=>r.toJSON())}}}})],Ma.prototype,"geometries",void 0),u([d({type:Number,json:{write:!0}})],Ma.prototype,"offsetDistance",void 0),u([d({type:String,json:{write:!0}})],Ma.prototype,"offsetHow",void 0),u([d({type:String,json:{write:!0}})],Ma.prototype,"offsetUnit",void 0),Ma=u([E("esri.rest.support.OffsetParameters")],Ma),Ma.from=dt(Ma);function Uke(e,t,r){const i=nU(t);return e.map(n=>{const s=i.fromJSON(n);return s.spatialReference=r,s})}let gd=class extends B{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(i=>i.toJSON()),t=this.geometries[0],r={};return r.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),r.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),r.geometries=JSON.stringify({geometryType:_m(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(r.transformForward=this.transformForward),r}};u([d()],gd.prototype,"geometries",void 0),u([d({json:{read:{source:"outSR"}}})],gd.prototype,"outSpatialReference",void 0),u([d()],gd.prototype,"transformation",void 0),u([d()],gd.prototype,"transformForward",void 0),gd=u([E("esri.rest.support.ProjectParameters")],gd);const oQ=gd,Gke=dt(oQ);async function Bke(e,t,r){t=Gke(t);const i=gq(e),n={...i.query,f:"json",...t.toJSON()},s=t.outSpatialReference,o=_m(t.geometries[0]),a=Xye(n,r);return nt(i.path+"/project",a).then(({data:{geometries:l}})=>Uke(l,o,s))}new Ee({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});let Hl=class extends B{constructor(e){super(e),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null}};u([d({json:{read:{reader:e=>e?e.map(t=>Li(t)):null},write:{writer:(e,t)=>{t.geometries1=e.map(r=>r.toJSON())}}}})],Hl.prototype,"geometries1",void 0),u([d({json:{read:{reader:e=>e?e.map(t=>Li(t)):null},write:{writer:(e,t)=>{t.geometries2=e.map(r=>r.toJSON())}}}})],Hl.prototype,"geometries2",void 0),u([d({type:String,json:{write:!0}})],Hl.prototype,"relation",void 0),u([d({type:String,json:{write:!0}})],Hl.prototype,"relationParameter",void 0),Hl=u([E("esri.rest.support.RelationParameters")],Hl),Hl.from=dt(Hl);new Ee({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});let Oc=class extends B{constructor(e){super(e),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null}};u([d({type:String,json:{write:!0}})],Oc.prototype,"extendHow",void 0),u([d({type:[Ei],json:{read:{reader:e=>e?e.map(t=>Li(t)):null},write:{writer:(e,t)=>{t.polylines=e.map(r=>r.toJSON())}}}})],Oc.prototype,"polylines",void 0),u([d({json:{read:{reader:e=>e?Li(e):null},write:{writer:(e,t)=>{t.trimExtendTo=e.toJSON()}}}})],Oc.prototype,"trimExtendTo",void 0),Oc=u([E("esri.rest.support.TrimExtendParameters")],Oc),Oc.from=dt(Oc);const aQ=Z.getLogger("esri.widgets.support.geolocationUtils"),qke={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function Wke(){const e=j("esri-geolocation");return e||aQ.warn("geolocation-unsupported","Geolocation unsupported."),e}function Hke(){const e=window.isSecureContext;return e||aQ.warn("insecure-context","Geolocation requires a secure origin."),e}function Jke(){return Wke()&&Hke()}function Zke(e){return e||(e=qke),new Promise((r,i)=>{setTimeout(()=>i(new O("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(r,i,e)})}function Yke(e,t){const{position:r,view:i}=e;return Xke(Kke(Qke(r)),i,t)}function Qke(e){const t=e&&e.coords||{},r={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed};return e&&{coords:r,timestamp:e.timestamp}}function Kke(e){const t=e&&e.coords;return t?new ye({longitude:t.longitude,latitude:t.latitude,z:t.altitude||null,spatialReference:{wkid:4326}}):null}function Xke(e,t,r){if(!t)return Promise.resolve(e);const i=t.spatialReference;return i.isWGS84?Promise.resolve(e):i.isWebMercator?Promise.resolve(cl(e)):eLe(r).then(n=>{if(!n)throw new O("geometry-service:missing-url","Geometry service URL is missing");const s=new oQ({geometries:[e],outSpatialReference:i});return Bke(n,s,r).then(o=>o[0])})}function eLe(e){if(Ve.geometryServiceUrl)return Promise.resolve(Ve.geometryServiceUrl);const t=Mr.getDefault();return t.load(e).catch(()=>{}).then(()=>t.get("helperServices.geometry.url"))}const tLe=2500;let Go=class extends E$(ua.EventedMixin(le)){constructor(){super(...arguments),this._geolocationUsable=!0,this._iconPath=De("esri/images/support/sdk_gps_location.png"),this.geolocationOptions=null,this.goToLocationEnabled=!0,this.graphic=new ln({symbol:new Lv({url:this._iconPath,width:21,height:21})}),this.scale=null,this.useHeadingEnabled=!0,this.view=null}initialize(){Jke()||(this._geolocationUsable=!1)}destroy(){this._clear(),this.view=null}_clear(){this.view&&this.view.graphics.remove(this.graphic)}_getScaleWithinConstraints(e,t){if(!t)return e;if(t.type==="2d"){const{effectiveMaxScale:r,effectiveMinScale:i}=t.constraints;return Math.min(i,Math.max(r,e))}return e}_getScale(e){const{scale:t}=this,r=typeof t=="number"?t:tLe;return this._getScaleWithinConstraints(r,e)}_getHeading(e,t){const r=t&&t.spatialReference,i=r&&(r.isWebMercator||r.isGeographic),n=e.coords&&e.coords.heading;if(!(!i||typeof n!="number"||isNaN(n)||n<0||n>360))return n}_addHeading(e){const{heading:t,target:r,view:i}=e;i&&typeof t=="number"&&!isNaN(t)&&(i.type!=="3d"?i.type==="2d"&&(r.rotation=360-t):r.heading=t)}_animatePoint(e,t,r,i){const{view:n}=this;if(!this.goToLocationEnabled||!n)return Promise.resolve(t);const s=this.useHeadingEnabled?this._getHeading(t,n):void 0,o={target:e,scale:r};return this._addHeading({heading:s,target:o,view:n}),this.callGoTo({target:o,options:i}).then(()=>t)}async _setPosition(e,t){try{const r=await Yke({position:e,view:this.view},t),{graphic:i}=this,{timestamp:n}=e,{coords:s}=e,{accuracy:o,altitude:a,altitudeAccuracy:l,heading:c,latitude:h,longitude:f,speed:m}=s,y={timestamp:n,accuracy:o,altitude:a,altitudeAccuracy:l,heading:c,latitude:h,longitude:f,speed:m};i&&(i.geometry=r,i.attributes=y);const g=this._getScale(this.view);return this._animatePoint(r,e,g,t)}catch(r){throw new O("positioning:invalid-point","Cannot position invalid point",{error:r})}}};u([d()],Go.prototype,"_geolocationUsable",void 0),u([d()],Go.prototype,"geolocationOptions",void 0),u([d()],Go.prototype,"goToLocationEnabled",void 0),u([d()],Go.prototype,"graphic",void 0),u([d()],Go.prototype,"scale",void 0),u([d()],Go.prototype,"useHeadingEnabled",void 0),u([d()],Go.prototype,"view",void 0),Go=u([E("esri.widgets.support.GeolocationPositioning")],Go);const rLe=Go;async function iLe(){const e=await v3("esri/widgets/Locate/t9n/Locate");return new Mh({title:e.currentLocation,fieldInfos:[{fieldName:"timestamp",label:e.timestamp,format:{dateFormat:"short-date-short-time"}},{fieldName:"latitude",label:e.latitude,format:{places:4,digitSeparator:!0}},{fieldName:"longitude",label:e.longitude,format:{places:4,digitSeparator:!0}},{fieldName:"accuracy",label:e.accuracy,format:{places:0,digitSeparator:!0}},{fieldName:"altitude",label:e.altitude,format:{places:0,digitSeparator:!0}},{fieldName:"altitudeAccuracy",label:e.altitudeAccuracy,format:{places:0,digitSeparator:!0}},{fieldName:"heading",label:e.heading,format:{places:0,digitSeparator:!0}},{fieldName:"speed",label:e.speed,format:{places:0,digitSeparator:!0}}],actions:[_L.clone()],content:[{type:"fields"}]})}let Su=class extends rLe{constructor(e){super(e),this._locateController=null,this._handles=new zt,this.popupEnabled=!0,this.locate=this.locate.bind(this)}initialize(){this._handles.add([m3(()=>{var i;const{graphic:e,view:t}=this;((i=t==null?void 0:t.graphics)==null?void 0:i.includes(e))&&this._updatePopupTemplate(e)})])}destroy(){this.cancelLocate(),this._handles.destroy(),this._handles=null}get state(){return this._geolocationUsable?this.get("view.ready")?this._locateController?"locating":"ready":"disabled":"feature-unsupported"}async locate(){if(this.cancelLocate(),this.state==="disabled")throw new O("locate:disabled-state","Cannot locate when disabled.");if(this.state==="feature-unsupported")throw new O("locate:feature-unsupported-state","Cannot locate in unsecure domain.");const e=new AbortController;this._locateController=e;try{let t=await Zke(this.geolocationOptions);return t=await this._setPosition(t,{signal:e.signal}),this._locateController!==e?null:(this.graphic&&(this.graphic=this.graphic.clone(),await this._updatePopupTemplate(this.graphic),this.view.graphics.push(this.graphic)),this.emit("locate",{position:t}),this._locateController=null,t)}catch(t){throw this._locateController=null,this.emit("locate-error",{error:t}),t}}cancelLocate(){this._clear(),this._locateController&&this._locateController.abort(),this._locateController=null}async _updatePopupTemplate(e){if(!this.popupEnabled)return;const t=await iLe(),r=e!==this.graphic;this.destroyed||r||(e.popupTemplate=t)}};u([d()],Su.prototype,"_locateController",void 0),u([d()],Su.prototype,"popupEnabled",void 0),u([d({readOnly:!0})],Su.prototype,"state",null),u([d()],Su.prototype,"locate",null),u([d()],Su.prototype,"cancelLocate",null),Su=u([E("esri.widgets.Locate.LocateViewModel")],Su);const lQ=Su,Ia={base:"esri-locate esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-icon",locate:"esri-icon-locate",loading:"esri-icon-loading-indicator",rotating:"esri-rotating",widgetIcon:"esri-icon-north-navigation",disabled:"esri-disabled",hidden:"esri-hidden"};let br=class extends Kt{constructor(e,t){super(e,t),this.geolocationOptions=null,this.goToLocationEnabled=null,this.goToOverride=null,this.graphic=null,this.iconClass=Ia.widgetIcon,this.label=void 0,this.messages=null,this.messagesCommon=null,this.popupEnabled=null,this.scale=null,this.useHeadingEnabled=null,this.view=null,this.viewModel=new lQ}cancelLocate(){}locate(){}render(){const e=this.get("viewModel.state"),t=e==="locating",r={[Ia.disabled]:e==="disabled",[Ia.hidden]:e==="feature-unsupported"},i={[Ia.loading]:t,[Ia.rotating]:t,[Ia.locate]:!t},n=e==="locating"?this.messagesCommon.cancel:this.messages.title;return x("div",{bind:this,class:this.classes(Ia.base,r),hidden:e==="feature-unsupported",onclick:this._locate,onkeydown:this._locate,role:"button",tabIndex:0,"aria-label":n,title:n},x("span",{"aria-hidden":"true",class:this.classes(Ia.icon,i)}),x("span",{class:Ia.text},this.messages.title))}_locate(){const{viewModel:e}=this;e.state==="locating"?e.cancelLocate():e.locate()}};u([X("viewModel.geolocationOptions")],br.prototype,"geolocationOptions",void 0),u([X("viewModel.goToLocationEnabled")],br.prototype,"goToLocationEnabled",void 0),u([X("viewModel.goToOverride")],br.prototype,"goToOverride",void 0),u([X("viewModel.graphic")],br.prototype,"graphic",void 0),u([d()],br.prototype,"iconClass",void 0),u([d({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],br.prototype,"label",void 0),u([d(),Et("esri/widgets/Locate/t9n/Locate")],br.prototype,"messages",void 0),u([d(),Et("esri/t9n/common")],br.prototype,"messagesCommon",void 0),u([X("viewModel.popupEnabled")],br.prototype,"popupEnabled",void 0),u([X("viewModel.scale")],br.prototype,"scale",void 0),u([X("viewModel.useHeadingEnabled")],br.prototype,"useHeadingEnabled",void 0),u([X("viewModel.view")],br.prototype,"view",void 0),u([d({type:lQ}),xA(["locate","locate-error"])],br.prototype,"viewModel",void 0),u([X("viewModel.cancelLocate")],br.prototype,"cancelLocate",null),u([X("viewModel.locate")],br.prototype,"locate",null),u([Gr()],br.prototype,"_locate",null),br=u([E("esri.widgets.Locate")],br);const nLe=br,kw="top-right";function sLe(e){const t=new jke({view:e,source:[ta.fromId("topo-vector"),ta.fromId("streets-vector"),ta.fromId("satellite")]});e.ui.components=["attribution"],e.ui.add(new zke({view:e,content:t,expandTooltip:"Basemap Gallery"}),kw),e.ui.add(new nLe({view:e}),kw),e.ui.add(new Vke({view:e}),kw),e.ui.add(new nY({view:e}),kw)}function WP(e,t,r){r===void 0&&(r={});var i={type:"Feature"};return(r.id===0||r.id)&&(i.id=r.id),r.bbox&&(i.bbox=r.bbox),i.properties=t||{},i.geometry=e,i}function uQ(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!E6(e[0])||!E6(e[1]))throw new Error("coordinates must contain numbers");var i={type:"Point",coordinates:e};return WP(i,t,r)}function oLe(e,t,r){return r===void 0&&(r={}),HP(e.map(function(i){return uQ(i,t)}),r)}function aLe(e,t,r){r===void 0&&(r={});for(var i=0,n=e;i<n.length;i++){var s=n[i];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<s[s.length-1].length;o++)if(s[s.length-1][o]!==s[0][o])throw new Error("First and last Position are not equivalent.")}var a={type:"Polygon",coordinates:e};return WP(a,t,r)}function HP(e,t){t===void 0&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function lLe(e,t,r){r===void 0&&(r={});var i={type:"MultiPoint",coordinates:e};return WP(i,t,r)}function E6(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function cQ(e,t,r){if(e!==null)for(var i,n,s,o,a,l,c,h=0,f=0,m,y=e.type,g=y==="FeatureCollection",v=y==="Feature",_=g?e.features.length:1,w=0;w<_;w++){c=g?e.features[w].geometry:v?e.geometry:e,m=c?c.type==="GeometryCollection":!1,a=m?c.geometries.length:1;for(var b=0;b<a;b++){var S=0,M=0;if(o=m?c.geometries[b]:c,o!==null){l=o.coordinates;var T=o.type;switch(h=r&&(T==="Polygon"||T==="MultiPolygon")?1:0,T){case null:break;case"Point":if(t(l,f,w,S,M)===!1)return!1;f++,S++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(t(l[i],f,w,S,M)===!1)return!1;f++,T==="MultiPoint"&&S++}T==="LineString"&&S++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(n=0;n<l[i].length-h;n++){if(t(l[i][n],f,w,S,M)===!1)return!1;f++}T==="MultiLineString"&&S++,T==="Polygon"&&M++}T==="Polygon"&&S++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(M=0,n=0;n<l[i].length;n++){for(s=0;s<l[i][n].length-h;s++){if(t(l[i][n][s],f,w,S,M)===!1)return!1;f++}M++}S++}break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(cQ(o.geometries[i],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function uLe(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function T6(e,t){var r,i,n,s,o,a,l,c,h,f,m=0,y=e.type==="FeatureCollection",g=e.type==="Feature",v=y?e.features.length:1;for(r=0;r<v;r++){for(a=y?e.features[r].geometry:g?e.geometry:e,c=y?e.features[r].properties:g?e.properties:{},h=y?e.features[r].bbox:g?e.bbox:void 0,f=y?e.features[r].id:g?e.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,n=0;n<o;n++){if(s=l?a.geometries[n]:a,s===null){if(t(null,m,c,h,f)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(s,m,c,h,f)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<s.geometries.length;i++)if(t(s.geometries[i],m,c,h,f)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}m++}}function cLe(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function dLe(e){return e.type==="Feature"?e.geometry:e}function M6(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var i=cLe(e),n=dLe(t),s=n.type,o=t.bbox,a=n.coordinates;if(o&&hLe(i,o)===!1)return!1;s==="Polygon"&&(a=[a]);for(var l=!1,c=0;c<a.length&&!l;c++)if(I6(i,a[c][0],r.ignoreBoundary)){for(var h=!1,f=1;f<a[c].length&&!h;)I6(i,a[c][f],!r.ignoreBoundary)&&(h=!0),f++;h||(l=!0)}return l}function I6(e,t,r){var i=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var n=0,s=t.length-1;n<t.length;s=n++){var o=t[n][0],a=t[n][1],l=t[s][0],c=t[s][1],h=e[1]*(o-l)+a*(l-e[0])+c*(e[0]-o)===0&&(o-e[0])*(l-e[0])<=0&&(a-e[1])*(c-e[1])<=0;if(h)return!r;var f=a>e[1]!=c>e[1]&&e[0]<(l-o)*(e[1]-a)/(c-a)+o;f&&(i=!i)}return i}function hLe(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function pLe(e,t){var r=[];return uLe(e,function(i){var n=!1;if(i.geometry.type==="Point")T6(t,function(o){M6(i,o)&&(n=!0)}),n&&r.push(i);else if(i.geometry.type==="MultiPoint"){var s=[];T6(t,function(o){cQ(i,function(a){M6(a,o)&&(n=!0,s.push(a))})}),n&&r.push(lLe(s))}else throw new Error("Input geometry must be a Point or MultiPoint")}),HP(r)}var dQ={exports:{}},JP={exports:{}},hQ=function(t,r){return function(){for(var n=new Array(arguments.length),s=0;s<n.length;s++)n[s]=arguments[s];return t.apply(r,n)}},fLe=hQ,ZP=Object.prototype.toString,YP=function(e){return function(t){var r=ZP.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function Ah(e){return e=e.toLowerCase(),function(r){return YP(r)===e}}function QP(e){return Array.isArray(e)}function n2(e){return typeof e>"u"}function mLe(e){return e!==null&&!n2(e)&&e.constructor!==null&&!n2(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var pQ=Ah("ArrayBuffer");function yLe(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&pQ(e.buffer),t}function gLe(e){return typeof e=="string"}function vLe(e){return typeof e=="number"}function fQ(e){return e!==null&&typeof e=="object"}function nb(e){if(YP(e)!=="object")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}var wLe=Ah("Date"),_Le=Ah("File"),bLe=Ah("Blob"),SLe=Ah("FileList");function KP(e){return ZP.call(e)==="[object Function]"}function $Le(e){return fQ(e)&&KP(e.pipe)}function xLe(e){var t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||ZP.call(e)===t||KP(e.toString)&&e.toString()===t)}var ELe=Ah("URLSearchParams");function TLe(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function MLe(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function XP(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),QP(e))for(var r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}function BL(){var e={};function t(n,s){nb(e[s])&&nb(n)?e[s]=BL(e[s],n):nb(n)?e[s]=BL({},n):QP(n)?e[s]=n.slice():e[s]=n}for(var r=0,i=arguments.length;r<i;r++)XP(arguments[r],t);return e}function ILe(e,t,r){return XP(t,function(n,s){r&&typeof n=="function"?e[s]=fLe(n,r):e[s]=n}),e}function CLe(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function kLe(e,t,r,i){e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,r&&Object.assign(e.prototype,r)}function LLe(e,t,r){var i,n,s,o={};t=t||{};do{for(i=Object.getOwnPropertyNames(e),n=i.length;n-- >0;)s=i[n],o[s]||(t[s]=e[s],o[s]=!0);e=Object.getPrototypeOf(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t}function OLe(e,t,r){e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;var i=e.indexOf(t,r);return i!==-1&&i===r}function ALe(e){if(!e)return null;var t=e.length;if(n2(t))return null;for(var r=new Array(t);t-- >0;)r[t]=e[t];return r}var PLe=function(e){return function(t){return e&&t instanceof e}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),Qr={isArray:QP,isArrayBuffer:pQ,isBuffer:mLe,isFormData:xLe,isArrayBufferView:yLe,isString:gLe,isNumber:vLe,isObject:fQ,isPlainObject:nb,isUndefined:n2,isDate:wLe,isFile:_Le,isBlob:bLe,isFunction:KP,isStream:$Le,isURLSearchParams:ELe,isStandardBrowserEnv:MLe,forEach:XP,merge:BL,extend:ILe,trim:TLe,stripBOM:CLe,inherits:kLe,toFlatObject:LLe,kindOf:YP,kindOfTest:Ah,endsWith:OLe,toArray:ALe,isTypedArray:PLe,isFileList:SLe},Kh=Qr;function C6(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var mQ=function(t,r,i){if(!r)return t;var n;if(i)n=i(r);else if(Kh.isURLSearchParams(r))n=r.toString();else{var s=[];Kh.forEach(r,function(l,c){l===null||typeof l>"u"||(Kh.isArray(l)?c=c+"[]":l=[l],Kh.forEach(l,function(f){Kh.isDate(f)?f=f.toISOString():Kh.isObject(f)&&(f=JSON.stringify(f)),s.push(C6(c)+"="+C6(f))}))}),n=s.join("&")}if(n){var o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+n}return t},RLe=Qr;function O$(){this.handlers=[]}O$.prototype.use=function(t,r,i){return this.handlers.push({fulfilled:t,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};O$.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};O$.prototype.forEach=function(t){RLe.forEach(this.handlers,function(i){i!==null&&t(i)})};var FLe=O$,NLe=Qr,DLe=function(t,r){NLe.forEach(t,function(n,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(t[r]=n,delete t[s])})},yQ=Qr;function om(e,t,r,i,n){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),i&&(this.request=i),n&&(this.response=n)}yQ.inherits(om,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var gQ=om.prototype,vQ={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){vQ[e]={value:e}});Object.defineProperties(om,vQ);Object.defineProperty(gQ,"isAxiosError",{value:!0});om.from=function(e,t,r,i,n,s){var o=Object.create(gQ);return yQ.toFlatObject(e,o,function(l){return l!==Error.prototype}),om.call(o,e.message,t,r,i,n),o.name=e.name,s&&Object.assign(o,s),o};var Vm=om,wQ={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ls=Qr;function jLe(e,t){t=t||new FormData;var r=[];function i(s){return s===null?"":Ls.isDate(s)?s.toISOString():Ls.isArrayBuffer(s)||Ls.isTypedArray(s)?typeof Blob=="function"?new Blob([s]):Buffer.from(s):s}function n(s,o){if(Ls.isPlainObject(s)||Ls.isArray(s)){if(r.indexOf(s)!==-1)throw Error("Circular reference detected in "+o);r.push(s),Ls.forEach(s,function(l,c){if(!Ls.isUndefined(l)){var h=o?o+"."+c:c,f;if(l&&!o&&typeof l=="object"){if(Ls.endsWith(c,"{}"))l=JSON.stringify(l);else if(Ls.endsWith(c,"[]")&&(f=Ls.toArray(l))){f.forEach(function(m){!Ls.isUndefined(m)&&t.append(h,i(m))});return}}n(l,h)}}),r.pop()}else t.append(o,i(s))}return n(e),t}var _Q=jLe,aT,k6;function VLe(){if(k6)return aT;k6=1;var e=Vm;return aT=function(r,i,n){var s=n.config.validateStatus;!n.status||!s||s(n.status)?r(n):i(new e("Request failed with status code "+n.status,[e.ERR_BAD_REQUEST,e.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))},aT}var lT,L6;function zLe(){if(L6)return lT;L6=1;var e=Qr;return lT=e.isStandardBrowserEnv()?function(){return{write:function(i,n,s,o,a,l){var c=[];c.push(i+"="+encodeURIComponent(n)),e.isNumber(s)&&c.push("expires="+new Date(s).toGMTString()),e.isString(o)&&c.push("path="+o),e.isString(a)&&c.push("domain="+a),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(i){var n=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),lT}var ULe=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)},GLe=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t},BLe=ULe,qLe=GLe,bQ=function(t,r){return t&&!BLe(r)?qLe(t,r):r},uT,O6;function WLe(){if(O6)return uT;O6=1;var e=Qr,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return uT=function(i){var n={},s,o,a;return i&&e.forEach(i.split(`
`),function(c){if(a=c.indexOf(":"),s=e.trim(c.substr(0,a)).toLowerCase(),o=e.trim(c.substr(a+1)),s){if(n[s]&&t.indexOf(s)>=0)return;s==="set-cookie"?n[s]=(n[s]?n[s]:[]).concat([o]):n[s]=n[s]?n[s]+", "+o:o}}),n},uT}var cT,A6;function HLe(){if(A6)return cT;A6=1;var e=Qr;return cT=e.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),n;function s(o){var a=o;return r&&(i.setAttribute("href",a),a=i.href),i.setAttribute("href",a),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return n=s(window.location.href),function(a){var l=e.isString(a)?s(a):a;return l.protocol===n.protocol&&l.host===n.host}}():function(){return function(){return!0}}(),cT}var dT,P6;function A$(){if(P6)return dT;P6=1;var e=Vm,t=Qr;function r(i){e.call(this,i==null?"canceled":i,e.ERR_CANCELED),this.name="CanceledError"}return t.inherits(r,e,{__CANCEL__:!0}),dT=r,dT}var hT,R6;function JLe(){return R6||(R6=1,hT=function(t){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}),hT}var pT,F6;function N6(){if(F6)return pT;F6=1;var e=Qr,t=VLe(),r=zLe(),i=mQ,n=bQ,s=WLe(),o=HLe(),a=wQ,l=Vm,c=A$(),h=JLe();return pT=function(m){return new Promise(function(g,v){var _=m.data,w=m.headers,b=m.responseType,S;function M(){m.cancelToken&&m.cancelToken.unsubscribe(S),m.signal&&m.signal.removeEventListener("abort",S)}e.isFormData(_)&&e.isStandardBrowserEnv()&&delete w["Content-Type"];var T=new XMLHttpRequest;if(m.auth){var k=m.auth.username||"",N=m.auth.password?unescape(encodeURIComponent(m.auth.password)):"";w.Authorization="Basic "+btoa(k+":"+N)}var F=n(m.baseURL,m.url);T.open(m.method.toUpperCase(),i(F,m.params,m.paramsSerializer),!0),T.timeout=m.timeout;function q(){if(!!T){var K="getAllResponseHeaders"in T?s(T.getAllResponseHeaders()):null,ce=!b||b==="text"||b==="json"?T.responseText:T.response,ie={data:ce,status:T.status,statusText:T.statusText,headers:K,config:m,request:T};t(function(Qe){g(Qe),M()},function(Qe){v(Qe),M()},ie),T=null}}if("onloadend"in T?T.onloadend=q:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(q)},T.onabort=function(){!T||(v(new l("Request aborted",l.ECONNABORTED,m,T)),T=null)},T.onerror=function(){v(new l("Network Error",l.ERR_NETWORK,m,T,T)),T=null},T.ontimeout=function(){var ce=m.timeout?"timeout of "+m.timeout+"ms exceeded":"timeout exceeded",ie=m.transitional||a;m.timeoutErrorMessage&&(ce=m.timeoutErrorMessage),v(new l(ce,ie.clarifyTimeoutError?l.ETIMEDOUT:l.ECONNABORTED,m,T)),T=null},e.isStandardBrowserEnv()){var z=(m.withCredentials||o(F))&&m.xsrfCookieName?r.read(m.xsrfCookieName):void 0;z&&(w[m.xsrfHeaderName]=z)}"setRequestHeader"in T&&e.forEach(w,function(ce,ie){typeof _>"u"&&ie.toLowerCase()==="content-type"?delete w[ie]:T.setRequestHeader(ie,ce)}),e.isUndefined(m.withCredentials)||(T.withCredentials=!!m.withCredentials),b&&b!=="json"&&(T.responseType=m.responseType),typeof m.onDownloadProgress=="function"&&T.addEventListener("progress",m.onDownloadProgress),typeof m.onUploadProgress=="function"&&T.upload&&T.upload.addEventListener("progress",m.onUploadProgress),(m.cancelToken||m.signal)&&(S=function(K){!T||(v(!K||K&&K.type?new c:K),T.abort(),T=null)},m.cancelToken&&m.cancelToken.subscribe(S),m.signal&&(m.signal.aborted?S():m.signal.addEventListener("abort",S))),_||(_=null);var Q=h(F);if(Q&&["http","https","file"].indexOf(Q)===-1){v(new l("Unsupported protocol "+Q+":",l.ERR_BAD_REQUEST,m));return}T.send(_)})},pT}var fT,D6;function ZLe(){return D6||(D6=1,fT=null),fT}var Pr=Qr,j6=DLe,V6=Vm,YLe=wQ,QLe=_Q,KLe={"Content-Type":"application/x-www-form-urlencoded"};function z6(e,t){!Pr.isUndefined(e)&&Pr.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function XLe(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=N6()),e}function eOe(e,t,r){if(Pr.isString(e))try{return(t||JSON.parse)(e),Pr.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(e)}var P$={transitional:YLe,adapter:XLe(),transformRequest:[function(t,r){if(j6(r,"Accept"),j6(r,"Content-Type"),Pr.isFormData(t)||Pr.isArrayBuffer(t)||Pr.isBuffer(t)||Pr.isStream(t)||Pr.isFile(t)||Pr.isBlob(t))return t;if(Pr.isArrayBufferView(t))return t.buffer;if(Pr.isURLSearchParams(t))return z6(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var i=Pr.isObject(t),n=r&&r["Content-Type"],s;if((s=Pr.isFileList(t))||i&&n==="multipart/form-data"){var o=this.env&&this.env.FormData;return QLe(s?{"files[]":t}:t,o&&new o)}else if(i||n==="application/json")return z6(r,"application/json"),eOe(t);return t}],transformResponse:[function(t){var r=this.transitional||P$.transitional,i=r&&r.silentJSONParsing,n=r&&r.forcedJSONParsing,s=!i&&this.responseType==="json";if(s||n&&Pr.isString(t)&&t.length)try{return JSON.parse(t)}catch(o){if(s)throw o.name==="SyntaxError"?V6.from(o,V6.ERR_BAD_RESPONSE,this,null,this.response):o}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ZLe()},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Pr.forEach(["delete","get","head"],function(t){P$.headers[t]={}});Pr.forEach(["post","put","patch"],function(t){P$.headers[t]=Pr.merge(KLe)});var eR=P$,tOe=Qr,rOe=eR,iOe=function(t,r,i){var n=this||rOe;return tOe.forEach(i,function(o){t=o.call(n,t,r)}),t},mT,U6;function SQ(){return U6||(U6=1,mT=function(t){return!!(t&&t.__CANCEL__)}),mT}var G6=Qr,yT=iOe,nOe=SQ(),sOe=eR,oOe=A$();function gT(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new oOe}var aOe=function(t){gT(t),t.headers=t.headers||{},t.data=yT.call(t,t.data,t.headers,t.transformRequest),t.headers=G6.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),G6.forEach(["delete","get","head","post","put","patch","common"],function(n){delete t.headers[n]});var r=t.adapter||sOe.adapter;return r(t).then(function(n){return gT(t),n.data=yT.call(t,n.data,n.headers,t.transformResponse),n},function(n){return nOe(n)||(gT(t),n&&n.response&&(n.response.data=yT.call(t,n.response.data,n.response.headers,t.transformResponse))),Promise.reject(n)})},gn=Qr,$Q=function(t,r){r=r||{};var i={};function n(h,f){return gn.isPlainObject(h)&&gn.isPlainObject(f)?gn.merge(h,f):gn.isPlainObject(f)?gn.merge({},f):gn.isArray(f)?f.slice():f}function s(h){if(gn.isUndefined(r[h])){if(!gn.isUndefined(t[h]))return n(void 0,t[h])}else return n(t[h],r[h])}function o(h){if(!gn.isUndefined(r[h]))return n(void 0,r[h])}function a(h){if(gn.isUndefined(r[h])){if(!gn.isUndefined(t[h]))return n(void 0,t[h])}else return n(void 0,r[h])}function l(h){if(h in r)return n(t[h],r[h]);if(h in t)return n(void 0,t[h])}var c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l};return gn.forEach(Object.keys(t).concat(Object.keys(r)),function(f){var m=c[f]||s,y=m(f);gn.isUndefined(y)&&m!==l||(i[f]=y)}),i},vT,B6;function xQ(){return B6||(B6=1,vT={version:"0.27.2"}),vT}var lOe=xQ().version,Ou=Vm,tR={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){tR[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});var q6={};tR.transitional=function(t,r,i){function n(s,o){return"[Axios v"+lOe+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return function(s,o,a){if(t===!1)throw new Ou(n(o," has been removed"+(r?" in "+r:"")),Ou.ERR_DEPRECATED);return r&&!q6[o]&&(q6[o]=!0,console.warn(n(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(s,o,a):!0}};function uOe(e,t,r){if(typeof e!="object")throw new Ou("options must be an object",Ou.ERR_BAD_OPTION_VALUE);for(var i=Object.keys(e),n=i.length;n-- >0;){var s=i[n],o=t[s];if(o){var a=e[s],l=a===void 0||o(a,s,e);if(l!==!0)throw new Ou("option "+s+" must be "+l,Ou.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ou("Unknown option "+s,Ou.ERR_BAD_OPTION)}}var cOe={assertOptions:uOe,validators:tR},EQ=Qr,dOe=mQ,W6=FLe,H6=aOe,R$=$Q,hOe=bQ,TQ=cOe,Xh=TQ.validators;function am(e){this.defaults=e,this.interceptors={request:new W6,response:new W6}}am.prototype.request=function(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=R$(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var i=r.transitional;i!==void 0&&TQ.assertOptions(i,{silentJSONParsing:Xh.transitional(Xh.boolean),forcedJSONParsing:Xh.transitional(Xh.boolean),clarifyTimeoutError:Xh.transitional(Xh.boolean)},!1);var n=[],s=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(s=s&&y.synchronous,n.unshift(y.fulfilled,y.rejected))});var o=[];this.interceptors.response.forEach(function(y){o.push(y.fulfilled,y.rejected)});var a;if(!s){var l=[H6,void 0];for(Array.prototype.unshift.apply(l,n),l=l.concat(o),a=Promise.resolve(r);l.length;)a=a.then(l.shift(),l.shift());return a}for(var c=r;n.length;){var h=n.shift(),f=n.shift();try{c=h(c)}catch(m){f(m);break}}try{a=H6(c)}catch(m){return Promise.reject(m)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};am.prototype.getUri=function(t){t=R$(this.defaults,t);var r=hOe(t.baseURL,t.url);return dOe(r,t.params,t.paramsSerializer)};EQ.forEach(["delete","get","head","options"],function(t){am.prototype[t]=function(r,i){return this.request(R$(i||{},{method:t,url:r,data:(i||{}).data}))}});EQ.forEach(["post","put","patch"],function(t){function r(i){return function(s,o,a){return this.request(R$(a||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}am.prototype[t]=r(),am.prototype[t+"Form"]=r(!0)});var pOe=am,wT,J6;function fOe(){if(J6)return wT;J6=1;var e=A$();function t(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var i;this.promise=new Promise(function(o){i=o});var n=this;this.promise.then(function(s){if(!!n._listeners){var o,a=n._listeners.length;for(o=0;o<a;o++)n._listeners[o](s);n._listeners=null}}),this.promise.then=function(s){var o,a=new Promise(function(l){n.subscribe(l),o=l}).then(s);return a.cancel=function(){n.unsubscribe(o)},a},r(function(o){n.reason||(n.reason=new e(o),i(n.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]},t.prototype.unsubscribe=function(i){if(!!this._listeners){var n=this._listeners.indexOf(i);n!==-1&&this._listeners.splice(n,1)}},t.source=function(){var i,n=new t(function(o){i=o});return{token:n,cancel:i}},wT=t,wT}var _T,Z6;function mOe(){return Z6||(Z6=1,_T=function(t){return function(i){return t.apply(null,i)}}),_T}var bT,Y6;function yOe(){if(Y6)return bT;Y6=1;var e=Qr;return bT=function(r){return e.isObject(r)&&r.isAxiosError===!0},bT}var Q6=Qr,gOe=hQ,sb=pOe,vOe=$Q,wOe=eR;function MQ(e){var t=new sb(e),r=gOe(sb.prototype.request,t);return Q6.extend(r,sb.prototype,t),Q6.extend(r,t),r.create=function(n){return MQ(vOe(e,n))},r}var un=MQ(wOe);un.Axios=sb;un.CanceledError=A$();un.CancelToken=fOe();un.isCancel=SQ();un.VERSION=xQ().version;un.toFormData=_Q;un.AxiosError=Vm;un.Cancel=un.CanceledError;un.all=function(t){return Promise.all(t)};un.spread=mOe();un.isAxiosError=yOe();JP.exports=un;JP.exports.default=un;(function(e){e.exports=JP.exports})(dQ);const rR=T8(dQ.exports),_Oe=()=>rR({method:"GET",url:"./Jurisdictional_Boundary.json"}),bOe=()=>rR({method:"GET",url:"https://gbfs.capitalbikeshare.com/gbfs/en/station_information.json"}),SOe=()=>rR({method:"GET",url:"https://gbfs.capitalbikeshare.com/gbfs/en/station_status.json"});function $Oe(){this.__data__=[],this.size=0}var xOe=$Oe;function EOe(e,t){return e===t||e!==e&&t!==t}var F$=EOe,TOe=F$;function MOe(e,t){for(var r=e.length;r--;)if(TOe(e[r][0],t))return r;return-1}var N$=MOe,IOe=N$,COe=Array.prototype,kOe=COe.splice;function LOe(e){var t=this.__data__,r=IOe(t,e);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():kOe.call(t,r,1),--this.size,!0}var OOe=LOe,AOe=N$;function POe(e){var t=this.__data__,r=AOe(t,e);return r<0?void 0:t[r][1]}var ROe=POe,FOe=N$;function NOe(e){return FOe(this.__data__,e)>-1}var DOe=NOe,jOe=N$;function VOe(e,t){var r=this.__data__,i=jOe(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}var zOe=VOe,UOe=xOe,GOe=OOe,BOe=ROe,qOe=DOe,WOe=zOe;function zm(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}zm.prototype.clear=UOe;zm.prototype.delete=GOe;zm.prototype.get=BOe;zm.prototype.has=qOe;zm.prototype.set=WOe;var D$=zm,HOe=D$;function JOe(){this.__data__=new HOe,this.size=0}var ZOe=JOe;function YOe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var QOe=YOe;function KOe(e){return this.__data__.get(e)}var XOe=KOe;function e3e(e){return this.__data__.has(e)}var t3e=e3e,r3e=typeof i1=="object"&&i1&&i1.Object===Object&&i1,IQ=r3e,i3e=IQ,n3e=typeof self=="object"&&self&&self.Object===Object&&self,s3e=i3e||n3e||Function("return this")(),Um=s3e,o3e=Um,a3e=o3e.Symbol,CQ=a3e,K6=CQ,kQ=Object.prototype,l3e=kQ.hasOwnProperty,u3e=kQ.toString,ky=K6?K6.toStringTag:void 0;function c3e(e){var t=l3e.call(e,ky),r=e[ky];try{e[ky]=void 0;var i=!0}catch{}var n=u3e.call(e);return i&&(t?e[ky]=r:delete e[ky]),n}var d3e=c3e,h3e=Object.prototype,p3e=h3e.toString;function f3e(e){return p3e.call(e)}var m3e=f3e,X6=CQ,y3e=d3e,g3e=m3e,v3e="[object Null]",w3e="[object Undefined]",e8=X6?X6.toStringTag:void 0;function _3e(e){return e==null?e===void 0?w3e:v3e:e8&&e8 in Object(e)?y3e(e):g3e(e)}var j$=_3e;function b3e(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Ph=b3e,S3e=j$,$3e=Ph,x3e="[object AsyncFunction]",E3e="[object Function]",T3e="[object GeneratorFunction]",M3e="[object Proxy]";function I3e(e){if(!$3e(e))return!1;var t=S3e(e);return t==E3e||t==T3e||t==x3e||t==M3e}var iR=I3e,C3e=Um,k3e=C3e["__core-js_shared__"],L3e=k3e,ST=L3e,t8=function(){var e=/[^.]+$/.exec(ST&&ST.keys&&ST.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function O3e(e){return!!t8&&t8 in e}var A3e=O3e,P3e=Function.prototype,R3e=P3e.toString;function F3e(e){if(e!=null){try{return R3e.call(e)}catch{}try{return e+""}catch{}}return""}var N3e=F3e,D3e=iR,j3e=A3e,V3e=Ph,z3e=N3e,U3e=/[\\^$.*+?()[\]{}|]/g,G3e=/^\[object .+?Constructor\]$/,B3e=Function.prototype,q3e=Object.prototype,W3e=B3e.toString,H3e=q3e.hasOwnProperty,J3e=RegExp("^"+W3e.call(H3e).replace(U3e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Z3e(e){if(!V3e(e)||j3e(e))return!1;var t=D3e(e)?J3e:G3e;return t.test(z3e(e))}var Y3e=Z3e;function Q3e(e,t){return e==null?void 0:e[t]}var K3e=Q3e,X3e=Y3e,eAe=K3e;function tAe(e,t){var r=eAe(e,t);return X3e(r)?r:void 0}var nR=tAe,rAe=nR,iAe=Um,nAe=rAe(iAe,"Map"),LQ=nAe,sAe=nR,oAe=sAe(Object,"create"),V$=oAe,r8=V$;function aAe(){this.__data__=r8?r8(null):{},this.size=0}var lAe=aAe;function uAe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var cAe=uAe,dAe=V$,hAe="__lodash_hash_undefined__",pAe=Object.prototype,fAe=pAe.hasOwnProperty;function mAe(e){var t=this.__data__;if(dAe){var r=t[e];return r===hAe?void 0:r}return fAe.call(t,e)?t[e]:void 0}var yAe=mAe,gAe=V$,vAe=Object.prototype,wAe=vAe.hasOwnProperty;function _Ae(e){var t=this.__data__;return gAe?t[e]!==void 0:wAe.call(t,e)}var bAe=_Ae,SAe=V$,$Ae="__lodash_hash_undefined__";function xAe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=SAe&&t===void 0?$Ae:t,this}var EAe=xAe,TAe=lAe,MAe=cAe,IAe=yAe,CAe=bAe,kAe=EAe;function Gm(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Gm.prototype.clear=TAe;Gm.prototype.delete=MAe;Gm.prototype.get=IAe;Gm.prototype.has=CAe;Gm.prototype.set=kAe;var LAe=Gm,i8=LAe,OAe=D$,AAe=LQ;function PAe(){this.size=0,this.__data__={hash:new i8,map:new(AAe||OAe),string:new i8}}var RAe=PAe;function FAe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var NAe=FAe,DAe=NAe;function jAe(e,t){var r=e.__data__;return DAe(t)?r[typeof t=="string"?"string":"hash"]:r.map}var z$=jAe,VAe=z$;function zAe(e){var t=VAe(this,e).delete(e);return this.size-=t?1:0,t}var UAe=zAe,GAe=z$;function BAe(e){return GAe(this,e).get(e)}var qAe=BAe,WAe=z$;function HAe(e){return WAe(this,e).has(e)}var JAe=HAe,ZAe=z$;function YAe(e,t){var r=ZAe(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}var QAe=YAe,KAe=RAe,XAe=UAe,ePe=qAe,tPe=JAe,rPe=QAe;function Bm(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Bm.prototype.clear=KAe;Bm.prototype.delete=XAe;Bm.prototype.get=ePe;Bm.prototype.has=tPe;Bm.prototype.set=rPe;var iPe=Bm,nPe=D$,sPe=LQ,oPe=iPe,aPe=200;function lPe(e,t){var r=this.__data__;if(r instanceof nPe){var i=r.__data__;if(!sPe||i.length<aPe-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new oPe(i)}return r.set(e,t),this.size=r.size,this}var uPe=lPe,cPe=D$,dPe=ZOe,hPe=QOe,pPe=XOe,fPe=t3e,mPe=uPe;function qm(e){var t=this.__data__=new cPe(e);this.size=t.size}qm.prototype.clear=dPe;qm.prototype.delete=hPe;qm.prototype.get=pPe;qm.prototype.has=fPe;qm.prototype.set=mPe;var yPe=qm,gPe=nR,vPe=function(){try{var e=gPe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),OQ=vPe,n8=OQ;function wPe(e,t,r){t=="__proto__"&&n8?n8(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var sR=wPe,_Pe=sR,bPe=F$;function SPe(e,t,r){(r!==void 0&&!bPe(e[t],r)||r===void 0&&!(t in e))&&_Pe(e,t,r)}var AQ=SPe;function $Pe(e){return function(t,r,i){for(var n=-1,s=Object(t),o=i(t),a=o.length;a--;){var l=o[e?a:++n];if(r(s[l],l,s)===!1)break}return t}}var xPe=$Pe,EPe=xPe,TPe=EPe(),MPe=TPe,qL={exports:{}};(function(e,t){var r=Um,i=t&&!t.nodeType&&t,n=i&&!0&&e&&!e.nodeType&&e,s=n&&n.exports===i,o=s?r.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(c,h){if(h)return c.slice();var f=c.length,m=a?a(f):new c.constructor(f);return c.copy(m),m}e.exports=l})(qL,qL.exports);var IPe=Um,CPe=IPe.Uint8Array,kPe=CPe,s8=kPe;function LPe(e){var t=new e.constructor(e.byteLength);return new s8(t).set(new s8(e)),t}var OPe=LPe,APe=OPe;function PPe(e,t){var r=t?APe(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var RPe=PPe;function FPe(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}var NPe=FPe,DPe=Ph,o8=Object.create,jPe=function(){function e(){}return function(t){if(!DPe(t))return{};if(o8)return o8(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),VPe=jPe;function zPe(e,t){return function(r){return e(t(r))}}var UPe=zPe,GPe=UPe,BPe=GPe(Object.getPrototypeOf,Object),PQ=BPe,qPe=Object.prototype;function WPe(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||qPe;return e===r}var RQ=WPe,HPe=VPe,JPe=PQ,ZPe=RQ;function YPe(e){return typeof e.constructor=="function"&&!ZPe(e)?HPe(JPe(e)):{}}var QPe=YPe;function KPe(e){return e!=null&&typeof e=="object"}var Xv=KPe,XPe=j$,eRe=Xv,tRe="[object Arguments]";function rRe(e){return eRe(e)&&XPe(e)==tRe}var iRe=rRe,a8=iRe,nRe=Xv,FQ=Object.prototype,sRe=FQ.hasOwnProperty,oRe=FQ.propertyIsEnumerable,aRe=a8(function(){return arguments}())?a8:function(e){return nRe(e)&&sRe.call(e,"callee")&&!oRe.call(e,"callee")},NQ=aRe,lRe=Array.isArray,DQ=lRe,uRe=9007199254740991;function cRe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=uRe}var jQ=cRe,dRe=iR,hRe=jQ;function pRe(e){return e!=null&&hRe(e.length)&&!dRe(e)}var oR=pRe,fRe=oR,mRe=Xv;function yRe(e){return mRe(e)&&fRe(e)}var gRe=yRe,s2={exports:{}};function vRe(){return!1}var wRe=vRe;(function(e,t){var r=Um,i=wRe,n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===n,a=o?r.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||i;e.exports=c})(s2,s2.exports);var _Re=j$,bRe=PQ,SRe=Xv,$Re="[object Object]",xRe=Function.prototype,ERe=Object.prototype,VQ=xRe.toString,TRe=ERe.hasOwnProperty,MRe=VQ.call(Object);function IRe(e){if(!SRe(e)||_Re(e)!=$Re)return!1;var t=bRe(e);if(t===null)return!0;var r=TRe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&VQ.call(r)==MRe}var CRe=IRe,kRe=j$,LRe=jQ,ORe=Xv,ARe="[object Arguments]",PRe="[object Array]",RRe="[object Boolean]",FRe="[object Date]",NRe="[object Error]",DRe="[object Function]",jRe="[object Map]",VRe="[object Number]",zRe="[object Object]",URe="[object RegExp]",GRe="[object Set]",BRe="[object String]",qRe="[object WeakMap]",WRe="[object ArrayBuffer]",HRe="[object DataView]",JRe="[object Float32Array]",ZRe="[object Float64Array]",YRe="[object Int8Array]",QRe="[object Int16Array]",KRe="[object Int32Array]",XRe="[object Uint8Array]",eFe="[object Uint8ClampedArray]",tFe="[object Uint16Array]",rFe="[object Uint32Array]",_t={};_t[JRe]=_t[ZRe]=_t[YRe]=_t[QRe]=_t[KRe]=_t[XRe]=_t[eFe]=_t[tFe]=_t[rFe]=!0;_t[ARe]=_t[PRe]=_t[WRe]=_t[RRe]=_t[HRe]=_t[FRe]=_t[NRe]=_t[DRe]=_t[jRe]=_t[VRe]=_t[zRe]=_t[URe]=_t[GRe]=_t[BRe]=_t[qRe]=!1;function iFe(e){return ORe(e)&&LRe(e.length)&&!!_t[kRe(e)]}var nFe=iFe;function sFe(e){return function(t){return e(t)}}var oFe=sFe,WL={exports:{}};(function(e,t){var r=IQ,i=t&&!t.nodeType&&t,n=i&&!0&&e&&!e.nodeType&&e,s=n&&n.exports===i,o=s&&r.process,a=function(){try{var l=n&&n.require&&n.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();e.exports=a})(WL,WL.exports);var aFe=nFe,lFe=oFe,l8=WL.exports,u8=l8&&l8.isTypedArray,uFe=u8?lFe(u8):aFe,zQ=uFe;function cFe(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var UQ=cFe,dFe=sR,hFe=F$,pFe=Object.prototype,fFe=pFe.hasOwnProperty;function mFe(e,t,r){var i=e[t];(!(fFe.call(e,t)&&hFe(i,r))||r===void 0&&!(t in e))&&dFe(e,t,r)}var yFe=mFe,gFe=yFe,vFe=sR;function wFe(e,t,r,i){var n=!r;r||(r={});for(var s=-1,o=t.length;++s<o;){var a=t[s],l=i?i(r[a],e[a],a,r,e):void 0;l===void 0&&(l=e[a]),n?vFe(r,a,l):gFe(r,a,l)}return r}var _Fe=wFe;function bFe(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}var SFe=bFe,$Fe=9007199254740991,xFe=/^(?:0|[1-9]\d*)$/;function EFe(e,t){var r=typeof e;return t=t==null?$Fe:t,!!t&&(r=="number"||r!="symbol"&&xFe.test(e))&&e>-1&&e%1==0&&e<t}var GQ=EFe,TFe=SFe,MFe=NQ,IFe=DQ,CFe=s2.exports,kFe=GQ,LFe=zQ,OFe=Object.prototype,AFe=OFe.hasOwnProperty;function PFe(e,t){var r=IFe(e),i=!r&&MFe(e),n=!r&&!i&&CFe(e),s=!r&&!i&&!n&&LFe(e),o=r||i||n||s,a=o?TFe(e.length,String):[],l=a.length;for(var c in e)(t||AFe.call(e,c))&&!(o&&(c=="length"||n&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||kFe(c,l)))&&a.push(c);return a}var RFe=PFe;function FFe(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var NFe=FFe,DFe=Ph,jFe=RQ,VFe=NFe,zFe=Object.prototype,UFe=zFe.hasOwnProperty;function GFe(e){if(!DFe(e))return VFe(e);var t=jFe(e),r=[];for(var i in e)i=="constructor"&&(t||!UFe.call(e,i))||r.push(i);return r}var BFe=GFe,qFe=RFe,WFe=BFe,HFe=oR;function JFe(e){return HFe(e)?qFe(e,!0):WFe(e)}var BQ=JFe,ZFe=_Fe,YFe=BQ;function QFe(e){return ZFe(e,YFe(e))}var KFe=QFe,c8=AQ,XFe=qL.exports,eNe=RPe,tNe=NPe,rNe=QPe,d8=NQ,h8=DQ,iNe=gRe,nNe=s2.exports,sNe=iR,oNe=Ph,aNe=CRe,lNe=zQ,p8=UQ,uNe=KFe;function cNe(e,t,r,i,n,s,o){var a=p8(e,r),l=p8(t,r),c=o.get(l);if(c){c8(e,r,c);return}var h=s?s(a,l,r+"",e,t,o):void 0,f=h===void 0;if(f){var m=h8(l),y=!m&&nNe(l),g=!m&&!y&&lNe(l);h=l,m||y||g?h8(a)?h=a:iNe(a)?h=tNe(a):y?(f=!1,h=XFe(l,!0)):g?(f=!1,h=eNe(l,!0)):h=[]:aNe(l)||d8(l)?(h=a,d8(a)?h=uNe(a):(!oNe(a)||sNe(a))&&(h=rNe(l))):f=!1}f&&(o.set(l,h),n(h,l,i,s,o),o.delete(l)),c8(e,r,h)}var dNe=cNe,hNe=yPe,pNe=AQ,fNe=MPe,mNe=dNe,yNe=Ph,gNe=BQ,vNe=UQ;function qQ(e,t,r,i,n){e!==t&&fNe(t,function(s,o){if(n||(n=new hNe),yNe(s))mNe(e,t,o,r,qQ,i,n);else{var a=i?i(vNe(e,o),s,o+"",e,t,n):void 0;a===void 0&&(a=s),pNe(e,o,a)}},gNe)}var wNe=qQ;function _Ne(e){return e}var WQ=_Ne;function bNe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var SNe=bNe,$Ne=SNe,f8=Math.max;function xNe(e,t,r){return t=f8(t===void 0?e.length-1:t,0),function(){for(var i=arguments,n=-1,s=f8(i.length-t,0),o=Array(s);++n<s;)o[n]=i[t+n];n=-1;for(var a=Array(t+1);++n<t;)a[n]=i[n];return a[t]=r(o),$Ne(e,this,a)}}var ENe=xNe;function TNe(e){return function(){return e}}var MNe=TNe,INe=MNe,m8=OQ,CNe=WQ,kNe=m8?function(e,t){return m8(e,"toString",{configurable:!0,enumerable:!1,value:INe(t),writable:!0})}:CNe,LNe=kNe,ONe=800,ANe=16,PNe=Date.now;function RNe(e){var t=0,r=0;return function(){var i=PNe(),n=ANe-(i-r);if(r=i,n>0){if(++t>=ONe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var FNe=RNe,NNe=LNe,DNe=FNe,jNe=DNe(NNe),VNe=jNe,zNe=WQ,UNe=ENe,GNe=VNe;function BNe(e,t){return GNe(UNe(e,t,zNe),e+"")}var qNe=BNe,WNe=F$,HNe=oR,JNe=GQ,ZNe=Ph;function YNe(e,t,r){if(!ZNe(r))return!1;var i=typeof t;return(i=="number"?HNe(r)&&JNe(t,r.length):i=="string"&&t in r)?WNe(r[t],e):!1}var QNe=YNe,KNe=qNe,XNe=QNe;function e5e(e){return KNe(function(t,r){var i=-1,n=r.length,s=n>1?r[n-1]:void 0,o=n>2?r[2]:void 0;for(s=e.length>3&&typeof s=="function"?(n--,s):void 0,o&&XNe(r[0],r[1],o)&&(s=n<3?void 0:s,n=1),t=Object(t);++i<n;){var a=r[i];a&&e(t,a,i,s)}return t})}var t5e=e5e,r5e=wNe,i5e=t5e,n5e=i5e(function(e,t,r){r5e(e,t,r)}),s5e=n5e;const o5e=async(e,t)=>{const{data:r}=await _Oe(),{data:i}=await bOe(),{data:n}=await SOe(),s=s5e(i.data.stations,n.data.stations);t(s);const o=aLe(r.features[0].geometry.coordinates);s.filter((m,y)=>{const g=oLe([[m.lon,m.lat]]);return pLe(g,o).features.length>0});const a=s.map(m=>uQ([m.lon,m.lat],{...m,...m.rental_uris})),l=HP(a),c=new Blob([JSON.stringify(l)],{type:"application/json"}),h={title:"{name}",content:[{type:"fields",fieldInfos:[{fieldName:"num_bikes_available",label:"Bikes Available"},{fieldName:"num_docks_available",label:"Docks Available"},{fieldName:"capacity",label:"Capacity"},{fieldName:"num_ebikes_available",label:"Ebikes Available"},{fieldName:"station_status",label:"Station status"},{fieldName:"rental_methods",label:"Rental methods"}]}]},f=new BP({id:"BikeShareStation_GeoJSONLayer",url:URL.createObjectURL(c),title:"BikeShare Station - Real-Time Data FEED",popupTemplate:h,renderer:{type:"simple",symbol:{type:"simple-marker",style:"circle",color:"#db3614",outline:{color:"#011728",width:1}}},labelingInfo:[{symbol:{type:"text",color:"#000",haloSize:.25,haloColor:"#db3614",font:{family:"Ubuntu Mono",size:"18px",style:"normal",weight:"bold"}},labelPlacement:"above-right",labelExpressionInfo:{expression:"Text($feature.num_bikes_available)"}},{where:"num_ebikes_available > 0",symbol:{type:"text",color:"#000",haloSize:1,haloColor:"#42deee",font:{family:"Ubuntu Mono",size:"18px",style:"normal",weight:"bold"}},labelPlacement:"above-left",labelExpressionInfo:{expression:"Text($feature.num_ebikes_available)"}}]});e.add(f)};var aR={exports:{}},U$={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a5e=Hd.exports,l5e=Symbol.for("react.element"),u5e=Symbol.for("react.fragment"),c5e=Object.prototype.hasOwnProperty,d5e=a5e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h5e={key:!0,ref:!0,__self:!0,__source:!0};function HQ(e,t,r){var i,n={},s=null,o=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)c5e.call(t,i)&&!h5e.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:l5e,type:e,key:s,ref:o,props:n,_owner:d5e.current}}U$.Fragment=u5e;U$.jsx=HQ;U$.jsxs=HQ;(function(e){e.exports=U$})(aR);const o2=aR.exports.jsx,y8=aR.exports.jsxs;function p5e(){const[e,t]=Hd.exports.useState(!1),[r,i]=Hd.exports.useState();Hd.exports.useEffect(()=>{n().then(async o=>{t(!0)})},[]);const n=async()=>{try{const o=new oU({basemap:"topo-vector"}),a=new oMe({map:o,container:"mapContainer",center:[-77.1711,38.8863],zoom:14,constraints:{minZoom:14}});window.mapView=a,await sLe(a),await nke(o),await o5e(o,i);const l=new AIe({view:a,layerInfos:[{layer:o.findLayerById("Jurisdictional_Boundary")},{layer:o.findLayerById("BikeShareStation_GeoJSONLayer")}]});return a.ui.add(l,"bottom-left"),o}catch(o){console.error(o)}};let s=JCe(new Date,"yyyy/MM/dd - H:m:ss");return y8("div",{className:"App",children:[o2("main",{id:"mapContainer",className:"mapContainer"}),o2("h1",{className:"App__title",children:"Capital Bikeshare - Map "}),r&&s&&y8("span",{className:"last_reported esri-component",children:["Last updated: ",s]})]})}const f5e=document.getElementById("root");$T.createRoot(f5e).render(o2(cX.StrictMode,{children:o2(p5e,{})}));export{u as $,cn as A,Y_ as B,$7 as C,Hxe as D,qxe as E,RZ as F,Kv as G,b3 as H,ua as I,vm as J,Zo as K,S2 as L,kL as M,ZO as N,WZ as O,zf as P,M2 as Q,G as R,je as S,fje as T,nt as U,hje as V,an as W,Er as X,aH as Y,ca as Z,pA as _,Ate as a,DJ as a$,d as a0,E as a1,le as a2,sc as a3,Zi as a4,S3 as a5,$3 as a6,po as a7,ye as a8,di as a9,Dq as aA,k3 as aB,Ule as aC,Ci as aD,YS as aE,p4e as aF,IDe as aG,$De as aH,oDe as aI,A3 as aJ,PTe as aK,Dle as aL,jle as aM,Te as aN,bv as aO,iU as aP,iDe as aQ,L3 as aR,rje as aS,ije as aT,tje as aU,PZ as aV,OP as aW,nm as aX,P as aY,ro as aZ,BS as a_,T$ as aa,SDe as ab,TZ as ac,dZ as ad,MZ as ae,Yt as af,yxe as ag,lje as ah,Mxe as ai,cv as aj,uje as ak,V as al,zt as am,l9 as an,G5e as ao,ho as ap,bs as aq,ws as ar,_m as as,_4e as at,Qd as au,yae as av,O3 as aw,Vq as ax,M4e as ay,uD as az,M5e as b,h_e as b$,Ed as b0,YSe as b1,Ho as b2,im as b3,Jv as b4,xDe as b5,yo as b6,u4e as b7,_s as b8,OS as b9,aP as bA,kH as bB,Mr as bC,Qt as bD,cc as bE,g_e as bF,mMe as bG,i6 as bH,Obe as bI,Abe as bJ,Pbe as bK,go as bL,jwe as bM,cDe as bN,se as bO,iP as bP,nf as bQ,gwe as bR,PH as bS,Yge as bT,Li as bU,Bq as bV,x4e as bW,b4e as bX,hge as bY,k4e as bZ,cD as b_,TDe as ba,Q5e as bb,ae as bc,a9 as bd,zo as be,W4e as bf,hh as bg,B1 as bh,vq as bi,nDe as bj,Gd as bk,Yp as bl,Bg as bm,WDe as bn,ci as bo,Hr as bp,Jw as bq,YN as br,Wi as bs,L4e as bt,S4e as bu,Be as bv,SP as bw,s4e as bx,CH as by,v_e as bz,w5e as c,gDe as c$,b5e as c0,S5e as c1,Vbe as c2,uxe as c3,Wxe as c4,Zge as c5,Gq as c6,AZ as c7,Ry as c8,Em as c9,A2 as cA,wm as cB,Ei as cC,Gle as cD,Je as cE,MEe as cF,cje as cG,dje as cH,on as cI,ch as cJ,Fc as cK,tn as cL,xv as cM,ln as cN,Wb as cO,bM as cP,cG as cQ,sm as cR,Q_e as cS,Y_e as cT,sbe as cU,aU as cV,dDe as cW,ure as cX,xi as cY,yje as cZ,vl as c_,nS as ca,De as cb,qO as cc,cye as cd,uye as ce,a4e as cf,Tv as cg,c4e as ch,d4e as ci,Ee as cj,l4e as ck,xh as cl,Z9 as cm,ze as cn,B as co,Zt as cp,Jbe as cq,Yb as cr,de as cs,jy as ct,Tm as cu,EDe as cv,zle as cw,F2 as cx,Nle as cy,dre as cz,E5e as d,d_e as d$,hDe as d0,fDe as d1,pDe as d2,mDe as d3,V0 as d4,ms as d5,nle as d6,C2 as d7,Dv as d8,Ev as d9,Hw as dA,G3 as dB,LN as dC,aDe as dD,LDe as dE,DDe as dF,cMe as dG,r6 as dH,Eh as dI,pa as dJ,QO as dK,te as dL,xN as dM,_q as dN,ege as dO,Xye as dP,$n as dQ,BDe as dR,qDe as dS,u7 as dT,g9 as dU,Bf as dV,Yr as dW,pn as dX,Xd as dY,me as dZ,dEe as d_,yDe as da,Qg as db,Mh as dc,__e as dd,oP as de,R9 as df,Gf as dg,D0 as dh,d0 as di,Uy as dj,dc as dk,hc as dl,_l as dm,dC as dn,bt as dp,cC as dq,pC as dr,dS as ds,yde as dt,Exe as du,n7 as dv,q9 as dw,gq as dx,P0 as dy,$t as dz,j as e,C4e as e$,aje as e0,Hv as e1,oje as e2,Md as e3,XDe as e4,YDe as e5,pB as e6,kpe as e7,dm as e8,Ete as e9,_je as eA,la as eB,dne as eC,wje as eD,CDe as eE,NDe as eF,I4e as eG,KB as eH,YCe as eI,n4e as eJ,en as eK,qi as eL,Jle as eM,eZ as eN,Fz as eO,Dz as eP,aye as eQ,vDe as eR,tU as eS,lDe as eT,sDe as eU,Wne as eV,Xne as eW,N2 as eX,H5e as eY,vce as eZ,t7 as e_,Z_e as ea,XH as eb,dbe as ec,cP as ed,_5e as ee,g$ as ef,JH as eg,j0 as eh,I5e as ei,SS as ej,P5e as ek,Yd as el,dh as em,zO as en,B5e as eo,rm as ep,B_e as eq,U5e as er,cne as es,Z4e as et,s_e as eu,dn as ev,cwe as ew,dwe as ex,x1e as ey,qae as ez,O as f,m4e as f$,v4e as f0,zq as f1,Rq as f2,x5e as f3,uTe as f4,Kz as f5,x7 as f6,WM as f7,C5e as f8,k5e as f9,iN as fA,q5e as fB,ym as fC,gm as fD,Xxe as fE,lEe as fF,Ice as fG,Yf as fH,Qn as fI,$e as fJ,voe as fK,_oe as fL,Toe as fM,Loe as fN,N7 as fO,R7 as fP,F7 as fQ,koe as fR,Foe as fS,Noe as fT,yoe as fU,zu as fV,F5e as fW,UO as fX,GH as fY,Age as fZ,kge as f_,Kb as fa,Xb as fb,X5e as fc,coe as fd,Zse as fe,Hg as ff,M7 as fg,Z5e as fh,woe as fi,D7 as fj,Ace as fk,Cce as fl,Mce as fm,xce as fn,eoe as fo,UDe as fp,ZDe as fq,bG as fr,Av as fs,nde as ft,loe as fu,ide as fv,Ise as fw,jxe as fx,zxe as fy,toe as fz,Y5e as g,y5e as g$,E4e as g0,Eq as g1,Oge as g2,r4e as g3,i4e as g4,MDe as g5,gl as g6,$f as g7,oJ as g8,Zye as g9,$4e as gA,l$ as gB,L5e as gC,roe as gD,ct as gE,kf as gF,Tme as gG,Bu as gH,_P as gI,I7 as gJ,xje as gK,Yse as gL,Wse as gM,C7 as gN,y$ as gO,Nm as gP,Pce as gQ,eDe as gR,Fb as gS,lxe as gT,kse as gU,Jwe as gV,Tte as gW,m5e as gX,Zie as gY,R0 as gZ,u3 as g_,bje as ga,w4e as gb,F3 as gc,_De as gd,bDe as ge,wDe as gf,Woe as gg,CG as gh,Nv as gi,rDe as gj,Ug as gk,Cge as gl,$ge as gm,K5 as gn,Tq as go,T4e as gp,zue as gq,Y4e as gr,hre as gs,nE as gt,sE as gu,wte as gv,ht as gw,f4e as gx,$5e as gy,fTe as gz,g5e as h,An as h$,C3 as h0,$i as h1,ADe as h2,jDe as h3,VDe as h4,Et as h5,Kt as h6,x as h7,is as h8,vC as h9,h4e as hA,bi as hB,Si as hC,Br as hD,fa as hE,M_ as hF,sv as hG,XA as hH,NS as hI,Ft as hJ,H1e as hK,rc as hL,ni as hM,q1e as hN,Ss as hO,V1e as hP,F1e as hQ,R1e as hR,_h as hS,Cn as hT,ZW as hU,xl as hV,b0e as hW,C1e as hX,O1e as hY,Ce as hZ,JW as h_,TS as ha,jz as hb,_f as hc,V5e as hd,fs as he,P2 as hf,hm as hg,no as hh,W5e as hi,t4e as hj,KDe as hk,e4e as hl,QDe as hm,oQ as hn,Bke as ho,fr as hp,_ye as hq,ev as hr,vL as hs,sje as ht,Zv as hu,bye as hv,Kp as hw,pye as hx,o4e as hy,dye as hz,Lte as i,ki as i$,W1e as i0,z1e as i1,VM as i2,kh as i3,E3 as i4,J1e as i5,Z1e as i6,Y1e as i7,QA as i8,K1e as i9,mne as iA,Sfe as iB,bq as iC,TC as iD,tk as iE,JC as iF,q1 as iG,eo as iH,Vge as iI,Nn as iJ,N_e as iK,sn as iL,Lge as iM,w3 as iN,T5e as iO,SJ as iP,J5e as iQ,BH as iR,sJ as iS,nJ as iT,X4e as iU,h4 as iV,_J as iW,ibe as iX,LH as iY,v$ as iZ,wJ as i_,Q1e as ia,X1e as ib,nv as ic,E1e as id,B1e as ie,U1e as ig,N1e as ih,lwe as ii,swe as ij,nwe as ik,z4e as il,owe as im,awe as io,D1e as ip,j1e as iq,G1e as ir,rwe as is,VA as it,B4e as iu,L1e as iv,k1e as iw,A1e as ix,P1e as iy,D5e as iz,_M as j,PN as j$,Lie as j0,kU as j1,cpe as j2,z_e as j3,U9 as j4,eje as j5,YH as j6,QH as j7,q_e as j8,hP as j9,eH as jA,nH as jB,Dye as jC,Cwe as jD,jye as jE,dH as jF,vH as jG,VS as jH,lP as jI,R5e as jJ,XW as jK,zS as jL,W_e as jM,HDe as jN,$v as jO,$9 as jP,x2 as jQ,Cv as jR,q0 as jS,Vu as jT,On as jU,aue as jV,R2 as jW,zDe as jX,dt as jY,O5e as jZ,_te as j_,H_e as ja,J_e as jb,W3 as jc,gh as jd,XCe as je,Rae as jf,Aae as jg,lae as jh,dN as ji,li as jj,F0 as jk,ZH as jl,hn as jm,Lv as jn,rn as jo,ha as jp,X as jq,a0 as jr,SM as js,iE as jt,Gre as ju,as as jv,aJ as jw,qH as jx,Hbe as jy,Fm as jz,th as k,RDe as k$,B3 as k0,ODe as k1,kDe as k2,xe as k3,gje as k4,YO as k5,aa as k6,fp as k7,qbe as k8,Wv as k9,fm as kA,sG as kB,Q4e as kC,pm as kD,co as kE,c3 as kF,N5e as kG,UU as kH,nbe as kI,K4e as kJ,$ie as kK,FF as kL,$ as kM,GDe as kN,J4e as kO,H4e as kP,mP as kQ,uDe as kR,wl as kS,sa as kT,uJ as kU,j3 as kV,QY as kW,Ite as kX,gne as kY,K5e as kZ,PDe as k_,qv as ka,yP as kb,vje as kc,Ab as kd,lj as ke,xm as kf,WH as kg,tJ as kh,tS as ki,P3 as kj,vJ as kk,yL as kl,w$ as km,HH as kn,lA as ko,na as kp,ra as kq,EU as kr,Q9 as ks,v5e as kt,OH as ku,ic as kv,k4 as kw,N0 as kx,abe as ky,obe as kz,A5e as l,sde as l0,Lse as l1,K2 as l2,Sl as l3,Cse as l4,FDe as l5,T7 as l6,j5e as l7,Rce as l8,V4e as l9,One as lA,y4e as lB,g4e as lC,q4e as lD,nje as lE,Sje as lF,qD as la,O4e as lb,BD as lc,twe as ld,j4e as le,G4e as lf,Iq as lg,U4e as lh,P4e as li,A4e as lj,R4e as lk,F4e as ll,D4e as lm,I1e as ln,HD as lo,N4e as lp,ewe as lq,f$ as lr,QW as ls,KW as lt,pje as lu,JDe as lv,a3 as lw,S7 as lx,z5e as ly,tDe as lz,Ot as m,mje as n,tr as o,ui as p,yt as q,I as r,Z as s,R as t,UZ as u,vs as v,Ve as w,Rr as x,xt as y,NZ as z};
